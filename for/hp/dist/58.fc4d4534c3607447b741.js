(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[58],{1495:function(e,t,r){"use strict";r.d(t,{s:function(){return i},C:function(){return a}});r(353);var n=r(601),o=r(651);function i(){try{var e=document.getElementById("__RM_PROPS__");return null!=e&&e.textContent?JSON.parse(e.innerText):{}}catch(e){return{}}}function a(e){var t=document.getElementById("root");n.hydrate((0,o.jsx)(e,i()),t)}},1554:function(e,t,r){"use strict";r.r(t),r.d(t,{ScreenshoterRouter:function(){return T},startScreenshoter:function(){return k}});var n=r(353),o=r(690),i=r(1498),a=r(1477),u=r(322),s=r(308),d=n.createContext({}),c=r(1432),l=r(339),f=r(350),p=r(1437),v=r(1354),m=r(348),g=r(1434),w=r(312),h=r(1267),y=r(323),b=r(651);function _(e,t,r,n,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){_(i,n,o,a,u,"next",e)}function u(e){_(i,n,o,a,u,"throw",e)}a(void 0)}))}}function x(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e){var t=e.pageId,r=e.ready,o=(0,n.useContext)(d),i=o.project,a=o.isPdf,_=o.isTemplate;return(0,n.useEffect)((function(){if(i){y.Z.setPageClass(),a&&(Modernizr.retina=!0);var e=window.ServerData.mag;(e=u.default.defaults(e,c.Z.prototype)).model=new m.w(e,{parse:!0});var n=j(location.search.match(/viewport=(\w+)/)||[],2)[1]||e.getMagViewport();e.viewport=n;var o={navigate:function(){},setUrlString:function(){},setTitle:function(){},getMagUri:function(){return u.default.isEmpty(e.user)?e.num_id+"/":e.user.uri+"/"+(e.uri||e.num_id)+"/"},go:function(){},sendReadyEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u.default.defaults(e,{page:{}});if(window.loadNotifier){var r,o,i,a;if(t.error)return window.loadNotifier({error:t.error});window.loadNotifier({width:null===(r=t.page)||void 0===r?void 0:r.width,height:(null===(o=t.page)||void 0===o||null===(i=o["viewport_".concat(n)])||void 0===i?void 0:i.height)||(null===(a=t.page)||void 0===a?void 0:a.height)})}}};e.hasNewTextWidgets()&&(0,v.IB)("screenshoter"),e.setViewerOptions(n),e.viewOpts.scalableviewer=!0,e.opts.scalableviewer=!0,e.router=o,e.router.mag=e,Modernizr.addTest("screenshot-mode",(function(){return!0})),Modernizr.addTest("screenshot-pdf-mode",(function(){return!!a})),a||f.Z.setShortList(f.Z.getVeryShortList(e.edit_params&&e.edit_params.fonts)),window.RM.screenshot=t,window.RM.screenshotMode=r?"published":"preview",document.title=t;var d=u.default.findWhere(e.pages,{_id:t});if(!d)return;if(e.hasSummary&&r){var b=[].concat(x(e.globalWidgets||[]),x(e.aboveAllWidgets||[]));d.widgetsData=[].concat(x(d.widgetsData||[]),x(b)),d.wids=[].concat(x(d.wids),x(b.map((function(e){return e._id})).filter((function(e){return!d.wids.includes(e)}))))}else if(_)d.wids=u.default.filter(d.wids,(function(e){return!e.is_global}));else{var O=(0,u.default)(e.pages).chain().map((function(e){return e.wids})).flatten().filter((function(e){return!(!e.is_global||e.pid===d._id)})).map((function(e){return e.is_above=!1,e})).value();d.wids=d.wids.concat(O)}e.$pages_container=(0,w.ZP)("#mags"),(0,p.preloadWidgets)(l.default.usedWidgets([d])).then(S(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new g.Z({mag:e,router:e.router,pageData:d,$container:e.$pages_container}),e.eCommerceManager=new h.ZP(e.router,e,s.Z.environment.viewer,r),t.next=4,r.render().show();case 4:r.loadForScreenshotMode(),f.Z.generateCSS("paragraph","viewer",document,e.edit_params&&e.edit_params.paragraph_styles),f.Z.generateCSS("link","viewer",document,e.edit_params&&e.edit_params.link_styles),n=f.Z.getUsedFontsFromWidgetsModels({includeCustom:!0,customList:u.default.filter(e.edit_params&&e.edit_params.fonts,(function(e){return"custom"===e.provider})),models:r.widgets}),f.Z.appendFontsCssToDocument({version:"edit",fonts:n});case 9:case"end":return t.stop()}}),t)}))))}}),[]),(0,b.jsx)("div",null)},I=function(){var e=(0,a.UO)(),t=e.pageId,r=e.ready;return(0,b.jsx)(Z,{pageId:t,ready:!!r})},M=r(1503),A=r(1495);function P(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var T=function(e){var t=e.location,r=e.ssr,n=P(e,["location","ssr"]);return(0,b.jsx)(d.Provider,{value:n},(0,b.jsx)(o.Z,null,(0,b.jsx)(M.Z,null),(0,b.jsx)((function(e){var n=e.children;return r?(0,b.jsx)(a.gx,{location:t},n):(0,b.jsx)(i.VK,null,n)}),null,(0,b.jsx)(a.rs,null,(0,b.jsx)(a.AW,{path:["/_singlepage:ready(/ready|)/:mag/:pageId"]},(0,b.jsx)(I,null))))))},k=function(){(0,A.C)(T)}}}]);