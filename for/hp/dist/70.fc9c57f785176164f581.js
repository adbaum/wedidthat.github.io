(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[70],{1470:function(e,t,n){"use strict";n.d(t,{s:function(){return i},C:function(){return a}});n(353);var r=n(601),o=n(651);function i(){try{var e=document.getElementById("__RM_PROPS__");return null!=e&&e.textContent?JSON.parse(e.innerText):{}}catch(e){return{}}}function a(e){var t=document.getElementById("root");r.hydrate((0,o.jsx)(e,i()),t)}},1468:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F},getForbiddenForPage:function(){return _}});var r,o=n(353),i=n(601),a=n(684),s=n(1031),u=n(1025),l=n.n(u),c=n(1257),d=n(640),f=n(1472),p=n(661),g=n(1469),m=n(1471),h=n(1473),w=n(1011),x=n.n(w),v=n(677),y=n(689),j=n(1022),b=n(308),S=function(e){if("undefined"!=typeof window){if(window.RM.common.customDomainProfile)return"/";if(window.RM.common.isDomainViewer)return"".concat(b.Z.readymag_host,"/").concat(e.uri)}return"/".concat(e.uri)},P=n(1470),k=n(699),D=n(651);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O,Z,A=a.Box.withComponent((0,p.styled)("form")(r||(O=["\n  max-width: 418px;\n  flex-grow: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"],Z||(Z=O.slice(0)),r=Object.freeze(Object.defineProperties(O,{raw:{value:Object.freeze(Z)}})))),{target:"e1nr0ufd0"});A.defaultProps={blacklist:["width"]};var L=function(e){var t,n,r,i=e.type,u=void 0===i?"project":i,p="page"===u,P=R((0,o.useState)(""),2),k=P[0],B=P[1],O=R((0,o.useState)(!1),2),Z=O[0],L=O[1],_=R((0,o.useState)(!0),2),F=_[0],U=_[1],M=(0,o.useContext)(g.Z),T=M.publicPath,E=M.project,z=(null==E?void 0:E.pass_bg)||"".concat(T,"/img/viewer/mag-password/bg.jpg"),N=(0,m.Y)(z),V=(0,o.useRef)(null),W=null==E?void 0:E.user,q=!("project"!==u||null!=E&&null!==(t=E.user)&&void 0!==t&&t.permissions&&!1!==(null==E||null===(n=E.user)||void 0===n||null===(r=n.permissions)||void 0===r?void 0:r.white_label));(0,o.useEffect)((function(){var e;"project"===u&&(null===(e=V.current)||void 0===e||e.focus())}),[u]);var K=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!E){e.next=8;break}return e.next=4,(0,d.eq)(k,null==E?void 0:E.num_id);case 4:p&&U(!1),window.location.reload(),e.next=9;break;case 8:L(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),L(!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){I(i,r,o,a,s,"next",e)}function s(e){I(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,D.jsx)(a.Box,{height:"100vh",width:"100vw",backgroundColor:"#000",position:p?"absolute":void 0,opacity:p?F?1:0:1,transition:".4s ease opacity"},(0,D.jsx)(a.Box,{width:"100%",height:"100%",opacity:N?1:0,transition:".4s ease opacity"},(0,D.jsx)(a.Cover,{position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundImage:"url('".concat(z,"')"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",zIndex:0}),(0,D.jsx)(a.Box,{display:"flex",width:"100%",height:"100%",alignItems:"center",flexDirection:"column",position:"relative",zIndex:1},q&&W&&(0,D.jsx)(a.Box,{width:"100%",paddingLeft:"8rm",paddingTop:"8rm",display:"flex",alignItems:"center",justifyContent:"flex-start"},(0,D.jsx)(a.Box,{paddingRight:12},(0,D.jsx)(w.StyledLink,{href:S(W)},(0,D.jsx)(j.ResponsiveAvatar,{url:W.pic,name:W.name,size:"medium"}))),(0,D.jsx)(a.Box,null,(0,D.jsx)(x(),{as:"div",fontSize:14,lineHeight:"18px",color:(0,v.transparentize)(.5,y.colors.white)},"Published by"),(0,D.jsx)(x(),{as:"div",fontSize:20,lineHeight:"24px",color:"white"},W.name))),(0,D.jsx)(A,{onSubmit:function(e){e.preventDefault(),K()},width:["90%","100%"]},(0,D.jsx)(f.Z,{state:Z,onDone:function(){return L(!1)},style:{width:"100%"}},(0,D.jsx)(a.Box,C({display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",borderRadius:25,height:50,width:"100%"},c.default.fixRadiusClip()),(0,D.jsx)(a.Box,{height:"100%",width:"100%",padding:"0 6px 0 25px"},(0,D.jsx)(s.default,{"data-testid":"forbidden-page-password-input",ref:V,type:"password",value:k,onChange:function(e){return B(e.target.value)},border:"none",padding:0,height:"100%",placeholder:"Enter password",fontSize:20})),(0,D.jsx)(a.Box,{height:"100%"},(0,D.jsx)(l(),{borderRadius:"0 25px 25px 0",width:110,height:"100%",color:"white",background:k.length?"#0078ff":"#999",disabled:!k,onClick:K,variant:"clean",fontSize:20,"data-testid":"forbidden-page-open-button"},"Open"))))),q&&(0,D.jsx)(a.Box,{width:"100%",paddingLeft:"8rm",paddingBottom:"8rm"},(0,D.jsx)(x(),{as:"div",color:(0,v.transparentize)(.7,y.colors.white),fontSize:11,lineHeight:"14px"},"Made with"),(0,D.jsx)(w.StyledLink,{href:"https://".concat(b.Z.readymag_host)},(0,D.jsx)(h.Z,{color:(0,v.transparentize)(.7,y.colors.white),hoverColor:"white",size:18}))))))};function _(e){if(!e)throw new Error("Cannot create forbidden page");var t=(0,P.s)();i.render((0,D.jsx)(k.Z,null,(0,D.jsx)(g.Z.Provider,{value:t},(0,D.jsx)(L,{type:"page"}))),e)}var F=L},1469:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=n(353).createContext({})},1508:function(e,t,n){"use strict";n.r(t),n.d(t,{ViewerRouter:function(){return W},startViewer:function(){return q}});var r=n(353),o=n(699),i=n(1506),a=n(1495),s=n(322),u=n(1102),l=n(640),c=n(308),d=n(1417),f=n(1469),p=n(1393),g=n(339),m=n(1398),h=n(1313),w=n(977),x=n(651);function v(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b,S=function(e){var t=e.pageUri,o=(0,r.useContext)(f.Z),i=o.isDomainViewer,j=o.domainForUser,b=o.project,S=o.isDownloadedSource,P=o.homepageRewrite,k=y((0,r.useState)(null),2),D=k[0],C=k[1],I=(0,a.k6)();return(0,r.useEffect)((function(){if(D&&t){var e=D.getPageByPath(t||"1");e&&D.showPage(e.num)}}),[t]),(0,r.useEffect)((function(){if(b){var e,r;d.ZP.setTiming(d.qK.MagLoaded,Date.now());var o=function(e){var t=e.history,n=e.isDomainForUser,r=e.isDomainViewer,o=e.isDownloadedSource,i=e.isHomepage,a={environment:c.Z.environment.viewer,navigate:function(e,n){n.replace?t.replace(e):t.push(e)},setUrlString:function(){var e,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=l.currentPage;if(e=r&&!n||o?"":a.getMagUri(),c&&1!==c.num&&(e+=(c.pagePath||c.uri||c.num.toString())+"/"),e!==t.location.pathname){var d=(parseInt(s.default.last(t.location.pathname.split("/"))||"",10)||1)===c.num||u.replace;o&&"/"!==s.default.last(e)&&(e+="/"),i||a.navigate("/".concat(e),{replace:d})}},setTitle:function(){if(l&&l.currentPage){var e=u.getFinalSEO(l.currentPage,l,{customDomain:!!r});document.title=e.title}},getMagUri:function(){return n?(l.uri||l.num_id)+"/":r?"":s.default.isEmpty(l.user)?"".concat(l.num_id,"/"):"".concat(l.user.uri,"/").concat(l.uri||l.num_id,"/")},goBack:function(){t.goBack()},go:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;if(t.isPageNum)l.showPage(e,t);else{var n=l.getPageByPath(e)||{};l.showPage(n.num||e,t)}},restartMag:function(){window.location.reload()},onError:function(){l&&a.go(1,{animation:!1})}},l=new p.Z(window.ServerData.mags.mag,a);return l}({history:I,isDomainViewer:i,isDownloadedSource:S,isDomainForUser:j,isHomepage:P});C(o),window.RM.viewerRouter={mag:o,environment:c.Z.environment.viewer,createMagFromTemplate:(x=regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(61).then(n.bind(n,1440));case 2:new(0,e.sent.default)({router:window.RM.viewerRouter,me:window.RM.data.usersLoader.me,tp:t,templateID:r});case 5:case"end":return e.stop()}}),e)})),y=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=x.apply(e,t);function i(e){v(o,n,r,i,a,"next",e)}function a(e){v(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e,t){return y.apply(this,arguments)})},function(e){if(!c.Z.isScreenshot){var t;if(!window.RM.common.isDownloadedSource){var r,o,i=!0===(null===(r=window.RM)||void 0===r||null===(o=r.common)||void 0===o?void 0:o.isDomainViewer);c.Z.isProd&&!i&&n.e(56).then(n.bind(n,1492)).then((function(e){(0,e.getWebVitals)()})),(0,l.G_)(e.num_id)}var a=new w.default;a.setCustomDimensions({magId:e.num_id,magCreatorId:null===(t=e.user)||void 0===t?void 0:t._id,pageType:"viewer",userId:null}),window.RM.analytics=a,window.RM.analytics&&(window.RM.analytics._triggerProjectView=!0)}}(o),o.hasNewTextWidgets()&&(0,h.IB)("viewer");var a=o.getPageByPath(t||"1")||{},f=null===(e=o.model)||void 0===e||null===(r=e.attributes)||void 0===r?void 0:r.usedWidgetTypes;(0,m.preloadWidgets)(null!=f&&f.length?f:g.default.usedWidgets(o.pages||[],o.aboveGlobalWidgetsData)).finally((function(){o.render(),o.showPage(a?a.num:1),d.ZP.setTiming(d.qK.MagRendered,Date.now());var e=o.currentPage.num,t=o.pages.reduce((function(e,t){return e+(t.widgets?t.widgets.length:0)}),0)+o.aboveGlobalWidgets.length;setTimeout((function(){d.ZP.setTiming(d.qK.DomComplete,window.performance.timing.domComplete),d.ZP.sendTimings({projectNumId:o.num_id,userNumId:o.user.num_id,viewport:o.viewport,startPage:e,widgetsCount:t})}),1e4)}))}var x,y}),[]),(0,x.jsx)(r.Fragment,null)},P=function(){var e=(0,a.UO)().pageUri;return(0,x.jsx)(S,{pageUri:e})},k=n(684),D=n(1011),C=n.n(D),I=n(1473),R=function(){return(0,x.jsx)("svg",{version:"1.2",baseProfile:"tiny",xmlns:"http://www.w3.org/2000/svg",opacity:"0.1",width:"100%",height:"100%"},(0,x.jsx)("g",null,(0,x.jsx)("line",{x1:"0",x2:"100%",y1:"0",y2:"100%",stroke:"#ff4828"}),(0,x.jsx)("line",{x1:"100%",x2:"0",y1:"0",y2:"100%",stroke:"#ff4828"})))},B=function(e){var t=e.title,n=e.content,r=e.helpButton,o=e.showLogo,i=e.showCrossLines,a=e.dark,s=o||r;return(0,x.jsx)(k.Box,{display:"flex",alignItems:"center",flexDirection:"column",height:"100vh",width:"100vw",backgroundColor:a?"#000":"#fafafa"},i&&(0,x.jsx)(k.Box,{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:0},(0,x.jsx)(R,null)),(0,x.jsx)(k.Box,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxWidth:460,position:"relative",zIndex:1,flexGrow:1},(0,x.jsx)(k.Box,{backgroundColor:i?"#fafafa":void 0,padding:i?3:void 0},(0,x.jsx)(C(),{as:"h2",textStyle:"subheading",textAlign:"center",color:a?"white":void 0},t),(0,x.jsx)(C(),{as:"div",marginTop:"2rm",textAlign:"center",color:a?"rgba(255,255,255,0.5)":"gray"},n))),s&&(0,x.jsx)(k.Box,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8rm",paddingLeft:"8rm",paddingRight:"8rm",position:"relative",zIndex:1},(0,x.jsx)(k.Box,{width:"100%"}),(0,x.jsx)(k.Box,{width:"100%",textAlign:"center"},o&&(0,x.jsx)(D.StyledLink,{href:"https://".concat(c.Z.readymag_host)},(0,x.jsx)(I.Z,{color:a?"rgba(255, 255, 255, 0.5)":"#000",hoverColor:a?"rgba(255, 255, 255, 1)":"#000",size:20}))),(0,x.jsx)(C(),{as:"div",width:"100%",textAlign:"right"},r)))},O=function(){return(0,x.jsx)(B,{title:"Page not found",content:(0,x.jsx)(r.Fragment,null,"Sorry, there’s nothing here. ",(0,x.jsx)("br",null),"Visit our ",(0,x.jsx)(D.StyledLink,{href:"/"},"front page"),".")})},Z=function(e){var t=e.type;return(0,x.jsx)(B,{title:"Suspended",showCrossLines:!0,content:(0,x.jsx)(r.Fragment,null,"Sorry, this ",t," has been suspended due to violation of Readymag’s"," ",(0,x.jsx)(D.StyledLink,{href:"https://readymag.com/readymag/terms-and-privacy"},"content guidelines"),"."),helpButton:(0,x.jsx)(D.StyledLink,{href:"mailto:".concat(c.Z.SUPPORT_MAIL)},"Contact us")})},A=function(){return(0,x.jsx)(B,{title:"The website is almost ready",content:(0,x.jsx)(r.Fragment,null,"Connect a domain to this project to complete setup.",(0,x.jsx)("br",null),"If you got here by accident, take a peek at other spellbinding"," ",(0,x.jsx)(D.StyledLink,{href:"https://readymag.com/examples"},"web projects")," made with Readymag."),helpButton:(0,x.jsx)(D.StyledLink,{color:"rgba(255,255,255,0.5)",href:"https://help.readymag.com/hc/en-us/articles/4403970232091-Mapping-a-domain"},"Need help?"),showLogo:!0,dark:!0})},L=function(){return(0,x.jsx)(B,{title:"Website is Offline",content:"This project has been unpublished",showLogo:!0,dark:!0})},_=function(){return(0,x.jsx)(B,{title:"Zoinks! This page is down",content:(0,x.jsx)(r.Fragment,null,"Please, check your payment"," ",(0,x.jsx)(D.StyledLink,{href:"".concat(c.Z.readymag_auth_host,"/settings/")},"settings")," if this page is yours.",(0,x.jsx)("br",null),"While you’re here, why not explore other inspiring"," ",(0,x.jsx)(D.StyledLink,{href:"https://readymag.com/examples"},"web projects")," made with Readymag?"),showLogo:!0,dark:!0})},F=n(1468);!function(e){e.ProjectNotFound="ProjectNotFound",e.ProjectNotPublished="ProjectNotPublished",e.DomainNotFound="DomainNotFound",e.SubscriptionExpired="SubscriptionExpired",e.Forbidden="Forbidden",e.ProjectSuspended="ProjectSuspended",e.UserSuspended="UserSuspended"}(b||(b={}));var U=function(e){switch(e.type){case b.ProjectNotFound:return(0,x.jsx)(O,null);case b.DomainNotFound:return(0,x.jsx)(A,null);case b.ProjectSuspended:return(0,x.jsx)(Z,{type:"project"});case b.UserSuspended:return(0,x.jsx)(Z,{type:"account"});case b.ProjectNotPublished:return(0,x.jsx)(L,null);case b.SubscriptionExpired:return(0,x.jsx)(_,null);case b.Forbidden:return(0,x.jsx)(F.default,null);default:return(0,x.jsx)(O,null)}},M=n(1507),T=n(1470);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var V=function(e){var t=e.ssr,n=e.location,r=e.children;return t?(0,x.jsx)(a.gx,{location:n},r):(0,x.jsx)(i.VK,null,r)},W=function(e){var t=e.location,n=e.ssr,i=N(e,["location","ssr"]),s=E((0,r.useState)([]),2),u=s[0],l=s[1];(0,r.useEffect)((function(){var e=function(e){var t=[];if(e.isDomainViewer?e.isDomainForUser?t.push("/:mag/:pageUri*"):t.push("/:pageUri*"):(t.push("/:user/:project/num/:pageNum"),t.push("/:user/:project/:pageUri*")),e.isDownloadedSource&&(t.push("/:pageUri*"),/msie [6-9]/i.test(navigator.userAgent)&&"undefined"!=typeof window))throw window.location.href="sorry.html",new Error("Readymag does not support IE");return t}({isDomainViewer:i.isDomainViewer,isDomainForUser:i.domainForUser,isDownloadedSource:i.isDownloadedSource});l(e),d.ZP.setTiming(d.qK.DomLoaded,window.performance.timing.domLoading),d.ZP.setTiming(d.qK.ScriptsLoaded,window.performance.timing.domContentLoadedEventEnd),d.ZP.setTiming(d.qK.RouterInit,Date.now())}),[]);var c=i.errorPage?(0,x.jsx)(U,{type:i.errorPage}):(0,x.jsx)(V,{ssr:n,location:t},(0,x.jsx)(a.rs,null,(0,x.jsx)(a.AW,{path:u},(0,x.jsx)(P,null))));return(0,x.jsx)(f.Z.Provider,{value:i},(0,x.jsx)(o.Z,null,(0,x.jsx)(M.Z,null),c))};function q(){(0,T.C)(W)}}}]);