(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[26],{1257:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={fixRadiusClip:function(){return{maskImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC)"}}};t.default=n},1470:function(e,t,n){"use strict";n.d(t,{s:function(){return i},C:function(){return a}});n(353);var r=n(601);if(0!=n.j)var o=n(651);function i(){try{var e=document.getElementById("__RM_PROPS__");return null!=e&&e.textContent?JSON.parse(e.innerText):{}}catch(e){return{}}}function a(e){var t=document.getElementById("root");r.hydrate((0,o.jsx)(e,i()),t)}},1468:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F},getForbiddenForPage:function(){return E}});var r,o=n(353),i=n(601),a=n(683),u=n(1031),s=n(1025),c=n.n(s),l=n(1257),d=n(640),f=n(1472),p=n(661),h=n(1469),g=n(1471),x=n(1473),v=n(1011),m=n.n(v),w=n(676),b=n(688),y=n(1022),j=n(308),A=function(e){if("undefined"!=typeof window){if(window.RM.common.customDomainProfile)return"/";if(window.RM.common.isDomainViewer)return"".concat(j.Z.readymag_host,"/").concat(e.uri)}return"/".concat(e.uri)},C=n(1470),S=n(698),k=n(651);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O,_,I=a.Box.withComponent((0,p.styled)("form")(r||(O=["\n  max-width: 418px;\n  flex-grow: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"],_||(_=O.slice(0)),r=Object.freeze(Object.defineProperties(O,{raw:{value:Object.freeze(_)}})))),{target:"e1nr0ufd0"});I.defaultProps={blacklist:["width"]};var Z=function(e){var t,n,r,i=e.type,s=void 0===i?"project":i,p="page"===s,C=P((0,o.useState)(""),2),S=C[0],z=C[1],O=P((0,o.useState)(!1),2),_=O[0],Z=O[1],E=P((0,o.useState)(!0),2),F=E[0],M=E[1],D=(0,o.useContext)(h.Z),G=D.publicPath,J=D.project,T=(null==J?void 0:J.pass_bg)||"".concat(G,"/img/viewer/mag-password/bg.jpg"),H=(0,g.Y)(T),L=(0,o.useRef)(null),U=null==J?void 0:J.user,N=!("project"!==s||null!=J&&null!==(t=J.user)&&void 0!==t&&t.permissions&&!1!==(null==J||null===(n=J.user)||void 0===n||null===(r=n.permissions)||void 0===r?void 0:r.white_label));(0,o.useEffect)((function(){var e;"project"===s&&(null===(e=L.current)||void 0===e||e.focus())}),[s]);var Q=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!J){e.next=8;break}return e.next=4,(0,d.eq)(S,null==J?void 0:J.num_id);case 4:p&&M(!1),window.location.reload(),e.next=9;break;case 8:Z(!0);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Z(!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){R(i,r,o,a,u,"next",e)}function u(e){R(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,k.jsx)(a.Box,{height:"100vh",width:"100vw",backgroundColor:"#000",position:p?"absolute":void 0,opacity:p?F?1:0:1,transition:".4s ease opacity"},(0,k.jsx)(a.Box,{width:"100%",height:"100%",opacity:H?1:0,transition:".4s ease opacity"},(0,k.jsx)(a.Cover,{position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundImage:"url('".concat(T,"')"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",zIndex:0}),(0,k.jsx)(a.Box,{display:"flex",width:"100%",height:"100%",alignItems:"center",flexDirection:"column",position:"relative",zIndex:1},N&&U&&(0,k.jsx)(a.Box,{width:"100%",paddingLeft:"8rm",paddingTop:"8rm",display:"flex",alignItems:"center",justifyContent:"flex-start"},(0,k.jsx)(a.Box,{paddingRight:12},(0,k.jsx)(v.StyledLink,{href:A(U)},(0,k.jsx)(y.ResponsiveAvatar,{url:U.pic,name:U.name,size:"medium"}))),(0,k.jsx)(a.Box,null,(0,k.jsx)(m(),{as:"div",fontSize:14,lineHeight:"18px",color:(0,w.transparentize)(.5,b.colors.white)},"Published by"),(0,k.jsx)(m(),{as:"div",fontSize:20,lineHeight:"24px",color:"white"},U.name))),(0,k.jsx)(I,{onSubmit:function(e){e.preventDefault(),Q()},width:["90%","100%"]},(0,k.jsx)(f.Z,{state:_,onDone:function(){return Z(!1)},style:{width:"100%"}},(0,k.jsx)(a.Box,B({display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",borderRadius:25,height:50,width:"100%"},l.default.fixRadiusClip()),(0,k.jsx)(a.Box,{height:"100%",width:"100%",padding:"0 6px 0 25px"},(0,k.jsx)(u.default,{"data-testid":"forbidden-page-password-input",ref:L,type:"password",value:S,onChange:function(e){return z(e.target.value)},border:"none",padding:0,height:"100%",placeholder:"Enter password",fontSize:20})),(0,k.jsx)(a.Box,{height:"100%"},(0,k.jsx)(c(),{borderRadius:"0 25px 25px 0",width:110,height:"100%",color:"white",background:S.length?"#0078ff":"#999",disabled:!S,onClick:Q,variant:"clean",fontSize:20,"data-testid":"forbidden-page-open-button"},"Open"))))),N&&(0,k.jsx)(a.Box,{width:"100%",paddingLeft:"8rm",paddingBottom:"8rm"},(0,k.jsx)(m(),{as:"div",color:(0,w.transparentize)(.7,b.colors.white),fontSize:11,lineHeight:"14px"},"Made with"),(0,k.jsx)(v.StyledLink,{href:"https://".concat(j.Z.readymag_host)},(0,k.jsx)(x.Z,{color:(0,w.transparentize)(.7,b.colors.white),hoverColor:"white",size:18}))))))};function E(e){if(!e)throw new Error("Cannot create forbidden page");var t=(0,C.s)();i.render((0,k.jsx)(S.Z,null,(0,k.jsx)(h.Z.Provider,{value:t},(0,k.jsx)(Z,{type:"page"}))),e)}var F=Z},1469:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=n(353).createContext({})}}]);