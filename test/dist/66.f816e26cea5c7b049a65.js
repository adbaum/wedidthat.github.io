/*! For license information please see 66.f816e26cea5c7b049a65.js.LICENSE.txt */
(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[66],{1399:function(t,e,i){var n={"./":[1338,42,22,40,36,33,41,38,44,29],"./add-to-cart":[1339,33],"./add-to-cart.js":[1339,33],"./audio":[1343,31],"./audio.ts":[1343,31],"./background":[1345],"./background.js":[1345],"./button":[1350],"./button.js":[1350],"./e-commerce-cart":[1352,34],"./e-commerce-cart.js":[1352,34],"./facebook":[1354,35],"./facebook.js":[1354,35],"./form":[1356,36],"./form.js":[1356,36],"./gmaps":[1359,37],"./gmaps.js":[1359,37],"./hotspot":[1360,38,39],"./hotspot.js":[1360,38,39],"./iframe":[1367,42,41],"./iframe.js":[1367,42,41],"./index":[1338,42,22,40,36,33,41,38,44,29],"./index.js":[1338,42,22,40,36,33,41,38,44,29],"./loader":[1398],"./loader.ts":[1398],"./picture":[1358],"./picture.js":[1358],"./rm-footer":[1384,45],"./rm-footer.js":[1384,45],"./rm-header":[1377,44,23],"./rm-header.js":[1377,44,23],"./shape":[1371],"./shape.js":[1371],"./shots":[1386,30],"./shots.tsx":[1386,30],"./slideshow":[1372,40],"./slideshow.js":[1372,40],"./text":[1374],"./text-v2":[1364],"./text-v2.js":[1364],"./text-v3":[1365],"./text-v3.tsx":[1365],"./text.ts":[1374],"./twitter":[1375,43],"./twitter.js":[1375,43],"./video":[1348],"./video.js":[1348]};function r(t){if(!i.o(n,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],r=e[0];return Promise.all(e.slice(1).map(i.e)).then((function(){return i(r)}))}r.keys=function(){return Object.keys(n)},r.id=1399,t.exports=r},702:function(t,e,i){"use strict";i.d(e,{wF:function(){return r},Nc:function(){return o},fh:function(){return s}});var n=i(352),r="textIndent",o=function(t){var e=t.editorState,i=t.block,o=n.ZP.getBlockData({editorState:e,block:i,key:r});return"number"==typeof o?o:void 0},a=function(t){var e=t.editorState,i=t.value,o=t.block;return n.ZP.setBlockData({editorState:e,block:o,key:r,value:i})},s=function(t){var e=t.editorState,i=t.method,n=o({editorState:e})||0,r=e.getSelection().toJS(),s=r.focusOffset,c=0===r.anchorOffset&&0===s;return"increase"===i&&c?a({editorState:e,value:n+28}):"decrease"===i&&c&&n>0?a({editorState:e,value:Math.max(0,n+-28)}):void 0}},679:function(t,e,i){"use strict";i.d(e,{fB:function(){return l},PP:function(){return d},z3:function(){return u},vk:function(){return h},vW:function(){return p}});var n=i(352),r=i(621),o=i(646),a=i(644);function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l="lineHeight",d=function(t){var e=t.editorState,i=t.block,r=n.ZP.getBlockData({editorState:e,block:i,key:l});return"number"==typeof r?r:void 0},u=function(t){var e=t.block,i=t.editorState,r=t.lineHeight;return n.ZP.setBlockData({editorState:i,block:e,key:l,value:r})},h=function(t){var e=d({editorState:t}),i="number"==typeof e&&e,n=(0,o.x6)({editorState:t}),c=(0,a.XZ)()||{project:[],global:[]},l=[].concat(s(c.project),s(c.global)).find((function(t){return t.name===n})),u=!!n&&(0,o.r_)(null==l?void 0:l.cssProperties.lineHeight);return i||u||r.BX.lineHeight},p=function(t){var e=t.editorState,i=t.method,n=h(e);if(!(n<=8))return"increase"===i?u({editorState:e,lineHeight:n+1}):"decrease"===i?u({editorState:e,lineHeight:Math.max(8,n-1)}):void 0}},680:function(t,e,i){"use strict";i.d(e,{gg:function(){return o},Z9:function(){return a},H2:function(){return s},I_:function(){return c}});var n=i(352);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="paddings",a=function(t){var e=t.editorState,i=t.block,a=n.ZP.getBlockData({editorState:e,block:i,key:o});return"object"===r(a)?a:void 0},s=function(t){var e=t.block,i=t.editorState,r=t.paddings;return n.ZP.setBlockData({editorState:i,block:e,key:o,value:r})},c=function(t){var e=t.blockPaddings,i=t.stylePaddings;return{left:!(!i||!e)&&Boolean(i.left&&e.left),top:!(!i||!e)&&Boolean(i.top&&e.top),bottom:!(!i||!e)&&Boolean(i.bottom&&e.bottom),right:!(!i||!e)&&Boolean(i.right&&e.right)}}},973:function(t,e,i){"use strict";i.d(e,{Yv:function(){return r},P9:function(){return o},w7:function(){return a}});var n=i(352),r="sizesLinkedStatus",o=function(t){var e=t.editorState,i=t.block,o=n.ZP.getBlockData({editorState:e,block:i,key:r});return"boolean"==typeof o&&o},a=function(t){var e=t.block,i=t.editorState,o=t.linkedStatus;return n.ZP.setBlockData({editorState:i,block:e,key:r,value:o})}},622:function(t,e,i){"use strict";i.d(e,{Hb:function(){return s},m7:function(){return a},AJ:function(){return c},Wg:function(){return l},Oh:function(){return d}});var n,r=i(352);function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a,s="align";!function(t){t.AlignLeft="align-left",t.AlignCenter="align-center",t.AlignRight="align-right",t.AlignJustify="align-justify"}(a||(a={}));var c=(o(n={},a.AlignLeft,{label:"Left",style:".".concat(a.AlignLeft," { text-align: left !important; }")}),o(n,a.AlignCenter,{label:"Center",style:".".concat(a.AlignCenter," { text-align: center !important; }")}),o(n,a.AlignRight,{label:"Right",style:".".concat(a.AlignRight," { text-align: right !important; }")}),o(n,a.AlignJustify,{label:"Justify",style:".".concat(a.AlignJustify," {\n      text-align: justify !important;\n      ").concat("undefined"!=typeof Modernizr&&(Modernizr.safari||Modernizr.firefox)?"white-space: normal !important;":"","\n    }")}),n),l=function(t){var e=t.editorState,i=t.block,n=r.ZP.getBlockData({editorState:e,block:i,key:"align"});return"string"==typeof n?n:""},d=function(t){var e=t.block,i=t.editorState,n=t.align;return r.ZP.setBlockData({editorState:i,block:e,key:s,value:n})}},1317:function(t,e,i){"use strict";i.d(e,{T:function(){return $},v:function(){return F}});var n,r=i(353),o=i(441),a=i.n(o),s=i(622),c=i(650),l=i(621),d=i(646),u=i(644),h=i(352),p=i(683),f=i(1318),g=i(696),m=i(680),v=i(679),b=i(702),y=i(697),w=i(624),S=i(1094),P=i(661),k=i(651);function C(){return(C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function x(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function O(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?x(Object(i),!0).forEach((function(e){T(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function T(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||I(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||I(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){if(t){if("string"==typeof t)return M(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?M(t,e):void 0}}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function E(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var j=function(t){var e,i,o,a=t.children,s=E(t,["children"]),l=(0,r.useContext)(g.x).model,x=l.isEditMode,T=l.useTextWidgetStore,I=(0,r.useContext)(y.BackboneContext).model,M=null===(e=I.flags)||void 0===e?void 0:e.calculatedLineHeight,j=(0,S.s)("TextCanChangePaddings"),A=Z(T({partial:!1}),2),L=A[0],D=A[1],$=Z((0,u.sJ)(),1)[0],F=(0,r.useMemo)((function(){if(!s["data-offset-key"])return{};var t=s["data-offset-key"].split("-")[0];return{blockKey:t,block:L.getCurrentContent().getBlockForKey(t)}}),[s,L]),R=F.blockKey,B=F.block,z=(0,r.useMemo)((function(){return(0,d.x6)({block:B})}),[B]),W=(0,r.useMemo)((function(){return Boolean(R&&h.ZP.isBlockSelected(L,R))}),[L,R]),V=W?"var(--editor-border-color)":"transparent",U=(0,r.useMemo)((function(){return[].concat(_($.global),_($.project)).find((function(t){return t.name===z}))}),[z,$,L]),N=(0,r.useMemo)((function(){var t=(0,m.Z9)({block:B}),e=U?(0,d.j8)(U):{};return{paddings:O(O({left:0,right:0,top:0,bottom:0},e),t),changedPaddings:(0,m.I_)({blockPaddings:t,stylePaddings:e})}}),[L,B,U,$]),H=N.paddings,G=N.changedPaddings,K=(0,r.useMemo)((function(){return(0,v.PP)({block:B})}),[L,B,$]),q=(0,r.useMemo)((function(){return(0,b.Nc)({block:B})}),[L,B]),Y=(0,r.useMemo)((function(){return M?h.ZP.getBaseLineHeightStyle({block:B,width:I.w}):{}}),[L,B,$]),J=(0,r.useMemo)((function(){if(B&&!(0,c.XZ)({block:B})){var t=(0,w.gn)(h.ZP.getDefaultListTextColor(B)),e=t.r,i=t.g,n=t.b,r=t.a;return"rgba(".concat(e,", ").concat(i,", ").concat(n,", ").concat(r,")")}}),[L,B]),X=!1===j?j:x&&W;return(0,k.jsx)(p.Box,C({},s,{position:"relative",style:O({lineHeight:"number"==typeof K?"".concat(K,"px"):void 0,textIndent:"number"==typeof q?"".concat(q,"px"):void 0},Y),css:(0,P.css)(n||(i=["\n        // Заглушаем паддинги текстового стиля, чтобы отдать управление ими в TextPaddings\n        padding: 0 !important;\n\n        // Хак рамки, чтобы у нескольких элементов подряд не вышло 2px рамки\n        &:after {\n          content: '';\n          pointer-events: none;\n          box-shadow: 1px 0 0 0 ",", 0 1px 0 0 ",", 1px 1px 0 0 ",",\n            1px 0 0 0 "," inset, 0 1px 0 0 "," inset;\n          position: absolute;\n          top: 0;\n          left: -1px;\n          width: calc(100% + 1px);\n          height: calc(100% - 1px);\n        }\n\n        // Дефолтный цвет для списков\n        .editor-block-wrapper:before,\n        div[data-offset-key]:before,\n        & > li:before {\n          ","\n        }\n      "],o||(o=i.slice(0)),n=Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),V,V,V,V,V,J?"color: ".concat(J,";"):"")}),(0,k.jsx)(f.Z,{key:R,editable:X,top:H.top,left:H.left,bottom:H.bottom,right:H.right,changedPaddings:G,onChange:function(t){var e=h.ZP.getSelectedBlocks(L),i=L.getCurrentContent(),n=e.reduce((function(e,n){var r=i.getBlockForKey(n);if(r){var o=(0,m.Z9)({block:r});return(0,m.H2)({editorState:e,block:r,paddings:O(O({},o),t)})}return e}),L);D(n)}},a))};function A(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function L(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?A(Object(i),!0).forEach((function(e){D(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):A(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function D(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $=L(L(L({},s.AJ),c.pb),l.Wo),F=function(){var t=window.RM.constructorRouter&&!window.RM.constructorRouter.preview,e=L(L(L({},(0,d.Ob)()),l.XA),c.g6);return a().Map(Object.keys(e).reduce((function(i,n){var r=e[n].element,o=t?j:r,a=(0,c.nq)(n)?(0,k.jsx)(c.lk,{type:n}):void 0;return L(L({},i),{},D({},n,L(L({},e[n]),{},{element:o,wrapper:a})))}),{}))}},650:function(t,e,i){"use strict";i.d(e,{iC:function(){return p},Hf:function(){return f},rs:function(){return g},dY:function(){return h},g6:function(){return b},pb:function(){return y},lk:function(){return w},iZ:function(){return S},nq:function(){return P},XZ:function(){return k}});i(353);var n,r,o,a=i(661),s=i(352),c=i(651);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function d(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h,p="listStyle",f="ordered-key",g="default-list-style";!function(t){t.Unordered="unordered-list-item",t.Ordered="ordered-list-item"}(h||(h={}));var m,v,b=(u(n={},h.Unordered,{element:"li"}),u(n,h.Ordered,{element:"li"}),n),y=(u(r={},h.Unordered,{label:"Unordered list",style:"\n      .".concat(h.Unordered," {\n        padding: 0;\n        margin: 0;\n        list-style-type: none;\n      }\n\n      .").concat(h.Unordered," div[data-offset-key]:before,\n      .").concat(h.Unordered,' > li:before {\n        white-space: nowrap;\n        content: "•\\00a0";\n      }\n    ')}),u(r,h.Ordered,{label:"Ordered list",style:"\n      .".concat(h.Ordered," {\n        padding: 0;\n        margin: 0;\n        list-style-type: none;\n      }\n\n      .").concat(h.Ordered," div[data-offset-key]:before,\n      .").concat(h.Ordered," > li:before {\n        white-space: nowrap;\n        counter-increment: ").concat(f,";\n        content: counter(").concat(f,')".";\n      }\n    ')}),r),w=function(t){var e=t.children,i=t.type,n=d(t,["children","type"]);return i===h.Ordered?(0,c.jsx)("ol",l({style:{counterReset:f}},n),e):(0,c.jsx)("ul",n,e)},S=(0,a.styled)((function(t){var e=t.children,i=d(t,["children"]);return(0,c.jsx)(w,i,(0,c.jsx)("li",null,e))}))(o||(m=[""],v||(v=m.slice(0)),o=Object.freeze(Object.defineProperties(m,{raw:{value:Object.freeze(v)}})))),P=function(t){return t===h.Ordered||t===h.Unordered},k=function(t){var e=t.editorState,i=t.block,n=s.ZP.getBlockData({editorState:e,block:i,key:p});return"string"==typeof n?n:""}},621:function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{BX:function(){return o},dP:function(){return r},XA:function(){return a},Wo:function(){return s}});var r,o={fontSize:18,lineHeight:26,fontFamily:"Inter",fontWeight:400,fontStyle:"normal",fontWeights:["n1","i1","n3","i3","n4","i4","n5","i5","n7","i7","n9","i9"],textAlign:i(622).m7.AlignLeft};!function(t){t.Unstyled="unstyled"}(r||(r={}));var a=n({},r.Unstyled,{element:"p"}),s=n({},'[data-block="true"], .widget-text-v3 p:not([class]), .widget-text-v3 p[class=""]',{label:"Unstyled",style:""})},701:function(t,e,i){"use strict";i.d(e,{hk:function(){return u},_:function(){return h},KT:function(){return p}});var n=i(699),r=i(646),o=i(622),a=i(680),s=i(679),c=(i(623),i(624),i(694),i(702)),l=i(352);i(621);var d=function(t){var e=document.createElement("div");e.classList.add("block","block-text"),e.style.position="absolute",e.style.left="-9999px",e.style.opacity="0",e.style.visibility="hidden";var i=document.createElement("div");return i.classList.add("text-preview","v2"),i.innerHTML=t,e.append(i),document.body.appendChild(e),e},u=function(t){var e=window.RM.constructorRouter,i=e.mag,r=e.getCurrentPageNum,o=t.attributes,a=t.target,s=t.classList,c=t.dataset,d=o.getNamedItem("href"),u=d&&d.value?d.value.toLowerCase():"",h=c.anchorLinkPos?parseInt(c.anchorLinkPos):0,p=c.pid,f={id:l.ZP.generateRandomKey(),linkStyle:s[0],target:"_blank"===a?"_blank":"_self"};if(u.startsWith("mailto:"))f.url=u.replace("mailto:",""),f.type=n.dr.Email;else if(u.startsWith("tel:"))f.url=u.replace("tel:",""),f.type=n.dr.Phone;else if("__rm_anchor"===u)f.url="".concat(h,"px"),f.pageNum=r()||void 0,f.type=n.dr.Anchor,f.anchorPosition=h;else if("back to top"===u)f.url="",f.type=n.dr.ScrollToTop;else if("__rm_goback"===u)f.url="",f.type=n.dr.GoBack;else if(p||i.getPageId(u)){var g=i.getPageId(u);f.url=""+(p&&i.getPageUri(p)||g||u);var m=p||g;f.pageNum=m&&i.getPageNum(m)||void 0,f.type=n.dr.Page}else f.url=u,f.type=n.dr.URL;return f},h=function(t,e){var i,n={},l=(null==e?void 0:e.ignore)||{};if(!l.textStyles&&null!==(i=t.classList)&&void 0!==i&&i.length){var d=Array.from(t.classList).filter((function(t){return t.startsWith("paragraph")}));n[r.MX]=d[0]}if(!l.textAlign&&t.style.textAlign){var u=t.style.textAlign;n[o.Hb]="right"===u?o.m7.AlignRight:"center"===u?o.m7.AlignCenter:"justify"===u?o.m7.AlignJustify:o.m7.AlignLeft}if(!l.paddings){var h={};t.style.paddingLeft&&(h.left=parseInt(t.style.paddingLeft)),t.style.paddingTop&&(h.top=parseInt(t.style.paddingTop)),t.style.paddingRight&&(h.right=parseInt(t.style.paddingRight)),t.style.paddingBottom&&(h.bottom=parseInt(t.style.paddingBottom)),n[a.gg]=h}return!l.lineHeight&&t.style.lineHeight&&(n[s.fB]=parseInt(t.style.lineHeight)),!l.textIndent&&t.style.textIndent&&(n[c.wF]=parseInt(t.style.textIndent)),n},p=function(t){var e=d(t),i=Array.from(e.querySelectorAll("p"));if(i.length>1){var n=i.map((function(t){return t.innerHTML})).join("<br/>");return"<p>".concat(n,"</p>")}return t}},681:function(t,e,i){"use strict";i.d(e,{b3:function(){return c},qY:function(){return l},Ic:function(){return h}});i(353);var n=i(352),r=i(688),o=i(682),a=i(651);function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}var c="BR_ENTITY",l={strategy:function(t,e,i){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&i.getEntity(e).getType()===c}),e)},component:function(){return(0,a.jsx)("br",null)}},d=String.fromCharCode(10),u='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path\n    d="M-6.10352e-05 5.00002L5.99994 2.21676e-05V4.00001L11 4.00001L11 -1.52588e-05L13 -1.49216e-05V5.99998L5.99994 6.00001V10L-6.10352e-05 5.00002Z"\n    fill="currentColor"\n  />\n</svg>'.replace(/currentColor/g,r.colors.blue),h={strategy:function(t,e){n.ZP.findSubstringIndexes(t,d).forEach((function(t){e(t,t+1)}))},component:function(t){return(0,a.jsx)(o.z,s({size:"0.8em",backgroundSize:"0.6em",backgroundPosition:"bottom",backgroundImage:"url('data:image/svg+xml,".concat(encodeURIComponent(u),"')"),top:"-0.15em",left:"0em"},t))}}},682:function(t,e,i){"use strict";i.d(e,{z:function(){return c}});var n,r=i(683),o=i(661);var a,s,c=r.Box.withComponent((0,o.styled)("span")(n||(a=["\n  &:before {\n    content: '';\n    height: ",";\n    padding-right: ",";\n    margin-right: -",";\n    position: relative;\n    background-repeat: no-repeat;\n  }\n"],s||(s=a.slice(0)),n=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(s)}}))),(function(t){return t.size}),(function(t){return t.size}),(function(t){return t.size})),{target:"e12fom8u0"});c.defaultProps={left:"-0.1em"}},971:function(t,e,i){"use strict";i.d(e,{t:function(){return s}});var n=i(446),r=i(694),o=i(969),a=i(681),s=new n.CompositeDecorator([r.ez,o.eq,o.$X,a.qY,a.Ic])},1321:function(t,e,i){"use strict";i.d(e,{z:function(){return c}});i(353);var n=i(624),r=i(699);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c=function(t){var e=t||{},i=e.type,o=void 0===i?r.BM.None:i,s=e.color,c=void 0===s?"00000064":s,l=e.size,d=void 0===l?1:l,u=e.padding,h=void 0===u?0:u,p=(0,n.gn)(c),f=p.r,g=p.g,m=p.b,v=p.a,b="rgba(".concat(f,", ").concat(g,", ").concat(m,", ").concat(v,")"),y="repeat-x",w=d+h,S=w>0?"0 100%":"0 ".concat(100+w,"%"),P={textDecoration:"none",paddingBottom:Math.max(0,w)};switch(o){case r.BM.Solid:return a(a({},P),{},{background:"linear-gradient(to right, ".concat(b," 0%, ").concat(b," 100%) ").concat(S,"/1px ").concat(d,"px ").concat(y)});case r.BM.Dotted:return a(a({},P),{},{background:"linear-gradient(to right, ".concat(b," 0%, ").concat(b," 50%, transparent 50%, transparent 100%) ").concat(S,"/").concat(2*d,"px ").concat(d,"px ").concat(y)});case r.BM.Dashed:return a(a({},P),{},{background:"linear-gradient(to right, ".concat(b," 0%, ").concat(b," 66.6666%, transparent 66.6666%, transparent 100%) ").concat(S,"/").concat(3*d,"px ").concat(d,"px ").concat(y)});default:return a(a({},P),{},{background:"none"})}}},694:function(t,e,i){"use strict";i.d(e,{kM:function(){return w},TF:function(){return S},rU:function(){return P},ez:function(){return k}});var n=i(353),r=i(695),o=i.n(r),a=(i(446),i(696)),s=i(697),c=i(699),l=i(352),d=i(623),u=i(651);function h(){return(h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function m(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return y(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var w="LINK",S={name:"link-1",label:"Default Link Style",style:{link:{textColor:"0080FF64",color:"0080FF64",type:c.BM.Solid,size:1,padding:0},hover:{textColor:"0080FF64",color:"0080FF64",type:c.BM.None,size:1,padding:0},current:{textColor:"0080FF64",color:"0080FF64",type:c.BM.None,size:1,padding:0}}},P=function(t){var e=(0,n.useContext)(s.BackboneContext).model,i=(0,n.useContext)(a.T).model,r=(0,n.useContext)(a.x).model,p=v(r?r.useTextWidgetStore({partial:!1}):(0,n.useState)(null),1)[0],g=t.mag,b=t.contentState&&t.entityKey?t.contentState.getEntity(t.entityKey).getData():t.data||{},y=b.url,w=b.target,P=void 0===w?"_self":w,k=b.type,C=b.linkStyle,O=b.anchorPosition,T=b.pageNum,_=b.pageUri,Z=b.id,I=b.pageId,M=b.closeTip,E=!!t.insideParentBlock&&("boolean"!=typeof M||M),j=t.contentState&&t.blockKey&&"number"==typeof t.start&&"number"==typeof t.end?function(t){var e=t.contentState,i=t.start,n=t.end,r=t.blockKey,o=e.getBlockForKey(r).getCharacterList().slice(i,n),a={};if(o.size){var s=o.reduce((function(t,e){if(void 0===t)return 0;if(e){var i=e.getStyle().find((function(t){return Boolean(null==t?void 0:t.startsWith(d.f.FontSize))})),n=i&&l.ZP.getCurrentInlineStylesFromString(i,d.f.FontSize),r=null!=n&&n.length?parseInt(n[0]):0;return r>t?r:t}return t}),0);s>0&&(a.fontSize=s)}return a}({contentState:t.contentState,start:t.start,end:t.end,blockKey:t.blockKey}):{},A=function(t){var e=[C||S.name].concat(m("string"==typeof t?[t]:t));if(r&&r.currentLinkStyle&&"link"!==r.currentLinkStyle&&p){var i=x(p);i&&i.id===Z&&e.push(r.currentLinkStyle)}return E&&e.push("close-tip-on-click"),e.join(" ")},L=function(){var t;if(!g||!T&&!_)return"";var e=window.RM.common&&window.RM.common.isDownloadedSource&&!window.RM.common.homepageRewrite&&(null===(t=window.RM.config)||void 0===t?void 0:t.root)||"/";if(I){var i=g.getPageUri(I);return i?"".concat(e).concat(i):"javascript:void(0)"}if(_){var n=g.getPage(_);if(n&&n._id)return"".concat(e).concat(g.getPageUri(n._id))}if(T){var r=g.getPage(T);if(r&&r._id)return"".concat(e).concat(g.getPageUri(r._id))}return"javascript:void(0)"},D=function(){if(window.RM.constructorRouter&&!window.RM.constructorRouter.previewMode)return[];if(!g||!(T||_||I))return[];var n=[],r=t.isGlobal||e&&e.is_global,o=t.isAbove||e&&e.is_above,a=T;if(_){var s=g.getPage(_);s&&s._id&&(a=s.num)}else if(I){var c=g.getPageNum(I);c&&(a=c)}var l=t.currentPageNum?t.currentPageNum===a:i&&i.currentPage&&i.currentPage.num===a,d=t.page?t.page.num===a:i&&i.page&&i.page.num===a;return(o?l:d)&&(n.push("back-to-top"),r&&n.push("current")),n};return(0,u.jsx)("a",h({},function(){switch(k){case c.dr.URL:return{href:l.ZP.fixUrlProtocol(y),target:l.ZP.getClickTarget(P),rel:"noopener noreferrer",className:A("external-link")};case c.dr.Email:return{href:"mailto:".concat(y),className:A("external-link")};case c.dr.Phone:return{href:"tel:".concat(y),className:A("external-link")};case c.dr.Anchor:return{href:"javascript:void(0)",className:A("anchor-link"),"data-anchor-link-pos":O,"data-page-uri":g&&T?T:"","data-page-id":g&&I?I:void 0};case c.dr.ScrollToTop:return{href:"javascript:void(0)",className:A(["maglink","back-to-top"])};case c.dr.GoBack:return{href:"javascript:void(0)",className:A("goback-link")};case c.dr.Page:return{href:L(),target:P,className:A([].concat(m("_blank"===P?[]:["maglink"]),m(D())))};default:return{}}}(),{style:f({pointerEvents:g?void 0:"none"},j),dangerouslySetInnerHTML:"string"==typeof t.children?{__html:o().sanitize(t.children)}:void 0}),"string"!=typeof t.children?t.children:null)},k={strategy:function(t,e,i){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&i.getEntity(e).getType()===w}),e)},component:P},C=function(t){var e=t.getSelection(),i=t.getCurrentContent(),n=e.getStartKey(),r=e.getStartOffset();return i.getBlockForKey(n).getEntityAt(r)},x=function(t){var e=C(t);return e?t.getCurrentContent().getEntity(e).getData()||{}:null}},969:function(t,e,i){"use strict";i.d(e,{Dw:function(){return c},eq:function(){return h},$X:function(){return p}});i(353);var n=i(688),r=i(352),o=i(682),a=i(651);function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}var c=String.fromCharCode(160),l=String.fromCharCode(8239),d='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="5px" height="6px" viewBox="0 0 5 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>no-break-space</title>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Insert-Space" transform="translate(-472.000000, -500.000000)" fill-rule="nonzero" stroke="currentColor">\n            <polyline id="no-break-space" transform="translate(474.333984, 503.483398) rotate(-180.000000) translate(-474.333984, -503.483398) " points="475.96875 500.966797 474.386719 506 474.287109 506 472.699219 500.966797"></polyline>\n        </g>\n    </g>\n</svg>\n'.replace(/currentColor/g,n.colors.blue),u='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="4px" height="4px" viewBox="0 0 4 4" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>narrow no-break-space</title>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Insert-Space" transform="translate(-514.000000, -535.000000)" fill-rule="nonzero" stroke="currentColor">\n            <polyline id="narrow-no-break-space" points="517 535 516.032258 538 515.971326 538 515 535"></polyline>\n        </g>\n    </g>\n</svg>\n'.replace(/currentColor/g,n.colors.blue),h={strategy:function(t,e){r.ZP.findSubstringIndexes(t,c).forEach((function(t){e(t,t+1)}))},component:function(t){return(0,a.jsx)(o.z,s({size:"0.5em",backgroundSize:"0.4em",backgroundPosition:"bottom",backgroundImage:"url('data:image/svg+xml,".concat(encodeURIComponent(d),"')")},t))}},p={strategy:function(t,e){r.ZP.findSubstringIndexes(t,l).forEach((function(t){e(t,t+1)}))},component:function(t){return(0,a.jsx)(o.z,s({size:"0.4em",backgroundSize:"0.4em",backgroundPosition:"top",backgroundImage:"url('data:image/svg+xml,".concat(encodeURIComponent(u),"')")},t))}}},700:function(t,e,i){"use strict";i.d(e,{pL:function(){return P},Ue:function(){return m},U7:function(){return w},ZC:function(){return k},sS:function(){return S}});var n=i(446),r=i(461),o=i.n(r),a=i(512),s=i.n(a),c=i(442),l=i(352),d=i(701),u=i(621),h=i(694),p=i(623),f=i(703),g=i(646),m=(0,c.h4)({htmlToEntity:function(t,e,i){if("a"===t)return i(h.kM,"MUTABLE",(0,d.hk)(e))},htmlToStyle:function(t,e,i){return"b"===t?i.add(l.ZP.getStyleValueString(p.f.FontWeight,"700")):"i"===t?i.add(l.ZP.getStyleValueString(p.f.FontStyle,"italic")):i},htmlToBlock:function(t,e){if("p"===t)return{type:u.dP.Unstyled,data:(0,d._)(e,{ignore:{lineHeight:!0,textStyles:!0}})}}}),v="data-draftjs-conductor-fragment",b='[data-contents="true"] [contenteditable="false"]',y=function(t,e,i){var r,a,c,l=(i||window).getSelection();if(e.clipboardData&&l&&t&&0!==l.rangeCount&&!function(t){var e=t.anchorNode,i=t.focusNode;if(!e||!i)return!1;var n=e instanceof Element?e:e.parentElement,r=i instanceof Element?i:i.parentElement,o=n&&n.closest(b),a=r&&r.closest(b);return o&&a&&(o.contains(a)||a.contains(o))}(l)&&null!==(r=t.current)&&void 0!==r&&r._latestEditorState){var d=function(t,e){var i=s()(t,e).selectionState,n=o()(t.getCurrentContent(),i);return n.every((function(t){return Boolean(t&&0===t.getText().length)}))?null:n}(null===(a=t.current)||void 0===a?void 0:a._latestEditorState,null===(c=t.current)||void 0===c?void 0:c.editor);if(d){var u=n.ContentState.createFromBlockArray(d.toArray()),h=JSON.stringify((0,n.convertToRaw)(u)),p=document.createElement("div");p.appendChild(l.getRangeAt(0).cloneContents()),p.setAttribute(v,h),p.setAttribute("style","white-space: pre-wrap;"),e.clipboardData.setData("text/plain",l.toString()),e.clipboardData.setData("text/html",p.outerHTML),e.preventDefault()}}},w=function(t,e){var i,n=null===(i=t.current)||void 0===i?void 0:i.editor,r=function(i){y(t,i,e)};return n&&n.addEventListener("copy",r),n&&n.addEventListener("cut",r),{unregister:function(){n&&n.removeEventListener("copy",r),n&&n.removeEventListener("cut",r)}}},S=function(t,e){var i=t.current,n=null==i?void 0:i.editor;if(i&&n){var r=!1,o=function(t){r=(0,f.kg)({event:t,keyCode:86,ctrlOrCmd:!0,shift:!0})},a=function(t){var n,o;t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1;var a,s=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain"),c=null===(o=t.clipboardData)||void 0===o?void 0:o.getData("text/html");s&&(null!==(a=i.props)&&void 0!==a&&a.handlePaste&&i.props.handlePaste(s,c,null==i?void 0:i._latestEditorState,!!e.forceCleanText||r))};return e.forceCleanText||n.addEventListener("keydown",o,!0),n.addEventListener("paste",a,!0),{unregister:function(){e.forceCleanText||n.removeEventListener("keydown",o,!0),n.removeEventListener("paste",a,!0)}}}},P=function(t){var e=t.text,i=t.html,r=t.editorState,o=t.pastedWithShift,a=l.ZP.fixSelection(r),s=r.getCurrentContent(),c=l.ZP.getSelectedBlocks(r),u=function(){var t=!o,u=c.some((function(t){var e=s.getBlockForKey(t);return!!(0,g.x6)({editorState:r,block:e})}));if(t&&!u){var h=i?function(t){var e=(new DOMParser).parseFromString(t,"text/html").querySelector("[".concat(v,"]"));if(e){var i=e.getAttribute(v);try{if(i){var r=JSON.parse(i);if(r)return(0,n.convertFromRaw)(r)}}catch(t){return null}}return null}(i):void 0,p=i?m((0,d.KT)(i)):void 0;if(h||p){var f=(null==h?void 0:h.getBlockMap())||(null==p?void 0:p.getBlockMap());if(f){var b=n.Modifier.replaceWithFragment(s,a,f.size>1?l.ZP.mergeBlocksStyles({originStyles:r.getCurrentInlineStyle(),blockMap:f}):f);return n.EditorState.push(r,b,"insert-fragment")}}}return e?l.ZP.insertText({editorState:r,text:e}):r}();if(1===c.length){var p,f=s.getBlockForKey(c[0]),b=f.getEntityAt(a.getStartOffset());if(b&&(null===(p=s.getEntity(b))||void 0===p?void 0:p.getType())===h.kM){var y=0,w=0;f.findEntityRanges((function(t){return t.getEntity()===b}),(function(t,e){y=t,w=e}));var S=(null==e?void 0:e.length)||0,P=a.getStartOffset(),k=a.getEndOffset(),C=Math.abs(k-P),x=a.merge({anchorOffset:y,focusOffset:w+S-C});u=l.ZP.silentEntityToggle(u,x,b),u=n.EditorState.push(r,u.getCurrentContent(),"apply-entity");var O=P+S,T=a.merge({anchorOffset:O,focusOffset:O});u=l.ZP.applySelection(u,T)}}return u},k=function(t,e){var i=t.current,n=null==i?void 0:i.editor;if(i&&n){var r=function(t){var r;t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,i._dragCount=0,i.exitCurrentMode();var o=C(t);if(o){if(null!==(r=i.props)&&void 0!==r&&r.handleDrop){var a,s=i._internalDrag?"internal":"external";null===(a=i.props)||void 0===a||a.handleDrop(o,{},s)}i._internalDrag=!1,function(){var t=n;if(t){var i=new MouseEvent("mouseup",{view:e,bubbles:!0,cancelable:!0});t.dispatchEvent(i)}}()}};return n.addEventListener("drop",r,!0),{unregister:function(){n.removeEventListener("drop",r,!0)}}}},C=function(t){var e=null,i=null,r=function(t){return t&&t.ownerDocument?t.ownerDocument:document}(t.currentTarget);if("function"==typeof r.caretRangeFromPoint){var o=r.caretRangeFromPoint(t.x,t.y);e=null==o?void 0:o.startContainer,i=null==o?void 0:o.startOffset}else{if(!t.rangeParent)return null;e=t.rangeParent,i=t.rangeOffset}var a=function(t){var e="data-offset-key",i=t.nodeType===Node.TEXT_NODE&&t.parentElement||t;if(!i)return null;var n=i.closest("[".concat(e,"]"));if(!n)return null;var r=n.getAttribute(e),o=null==r?void 0:r.split("-");return o&&o.length?o[0]:null}(e);return a?new n.SelectionState({anchorKey:a,anchorOffset:i,focusKey:a,focusOffset:i,isBackward:!1,hasFocus:!1}):null}},1290:function(t,e,i){"use strict";i.d(e,{l:function(){return b}});var n=i(353),r=i(623),o=i(644),a=i(352),s=i(621),c=(i(650),i(646)),l=i(679),d=i(973);function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||m(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){if(t){if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,o.Qc)(),u=g(i,2),m=u[0],v=u[1],b=(0,o.sJ)(),y=g(b,1),w=y[0],S=(0,n.useMemo)((function(){return a.ZP.getCurrentBlock(t)}),[t]),P=[].concat(f(w.global),f(w.project)),k=(0,n.useMemo)((function(){return(0,c.x6)({editorState:t})}),[t]),C=(0,n.useMemo)((function(){return P.find((function(t){return t.name===k}))}),[k]),x=(0,n.useMemo)((function(){var e=a.ZP.getCurrentInlineStyles(t,r.f.FontFamily);return e.length?e[0]:C?C.cssProperties.fontFamily||"":s.BX.fontFamily}),[C,t,k]),O=(0,n.useMemo)((function(){var e=a.ZP.getCurrentInlineStyles(t,r.f.FontStyle);return e.length?e[0]:C?C.cssProperties.fontStyle||"":s.BX.fontStyle}),[C,t,k]),T=(0,n.useMemo)((function(){var e=a.ZP.getCurrentInlineStyles(t,r.f.FontWeight);return e.length?e[0]:C?C.cssProperties.fontWeight||"":s.BX.fontWeight}),[C,t,k]);(0,n.useEffect)((function(){if(e.listenFontFeaturesUpdates&&x&&T&&O){var t=(0,o.qi)({fontFamily:x,fontWeight:T,fontStyle:O});m[t]||a.ZP.getFontFeatures({fontFamily:x,fontWeight:T,fontStyle:O}).then((function(e){if(e){var i=e.features,n=e.variations,r=e.characters;v(h(h({},m),{},p({},t,{features:i,variations:n,characters:r})))}}))}}),[t]);var _=(0,n.useMemo)((function(){if(x&&T&&O){var t=(0,o.qi)({fontFamily:x,fontWeight:T,fontStyle:O});return m[t]}}),[t,m]),Z=(0,n.useMemo)((function(){var e=C&&C.name!==s.dP.Unstyled,i=e&&(0,c.r_)(null==C?void 0:C.cssProperties.fontSize),n=e&&(0,c.r_)(null==C?void 0:C.cssProperties.lineHeight),o=e&&(0,c.r_)(null==C?void 0:C.cssProperties.letterSpacing,!0),u=a.ZP.getCurrentInlineStyles(t,r.f.FontSize),h=a.ZP.getCurrentInlineStyles(t,r.f.LetterSpacing),p=(0,l.PP)({block:S}),f=a.ZP.getCurrentInlineStyles(t,r.f.IsLinkedLetterSpacing),g=(0,d.P9)({block:S}),m=null!=u&&u.length?parseInt(u[0]):i||s.BX.fontSize,v=null!=h&&h.length?parseFloat(h[0]):o||0,b="number"==typeof p?p:n||s.BX.lineHeight;return{fontSize:m,lineHeight:b,ratio:m/b,letterSpacing:v,fontSizeLinkStatus:g,letterSpacingLinkStatus:!(!f||!f[0]||void 0===f[0])&&"true"===f[0]}}),[t,C]),I=Z.fontSize,M=Z.lineHeight,E=Z.ratio,j=Z.letterSpacing,A=Z.fontSizeLinkStatus,L=Z.letterSpacingLinkStatus;return{textStyle:C,textStyleName:k,fontFamily:x,fontStyle:O,fontWeight:T,fontInfo:_,fontSize:I,lineHeight:M,ratio:E,letterSpacing:j,fontSizeLinkStatus:A,letterSpacingLinkStatus:L}}},639:function(t,e,i){"use strict";var n,r;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{e:function(){return r}}),function(t){t.Smallcaps="smcp",t.StandardLigatures="liga",t.DiscretionaryLigatures="dlig",t.RequiredLigatures="rlig",t.HistoricalLigatures="hlig",t.Fractions="frac",t.Alternates="salt",t.StylisticSet01="ss01",t.StylisticSet02="ss02",t.StylisticSet03="ss03",t.StylisticSet04="ss04",t.StylisticSet05="ss05",t.StylisticSet06="ss06",t.StylisticSet07="ss07",t.StylisticSet08="ss08",t.StylisticSet09="ss09",t.StylisticSet10="ss10",t.StylisticSet11="ss11",t.StylisticSet12="ss12",t.StylisticSet13="ss13",t.StylisticSet14="ss14",t.StylisticSet15="ss15",t.StylisticSet16="ss16",t.StylisticSet17="ss17",t.StylisticSet18="ss18",t.StylisticSet19="ss19",t.StylisticSet20="ss20",t.LiningFigures="lnum",t.OldstyleFigures="onum",t.ProportionalFigures="pnum",t.TabularFigures="tnum"}(r||(r={}));o(n={},r.LiningFigures,"Lining figures"),o(n,r.OldstyleFigures,"Oldstyle figures"),o(n,r.ProportionalFigures,"Proportional figures"),o(n,r.TabularFigures,"Tabular figures")},623:function(t,e,i){"use strict";i.d(e,{f:function(){return r},b:function(){return v}});var n,r,o=i(352),a=i(624),s=i(635);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(t){t.LetterSpacing="LETTER_SPACING",t.Color="COLOR",t.FontFeature="FONT_FEATURE",t.Stroke="STROKE",t.FontSize="FONT_SIZE",t.FontFamily="FONT_FAMILY",t.FontWeight="FONT_WEIGHT",t.FontStyle="FONT_STYLE",t.FontVariable="FONT_VARIABLE",t.IsLinkedLetterSpacing="IS_LINKED_LETTER_SPACING",t.Decoration="DECORATION",t.Transform="TRANSFORM",t.Features="FEATURES",t.FontKerning="FONT_KERNING",t.TextShadow="SHADOW"}(r||(r={}));var p=(d(n={},r.LetterSpacing,{name:"letterSpacing",value:function(t){return"".concat(t,"px")}}),d(n,r.FontFamily,{name:"fontFamily",value:function(t){return t}}),d(n,r.FontStyle,{name:"fontStyle",value:function(t){return t}}),d(n,r.FontWeight,{name:"fontWeight",value:function(t){return t}}),d(n,r.FontSize,{name:"fontSize",value:function(t){return"".concat(t,"px")}}),d(n,r.Color,{name:"color",value:function(t){var e=(0,a.gn)(t),i=e.r,n=e.g,r=e.b,o=e.a;return"rgba(".concat(i,", ").concat(n,", ").concat(r,", ").concat(o,")")}}),d(n,r.FontFeature,{name:"fontFeatureSettings",value:function(t){return t.split(o.ZP.INLINE_STYLE_DELIMITER).filter((function(t){return t})).map((function(t){return'"'.concat(t,'"')})).join(", ")}}),d(n,r.FontVariable,{name:"fontVariationSettings",value:function(t){return t.split(o.ZP.INLINE_STYLE_DELIMITER).filter((function(t){return t})).map((function(t){var e=u(t.split("|"),2),i=e[0],n=e[1];return"'".concat(i,"' ").concat(n)})).join(", ")}}),d(n,r.Stroke,{styleFn:function(t){var e=u(t.split(o.ZP.INLINE_STYLE_DELIMITER),2),i=e[0],n=e[1],r=(0,a.gn)(n),s=r.r,c=r.g,l=r.b,d=r.a,h="rgba(".concat(s,", ").concat(c,", ").concat(l,", ").concat(d,")"),p="".concat(i,"px ").concat(h);return{WebkitTextStroke:p,textStroke:p}}}),d(n,r.Decoration,{name:"textDecoration",value:function(t){return t}}),d(n,r.Transform,{name:"textTransform",value:function(t){return t}}),d(n,r.Features,{styleFn:function(t){switch(t){case"superscript":return{verticalAlign:"baseline",position:"relative",top:"-0.4em",fontSize:"smaller"};case"subscript":return{verticalAlign:"baseline",position:"relative",top:"0.4em",fontSize:"smaller"};default:return{}}}}),d(n,r.FontKerning,{styleFn:function(t){return"none"===t?{}:{fontKerning:"auto",WebkitFontKerning:"auto"}}}),d(n,r.TextShadow,{name:"textShadow",styleFn:function(t){var e=t.split(o.ZP.INLINE_STYLE_DELIMITER).filter((function(t){return t}));if(e.length){var i=(0,s.DX)(e),n=i.shadow;if(!i.isShadowEnabled||0===n.x&&0===n.y&&0===n.blur)return{};var r=window.RM.constructorRouter&&!window.RM.constructorRouter.preview,a=n.fadeOnHover&&!r?"ffffff00":n.color;return(0,s.$X)(l(l({},n),{},{color:a}))}return{}}}),n);function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v=function(t){return Object.keys(p).reduce((function(e,i){var n=t.filter((function(t){return!!t&&t.startsWith(i)})).first();if(n){var r=n.replace("".concat(i).concat(o.ZP.INLINE_STYLE_DELIMITER),""),a=p[i];if(a.styleFn)return g(g({},e),a.styleFn(r));if(a.name&&a.value)return g(g({},e),{},m({},a.name,a.value(r)))}return e}),{})}},620:function(t,e,i){"use strict";i.d(e,{J:function(){return r}});i(352);var n=["The follies of others are obvious, but our own hide from us; we love to parse others’ missteps but we cover up our own, as the cheat conceals the false die. It is in the nature of men to lay blame: we see others’ mistakes while our own passions swell, carrying us ever farther from improvement. — Buddhist wisdom","No one can long stand on tiptoe. He who thrusts himself forward is not a source of light. No glory comes to the self-satisfied, no honor to the boastful. The proud will not rise high. In the court of good sense, such people are like table discards, repellent to all. The sensible person does not rely on self. — Lao-Tzu","Simplicity in life, language and habits strengthens a nation, but a life of luxury, fancy language and effeminate habit leads to weakness and death. — John Ruskin","Truth is not a matter of talking but comes only through labor and observation. And when you have one truth in hand, two others, like the first leaves of a dicotyledonous plant, will probably appear. — John Ruskin","All things have a beginning and an end. So it is with mankind: there is a beginning and end to all human affairs. He who understands what is a beginning and what is an end is closer to the truth. — Confucius","Most people are dismayed if deprived of their pleasures. The right course belongs to him who relishes even the passing away of the reason for his joy and is not bitter. — Pascal","When we are clear about things, we have knowledge; with knowledge, we seek the path of truth; when the search is rewarded, the heart becomes good; with the heart made good, the moral view of things that leads to virtue is attained. — Confucius","Wisdom has three faces: when seen from afar, it is grand and severe; on closer approach, it is tender and welcoming; when we are close enough to hear it, the words of wisdom are severe and demanding. — Chinese wisdom","The sun constantly floods the world with its light, but its light is not exhausted; so your mind should send its light in all directions and not be exhausted. It should flow everywhere, without diminishment, and when it encounters an obstacle, it should react, not with annoyance or anger but should serenely clarify all that yearns to accept it, without any lessening or weariness, bringing light to all that is turned to it, leaving in shadow only that which turns its face away. — Marcus Aurelius","As torches and fireworks pale to invisibility in the sun, so the mind, even the mind of genius, and beauty pale and are eclipsed by the heart’s goodness. — Schopenhauer","Music and sweet treats bring the wanderer to a stop, but wisdom has neither flavor nor smell. When looked for, it is invisible; when listened for, it is inaudible, yet its goodness is inexhaustible. The most powerful thing in the world cannot be seen, heard or touched. — Lao-Tzu","The best ideas are usually those that come without effort, out of the blue. The great intellectual creations come easily. Only a great person can create something great, and such a one works without strain. — John Ruskin","He who talks much rarely puts his words into action. But the wise person fears that his words may not be translated into action. The wise do not utter empty words, lest their actions be inconsistent with their words. — Chinese wisdom","Fear ignorance, but fear false knowledge even more. Turn your eyes from the deceptive world and do not trust your feelings, for they lie; rather look inward to the impersonal, eternal self. Truly, ignorance is like a sealed and airless chamber; in it, the soul sits like a caged bird, neither singing nor spreading its wings. But ignorance is better than any school of thought that is not guided by the wisdom of the soul. — Buddhist wisdom","Some seek their good or happiness in power; others in science, and others in the pleasures of the flesh. But those who come truly close to the good understand that it cannot consist in what can only be mastered by a few. They understand that the true good of humankind is that which can be achieved by all people, without division and without envy; its nature is such that none can lose it if they do not so choose. — Pascal","The wise person asks only of himself; the unwise man demands everything from others. — Chinese wisdom","To know much and not to put one’s self forward as knowing is the height of morality. To know little and put one’s self forward as knowledgeable is an illness. Only by understanding the disease can one expunge it. — Lao-Tzu","Speak only of that which is as clear to you as the morning, or be silent. — Talmud","Conquer ferocity with love, evil with good, miserliness with generosity, the liar with truth. — Buddhist wisdom","People seek satisfaction, throwing themselves from one thing to another because they feel the emptiness of their lives but do not yet realize the emptiness of the new delight that attracts them. — Pascal","The skilled warrior does not rage. The skilled fighter is not angry. He who is skilled in the use of people is not provocative. This is the virtue of non-resistance. This is being in agreement with Heaven. — Lao-Tzu","The first and principal characteristic of a good and wise person is his consciousness that he knows very little, that many people know more and he seeks always to learn, to study, and not to teach. Those who wish to teach or direct neither teach nor lead well. — John Ruskin","The virtuous person seeks to follow the direct path to the end. What is to be feared is to go halfway and then to weaken. — Chinese wisdom"],r=function(){return n[Math.floor(Math.random()*n.length)]}},1314:function(t,e,i){"use strict";i.d(e,{vY:function(){return p},$w:function(){return g}});var n=i(1316),r=i(624),o=(i(342),i(699)),a=i(308),s=(i(1315),i(701),i(621));i(694);function c(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h=function(t,e){if(!t)return"";var i="number"==typeof e?e:100;return"".concat(t).concat((0,r.vx)(i))},p=function(t){var e=["none",0,"baseline"],i=["opacity"];return t.map((function(t){var o=t._name,l=t._caption,h=t.tag,p=(t._sort,c(t,["_name","_caption","tag","_sort"])),f=Object.keys(p).reduce((function(t,o){var a=(0,n.eV)(o),c=p[o];if(i.includes(o)||e.includes(c))return d({},t);if("textAlign"===a&&"start"===c)c="left";else if("color"===a){var l=p.opacity>0?parseFloat((p.opacity/100).toFixed(2)):1,h=(0,r.vK)(c,l);c=(0,r.tZ)(h)}else a.includes("padding")?c=parseInt(c):"fontWeight"===a&&"normal"===c&&(c=s.BX.fontWeight);return d(d({},t),{},u({},a,c))}),{});return f.paddingLeft=f.paddingLeft||0,f.paddingRight=f.paddingRight||0,f.paddingTop=f.paddingTop||0,f.paddingBottom=f.paddingBottom||0,{name:o,label:l,tag:h||a.Z.AVAILABLE_TEXT_TAGS[0],cssProperties:f}}))},f=function(t,e){var i=function(t){return e?"".concat(e,"-").concat(t):t},n=void 0!==t[i("color")]?t[i("color")]:t.color,r=void 0!==t[i("opacity")]?t[i("opacity")]:t.opacity,a=void 0!==t[i("u-color")]?t[i("u-color")]:t["u-color"],s=void 0!==t[i("u-opacity")]?t[i("u-opacity")]:t["u-opacity"],c=void 0!==t[i("u-size")]?t[i("u-size")]:t["u-size"],l=void 0!==t[i("u-offset")]?t[i("u-offset")]:t["u-offset"],d=void 0!==t[i("u-style")]?t[i("u-style")]:t["u-style"];return{textColor:h(String("inherit"===n?t.color:n),Number("inherit"===r?t.opacity:r)),color:h(String("inherit"===a?t["u-color"]:a),Number("inherit"===s?t["u-opacity"]:s)),size:Number("inherit"===c?t["u-size"]:c),padding:Number("inherit"===l?t["u-offset"]:l),type:function(t){switch(t){case"none":return o.BM.None;case"dotted":return o.BM.Dotted;case"dashed":return o.BM.Dashed;case"solid":return o.BM.Solid}}(d)}},g=function(t){return t.map((function(t){return{name:t._name,label:t._caption,style:{link:f(t),hover:f(t,"hover"),current:f(t,"current")}}}))}},703:function(t,e,i){"use strict";i.d(e,{Bg:function(){return k},kg:function(){return S},ul:function(){return P}});var n=i(446),r=i(704),o=i(352),a=i(702),s=i(679),c=i(623),l=i(339),d=i(644),u=i(646);function h(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f,g=function(t){var e=t.editorState,i=t.method,n=o.ZP.getCurrentInlineStyles(e,c.f.LetterSpacing),r=n&&n.length?parseFloat(n[0]):0,a=(0,u.x6)({editorState:e}),s=(0,d.XZ)()||{project:[],global:[]},p=[].concat(h(s.project),h(s.global)).find((function(t){return t.name===a})),f=!!a&&(0,u.r_)(null==p?void 0:p.cssProperties.letterSpacing,!0),g=r||f||0,m="decrease"===i?-1:1;return o.ZP.applyInlineStyle({key:c.f.LetterSpacing,value:l.default.decimals(g+.2*m,2),editorState:e})},m=i(621),v=function(t){var e=t.editorState,i=t.method,n=o.ZP.getCurrentInlineStyles(e,c.f.FontSize),r=n&&n.length?parseInt(n[0]):m.BX.fontSize,a="decrease"===i?-1:1;return o.ZP.applyInlineStyle({key:c.f.FontSize,value:r+a,editorState:e})},b=i(622),y=i(969),w=l.default.isPermissionAllowed;!function(t){t.InsertNbsp="InsertNbsp",t.InsertThinsp="InsertThinsp",t.InsertEnsp="InsertEnsp",t.IncreaseIndent="IncreaseIndent",t.DecreaseIndent="DecreaseIndent",t.DecreaseLineHeight="DecreaseLineHeight",t.IncreaseLineHeight="IncreaseLineHeight",t.DecreaseLetterSpacing="DecreaseLetterSpacing",t.IncreaseLetterSpacing="IncreaseLetterSpacing",t.ToggleTypographyPanel="ToggleTypographyPanel",t.ToggleLinkPanel="ToggleLinkPanel",t.IncreaseFontSize="IncreaseFontSize",t.DecreaseFontSize="DecreaseFontSize",t.AlignLeft="AlignLeft",t.AlignRight="AlignRight",t.AlignCenter="AlignCenter",t.SelectParagraph="SelectParagraph",t.ToggleBold="ToggleBold",t.ToggleUnderline="ToggleUnderline",t.ToggleItalic="ToggleItalic"}(f||(f={}));var S=function(t){var e=t.event,i=t.keyCode,r=t.ctrlOrCmd,o=void 0!==r&&r,a=t.shift,s=void 0!==a&&a,c=t.alt,l=void 0!==c&&c,d=n.KeyBindingUtil.usesMacOSHeuristics();return i===e.keyCode&&s===e.shiftKey&&l===e.altKey&&(d?o===e.metaKey:o===e.ctrlKey)},P=function(t){var e=w("TextCanChangeTypography"),i=w("TextCanChangeAlign"),o=w("TextCanChangeAdvancedTypography");if(S({event:t,keyCode:32,alt:!0}))return r.ZP.sendEvent(r.RM.KeyPress,{eventLabel:"Non-breaking space (nbsp)"}),f.InsertNbsp;if(S({event:t,keyCode:32,alt:!0,ctrlOrCmd:!0}))return r.ZP.sendEvent(r.RM.KeyPress,{eventLabel:"Non-breaking space (nbsp)"}),f.InsertNbsp;if(S({event:t,keyCode:32,alt:!0,ctrlOrCmd:!0,shift:!0}))return r.ZP.sendEvent(r.RM.KeyPress,{eventLabel:"Thin space (thinsp)"}),f.InsertThinsp;if(S({event:t,keyCode:32,alt:!0,shift:!0}))return r.ZP.sendEvent(r.RM.KeyPress,{eventLabel:"Half-size spaces (ensp)"}),f.InsertEnsp;if(S({event:t,keyCode:9}))return f.IncreaseIndent;if(S({event:t,keyCode:9,shift:!0}))return f.DecreaseIndent;if(S({event:t,keyCode:65,ctrlOrCmd:!0,shift:!0}))return f.SelectParagraph;if(S({event:t,keyCode:84,alt:!0,ctrlOrCmd:!0}))return f.ToggleTypographyPanel;if(S({event:t,keyCode:75,ctrlOrCmd:!0}))return f.ToggleLinkPanel;if(e){if(S({event:t,keyCode:38,alt:!0}))return f.DecreaseLineHeight;if(S({event:t,keyCode:40,alt:!0}))return f.IncreaseLineHeight;if(S({event:t,keyCode:37,alt:!0}))return f.DecreaseLetterSpacing;if(S({event:t,keyCode:39,alt:!0}))return f.IncreaseLetterSpacing;if(S({event:t,keyCode:190,ctrlOrCmd:!0,shift:!0}))return f.IncreaseFontSize;if(S({event:t,keyCode:188,ctrlOrCmd:!0,shift:!0}))return f.DecreaseFontSize}if(i){if(S({event:t,keyCode:76,ctrlOrCmd:!0,shift:!0}))return f.AlignLeft;if(S({event:t,keyCode:82,ctrlOrCmd:!0,shift:!0}))return f.AlignRight;if(S({event:t,keyCode:67,ctrlOrCmd:!0,shift:!0}))return f.AlignCenter}if(o){if(S({event:t,keyCode:66,ctrlOrCmd:!0}))return f.ToggleBold;if(S({event:t,keyCode:73,ctrlOrCmd:!0}))return f.ToggleItalic;if(S({event:t,keyCode:85,ctrlOrCmd:!0}))return f.ToggleUnderline}return(0,n.getDefaultKeyBinding)(t)},k=function(t){var e=t.action,i=t.editorState,n=t.workspace;if(e===f.InsertNbsp)return{status:"handled",editorState:o.ZP.insertText({editorState:i,text:y.Dw})};if(e===f.InsertEnsp)return{status:"handled",editorState:o.ZP.insertText({editorState:i,text:String.fromCharCode(8194)})};if(e===f.InsertThinsp)return{status:"handled",editorState:o.ZP.insertText({editorState:i,text:String.fromCharCode(8201)})};if(e===f.IncreaseIndent){var r=(0,a.fh)({editorState:i,method:"increase"});if(r)return{status:"handled",editorState:r}}if("backspace"===e||e===f.DecreaseIndent){var l=(0,a.fh)({editorState:i,method:"decrease"});if(l)return{status:"handled",editorState:l}}if(e===f.DecreaseLineHeight){var d=(0,s.vW)({editorState:i,method:"decrease"});if(d)return{status:"handled",editorState:d}}if(e===f.IncreaseLineHeight){var u=(0,s.vW)({editorState:i,method:"increase"});if(u)return{status:"handled",editorState:u}}if(e===f.IncreaseLetterSpacing)if(i.getSelection().isCollapsed()){var h=o.ZP.getWordCaretSelection(i,"next");if(h)return{status:"handled",editorState:h}}else{var p=g({editorState:i,method:"increase"});if(p)return{status:"handled",editorState:p}}if(e===f.DecreaseLetterSpacing)if(i.getSelection().isCollapsed()){var w=o.ZP.getWordCaretSelection(i,"prev");if(w)return{status:"handled",editorState:w}}else{var S=g({editorState:i,method:"decrease"});if(S)return{status:"handled",editorState:S}}if(e===f.ToggleTypographyPanel){var P=n.controls.findControl("text_typography");if(P)return P.onClick.apply(P),{status:"handled",editorState:i}}if(e===f.ToggleLinkPanel){var k=n.controls.findControl("text_link");if(k)return k.onClick.apply(k),{status:"handled",editorState:i}}if(e===f.IncreaseFontSize)return{status:"handled",editorState:v({editorState:i,method:"increase"})};if(e===f.DecreaseFontSize)return{status:"handled",editorState:v({editorState:i,method:"decrease"})};if(e===f.AlignLeft||e===f.AlignRight||e===f.AlignCenter){var C=e===f.AlignLeft?b.m7.AlignLeft:e===f.AlignRight?b.m7.AlignRight:b.m7.AlignCenter;return{status:"handled",editorState:(0,b.Oh)({editorState:i,align:C})}}if(e===f.SelectParagraph)return{status:"handled",editorState:o.ZP.selectCurrentBlock(i)};if(e===f.ToggleBold){var x=o.ZP.getCurrentInlineStyles(i,c.f.FontWeight);return{status:"handled",editorState:o.ZP.applyInlineStyle({editorState:i,key:c.f.FontWeight,value:x&&"700"===x[0]?m.BX.fontWeight:"700"})}}if(e===f.ToggleItalic){var O=o.ZP.getCurrentInlineStyles(i,c.f.FontStyle);return{status:"handled",editorState:o.ZP.applyInlineStyle({editorState:i,key:c.f.FontStyle,value:O&&"italic"===O[0]?m.BX.fontStyle:"italic"})}}if(e===f.ToggleUnderline){var T=o.ZP.getCurrentInlineStyles(i,c.f.Decoration);return{status:"handled",editorState:o.ZP.applyInlineStyle({editorState:i,key:c.f.Decoration,value:T&&"underline"===T[0]?"none":"underline"})}}}},644:function(t,e,i){"use strict";i.d(e,{sJ:function(){return s},XZ:function(){return c},H$:function(){return d},kh:function(){return u},SZ:function(){return p},we:function(){return f},Qc:function(){return g},qi:function(){return m}});var n=i(645);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var a=r((0,n.M)({global:[],project:[]}),3),s=a[0],c=(a[1],a[2]),l=r((0,n.M)({global:[],project:[]}),3),d=l[0],u=(l[1],l[2]),h=r((0,n.M)({global:[],project:[]}),3),p=h[0],f=(h[1],h[2]),g=r((0,n.M)({}),1)[0],m=function(t){var e=t.fontFamily,i=t.fontWeight,n=t.fontStyle;return"".concat(e,"_").concat(i,"_").concat(n)}},699:function(t,e,i){"use strict";var n,r,o,a,s,c,l;i.d(e,{Rr:function(){return n},m5:function(){return r},yb:function(){return a},BM:function(){return s},dr:function(){return l}}),function(t){t.top="top",t.bottom="bottom"}(n||(n={})),function(t){t.LTR="LTR",t.RTL="RTL"}(r||(r={})),function(t){t.global="global",t.project="project"}(o||(o={})),function(t){t.inside="inside",t.outside="outside"}(a||(a={})),function(t){t.None="None",t.Solid="Solid",t.Dotted="Dotted",t.Dashed="Dashed"}(s||(s={})),function(t){t.Added="Added",t.Removed="Removed",t.Replaced="Replaced",t.NotChanged="NotChanged"}(c||(c={})),function(t){t.URL="URL",t.Page="Page",t.Email="Email",t.Phone="Phone",t.Anchor="Anchor",t.ScrollToTop="ScrollToTop",t.GoBack="GoBack"}(l||(l={}))},1313:function(t,e,i){"use strict";i.d(e,{$Y:function(){return M},IB:function(){return E}});var n=i(353),r=i(1285),o=i.n(r),a=i(601),s=i(640),c=i(1308),l=i(621);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p=[{label:"H1",tag:"h1",cssProperties:{color:"22222264",fontFamily:"Roboto",fontStyle:"normal",textAlign:"left",fontSize:48,fontWeight:700,letterSpacing:0,lineHeight:60,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{label:"H2",tag:"h2",cssProperties:{color:"22222264",fontFamily:"Georgia",fontStyle:"normal",textAlign:"left",fontSize:24,fontWeight:400,letterSpacing:0,lineHeight:30,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{label:"Text",tag:"p",cssProperties:{color:"22222264",fontFamily:"Georgia",fontStyle:"normal",textAlign:"left",fontSize:18,fontWeight:400,letterSpacing:0,lineHeight:23,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},{label:"Caption",tag:"p",cssProperties:{color:"22222232",fontFamily:"Georgia",fontStyle:"italic",textAlign:"left",fontSize:14,lineHeight:18,letterSpacing:0,fontWeight:400,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}}];l.BX.fontFamily,l.BX.fontStyle,l.BX.fontSize,Number(l.BX.fontWeight),l.BX.lineHeight;var f=i(1314),g=i(694),m=i(644),v=i(1317),b=i(646),y=i(1321),w=i(699),S=i(650),P=i(651);function k(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function x(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?C(Object(i),!0).forEach((function(e){O(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function O(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return Z(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Z(t,e):void 0}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var I=n.memo((function(t){return(0,P.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          ".concat(t.blockStyles,"\n          ").concat(t.textStyleSheet,"\n          ").concat(t.linkStyleSheet,"\n          ").concat(t.listStyleSheet,"\n        ")}})}),(function(t,e){return o()(t,e)})),M=function(t){var e=t.mode,i=T((0,m.sJ)(),2),r=i[0],a=i[1],l=T((0,m.H$)(),2),d=l[0],h=l[1],C=T((0,m.SZ)(),2),_=C[0],Z=C[1];(0,n.useEffect)((function(){if("constructor"===e){var t,i,n,l=[],m=[],v=[];if(!r.project.length){var b=window.ServerData.textStyles,y=p.map((function(t){return u(u({},t),{},{name:"style-".concat((0,c.Z)())})}));if(!b||!b.project||!b.project.length){var w,S,P=null===(w=window.ServerData)||void 0===w||null===(S=w.editParams)||void 0===S?void 0:S.paragraph_styles;P&&P.length&&(y=(0,f.vY)(P))}l=null!=b&&b.project&&null!=b&&b.project.length?b.project:y,a({global:(null==b?void 0:b.global)||[],project:l})}if(!d.project.length){var k=window.ServerData.linkStyles,C=[g.TF];if(!k||!k.project||!k.project.length){var x=window.ServerData.editParams&&window.ServerData.editParams.link_styles;x&&x.length&&(C=(0,f.$w)(x))}m=null!=k&&k.project&&k.project.length?k.project:C,h({global:(null==k?void 0:k.global)||[],project:m})}if(!_.project.length){var O=window.ServerData.listStyles;v=null!=O&&O.project&&null!=O&&O.project.length?O.project:[],Z({global:(null==O?void 0:O.global)||[],project:v})}var T=[];l.length&&!o()(l,(null===(t=window.ServerData.textStyles)||void 0===t?void 0:t.project)||[])&&T.push((0,s.Wf)({styles:l,projectId:window.ServerData.projectId})),m.length&&!o()(m,(null===(i=window.ServerData.linkStyles)||void 0===i?void 0:i.project)||[])&&T.push((0,s.pV)({styles:m,projectId:window.ServerData.projectId})),v.length&&!o()(v,(null===(n=window.ServerData.listStyles)||void 0===n?void 0:n.project)||[])&&T.push((0,s.SV)({styles:v,projectId:window.ServerData.projectId})),T.length&&Promise.all(T)}if("viewer"===e||"screenshoter"===e){var I,M,E,j,A,L,D,$,F,R,B,z,W,V,U,N,H,G,K,q,Y,J,X,Q,tt,et,it="viewer"===e,nt=it?(null===(I=window.ServerData)||void 0===I||null===(M=I.mags)||void 0===M||null===(E=M.mag)||void 0===E?void 0:E.textStyles)||(null===(j=window.RM)||void 0===j||null===(A=j.viewerRouter)||void 0===A||null===(L=A.mag)||void 0===L?void 0:L.textStyles):null===(D=window.ServerData)||void 0===D||null===($=D.mag)||void 0===$?void 0:$.textStyles;if(nt)a({global:null!=nt&&null!==(tt=nt.global)&&void 0!==tt&&tt.length?nt.global:[],project:null!=nt&&null!==(et=nt.project)&&void 0!==et&&et.length?nt.project:[]});var rt,ot,at=it?(null===(F=window.ServerData)||void 0===F||null===(R=F.mags)||void 0===R||null===(B=R.mag)||void 0===B?void 0:B.linkStyles)||(null===(z=window.RM)||void 0===z||null===(W=z.viewerRouter)||void 0===W||null===(V=W.mag)||void 0===V?void 0:V.linkStyles):null===(U=window.ServerData)||void 0===U||null===(N=U.mag)||void 0===N?void 0:N.linkStyles;if(at)h({global:null!=at&&null!==(rt=at.global)&&void 0!==rt&&rt.length?at.global:[],project:null!=at&&null!==(ot=at.project)&&void 0!==ot&&ot.length?at.project:[]});var st,ct,lt=it?(null===(H=window.ServerData)||void 0===H||null===(G=H.mags)||void 0===G||null===(K=G.mag)||void 0===K?void 0:K.listStyles)||(null===(q=window.RM)||void 0===q||null===(Y=q.viewerRouter)||void 0===Y||null===(J=Y.mag)||void 0===J?void 0:J.listStyles):null===(X=window.ServerData)||void 0===X||null===(Q=X.mag)||void 0===Q?void 0:Q.listStyles;if(lt)Z({global:null!=lt&&null!==(st=lt.global)&&void 0!==st&&st.length?lt.global:[],project:null!=lt&&null!==(ct=lt.project)&&void 0!==ct&&ct.length?lt.project:[]})}}),[]);var M=(0,n.useMemo)((function(){return Object.keys(v.T).map((function(t){return v.T[t].style})).join(" ")}),[v.T]),E=(0,n.useMemo)((function(){var t=function(t){var e,i=(e=t.cssProperties,Object.keys(e).reduce((function(t,i){var n=e[i];return"string"==typeof n&&"".concat(n).includes("(")&&!String(n).includes(")")&&(n="".concat(n,")")),n&&"opacity"===i&&parseInt(String(n))>1&&(n=parseInt("".concat(n))/100),x(x({},t),{},O({},i,n))}),{}));return"justify"==="".concat(i.textAlign)&&(i.whiteSpace="normal")," .".concat(t.name," { ").concat((0,b.aR)(i)," } ")},e=r.global.map(t),i=r.project.map(t);return[].concat(k(e),k(i)).join(" ")}),[r]),j=(0,n.useMemo)((function(){var t=function(t){var e=x({},t.cssProperties);return"number"==typeof e.width&&(e.minWidth=e.width),e.lineHeight&&delete e.lineHeight,"\n        .".concat(t.name,"-preview {\n          ").concat((0,b.aR)(t.cssProperties),"\n        }\n        .").concat(t.name,".edit-mode .editor-block-wrapper {\n          display: ").concat(t.listPosition&&t.listPosition!==w.yb.inside?"flex":"block",";\n        }\n        .").concat(t.name,".edit-mode .editor-block-wrapper:before, .").concat(t.name,".edit-mode div[data-offset-key]:before {\n          display: inline-block;\n          ").concat((0,b.aR)(e),"\n          ").concat(t.listPosition&&t.listPosition!==w.yb.inside?"":"line-height: 1;","\n          ").concat(t.baselineShift?"transform: translateY(".concat(t.baselineShift,"px);"):"","\n        }\n        .").concat(t.name,".view-mode {\n          display: ").concat(t.listPosition&&t.listPosition!==w.yb.inside?"flex":"list-item",";\n        }\n        .").concat(t.name,".view-mode:before {\n          display: inline-block;\n          ").concat((0,b.aR)(e),"\n          ").concat(t.listPosition&&t.listPosition!==w.yb.inside?"":"line-height: 1;","\n          ").concat(t.baselineShift?"transform: translateY(".concat(t.baselineShift,"px);"):"","\n        }\n\n        .").concat(S.dY.Unordered,".").concat(t.name,'.edit-mode div[data-offset-key]:before {\n          content: "').concat(t.markerContent||"•",'\\00a0";\n          display: ').concat(t.listPosition&&t.listPosition!==w.yb.inside?"none":"inline-block",";\n          white-space: nowrap;\n        }\n        .").concat(S.dY.Unordered,".").concat(t.name,'.edit-mode .editor-block-wrapper:before {\n          content: "').concat(t.markerContent||"•",'\\00a0";\n          display: ').concat(t.listPosition&&t.listPosition===w.yb.outside?"inline-block":"none",";\n          white-space: nowrap;\n        }\n\n        .").concat(S.dY.Ordered,".").concat(t.name,".edit-mode div[data-offset-key]:before {\n          counter-increment: ").concat(S.Hf,";\n          content: counter(").concat(S.Hf,')".";\n          display: ').concat(t.listPosition&&t.listPosition!==w.yb.inside?"none":"inline-block",";\n          white-space: nowrap;\n        }\n\n        .").concat(S.dY.Ordered,".").concat(t.name,".edit-mode .editor-block-wrapper:before {\n          counter-increment: ").concat(S.Hf,";\n          content: counter(").concat(S.Hf,')".";\n          display: ').concat(t.listPosition&&t.listPosition===w.yb.outside?"inline-block":"none",";\n          white-space: nowrap;\n        }\n\n        .").concat(S.dY.Unordered," .").concat(t.name,'.view-mode:before {\n          content: "').concat(t.markerContent||"•",'\\00a0";\n        }')},e="\n      .".concat(S.rs,".edit-mode .editor-block-wrapper {\n        display: flex;\n      }\n      .").concat(S.rs,".view-mode {\n        display: flex;\n      }\n      .").concat(S.rs,".view-mode:before {\n        display: inline-block;\n      }\n\n      .").concat(S.dY.Unordered,".").concat(S.rs,'.edit-mode .editor-block-wrapper:before {\n        content: "•\\00a0";\n        display: inline-block;\n      }\n      .').concat(S.dY.Unordered,".").concat(S.rs,'.edit-mode div[data-offset-key]:before {\n        content: "•\\00a0";\n        display: none;\n      }\n\n      .').concat(S.dY.Ordered,".").concat(S.rs,".edit-mode .editor-block-wrapper:before {\n        counter-increment: ").concat(S.Hf,";\n        content: counter(").concat(S.Hf,')".";\n        display: inline-block;\n        white-space: nowrap;\n      }\n      .').concat(S.dY.Ordered,".").concat(S.rs,".edit-mode div[data-offset-key]:before {\n        counter-increment: ").concat(S.Hf,";\n        content: counter(").concat(S.Hf,')".";\n        display: none;\n        white-space: nowrap;\n      }\n\n      .').concat(S.dY.Unordered," .").concat(S.rs,'.view-mode:before {\n        content: "•\\00a0";\n      }'),i=_.global.map(t),n=_.project.map(t);return[e].concat(k(i),k(n)).join(" ")}),[_]),A=(0,n.useMemo)((function(){var t=function(t){var e,i,n,r=null!==(e=t.style)&&void 0!==e&&e.link?"\n        .".concat(t.name," {\n          ").concat((0,b.aR)((0,y.z)(t.style.link)),"\n          ").concat((0,b.aR)({color:t.style.link.textColor}),"\n        }\n\n        .").concat(t.name," * {\n          ").concat((0,b.aR)({color:t.style.link.textColor}),"\n        }"):"",o=null!==(i=t.style)&&void 0!==i&&i.hover?"\n        .".concat(t.name," .hover, .").concat(t.name,":hover {\n          ").concat((0,b.aR)((0,y.z)(t.style.hover)),"\n          ").concat((0,b.aR)({color:t.style.hover.textColor},!0),"\n        }\n\n        .").concat(t.name," .hover *, .").concat(t.name,":hover * {\n            ").concat((0,b.aR)({color:t.style.hover.textColor},!0),"\n        }"):"",a=null!==(n=t.style)&&void 0!==n&&n.current?"\n        .".concat(t.name,".current {\n          ").concat((0,b.aR)((0,y.z)(t.style.current)),"\n          ").concat((0,b.aR)({color:t.style.current.textColor}),"\n        }\n\n        .").concat(t.name,".current * {\n          ").concat((0,b.aR)({color:t.style.current.textColor}),"\n        }"):"";return"\n        ".concat(r,"\n        ").concat(o,"\n        ").concat(a,"\n      ")},e=d.global.map(t),i=d.project.map(t);return[].concat(k(e),k(i)).join(" ")}),[d]);return(0,P.jsx)(I,{blockStyles:M,textStyleSheet:E,linkStyleSheet:A,listStyleSheet:j})},E=function(t){var e="text-global-styles",i=document.querySelector("#".concat(e));i||((i=document.createElement("div")).id=e,document.body.appendChild(i)),a.render((0,P.jsx)(M,{mode:t}),i)}},646:function(t,e,i){"use strict";i.d(e,{MX:function(){return h},aR:function(){return g},Ob:function(){return m},r_:function(){return v},x6:function(){return b},ne:function(){return y},j8:function(){return w}});var n=i(647),r=i(624),o=i(352),a=i(644);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h="textStyle",p=["fontSize","lineHeight","letterSpacing","textIndent","paddingLeft","paddingTop","paddingRight","paddingBottom","width","minWidth"],f=function(t,e){if(e){if(p.includes(t)&&!isNaN(Number(e)))return"".concat(e,"px");if("color"===t){var i=(0,r.gn)(String(e)),n=i.r,o=i.g,a=i.b,s=i.a;return"rgba(".concat(n,", ").concat(o,", ").concat(a,", ").concat(s,")")}return e}},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object.keys(t).reduce((function(i,r){return t[r]?"".concat(i).concat((0,n.o)(r),": ").concat(f(r,t[r])).concat(e?" !important":"","; "):i}),"")},m=function(){var t=(0,a.XZ)()||window.ServerData&&window.ServerData.mags&&window.ServerData.mags.mag&&window.ServerData.mags.mag.textStyles;return t?[].concat(d(t.project||[]),d(t.global||[])).reduce((function(t,e){return c(c({},t),{},l({},e.name,{element:e.tag}))}),{}):{}},v=function(t,e){return t?e?parseFloat(String(t)):parseInt(String(t)):0},b=function(t){var e=t.editorState,i=t.block,n=o.ZP.getBlockData({editorState:e,block:i,key:h});return"string"!=typeof n||["undefined","null"].includes(n)?"":n},y=function(t){var e=t.block,i=t.editorState,n=t.styleName;return o.ZP.setBlockData({editorState:i,block:e,key:h,value:n})},w=function(t){if(t&&t.cssProperties){var e=t.cssProperties,i=e.paddingTop,n=e.paddingLeft,r=e.paddingRight,o=e.paddingBottom,a={left:void 0!==n?v(n):0,top:void 0!==i?v(i):0,right:void 0!==r?v(r):0,bottom:void 0!==o?v(o):0};if(a.left||a.top||a.right||a.bottom)return a}}},352:function(t,e,i){"use strict";i.d(e,{wB:function(){return Tt}});i(353);var n=i(356),r=i.n(n),o=i(322),a=i(441),s=i.n(a),c=i(442),l=i(446),d=i(620),u=i(621),h=i(623),p=i(639),f=i(640),g=i(644),m=i(646),v=i(650),b=i(679),y=i(622),w=i(680),S=i(681),P=i(342),k=i(694),C=i(700),x=i(624),O=i(308),T=i(970),_=i(697),Z=i(973),I=i(971),M=i(637),E=i(651);function j(t,e){return L(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||$(t,e)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(t){if(Array.isArray(t))return t}function D(t){return function(t){if(Array.isArray(t))return R(t)}(t)||F(t)||$(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){if(t){if("string"==typeof t)return R(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?R(t,e):void 0}}function F(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function B(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function z(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){B(o,n,r,a,s,"next",t)}function s(t){B(o,n,r,a,s,"throw",t)}a(void 0)}))}}function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function V(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){U(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function U(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var H=(0,c.cn)({styleToHTML:function(){return(0,E.jsx)("span",null)},blockToHTML:function(){return(0,E.jsx)("p",null)},entityToHTML:function(t,e){return t.type===S.b3?(0,E.jsx)("br",null):e}}),G=function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return l.EditorState[i?"forceSelection":"acceptSelection"](t,e||t.getSelection())},K=function(t,e){return l.RichUtils.toggleInlineStyle(t,e)},q=function(t,e){return"function"==typeof t.get?t.get(e):t[e]},Y=function(t,e){var i={blocks:(q(t,"blocks")||[]).map((function(i){var n,r,o=e&&(null===(n=t[e])||void 0===n?void 0:n.styles)||q(t,"styles"),a=e&&(null===(r=t[e])||void 0===r?void 0:r.blocksMeta)||q(t,"blocksMeta"),s=(o||[]).find((function(t){return t.key===i.key})),c=(a||[]).find((function(t){return t.key===i.key})),l=[];return s&&(l="object"===N(s.inlineStyles)&&s.inlineStyles.hasOwnProperty("keys")&&s.inlineStyles.hasOwnProperty("values")?yt(s.inlineStyles):(null==s?void 0:s.inlineStyles)||[]),V(V({},i),{},{data:(null==c?void 0:c.data)||i.data||{},type:s?s.type:u.dP.Unstyled,inlineStyleRanges:l})}))||[],entityMap:q(t,"entityMap")||{}};return(0,l.convertFromRaw)(i)},J=function(t){var e=(0,l.convertToRaw)(t),i=e.blocks.map((function(t){return{key:t.key,text:t.text,entityRanges:t.entityRanges,depth:t.depth}})),n=e.blocks.map((function(t){return{key:t.key,type:t.type,inlineStyles:vt(t.inlineStyleRanges)}})),r=e.blocks.map((function(t){return{key:t.key,data:t.data||{}}}));return{blocks:i,styles:n,entityMap:e.entityMap,blocksMeta:r}},X=function(t){var e=it(t,!0),i=t.getSelection();if(2!==e.length)return i;if(0!==i.getAnchorOffset()||0!==i.getFocusOffset())return i;var n=t.getCurrentContent(),r=i.getStartKey(),o=n.getBlockForKey(r);return new l.SelectionState({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:o.getText().length,isBackward:!1,isCollapsed:i.isCollapsed()})},Q=function(t){var e=t.content;return(t.selection||new l.SelectionState).merge({anchorKey:e.getFirstBlock().getKey(),anchorOffset:0,focusOffset:e.getLastBlock().getText().length,focusKey:e.getLastBlock().getKey()})},tt=function(t){var e=t.getCurrentInlineStyle();return(0,h.b)(e)};var et=function(t){var e=t.editorState,i=t.blockKey,n=t.data,r=t.selection||e.getSelection(),o=e.getCurrentContent(),a=o.getBlockMap(),c=o.getBlockForKey(i),l=c.get("data"),d=c.set("data",s().Map(V(V({},l?l.toObject():{}),n)));return o.merge({blockMap:a.merge(U({},c.getKey(),d)),selectionBefore:r,selectionAfter:r})},it=function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.getSelection();if(r.isCollapsed())return[r.getStartKey()];var o=t.getCurrentContent(),a=r.getIsBackward(),s=a?r.getFocusKey():r.getAnchorKey(),c=a?r.getAnchorKey():r.getFocusKey(),l=0===r.getFocusOffset()&&0===r.getAnchorOffset()&&s!==c,d=0===r.getFocusOffset()&&s!==c&&r.getAnchorOffset()===(null===(e=o.getBlockForKey(r.getAnchorKey()))||void 0===e||null===(i=e.getCharacterList())||void 0===i?void 0:i.size),u=o.getBlockMap().toIndexedSeq(),h=u.map((function(t){return t&&t.getKey()})).toJS(),p=[],f=h.indexOf(s),g=h.indexOf(c);return f>-1&&g>-1&&(p=h.slice(f,g+1)),(!n&&l||d)&&p.pop(),p},nt=function(t){var e=t.getSelection(),i=e.getIsBackward(),n=i?e.getFocusKey():e.getAnchorKey(),r=i?e.getAnchorKey():e.getFocusKey(),o=i?e.getEndOffset():e.getStartOffset(),a=i?e.getStartOffset():e.getEndOffset();if(0===o&&0===a){var s=i?r:n;return{startKey:s,endKey:s,startOffset:0,endOffset:t.getCurrentContent().getBlockForKey(s).getCharacterList().size}}return{startKey:n,endKey:r,startOffset:o,endOffset:a}},rt=function(t){return t.some((function(t){return t&&t.style.length}))},ot=function(t){var e=t.some((function(t){return(0,M.qp)(t)&&3===t.version})),i=t.some((function(t){var e;return(0,M.Qg)(t)&&(null===(e=t.wids)||void 0===e?void 0:e.some((function(t){return(0,M.qp)(t)&&3===t.version})))})),n=t.some((function(t){return(0,M.xL)(t)&&2===t.version}));return e||i||n},at=/url\((?:"|'|)(.*?)(?:"|'|)\)/g;function st(t){return ct.apply(this,arguments)}function ct(){return(ct=z(regeneratorRuntime.mark((function t(e){var i,n,r,o,a,s,c,l,d,u,h,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i={},t.t0=regeneratorRuntime.keys(document.styleSheets);case 2:if((t.t1=t.t0()).done){t.next=24;break}n=t.t1.value,r=document.styleSheets[n],o=null,t.prev=6,o=r.rules||r.cssRules,t.next=16;break;case 10:if(t.prev=10,t.t2=t.catch(6),!r.href||r.href.includes("cloudfront.net")){t.next=16;break}return t.next=15,dt(r.href);case 15:o=t.sent;case 16:if(o){t.next=21;break}if(!r.href||r.href.includes("cloudfront.net")){t.next=21;break}return t.next=20,dt(r.href);case 20:o=t.sent;case 21:if(o)for(a in o)(s=o[a])&&s instanceof CSSFontFaceRule&&(l=null===(c=s.style)||void 0===c?void 0:c.getPropertyValue("src"),null!=(d=null==l?void 0:l.match(at))&&d.length&&(h=d[d.length-1].slice(4,-1).replace(/"/g,"").replace(/'/g,""),p=null===(u=s.style)||void 0===u?void 0:u.getPropertyValue("font-family").replace(/['"]+/g,""),i[p]=h));t.next=2;break;case 24:if(!e){t.next=26;break}return t.abrupt("return",i[e]||null);case 26:return t.abrupt("return",i);case 27:case"end":return t.stop()}}),t,null,[[6,10]])})))).apply(this,arguments)}var lt,dt=function(){var t=z(regeneratorRuntime.mark((function t(e){var i,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.text()})).catch((function(t){console.error("Error while getting stylesheet from url ".concat(e,": "),t)}));case 2:if(!(i=t.sent)){t.next=12;break}return(n=document.createElement("style")).type="text/css",n.styleSheet?n.styleSheet.cssText=i:n.appendChild(document.createTextNode(i)),document.head.appendChild(n),r=n.sheet||n.styleSheet,o=r&&(r.rules||r.cssRules)?r.rules||r.cssRules:null,document.head.removeChild(n),t.abrupt("return",o);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ut=function(t,e){var i=t;return"string"==typeof i&&/^\d+$/.test(i)&&(i=Number(i)),"string"==typeof i?"v":"".concat(e[0].toLowerCase()).concat(Math.floor(i/100))},ht=function(){var t=z(regeneratorRuntime.mark((function t(e){var i,n,r,o,a,s,c,l,d,u,h,g,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.fontFamily,n=e.fontWeight,r=e.fontStyle,o={features:[],variations:[],characters:[]},a=window.RM.constructorRouter.fonts.findFontByCSSName(i),s=ut(n,r),a&&a.variations&&a.variations.includes(s)){t.next=6;break}return t.abrupt("return",o);case 6:if(c={weight:s},!a||"custom"!==a.provider){t.next=11;break}c.id=a._id,t.next=15;break;case 11:return t.next=13,st(i);case 13:(l=t.sent)&&(c.url=l);case 15:if(a&&"system"===a.provider&&(c.systemFontName=a.name),!(!c.url&&!c.id&&!c.systemFontName||c.id&&!c.weight)){t.next=19;break}return t.abrupt("return",void 0);case 19:return t.prev=19,t.next=22,(0,f.WN)(c);case 22:return d=t.sent,u=d.data,(h=u&&u.features)&&h.length&&(g=Object.values(p.e),m=g.filter((function(t){return h.some((function(e){return e.toLowerCase()===t.toLowerCase()}))})),o.features=m||[]),o.variations=u&&u.variations,o.characters=u&&u.characters,t.abrupt("return",o);case 31:throw t.prev=31,t.t0=t.catch(19),new Error(t.t0||"Can't detect font features");case 34:case"end":return t.stop()}}),t,null,[[19,31]])})));return function(e){return t.apply(this,arguments)}}(),pt=";",ft=function(t,e){return"".concat(t).concat(pt).concat(e)},gt=function(t,e){var i=_t.getSelectionOffset(t),n=i.startOffset,r=i.endOffset,o=t.getSelection(),a=_t.getSelectedBlocks(t),s=t.getCurrentContent().getBlockMap();return s.forEach((function(t){if(t){var i=t.getKey();if(a.includes(i)){var o=t.getCharacterList().map((function(t,o){if(!t||void 0===o)return t;var s=t.getStyle().filter((function(t){return!!t&&t.startsWith(e)})).toJS(),c=function(t,e){return l.CharacterMetadata.removeStyle(t,e)};if(1===a.length){if(o>=n&&o<r)return s.reduce(c,t)}else if(a[0]===i){if(o>=n)return s.reduce(c,t)}else{if(a[a.length-1]!==i)return s.reduce(c,t);if(o<r)return s.reduce(c,t)}return t})),c=t.set("characterList",o);s=s.set(i,c)}}})),_t.applySelection(l.EditorState.push(t,l.ContentState.createFromBlockArray(s.toArray()),"change-inline-style"),o)},mt=function(t,e){return t.replace("".concat(e).concat(pt),"").split(pt)},vt=function(t){var e=[],i=[],n=[];return t.forEach((function(t){var r,o=e.findIndex((function(e){return e.offset===t.offset&&e.length===t.length})),a=t.style.split(pt),s=L(r=a)||F(r)||$(r)||A(),c=s[0],l=s.slice(1).join(pt),d=i.indexOf(c);-1===d&&(i.push(c),d=i.length-1);var u=n.indexOf(l);-1===u&&(n.push(l),u=n.length-1);var h="".concat(d).concat(pt).concat(u);o>-1?e[o].styles.includes(t.style)||e[o].styles.push(h):e.push({offset:t.offset,length:t.length,styles:[h]})})),{styles:bt(e),keys:i,values:n}},bt=function(t){var e=null,i=[];return t.forEach((function(t,n){if(null===e)e=n,i.push(t);else if(i[i.length-1]){var r=i[i.length-1],a=r.offset,s=r.length,c=r.styles;a+s===t.offset&&(0,o.isEqual)(c,t.styles)?i[i.length-1]=V(V({},i[i.length-1]),{},{length:s+t.length}):(e=n,i.push(t))}})),i},yt=function(t){var e=t.keys,i=t.values,n=t.styles,r=[];return n.forEach((function(t){t.styles.forEach((function(n){var o=j(n.split(pt),2),a=o[0],s=o[1];r.push({offset:t.offset,length:t.length,style:"".concat(e[Number(a)]).concat(pt).concat(i[Number(s)])})}))})),r},wt={},St=Math.pow(2,24),Pt=null,kt={},Ct=function(t){var e,i=t.text,n=t.style,r=t.useCache,o=void 0===r||r,a=t.cacheForText,s=void 0!==a&&a;if(Pt||(Pt=document.createElement("canvas").getContext("2d")),Pt){var c="".concat((e=n).fontStyle?"".concat(e.fontStyle," "):"").concat(e.fontWeight?"".concat(e.fontWeight," "):"").concat(e.fontSize?"".concat(e.fontSize,"px "):"").concat(e.fontFamily||""),l=o?s?"".concat(c,":").concat(i):c:null;if(l&&kt.hasOwnProperty(l))return kt[l];Pt.font=c;var d=0;if(n.letterSpacing){var u=+"".concat(n.letterSpacing);d=i.length*u}var h=+"".concat(n.fontSize),p=Pt.measureText(i),f=p.width,g=p.fontBoundingBoxDescent+p.fontBoundingBoxAscent,m=Math.abs(p.actualBoundingBoxDescent)+Math.abs(p.actualBoundingBoxAscent),v={width:f+d,height:Math.max(m,g,h)};return l&&(kt[l]=v),v}return null};!function(t){t.paragraph="paragraph",t.list="list",t.link="link"}(lt||(lt={}));var xt=function(t,e){return"".concat(t,"_used_").concat(e,"_stylesCache")},Ot=function(t,e){var i=localStorage.getItem(xt(t,e));if(i){var n=JSON.parse(i);if(null!=n&&n.valid&&null!=n&&n.value)return new Set(n.value)}return null},Tt=function(t){return window!==window.top&&window.location.search.match(/\^?link_target=parent/i)?"_parent":t||"_blank"},_t={applySelection:G,toggleInlineStyle:K,getCurrentBlock:function(t){return t.getCurrentContent().getBlockForKey(t.getSelection().getStartKey())},getCurrentBlockType:function(t){return t.getCurrentContent().getBlockForKey(t.getSelection().getStartKey()).getType()},toggleBlockType:function(t,e){return l.RichUtils.toggleBlockType(t,e)},importTextContent:Y,exportTextContent:J,creatNewWidgetContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.text,i=t.html,n=i?(0,C.Ue)(i):l.ContentState.createFromText(e||(0,d.J)());return J(n)},fixSelection:X,getAllTextSelection:Q,clearSelection:function(t){var e=l.EditorState.moveSelectionToEnd(t).getSelection();return G(t,e)},hasSelectedText:function(t){var e=t.getSelection();return e.getAnchorKey()!==e.getFocusKey()||e.getAnchorOffset()!==e.getFocusOffset()},clearStylesFromBlock:function(t){var e,i=t.editorState,n=t.block,r=i.getCurrentContent().getBlockMap(),o=n,a="";o?a=o.getKey():(a=i.getSelection().getAnchorKey(),o=r.get(a));var c=o.getCharacterList().map((function(t){return t?t.set("style",t.get("style").clear()):t})),d=o.get("data"),u=s().Map(V(V({},d?d.toObject():{}),{},(U(e={},b.fB,void 0),U(e,y.Hb,void 0),U(e,w.gg,void 0),e))),h=o.set("characterList",c).set("data",u),p=r.set(a,h);return l.EditorState.push(i,l.ContentState.createFromBlockArray(p.toArray()),"change-inline-style")},getStyleFromSelection:tt,getBlockData:function(t){var e,i=t.editorState,n=t.block,r=t.key;if(n)e=n;else if(i){var o=i.getSelection().getAnchorKey();e=i.getCurrentContent().getBlockMap().get(o)}if(!e)return"";var a=e.getData().toObject();return r?a&&a[r]||void 0:a},setBlockData:function(t){var e=t.editorState,i=t.block,n=t.key,r=t.value,o=X(e);if(i){var a=et({editorState:e,selection:o,blockKey:i.getKey(),data:U({},n,r)});return l.EditorState.push(e,a,"change-block-data")}return it(e).reduce((function(t,i){var a=et({editorState:t,selection:o,blockKey:i,data:U({},n,r)});return l.EditorState.push(e,a,"change-block-data")}),e)},getSelectedBlocks:it,isBlockSelected:function(t,e){return it(t).includes(e)},insertText:function(t){var e=t.editorState,i=t.text,n=t.selection,r=e.getCurrentInlineStyle(),o=n||e.getSelection(),a=e.getCurrentContent(),s=o.isCollapsed()?l.Modifier.insertText(a,o,i,r):l.Modifier.replaceText(a,o,i,r);return l.EditorState.push(e,s,1===i.length?"insert-characters":"insert-fragment")},removeText:function(t){var e=t.editorState,i=t.selection,n=e.getCurrentContent(),r=l.Modifier.removeRange(n,i,"forward");return l.EditorState.push(e,r,"remove-range")},getTextFromTextWidget:function(t){if(3===t.get("version")){var e=Y(t.attributes),i=H(e);if(i){var n=document.createElement("span");return n.innerHTML=i,n.textContent||n.innerText}}return""},findSubstringIndexes:function(t,e){var i=t.getText();return Array.from(r()(i,RegExp(e,"g")),(function(t){return t.index})).filter((function(t){return"number"==typeof t}))},reverseSelection:function(t){return t.getIsBackward()?t.merge({isBackward:!1,anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset()}):t},getSelectionOffset:nt,doesSelectionHaveStyle:function(t){if(t.getSelection().isCollapsed()){var e=tt(t);return Boolean(e&&Object.keys(e).length)}var i=t.getCurrentContent(),n=nt(t),r=n.startKey,o=n.endKey,a=n.startOffset,s=n.endOffset;if(r===o){var c=i.getBlockForKey(r).getCharacterList().slice(a,s).toJS();return rt(c)}return it(t).some((function(t){var e=i.getBlockForKey(t).getCharacterList(),n=r===t?a:0,c=o===t?s:e.size,l=e.slice(n,c).toJS();return rt(l)}))},selectCurrentBlock:function(t){var e=t.getSelection(),i=e.getStartKey();if(i===e.getEndKey()){var n=t.getCurrentContent(),r=e.merge({anchorKey:i,anchorOffset:0,focusOffset:n.getBlockForKey(i).getText().length,focusKey:i});return G(t,r)}return t},getWordCaretSelection:function(t,e){var i=t.getSelection();if(i.isCollapsed()){var n=t.getCurrentContent(),r=nt(t),o=r.startKey,a=r.endKey,s=r.startOffset;if(o===a){var c=n.getBlockForKey(o).getText(),l=null;if("next"===e)for(var d=s+1;d<=c.length;d++)null!==l||" "!==c[d]&&d!==c.length||(l=d);else if("prev"===e)for(var u=s-1;u>=0;u--)null===l&&(" "===c[u]&&Math.abs(s-u)>1||0===u)&&(l=0===u?0:u+1);if(null!==l){var h=i.merge({anchorKey:o,anchorOffset:l,focusOffset:l,focusKey:a});return G(t,h)}}}},cloneStylesOnReturn:function(t){var e=t.getSelection();if(e.isCollapsed()){var i=t.getCurrentContent(),n=e.getStartKey(),r=i.getBlockForKey(n);if(r){var o=r.getData(),a=l.Modifier.splitBlock(t.getCurrentContent(),t.getSelection()),s=l.EditorState.push(t,a,"split-block"),c=s.getSelection(),d=l.Modifier.mergeBlockData(s.getCurrentContent(),c,o);return{status:"handled",editorState:s=l.EditorState.push(t,d,"split-block")}}}},hasNewTextWidgets:function(t){if(!t)return!1;var e=V({},t);return!(!e.pages||!e.pages.length)&&e.pages.some((function(t){return t.wids&&t.wids.length&&ot(t.wids)}))},someTextWidgets:ot,getEntityMap:function(t,e){var i={},n=0;return t.getBlockMap().forEach((function(r){null==r||r.findEntityRanges((function(t){return null!==t.getEntity()}),(function(o){var a=r.getEntityAt(o),s=a&&t.getEntity(a);if(s){var c=s.getType();e&&e!==c||(i[n]={type:c,data:s.getData(),mutability:s.getMutability()},n++)}}))})),i},getBlocksMeta:function(t){var e=[];return t.getBlockMap().forEach((function(t){t&&e.push({key:t.getKey(),data:t.getData().toObject()})})),e},generateRandomKey:function(){for(var t;void 0===t||wt.hasOwnProperty(t)||!isNaN(+t);)t=Math.floor(Math.random()*St).toString(32);return wt[t]=!0,t},getLigaturesType:function(t){var e=[p.e.RequiredLigatures,p.e.StandardLigatures,p.e.HistoricalLigatures,p.e.DiscretionaryLigatures];return t.filter((function(t){return e.includes(t)}))},getStylisticSets:function(t){var e=/^ss[\d]{2}$/i,i=Object.values(p.e).filter((function(t){return e.test(t)}));return t.filter((function(t){return i.includes(t)}))},getNumericVariations:function(t){var e=[p.e.LiningFigures,p.e.OldstyleFigures,p.e.ProportionalFigures,p.e.TabularFigures];return t.filter((function(t){return e.includes(t)}))},getFontWeightString:ut,getFontWeightFromString:function(t){var e=t&&D(t),i="v"===e[0];return{style:e[0]&&"i"===e[0]?"italic":"normal",weight:i?"initial":e[1]?100*parseInt(e[1]):400}},getFontFeatures:ht,getTextWidgetFontsList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i={},n=!1,r=function(t){var e=t.fontFamily,i=t.fontStyle,n=t.fontWeight,r=[];if(e){var o=mt(e,h.f.FontFamily);if(r.push(o),o){r.push(i?mt(i,h.f.FontStyle):u.BX.fontStyle);var a=n?mt(String(n),h.f.FontWeight):u.BX.fontWeight;"number"!=typeof a&&"normal"===a[0]&&(a=u.BX.fontWeight),r.push("initial"===String(a)?"variable":a)}}return r.length?r.join("|"):null},o=(0,g.XZ)(),a=o||{project:[],global:[]},s=function(t,e){return e.filter((function(e){return e.offset<=t&&e.offset+e.length>=t}))},c=function(e){e.model;var i,n,o=e.viewport,c={},l=q(t,"blocks"),d=o&&(null===(i=t[o])||void 0===i?void 0:i.styles)||q(t,"styles")||[],p=o&&(null===(n=t[o])||void 0===n?void 0:n.blocksMeta)||q(t,"blocksMeta"),f=new Set([]),m=(0,g.we)()||{project:[],global:[]};return l.forEach((function(t){var e,i=p?p.find((function(e){return e.key===t.key})):t,n=i&&i.data;if(n){var o=n.textStyle;if(o&&(e=[].concat(D(a.project),D(a.global)).find((function(t){return!!t.name&&t.name.toLowerCase()===o.toLowerCase()})))){var c=e.cssProperties||{},l=c.fontFamily,g=c.fontWeight,v=c.fontStyle,b=r({fontFamily:l,fontStyle:v,fontWeight:g});b&&f.add(b)}var y=n.listStyle;if(y){var w=[].concat(D(m.project),D(m.global)).find((function(t){return!!t.name&&t.name.toLowerCase()===y.toLowerCase()}));if(w){var S=w.cssProperties||{},P=S.fontFamily,k=S.fontWeight,C=S.fontStyle,x=r({fontFamily:P,fontStyle:C,fontWeight:k});x&&f.add(x)}}}var O=d.find((function(e){return e.key===t.key}));if(O){var T,_=null===(T=O.inlineStyles.styles)||void 0===T?void 0:T.reduce((function(t,e){return t.push(e.offset),t.push(e.offset+e.length),t}),[0]);if(_)_.map((function(t){return s(t,O.inlineStyles.styles).reduce((function(t,e){return e.styles.forEach((function(e){var i=j(e.split(";"),2),n=i[0],r=i[1];t[O.inlineStyles.keys[+n]]=O.inlineStyles.values[+r]})),t}),{})})).forEach((function(t){var i=e&&e.cssProperties||{},n=t[h.f.FontFamily]||i.fontFamily||u.BX.fontFamily,o=t[h.f.FontStyle]||i.fontStyle||u.BX.fontStyle,a=t[h.f.FontWeight]||i.fontWeight||u.BX.fontWeight,s=r({fontFamily:n,fontStyle:o,fontWeight:a});s&&f.add(s)}))}})),f.forEach((function(t){c[t]=1})),c};if(t&&q(t,"blocks")&&(e.length?e:P.ZP.viewport_listall).map((function(e){var n=c({viewport:e,model:t});i=V(V({},i),n)})),n){var l=[u.BX.fontFamily,u.BX.fontStyle,u.BX.fontWeight].join("|");i[l]=1}return i},INLINE_STYLE_DELIMITER:pt,getStyleValueString:ft,applyInlineStyle:function(t){var e=t.key,i=t.value,n=t.editorState;if(n.getSelection().isCollapsed())return n;var r=gt(n,e);if(void 0===N(i))return r;var o=Array.isArray(i)?i.filter((function(t){return void 0!==t})).length?i.filter((function(t){return void 0!==t})).join(pt):null:i;return"string"==typeof o||"number"==typeof o||Array.isArray(o)?_t.toggleInlineStyle(r,ft(e,o)):r},removeInlineStyle:gt,getCurrentInlineStylesFromString:mt,getCurrentInlineStyles:function(t,e){var i=t.getCurrentInlineStyle().toJS();if(!e)return i;var n=i.find((function(t){return t.startsWith(e)}));return n?mt(n,e):[]},minifyStyles:vt,unminifyStyles:yt,getInlineStyleForSelection:function(t){var e=t.editorState,i=t.key,n=t.defaultValue,r=_t.fixSelection(e),a=e.getCurrentContent(),s=_t.getSelectedBlocks(e).map((function(t){return a.getBlockForKey(t)})),c=[];if(!r.isCollapsed()){var l=function(t){var e=(0,o.uniq)(null==t?void 0:t.getStyle().toJS()).filter((function(t){return!i||t.startsWith(i)}));e.length?c.push.apply(c,D(e)):n&&i&&c.push(_t.getStyleValueString(i,n))};if(1===s.length)s[0].getCharacterList().slice(r.getStartOffset(),r.getEndOffset()).forEach(l);else s.length>1&&s.forEach((function(t,e){var i=t.getCharacterList();0===e?i.slice(r.getStartOffset()).forEach(l):e===s.length-1&&i.slice(0,r.getEndOffset()).forEach(l),i.forEach(l)}))}return(0,o.uniq)(c)},getUsedTextStyles:function(t){var e=t.filter((function(t){return(0,M.qp)(t)&&3===t.version})),i=(0,g.XZ)(),n=e.reduce((function(t,e){var i=(e.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[m.MX]}));return P.ZP.viewport_listall.map((function(t){var n=e[t];n&&i.push.apply(i,D((n.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[m.MX]}))))})),i.length?[].concat(D(t),D(i)):t}),[]).filter((function(t){return t})),r=(0,o.uniq)(n);return[].concat(D(i.global),D(i.project)).filter((function(t){return r.includes(t.name)}))},getUsedLinkStyles:function(t){var e=t.filter((function(t){return(0,M.qp)(t)&&3===t.version})),i=(0,g.kh)(),n=e.reduce((function(t,e){var i=Object.values(e.entityMap||{}).filter((function(t){return t.type===k.kM&&!!t.data})).map((function(t){return t.data.linkStyle}));return P.ZP.viewport_listall.map((function(t){var n=e[t];n&&i.push.apply(i,D(Object.values(n.entityMap||{}).filter((function(t){return t.type===k.kM&&!!t.data})).map((function(t){return t.data.linkStyle}))))})),i.length?[].concat(D(t),D(i)).filter((function(t){return t})):t}),[]),r=(0,o.uniq)(n);return[].concat(D(i.global),D(i.project)).filter((function(t){return r.includes(t.name)}))},getUsedListStyles:function(t){var e=t.filter((function(t){return(0,M.qp)(t)&&3===t.version})),i=(0,g.we)(),n=e.reduce((function(t,e){var i=(e.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[v.iC]}));return P.ZP.viewport_listall.map((function(t){var n=e[t];n&&i.push.apply(i,D((n.blocksMeta||[]).filter((function(t){return!!t.data})).map((function(t){return t.data[v.iC]}))))})),i.length?[].concat(D(t),D(i)):t}),[]).filter((function(t){return t})),r=(0,o.uniq)(n);return[].concat(D(i.global),D(i.project)).filter((function(t){return r.includes(t.name)}))},canUseCustomFonts:function(t){return window.RM.constructorRouter.isOwner?(window.RM.constructorRouter.me&&window.RM.constructorRouter.me.get("permissions")||{}).can_use_custom_fonts:t.get("permissions").can_use_custom_fonts},insertBreakLine:function(t){return l.RichUtils.insertSoftNewline(t)},moveText:function(t){var e=t.editorState,i=t.dropSelection,n=l.Modifier.moveText(e.getCurrentContent(),e.getSelection(),i);return l.EditorState.push(e,n,"insert-fragment")},isWholeBlockSelected:function(t){var e=t.getSelection(),i=t.getCurrentContent();if(!e.isCollapsed()){var n=it(t);if(!n.length)return!1;if(1===n.length&&e.getStartKey()===e.getEndKey()){var r=i.getBlockForKey(e.getStartKey()).getText().length;if(e.getEndOffset()-e.getStartOffset()===r)return!0}else{if(1===n.length&&0===e.getStartOffset()&&0===e.getEndOffset()&&e.getStartKey()!==e.getEndKey())return!0;var o=i.getBlockForKey(e.getEndKey()).getText().length,a=e.getStartOffset(),s=e.getEndOffset();if(0===a&&s===o)return!0}}return!1},getBaseLineHeightStyle:function(t){var e=t.block,i=t.width;if(!e)return{};var n,r=e.getType(),o=(0,m.x6)({block:e});if(r||o){var a=(0,g.XZ)()||{project:[],global:[]};n=[].concat(D(a.project),D(a.global)).find((function(t){return!!t.name&&(t.name.toLowerCase()===r.toLowerCase()||t.name.toLowerCase()===o.toLowerCase())}))}for(var s=n&&n.cssProperties||{},c=0,l=0,d=[],u=e.getCharacterList(),p=e.getText(),f=p.length,v={width:0,styles:[]};c<f;){var b=u.get(c);if(b){var y,w=(null===(y=b.getStyle())||void 0===y?void 0:y.toJS())||[],S=p[c],P=w.find((function(t){return t.startsWith(h.f.FontFamily)})),k=w.find((function(t){return t.startsWith(h.f.FontStyle)})),C=w.find((function(t){return t.startsWith(h.f.FontWeight)})),x=w.find((function(t){return t.startsWith(h.f.FontSize)})),O={fontFamily:P&&mt(P,h.f.FontFamily)[0]||s.fontFamily,fontStyle:k&&mt(k,h.f.FontStyle)[0]||s.fontStyle,fontSize:x&&mt(x,h.f.FontSize)[0]||s.fontSize||"",fontWeight:C?parseInt(mt(C,h.f.FontWeight)[0]):s.fontWeight},T=Ct({text:S,style:O});if(T&&(v.width+=T.width,v.styles.push({fontFamily:O.fontFamily,fontSize:O.fontSize,fontWeight:O.fontWeight})),32===S.charCodeAt(0)){if((l+=v.width)>=i)break;d.push.apply(d,D(v.styles)),v={width:0,styles:[]}}}if(c+=1,l>=i)break}d.length||d.push.apply(d,D(v.styles));var _={},Z={},I={};d.map((function(t){t.fontFamily&&(_[t.fontFamily]=(_[t.fontFamily]||0)+1),t.fontSize&&(I[t.fontSize]=(I[t.fontSize]||0)+1),t.fontWeight&&(Z[t.fontWeight]=(Z[t.fontWeight]||0)+1)}));var M=function(t){var e=Object.keys(t);if(e.length)return e.reduce((function(e,i){return t[e]>t[i]?e:i}))},E=M(_)||s.fontFamily,j=M(I)||(s.fontSize?"".concat(s.fontSize):void 0);return{fontFamily:E,fontWeight:M(Z)||(s.fontWeight?parseInt(String(s.fontWeight)):void 0),fontSize:j?j.includes("px")?j:"".concat(j,"px"):void 0}},getTextSize:Ct,setDefaultStyles:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!!i[m.MX],r=n?{}:u.BX,o=n?null:(0,x.tZ)(O.Z.textWidget.initialColor),a=(U(e={},h.f.FontSize,i[h.f.FontSize]||r.fontSize),U(e,h.f.FontFamily,i[h.f.FontFamily]||r.fontFamily),U(e,h.f.FontWeight,i[h.f.FontWeight]||r.fontWeight),U(e,h.f.FontStyle,i[h.f.FontStyle]||r.fontStyle),e);void 0!==i[h.f.LetterSpacing]&&(a[h.f.LetterSpacing]=i[h.f.LetterSpacing]),i[h.f.FontFeature]&&(a[h.f.FontFeature]=i[h.f.FontFeature]);var s=i[h.f.Color]||o;s&&(a[h.f.Color]=s);var c=G(t,Q({content:t.getCurrentContent(),selection:t.getSelection()}));for(var l in a){var d=l,p=a[d];p&&(c=K(c,ft(d,p)))}return c=(0,b.z3)({editorState:c,lineHeight:+(i[b.fB]||r.lineHeight)}),c=(0,y.Oh)({editorState:c,align:i[y.Hb]||r.textAlign}),c=(0,Z.w7)({editorState:c,linkedStatus:Boolean(i[Z.Yv])||!0}),i[m.MX]&&(c=(0,m.ne)({editorState:c,styleName:"".concat(i[m.MX])})),c},preserveBlockInlineStyles:function(t,e){var i=e.getCurrentContent().getBlockMap(),n=t.getCurrentContent().getBlockMap(),r=String.fromCharCode(8205),o=n.filter((function(t){if(t){var e=i.get(t.getKey());if(!e||!e.getText().length)return!1;var n=t.getText().length;return!(0,m.x6)({block:t})&&!n}return!1})),a=n.filter((function(t){var e=null==t?void 0:t.getText();return Boolean(e&&e.length>1&&e.includes(r))}));if(a.size){var s=a.reduce((function(t,e){if(t&&e){var i=e.getKey(),n=e.getText(),o=n.indexOf(r),a=e.getCharacterList().delete(o),s=e.set("characterList",a).set("text",n.replace(r,""));return t.set(i,s)}return t}),n);return l.EditorState.set(t,{currentContent:l.ContentState.createFromBlockArray(s.toArray())})}if(o.size){var c=o.reduce((function(t,e){if(t&&e){var n=e.getKey(),o=i.get(n),a=i.last(),s=o?o.getCharacterList().slice(0,1):a.getCharacterList().slice(-1),c=e.set("text",r).set("characterList",s);return t.set(n,c)}return t}),n);return l.EditorState.set(t,{currentContent:l.ContentState.createFromBlockArray(c.toArray())})}return t},silentEntityToggle:function(t,e,i){var n=t.getSelection(),r=l.Modifier.applyEntity(t.getCurrentContent(),e,i);return l.EditorState.set(t,{currentContent:r,selection:n})},mergeBlocksStyles:function(t){var e=t.originStyles,i=t.blockMap,n=t.forceOverride,r=void 0!==n&&n;return i.map((function(t){if(t){var i=t.getCharacterList().map((function(t){var i=t;if(i){var n=e;if(r)i=i.set("style",i.get("style").clear());else{var o=i.getStyle().toArray().map((function(t){return j(t.split(_t.INLINE_STYLE_DELIMITER),1)[0]}));n=e.filter((function(t){if(t){var e=j(t.split(_t.INLINE_STYLE_DELIMITER),1)[0];return!o.includes(e)}return!0}))}return n.toArray().reduce((function(t,e){return t&&l.CharacterMetadata.applyStyle(t,e)}),i)}return i}));return t.set("characterList",i)}}))},getRealContentHeight:function(t){var e=t.editorState,i=t.width,n=t.model,r=document.createElement("div");r.style.position="absolute",r.style.left="-9999px",r.style.opacity="0",r.style.visibility="hidden",r.style.width="".concat(i,"px"),(0,_.renderReact)({component:function(){return(0,E.jsx)(T.Z,{editorState:e})},model:n,domElement:r}),document.body.appendChild(r);var o=r.clientHeight;return document.body.removeChild(r),o},isUrl:function(t){return/^(.*):\/\/[^\s$.?#].[^\s]*$/i.test(t)||/^[\da-z.-]+\.[a-z-]{2,}.*/i.test(t)},getDefaultListTextColor:function(t){var e=t.getCharacterList();if(e){var i=e.first();if(i){var n=i.getStyle().find((function(t){return!!t&&t.startsWith(h.f.Color)}));if(n)return j(n.split(pt),2)[1]}}return(0,x.tZ)(O.Z.textWidget.initialColor)},calculateLetterSpacing:function(t){var e=t.letterSpacing,i=t.fontSize,n=e+e/i*(t.newFontSize-i);return parseFloat((Math.round(100*n)/100).toFixed(2))},createStateFromModel:function(t){if(!(t&&t.get("blocks")))return l.EditorState.createEmpty(I.t);var e=Y(t.attributes);return e?l.EditorState.createWithContent(e,I.t):l.EditorState.createEmpty(I.t)},getBaseStyles:function(t){var e,i=t.editorState,n=t.lastStyle,r=i.getCurrentInlineStyle(),o=(0,b.vk)(i),a=(0,y.Wg)({editorState:i}),s=(0,m.x6)({editorState:i});return r.toArray().reduce((function(t,e){if(e){var i=j(e.split(_t.INLINE_STYLE_DELIMITER),2),n=i[0],r=i[1];return V(V({},t),{},U({},n,r))}return t}),V(V({},r.size&&n||{}),{},(U(e={},y.Hb,a),U(e,b.fB,o),U(e,m.MX,s),e)))},getDocumentFontsList:function(){var t=Array.from(document.querySelectorAll("link.fonts, style.fonts"));return t.map((function(t){var e,i=t.tagName.toLowerCase();return"style"===i?{tag:i,style:t.innerHTML}:{tag:i,href:(e=t.getAttribute("href"),Modernizr.safari?"".concat(e,"&edit_mode=true"):e),type:t.getAttribute("type")}}))},fixUrlProtocol:function(t){return/^(.*):\/\/[^\s$.?#].[^\s]*$/i.test(t)?t:"http://".concat(t)},isTextWidget:M.qp,StylesTypes:lt,getUsedStylesFromCache:Ot,spoilUsedStylesCache:function(t,e){Ot(t,e)&&localStorage.setItem(xt(t,e),JSON.stringify({value:null,valid:!1}))},setUsedStylesCache:function(t,e,i){localStorage.setItem(xt(t,e),JSON.stringify({value:D(i),valid:!0,datetime:new Date}))},getClickTarget:Tt};e.ZP=_t},972:function(t,e,i){"use strict";i.d(e,{E:function(){return p}});var n,r=i(353),o=i(683),a=i(661),s=i(621),c=i(699),l=i(624),d=i(344),u=i(342),h=i(651);var p=4,f=r.forwardRef((function(t,e){var i=t.textDirection,r=t.autosize,f=t.columns,g=t.verticalAlign,m=t.bgColor,v=t.shouldShowSelectionBorder,b=t.scale,y=t.viewport,w=t.viewerOptions,S=t.children,P=t.useBaseline,k=t.isEditMode,C=t.selectionColor,x=t.disableSelectionHighlight,O=m?(0,l.gn)(m):void 0,T=O?"rgba(".concat(O.r,", ").concat(O.g,", ").concat(O.b,", ").concat(O.a,")"):void 0,_=null!=C&&C.backgroundColor?(0,l.gn)(C.backgroundColor):void 0,Z=x?"transparent":_?"rgba(".concat(_.r,", ").concat(_.g,", ").concat(_.b,", ").concat(_.a,")"):void 0,I=null!=C&&C.textColor?(0,l.gn)(C.textColor):void 0,M=x?"inherit":I?"rgba(".concat(I.r,", ").concat(I.g,", ").concat(I.b,", ").concat(I.a,")"):void 0;return(0,h.jsx)(o.Box,{display:"flex",ref:e,height:!r||f&&f.count>1?"100%":"auto",flexDirection:"column",justifyContent:g&&g!==c.Rr.top?"flex-end":"flex-start",backgroundColor:T,css:function(t){return(0,a.css)(n||(e=["\n          // Цвет рамки выделенного блока\n          --editor-border-color: ",";\n\n          direction: ",";\n\n          // При включенных колонках обязательно устанавливаем hidden, чтобы большое кол-во контента\n          // не выходило за пределы контейнера\n          overflow: ",";\n          ",";\n\n          // Для вьювера\n          // Сбрасывает зум у текста, и вместо него применяет трансформ.\n          // Трансформ вместо зума нужен из-за того, что если коэффициент зума * line-height = дробное число,\n          // высота строки рендерится с погрешностью,\n          // и через несколько строчек начинает заметно не совпадать с линейками, выставленными по высоте строки.\n          // (Высота самого блока текста при этом рендерится правильно. То же самое в конструкторе)\n          // При трансформе высота строки рассчитывается правильно.\n          ","\n\n          // Колонки\n          & > div {\n            // т.к. обертка является флекс элементом, то колонки не будут работать на этом элементе\n            // поэтому задаем стиль внутреннему компоненту (draft-root)\n            ","\n          }\n\n          // Custom text selection\n          *::selection {\n            ","\n            ","\n          }\n\n          // Все что ниже: унаследовано из старого виджета\n          .public-DraftEditor-content {\n            white-space: normal !important;\n            overflow-wrap: break-word;\n          }\n\n          .text-viewer {\n            overflow-wrap: break-word;\n            white-space: normal;\n          }\n\n          ","\n\n          & div[data-contents='true'],\n          .text-viewer {\n            // Отключаем лигатуры, которые включены по-умолчанию\n            font-feature-settings: 'liga' 0, 'rlig' 0, 'dlig' 0, 'hlig' 0, 'smcp' 0;\n\n            // Дефолтные стили для нового текста\n            font-family: ",";\n            font-weight: ",";\n            font-style: ",";\n            font-size: ","px;\n            line-height: ","px;\n            -webkit-nbsp-mode: normal;\n            -webkit-line-break: after-white-space;\n            white-space: pre-wrap;\n            text-rendering: optimizeLegibility;\n            -webkit-font-smoothing: antialiased;\n          }\n        "],o||(o=e.slice(0)),n=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(o)}}))),v?t.colors.blue:"transparent",i,f&&f.count>1||!r?"hidden":"visible",k?"padding: 0 ".concat(p,"px;"):"",b&&d.Z.isOnForRatio(y||u.sJ.Default,b,w||{})&&d.Z.isCSSZoom()?"\n              width: ".concat("".concat(1/b*100,"%"),";\n              height: ","".concat(1/b*100,"%"),";\n              zoom: ",1/b,";\n              transform: ","scale(".concat(b,")"),";\n              transform-origin: left top;\n            "):"",f&&f.count>1&&"\n            min-height: 100%;\n            column-fill: auto;\n            column-count: ".concat(f.count,";\n            column-gap: ").concat(f.gap,"px;\n          "),M?"color: ".concat(M,";"):"",Z?"background-color: ".concat(Z,";"):"",P?"":"\n          .text-viewer span,\n          .text-viewer a,\n          & div[data-contents='true'] span,\n          & div[data-contents='true'] a {\n            line-height: inherit;\n            vertical-align: top;\n          }\n        ",s.BX.fontFamily,s.BX.fontWeight,s.BX.fontStyle,s.BX.fontSize,s.BX.lineHeight);var e,o}},S)}));e.Z=f},1319:function(t,e,i){"use strict";i.r(e),i.d(e,{TextConstructorFrameContext:function(){return W},default:function(){return G},frameOverflowSize:function(){return H}});var n=i(353),r=i(322),o=i(1062),a=i(697),s=i(1285),c=i.n(s),l=i(446),d=i(683),u=i(1317),h=i(623),p=i(972),f=i(352),g=i(700),m=i(704),v=i(992),b=i(1320),y=i(1093),w=i(651);function S(){return(S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function P(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var k=n.forwardRef((function(t,e){var i=t.isEditMode,r=t.textDirection,o=t.autosize,a=t.columns,s=t.verticalAlign,c=t.bgColor,k=t.selectionColor,C=t.shouldShowSelectionBorder,x=t.useBaseline,O=t.disableSelectionHighlight,T=P(t,["isEditMode","textDirection","autosize","columns","verticalAlign","bgColor","selectionColor","shouldShowSelectionBorder","useBaseline","disableSelectionHighlight"]),_=(0,n.useRef)(null),Z=(0,n.useContext)(b.ob),I=(0,y.s)("TextCanChangeTypography");(0,n.useEffect)((function(){if(_&&null!==_.current){var t=Z&&Z.window||window,e=_,i=(0,g.U7)(e,t),n=(0,g.ZC)(e,t),r=(0,g.sS)(e,{forceCleanText:!I});return function(){i.unregister(),null==n||n.unregister(),null==r||r.unregister()}}}),[_]),(0,n.useEffect)((function(){var t=e;null!==t&&t.current&&_.current&&!t.current.focusEditor&&(t.current.focusEditor=_.current.focus)}),[_,e]);var M=(0,n.useCallback)((function(t,e,i,n){var r=(0,g.pL)({text:t,html:e,editorState:i,pastedWithShift:n});return r?(n||window.RM.constructorRouter.trigger("notice:triggerEduTip",v.j.TextWidgetPasteWithoutFormatting,{showOnce:!0}),T.onChange(r),"handled"):"not-handled"}),[T.onChange]),E=(0,n.useCallback)((function(t,e){if(t.shiftKey){var i=f.ZP.insertBreakLine(e);return T.onChange(i),m.ZP.sendEvent(m.RM.KeyPress,{eventLabel:"Line-breaking"}),"handled"}var n=f.ZP.cloneStylesOnReturn(e);if(n){var r=n.status,o=n.editorState;return T.onChange(o),r}return"not-handled"}),[T.onChange]),j=(0,n.useCallback)((function(t){return t?(T.onChange(f.ZP.moveText({editorState:T.editorState,dropSelection:t})),"handled"):"not-handled"}),[T.onChange,T.editorState]),A=(0,n.useMemo)((function(){return l.DefaultDraftBlockRenderMap.merge((0,u.v)())}),[]);return(0,w.jsx)(p.Z,{ref:e,textDirection:r,autosize:o,columns:a,verticalAlign:s,bgColor:c,selectionColor:k,shouldShowSelectionBorder:C,useBaseline:x,isEditMode:i,disableSelectionHighlight:O},(0,w.jsx)(d.Box,null,(0,w.jsx)(l.Editor,S({ref:_,spellCheck:!1,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",stripPastedStyles:!1,blockRenderMap:A,customStyleFn:h.b,handlePaste:M,handleReturn:E,handleDrop:j},T))))})),C=i(699),x=i(646),O=i(622),T=i(1318),_=i(696),Z=i(703),I=i(1313),M=i(339),E=i(650),j=i(970),A=i(1290),L=i(1074);function D(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function $(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function F(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||B(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||B(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){if(t){if("string"==typeof t)return z(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?z(t,e):void 0}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var W=n.createContext({}),V=function(t){var e,i=t.readOnly,s=(0,n.useContext)(a.BackboneContext),c=s.model,l=s.modelSet,d=s.modelSave,u=(0,n.useContext)(_.x).model,h=u.useTextWidgetStore,p=u.isEditMode,g=u.workspace,m=u.selected,v=u.isJustCreated,b=u.disableSelectionHighlight,y=u.isResizing,S=R(h({partial:!1}),2),P=S[0],I=S[1];(0,A.l)(P,{listenFontFeaturesUpdates:!0});var M=(0,n.useContext)(T.j).isPaddingsEnabled,j=(0,o.Z)(d,400).callback,D=(0,o.Z)((function(t){if(p&&t.getLastChangeType()){var e=f.ZP.exportTextContent(t.getCurrentContent()),i=Object.keys(e),n=r.pick.apply(void 0,[c].concat(F(i))),o=(0,r.isEqual)(e,n);l(e),o||j()}}),20).callback;(0,n.useEffect)((function(){p&&v&&setTimeout((function(){var t;null===(t=z.current)||void 0===t||t.focusEditor()}),0)}),[]),(0,n.useEffect)((function(){D(P)}),[P]);var $=(0,n.useMemo)((function(){return P.getSelection().getHasFocus()}),[P]),B=(0,n.useMemo)((function(){return p}),[p,$]),z=(0,n.useRef)(null),W=(0,L.useResizeEffect)(z).height,V=(0,n.useMemo)((function(){return c.columns&&c.columns.count>1}),[c.columns]);(0,n.useEffect)((function(){!y&&W>0&&W!==c.h&&p&&!V&&c.autosize&&(l({h:W}),j())}),[W,c.autosize,c.h,V,y]),(0,n.useEffect)((function(){Modernizr.firefox||p||P.getSelection().isCollapsed()||I(f.ZP.clearSelection(P))}),[p]);var U=(0,n.useCallback)((function(t){var e,i=t.getType();return["edit-mode",i,(0,x.x6)({block:t}),(0,O.Wg)({block:t}),(0,E.nq)(i)?(0,E.XZ)({block:t})||(null!==(e=c.flags)&&void 0!==e&&e.newListPosition?E.rs:void 0):void 0].filter((function(t){return t})).join(" ")}),[]),N=(0,n.useCallback)((function(t){var e=t.getSelection(),i=t;i=f.ZP.preserveBlockInlineStyles(i,P),i=(i=f.ZP.applySelection(i,f.ZP.reverseSelection(e))).getSelection().isCollapsed()?i:f.ZP.applySelection(i,f.ZP.fixSelection(i)),Modernizr.safari&&!e.isCollapsed()&&(i=f.ZP.applySelection(i,i.getSelection(),!1)),I(i)}),[P]),H=(0,n.useCallback)((function(t){var e=(0,Z.Bg)({action:t,editorState:P,workspace:g});if(e){var i=e.editorState,n=e.status;return I(i),n}return"not-handled"}),[P,g]);return(0,w.jsx)(k,{ref:z,isEditMode:p,bgColor:c.bgColor,selectionColor:c.selectionColor,textDirection:c.textDirection||C.m5.LTR,autosize:c.autosize,columns:c.columns,verticalAlign:c.verticalAlign,useBaseline:null===(e=c.flags)||void 0===e?void 0:e.baseline,shouldShowSelectionBorder:B,editorState:P,disableSelectionHighlight:b,blockStyleFn:U,onChange:N,readOnly:!p||!m||i||M,keyBindingFn:Z.ul,handleKeyCommand:H})},U=function(t){var e=t.size,i=t.height,r=t.width,o=t.onClick;return(0,w.jsx)(n.Fragment,null,(0,w.jsx)(d.Box,{position:"absolute",top:0,left:0,onClick:o,userSelect:"none",style:{width:r+2*e,height:e}}),(0,w.jsx)(d.Box,{position:"absolute",bottom:0,left:0,onClick:o,userSelect:"none",style:{width:r+2*e,height:e}}),(0,w.jsx)(d.Box,{position:"absolute",top:0,left:0,width:e,onClick:o,userSelect:"none",style:{width:e,height:i+2*e}}),(0,w.jsx)(d.Box,{position:"absolute",top:0,right:0,onClick:o,userSelect:"none",style:{width:e,height:i+2*e}}))},N=n.memo(U,c()),H=500,G=function(){var t,e=(0,n.useContext)(_.x).model,i=e.useTextWidgetStore,r=e.fontStyles,o=e.isResizing,s=e.leaveEditMode,c=e.isEditMode,l=e.canControlsBeClosed,u=e.onIframeLoaded,h=R(i({partial:!1}),1)[0],f=(0,n.useContext)(a.BackboneContext).model,g=f.w,m=f.h,v=R((0,n.useState)(!1),2),y=v[0],S=v[1];(0,n.useEffect)((function(){(y||o)&&M.default.getFocusBack()}),[y,o]);var P=(0,n.useRef)(null),k=(0,n.useMemo)((function(){var t={position:"absolute",top:-1*H,left:-1*H,width:"calc(100% + ".concat(2*H,"px)"),height:"calc(100% + ".concat(2*H,"px)")};return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?D(Object(i),!0).forEach((function(e){$(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({display:c?void 0:"none",pointerEvents:!c||y||o?"none":void 0,userSelect:"none"},t)}),[H,c,y,o]),C=(0,n.useCallback)((function(){l()&&s()}),[l,s]),x=R((0,n.useState)(!1),2),O=x[0],Z=x[1],E=R((0,n.useState)(!1),2),A=E[0],L=E[1];(0,n.useEffect)((function(){c&&!O&&Z(!0)}),[c]);var F=R((0,n.useState)(!1),2),B=F[0],z=F[1],U=(0,n.useRef)(null),G=function(){var t,e,i=(null===(t=P.current)||void 0===t||null===(e=t.contentDocument)||void 0===e?void 0:e.hasFocus())||!1;if(i){var n,r,o=null===(n=P.current)||void 0===n||null===(r=n.contentDocument)||void 0===r?void 0:r.getSelection();o&&o.anchorNode&&o.focusNode&&(U.current={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset})}z(i)};return(0,n.useEffect)((function(){var t,e;return null===(t=P.current)||void 0===t||null===(e=t.contentDocument)||void 0===e||e.addEventListener("selectionchange",G),function(){var t,e;null===(t=P.current)||void 0===t||null===(e=t.contentDocument)||void 0===e||e.removeEventListener("selectionchange",G)}}),[null===(t=P.current)||void 0===t?void 0:t.contentDocument]),(0,n.useEffect)((function(){if(Modernizr.safari){var t=h.getSelection(),e=t.getHasFocus();if(!B&&e&&!t.isCollapsed()){var i,n,r=null===(i=P.current)||void 0===i||null===(n=i.contentWindow)||void 0===n?void 0:n.getSelection();r&&U.current&&r.setBaseAndExtent(U.current.anchorNode,U.current.anchorOffset,U.current.focusNode,U.current.focusOffset)}}}),[h,B]),(0,w.jsx)(W.Provider,{value:{ref:P}},(0,w.jsx)(T.j.Provider,{value:{isPaddingsEnabled:y,setIsPaddingsEnabled:S}},(0,w.jsx)(d.Box,{position:"relative",width:"calc(var(--workspace-inverse-zoom) * 100%)",height:"calc(var(--workspace-inverse-zoom) * 100%)",zoom:"var(--workspace-inverse-zoom)",transform:"scale(var(--workspace-zoom))",transformOrigin:"left top"},O&&(0,w.jsx)(b.ZP,{ref:P,style:k,head:(0,w.jsx)(n.Fragment,null,(0,w.jsx)("style",null,"\n                      body {\n                        margin: 0;\n                        height: 100vh;\n                        width: 100vw;\n                        overflow: hidden;\n                        box-sizing: border-box;\n                        padding: ".concat(H,"px ").concat(H-p.E,"px;\n                      }\n\n                      ol, ul {\n                        padding: 0;\n                        margin: 0;\n                      }\n                  ")),r.map((function(t,e){return"style"===t.tag?(0,w.jsx)("style",{key:e},"".concat(t.style)):"link"===t.tag?(0,w.jsx)("link",{key:e,rel:"stylesheet",type:t.type,href:t.href}):void 0}))),contentDidMount:function(){u(),L(!0)}},(0,w.jsx)(I.$Y,{mode:"constructor"}),c&&(0,w.jsx)(N,{size:H,height:m,width:g,onClick:C}),(0,w.jsx)(V,null)),c&&A?null:(0,w.jsx)(d.Box,{height:"100%",width:"100%",position:"absolute",top:0,left:0,pointerEvents:"none",userSelect:"none"},(0,w.jsx)(j.Z,{editorState:h,isConstructorPreview:!0})))))}},1318:function(t,e,i){"use strict";i.d(e,{j:function(){return P}});var n,r=i(353),o=i(601),a=i(654),s=i(652),c=i(1319),l=i(683),d=i(1031),u=i(1320),h=i(1074),p=i(1028),f=i(661),g=i(651);function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var P=(0,r.createContext)({}),k=43,C=r.memo((function(t){var e,i,u=t.isActive,m=t.isSmall,v=t.from,b=t.value,y=t.position,S=t.onChange,P=t.disabled,C=window.RM.constructorRouter.zoom.getZoom(),x=(0,p.Z)("Shift"),O="top"===v||"bottom"===v,T=m&&!O,_=(0,r.useRef)(null),Z=(0,h.useResizeEffect)(_),I=Z.width,M=Z.height,E=(0,r.useMemo)((function(){return(O?I:M)*C}),[O,I,M,C]),j=_&&_.current?_.current.getBoundingClientRect():{x:0,y:0},A=(0,r.useMemo)((function(){return T?10:"top"===v?"22px 22px 0 0":"right"===v?"0 22px 22px 0":"left"===v?"22px 0 0 22px":"0 0 22px 22px"}),[T,v]),L=(0,r.useMemo)((function(){var t=E-k,e=y*C-21.5;return Math.max(0,e<=t?e:t)}),[y,E,C]),D=(0,r.useMemo)((function(){return{height:T?20:k,width:T?38:O?k:47}}),[T,k,O]),$=D.height,F=D.width,R=(0,r.useContext)(c.TextConstructorFrameContext).ref,B=R&&R.current?R.current.getBoundingClientRect():{x:0,y:0},z=(0,r.useMemo)((function(){return document.getElementById("paddings-input-portal")}),[]),W=(0,g.jsx)(l.Box,{display:"flex",position:"relative",justifyContent:T?"flex-start":"flex-end",flexDirection:O?"row":"column",style:w({position:"absolute"},O?{left:L+B.x+j.x*C,top:B.y+j.y*C-("top"===v?$:0)}:{top:L+B.y+j.y*C,left:B.x+j.x*C-("left"===v?F:0)})},(0,g.jsx)(l.Box,{display:"flex",backgroundColor:"blue",width:F,height:$,borderRadius:A,alignItems:"center",justifyContent:"center",zoom:"var(--workspace-inverse-zoom)",transform:"scale(var(--workspace-zoom))",transformOrigin:"left top"},(0,g.jsx)(d.default,{fontSize:14,height:18,fontWeight:600,color:"white",placeholder:"0",type:"number",value:b,textAlign:"center",min:0,step:x?10:1,onChange:function(t){return S(parseInt(t.target.value))},autoFocus:!1,disabled:P,css:(0,f.css)(n||(e=["\n            user-select: none !important;\n            appearance: textfield;\n            padding: 0 !important;\n            border: none !important;\n\n            &::-webkit-outer-spin-button,\n            &::-webkit-inner-spin-button {\n              appearance: none;\n            }\n          "],i||(i=e.slice(0)),n=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(i)}}))))})));return(0,g.jsx)(a.C,{value:(0,s.default)({key:"padding-frame-theme",container:document.head})},(0,g.jsx)(r.Fragment,null,(0,g.jsx)(l.Box,{ref:_,width:"100%",height:"100%"}),u&&z?o.createPortal(W,z):null))})),x=r.memo((function(t){var e=t.from,i=t.isChanged,n=t.onChange,o=t.value,a=void 0===o?0:o,s=t.isSmall,c=t.marginBottom,d=void 0===c?0:c,h=t.marginLeft,p=void 0===h?0:h,f=t.marginRight,b=void 0===f?0:f,y=t.marginTop,w=void 0===y?0:y,P=t.onStart,k=t.onStop,x=(0,r.useContext)(u.ob),O=x&&x.window,T=function(t,e){var i=e;O&&O.addEventListener(t,i),window.addEventListener(t,i)},_=function(t,e){var i=e;O&&O.removeEventListener&&O.removeEventListener(t,i),window.removeEventListener(t,i)},Z="top"===e||"bottom"===e,I="bottom"===e,M=v((0,r.useState)(!1),2),E=M[0],j=M[1],A=v((0,r.useState)(!1),2),L=A[0],D=A[1],$=v((0,r.useState)(!1),2),F=$[0],R=$[1],B=v((0,r.useState)(0),2),z=B[0],W=B[1],V=(0,r.useRef)(null),U=v((0,r.useState)(0),2),N=U[0],H=U[1],G=v((0,r.useState)(0),2),K=G[0],q=G[1],Y=(0,r.useRef)(!1).current,J=function(t){Y=!0;var i=Z?t.screenY:t.screenX,r="right"===e?z-i:i-z;n(Math.max(0,a+r)),q(Math.max(0,(Z?t.clientX:t.clientY)-N))},X=function(){D(!1),Y&&(R(!1),k&&k(e)),Y=!1};(0,r.useEffect)((function(){return L?(T("mousemove",J),T("mouseup",X)):(_("mousemove",J),_("mouseup",X)),function(){_("mousemove",J),_("mouseup",X)}}),[L]);var Q=function(t){var i=document.getElementById("paddings-input-portal"),n=t.target;i&&!i.contains(n)&&V.current&&!V.current.contains(n)&&(R(!1),D(!1),X(),k&&k(e))},tt=function(t){"Escape"===t.key&&(R(!1),D(!1),X(),k&&k(e))};(0,r.useEffect)((function(){return L||(F?(T("click",Q),T("keyup",tt)):(_("click",Q),_("keyup",tt),k&&k(e))),function(){_("click",Q),_("keyup",tt)}}),[L,F]);var et=(0,r.useMemo)((function(){return I?E||L?1:0:E||L?2:1}),[L,E]),it=(0,r.useMemo)((function(){return Z?"calc(100% - ".concat(p+b,"px)"):"".concat(et,"px")}),[et,p,b]),nt=(0,r.useMemo)((function(){return Z?"".concat(et,"px"):"calc(100% - ".concat(d+w,"px)")}),[et,d,w]),rt=(0,r.useMemo)((function(){return Z?0+p:void 0}),[p]),ot=(0,r.useMemo)((function(){return Z?void 0:0+w}),[w]),at=i?"tomato":"blue",st=(0,r.useMemo)((function(){return{width:Z?"100%":a,height:Z?a:"calc(100% - ".concat(w+d,"px)"),marginTop:Z?0:w}}),[Z,a,w,d]),ct=(0,r.useMemo)((function(){return{width:I?"100%":Z?it:"".concat(2,"px"),height:I||Z?2:nt,left:I?0:rt,top:ot}}),[I,Z,it,nt,rt,ot]);return(0,g.jsx)(l.Box,m({ref:V,position:"absolute",width:Z?"100%":void 0,height:Z?void 0:"100%",left:Z?0:void 0,top:Z?void 0:0},S({},e,0)),(0,g.jsx)(l.Box,{backgroundColor:"rgba(28, 222, 180, 0.18)",style:st}),(0,g.jsx)(l.Box,m({position:"absolute",onMouseEnter:function(){return j(!0)},onMouseLeave:function(){return j(!1)},onMouseDown:function(t){var i=document.getElementById("paddings-input-portal");if(!i||!i.contains(t.target)){if(!F){var n=t.target.getBoundingClientRect(),r=Z?n.x:n.y;H(r),q(Math.max(0,(Z?t.clientX:t.clientY)-r)),R(!0)}W(Z?t.screenY:t.screenX),D(!0),P&&P(e)}}},S({},e,I?0:"100%"),{cursor:Z?"row-resize":"col-resize",style:ct}),(0,g.jsx)(l.Box,{position:"absolute",width:Z?"100%":void 0,height:Z?void 0:"100%",bottom:"top"===e?"100%":void 0,top:"bottom"===e?"100%":void 0,left:"right"===e?"100%":void 0,right:"left"===e?"100%":void 0},(0,g.jsx)(C,{isSmall:s,position:K,isActive:F,onChange:n,value:a,from:e,disabled:L})),(0,g.jsx)(l.Box,{display:"flex",width:"100%",height:"100%",alignItems:"top"===e?"flex-start":"flex-end",justifyContent:"right"===e?"flex-end":void 0},(0,g.jsx)(l.Box,{style:{width:Z?"100%":"".concat(et,"px"),height:Z?"".concat(et,"px"):"100%",backgroundColor:E||L||I||a&&a>0?at:"transparent"}}))),I&&(0,g.jsx)(l.Box,{position:"absolute",backgroundColor:a&&a>1?at:"transparent",top:0,height:"1px",style:{left:rt,width:it}}))}));e.Z=function(t){var e=t.editable,i=t.children,n=t.left,o=t.top,a=t.right,s=t.bottom,c=t.onChange,d=t.changedPaddings,u=void 0===d?{}:d,p=(0,r.useContext)(P),f=p.isPaddingsEnabled,m=p.setIsPaddingsEnabled,v=(0,r.useRef)(null).current,b=(0,r.useCallback)((function(t){v=t,m(!0)}),[]),y=(0,r.useCallback)((function(t){v&&v!==t||m(!1)}),[v]),w=(0,r.useRef)(null),S=(0,h.useResizeEffect)(w).height,C=(0,r.useMemo)((function(){return S<k}),[S]),O=(0,r.useCallback)((function(t){return c({top:t})}),[c]),T=(0,r.useCallback)((function(t){return c({left:t})}),[c]),_=(0,r.useCallback)((function(t){return c({right:t})}),[c]),Z=(0,r.useCallback)((function(t){return c({bottom:t})}),[c]);return(0,g.jsx)(l.Box,{position:"relative",style:{paddingTop:o,paddingLeft:n,paddingRight:a,paddingBottom:s}},e&&(0,g.jsx)(r.Fragment,null,(0,g.jsx)(l.Box,{contentEditable:!1,display:"inline",opacity:e?1:0,visibility:e?"visible":"hidden",userSelect:"none"},(0,g.jsx)(x,{isSmall:C,isChanged:u.top,from:"top",value:o,marginLeft:n,marginRight:a,onChange:O,onStart:b,onStop:y}),(0,g.jsx)(x,{isSmall:C,isChanged:u.left,from:"left",value:n,marginTop:o,marginBottom:s,onChange:T,onStart:b,onStop:y}),(0,g.jsx)(x,{isSmall:C,isChanged:u.right,from:"right",value:a,marginTop:o,marginBottom:s,onChange:_,onStart:b,onStop:y}),(0,g.jsx)(x,{isSmall:C,isChanged:u.bottom,from:"bottom",value:s,marginLeft:n,marginRight:a,onChange:Z,onStart:b,onStop:y}))),(0,g.jsx)(l.Box,{ref:w,className:"editor-block-wrapper",userSelect:f?"none":void 0},i))}},970:function(t,e,i){"use strict";i.d(e,{Z:function(){return N}});var n=i(353),r=i(441),o=i.n(r),a=i(446),s=i(695),c=i.n(s),l=i(697),d=i(699),u=i(352),h=i(623),p=i(971),f=i(442),g=i(972),m=i(694),v=i(681),b=i(696),y=i(650);function w(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var P,k=function t(e,i){if(i&&"function"==typeof i){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r],i);i(e)}},C=function(t){var e,i=function(t){var e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t,e};if("undefined"!=typeof DOMParser){var n=new DOMParser;try{null!==(e=n.parseFromString(t,"text/html"))&&null!==e.body||(e=i(t))}catch(n){e=i(t)}}else e=i(t);return e},x=function(t,e){var i=Array.from(t.childNodes).reduce((function(t,i){return i.nodeName.toLowerCase()===e&&t[t.length-1]&&t[t.length-1].some((function(t){return t.nodeName.toLowerCase()===e}))?(t[t.length-1].push(i),t):[].concat(w(t),[[i]])}),[]).reduce((function(t,i){if(i.some((function(t){return t.nodeName.toLowerCase()===e}))){var n=document.createElement(e),r="ul"===e?y.dY.Unordered:y.dY.Ordered;return n.setAttribute("class",r),"ol"===e&&(n.style.counterReset=y.Hf),i.forEach((function(t){if(t.firstChild){var e,i=t.firstChild.cloneNode(!0),o=null===(e=t.getAttribute("class"))||void 0===e?void 0:e.replace(r,""),a=t.getAttribute("style");o&&i.setAttribute("class",o),a&&i.setAttribute("style",a),n.appendChild(i)}})),[].concat(w(t),[n])}return[].concat(w(t),w(i))}),[]).reduce((function(t,e){return"".concat(t).concat(e.outerHTML)}),"");t.innerHTML=i},O=function(t){k(t,(function(t){if("span"===t.nodeName.toLowerCase()&&1===t.childNodes.length&&t.firstChild&&"span"===t.firstChild.nodeName.toLowerCase()&&!t.firstChild.getAttribute("data-shadow-interactions")){var e=t,i=e.firstChild,n=[e.getAttribute("style"),i.getAttribute("style")];e.setAttribute("style",n.join(";")),e.innerHTML=t.firstChild.innerHTML}}))},T=function(t){k(t,(function(t){if("a"===t.nodeName.toLowerCase()&&t.childNodes.length>1){var e=Array.from(t.childNodes).reduce((function(t,e){if("span"===e.nodeName.toLowerCase()&&e.style.fontSize){var i=parseInt(e.style.fontSize);return i>t?i:t}return t}),0);e>0&&(t.style.fontSize="".concat(e,"px"))}}))},_=function(t){t.querySelectorAll("li").forEach((function(t){if(t.childNodes.length){var e=document.createElement("span");e.innerHTML=t.innerHTML,t.innerHTML=e.outerHTML,e.remove()}}))},Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{mergeSpans:!0},i=C(t);return e.mergeSpans&&O(i.body),x(i.body,"ol"),x(i.body,"ul"),_(i.body),T(i.body),i.body.innerHTML},I=i(644),M=i(308),E=i(342),j=i(624),A=i(635),L=i(661),D=i(651);function $(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function F(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function R(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){if(t){if("string"==typeof t)return W(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?W(t,e):void 0}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var V=function(t){var e,i,r,a=t.model,s=t.scale,l=t.currentPage,p=t.viewport,w=t.viewerOptions,S=t.editorState,k=t.hasParentBlock,C=(0,n.useMemo)((function(){return S.getCurrentContent()}),[S]),x=null===(e=a.flags)||void 0===e?void 0:e.calculatedLineHeight,O=null===(i=a.flags)||void 0===i?void 0:i.newListPosition,T=B((0,I.sJ)(),1)[0],_=(0,n.useContext)(b.T).model,z=(0,n.useCallback)((function(t){var e=[].concat(R(T.global),R(T.project)).find((function(e){return e.name===t}));return e?e.tag:M.Z.AVAILABLE_TEXT_TAGS[0]}),[T]),W=(0,n.useMemo)((function(){return(0,f.cn)({styleToHTML:function(t){var e=o().OrderedSet([t]),i=(0,h.b)(e);if(Object.keys(i).length){if(t.startsWith(h.f.TextShadow)){var n=u.ZP.getCurrentInlineStylesFromString(t,h.f.TextShadow);if(n.length){var r=(0,A.DX)(n),a=r.shadow,s=r.isShadowEnabled,c=r.interactions;if(s&&c&&c!==A.WQ.None)return(0,D.jsx)("span",{"data-shadow-interactions":c,"data-shadow-x":a.x,"data-shadow-y":a.y,"data-shadow-blur":a.blur,"data-shadow-color":a.color,"data-shadow-ratio":a.ratio,"data-shadow-duration":a.duration,style:i})}}return(0,D.jsx)("span",{style:i})}},blockToHTML:function(t){var e,i,n=C.getBlockForKey(t.key),r=t.data,o=r.textStyle,s=r.align,c=r.lineHeight,l=r.textIndent,d=r.paddings,h=void 0===d?{}:d,p=r.listStyle,f=(0,y.nq)(t.type)?p||(O?y.rs:void 0):void 0,g=["view-mode",t.type,o,s,f].filter((function(t){return t})).join(" "),m=x?u.ZP.getBaseLineHeightStyle({block:n,width:a.w}):{},v=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?$(Object(i),!0).forEach((function(e){F(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({textIndent:l,lineHeight:c?"".concat(c,"px"):void 0,paddingLeft:h.left,paddingRight:h.right,paddingTop:h.top,paddingBottom:h.bottom},m);if((0,y.nq)(t.type)){var b="";if(!(0,y.XZ)({block:n})){var w=(0,j.gn)(u.ZP.getDefaultListTextColor(n)),S=w.r,k=w.g,T=w.b,_=w.a;b="rgba(".concat(S,", ").concat(k,", ").concat(T,", ").concat(_,")")}return(0,D.jsx)(y.iZ,{type:t.type,className:g,style:v,css:(0,L.css)(P||(e=["\n                  // Дефолтный цвет для списков\n                  &:before {\n                    ","\n                  }\n                "],i||(i=e.slice(0)),P=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(i)}}))),b?"color: ".concat(b,";"):"")})}var Z=z(o),I={className:g,style:v};return t.text||t.entityRanges&&t.entityRanges.length?(0,D.jsx)(Z,I):(0,D.jsx)(Z,I,(0,D.jsx)("br",null))},entityToHTML:function(t,e){var i=e;return t.type===m.kM?(0,D.jsx)(m.rU,{isGlobal:a.is_global,isAbove:a.is_above,page:null==_?void 0:_.page,mag:null==_?void 0:_.mag,currentPageNum:null==l?void 0:l.num,data:t.data,insideParentBlock:k},i):t.type===v.b3?(0,D.jsx)("br",null):i}})(C)}),[C,l,null==_?void 0:_.mag,null==_?void 0:_.page,z,a.is_above,a.is_global,a.w,x]);return(0,D.jsx)(g.Z,{bgColor:a.bgColor,textDirection:a.textDirection||d.m5.LTR,autosize:a.autosize,columns:a.columns,verticalAlign:a.verticalAlign,scale:s,viewport:p||E.sJ.Default,viewerOptions:w,useBaseline:null===(r=a.flags)||void 0===r?void 0:r.baseline,selectionColor:a.selectionColor},(0,D.jsx)("div",{className:"text-viewer",dangerouslySetInnerHTML:{__html:c().sanitize(Z(W,{mergeSpans:!0}),{ALLOW_UNKNOWN_PROTOCOLS:!0,ADD_ATTR:["target"]})}}))},U=n.memo(V,(function(t,e){var i,n,r,o,a,s;return e.scale===t.scale&&(!e.isConstructorPreview&&(null===(i=e.model)||void 0===i||!i.is_above||!(null===(n=t.currentPage)||void 0===n||!n.num||null!==(r=e.pagesLinks)&&void 0!==r&&r.length&&null!==(o=e.currentPage)&&void 0!==o&&o.num&&null!==(a=t.currentPage)&&void 0!==a&&a.num&&(e.pagesLinks.includes(e.currentPage.num)||e.pagesLinks.includes(null===(s=t.currentPage)||void 0===s?void 0:s.num)))))})),N=function(t){var e=t.editorState,i=t.isConstructorPreview,r=(0,n.useContext)(b.T).model,o=(0,n.useContext)(l.BackboneContext).model,s=o.has_parent,c=e||a.EditorState.createWithContent(u.ZP.importTextContent(o),p.t),h=(0,n.useMemo)((function(){if(window.RM.constructorRouter&&!window.RM.constructorRouter.preview)return[];var t=u.ZP.getEntityMap(c.getCurrentContent(),m.kM);return Object.keys(t).length?Object.keys(t).filter((function(e){var i;return(null===(i=t[e].data)||void 0===i?void 0:i.type)===d.dr.Page})).map((function(e){var i;return null===(i=t[e].data)||void 0===i?void 0:i.pageNum})):[]}),[c]);return(0,D.jsx)(U,{model:o,editorState:c,scale:null==r?void 0:r.scale,currentPage:null==r?void 0:r.currentPage,viewport:null==r?void 0:r.viewport,viewerOptions:null==r?void 0:r.viewerOptions,isConstructorPreview:i,pagesLinks:h,hasParentBlock:s})}},696:function(t,e,i){"use strict";i.d(e,{x:function(){return r},T:function(){return o}});var n=i(353),r=n.createContext({}),o=n.createContext({})},624:function(t,e,i){"use strict";i.d(e,{vx:function(){return s},gn:function(){return c},rW:function(){return d},tZ:function(){return u},Wf:function(){return h},vK:function(){return p},eO:function(){return f}});var n=i(625),r=i.n(n);i(634),i(308);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var s=function(t){var e=Number(t).toString(16);return e.length<2?"0".concat(e):e},c=function(t){var e=t;if(!e)return{r:0,g:0,b:0,a:1};"#"===e[0]&&(e=e.slice(1));var i=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),o=parseInt(e.substring(6,8),16)/100;return{r:i,g:n,b:r,a:void 0===o||o>1?1:o<0?0:o}},l=function(t){try{var e=t.replace("#",""),i=o(r()("#".concat(e)).rgb().array(),3);return{r:i[0],g:i[1],b:i[2]}}catch(t){return{r:0,g:0,b:0}}},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{var i=l(t),n=i.r,r=i.g,o=i.b;return{r:n,g:r,b:o,a:e}}catch(t){return{r:0,g:0,b:0,a:e}}},u=function(t){var e=s(parseInt((100*t.a).toFixed(0))),i=r()({h:t.h,s:t.s,v:t.v}).hex().replace("#","");return"".concat(i).concat(e)},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{var i=t;"#"===t[0]&&(i=i.slice(1));var n=s(e);return"".concat(i).concat(n)}catch(t){return"00000064"}},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{var i=t.replace("#",""),n=r()("#".concat(i)).hsv().array(),a=o(n,3),s=a[0],c=a[1],l=a[2];return{h:s,s:c,v:l,a:e}}catch(t){return{h:0,s:0,v:0,a:e||1}}};function f(t){var e=function(t){if("string"!=typeof t)return t;var e=t;return"#"===e[0]&&(e=e.slice(1)),e.substring(0,6)}(t),i=l(e),n=i.r,r=i.g,o=i.b;return Math.sqrt(n*n*.299+r*r*.587+o*o*.114)>127.5}},1335:function(t,e,i){"use strict";i.d(e,{qX:function(){return g},OG:function(){return m}});var n=i(638),r=i(344),o=i(1278),a=i(624),s=i(339);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function u(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function p(t){var e=t.widget,i=t.width,n=t.height,r=o.Z.getLambdaUrl(e.picture,{width:i,height:n,cropH:e.cropH,cropW:e.cropW,cropX:e.cropX,cropY:e.cropY}),a=e.element.querySelector("img");return{previewImgSrc:a&&(a.currentSrc||a.src)||r,imgSrc:r}}var f=function(t){return t.type===n.l9.picture};function g(t){var e,i=[],n=u(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(f(r))if(r.lightbox)i.push(l(l({},r),{},{element:r.$el.get(0)}));else{var o=v(r.preview_enabled,r.preview_overlay_color);i.push(l(l(l({},r),o),{},{element:r.$el.get(0)}))}}}catch(t){n.e(t)}finally{n.f()}if(!i.length)return[];var a,s=[],c=u(function(t){return t.sort((function(t,e){return Math.hypot(t.x,t.y)-Math.hypot(e.x,e.y)}))}(i));try{for(c.s();!(a=c.n()).done;){var d,h,g=a.value,m=g.h/g.w,b=window.innerHeight/m,y=b*m,w=p({widget:g,width:b,height:y}),S=w.imgSrc,P=w.previewImgSrc;s.push({_id:g._id,color:(null===(d=g.lightbox)||void 0===d?void 0:d.color)||"",gallery:(null===(h=g.lightbox)||void 0===h?void 0:h.gallery)||!1,height:y,width:b,imgSrc:S,previewImgSrc:P})}}catch(t){c.e(t)}finally{c.f()}return s}function m(t){var e=r.Z.isOn(t.viewport,t.viewportWidth,t.viewerOptions)&&r.Z.isCSSZoom()?r.Z.getRatio(t.viewportWidth):1,i=t.widgetElement.getBoundingClientRect(),n={top:i.top,left:i.left,height:i.height,width:i.width};if(Modernizr.safari){var o=window.scrollY;n.top=n.top+(o-o/e)}return{top:Number(n.top+.5*n.height)*e,left:Number(n.left+.5*n.width)*e,height:n.height*e,width:n.width*e}}function v(t,e){if(void 0!==t||void 0!==e){var i=e?(s.default.rgba2hex(e)||"").slice(1):"000000",n=i&&s.default.rgba2alpha(e)||.6;return{preview_enabled:void 0,preview_overlay_color:void 0,lightbox:{enabled:t,color:(0,a.Wf)(i,100*n)}}}}},1418:function(t,e,i){"use strict";function n(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw a}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}i.d(e,{x:function(){return o}});function o(){var t="ontouchstart"in document.documentElement?"touchmove":"mousemove",e={isStarted:!1,isDestroyed:!1,isTouchEvent:!1,cursorPosition:{x:0,y:0},cursorPagePosition:{x:0,y:0}},i=new Set;function r(t){e.isTouchEvent=function(t){return"touchmove"===t.type}(t),e.cursorPosition={x:e.isTouchEvent?t.touches[0].clientX:t.clientX,y:e.isTouchEvent?t.touches[0].clientY:t.clientY},e.cursorPagePosition={x:e.isTouchEvent?t.touches[0].pageX:t.pageX,y:e.isTouchEvent?t.touches[0].pageY:t.pageY};var r,o=n(i);try{for(o.s();!(r=o.n()).done;){r.value.eventHandler({state:e,originalEvent:t})}}catch(t){o.e(t)}finally{o.f()}}return{start:function(){e.isStarted||e.isDestroyed||!i.size||(e.isStarted=!0,window.addEventListener(t,r,{passive:"mousemove"===t}))},stop:function(){window.removeEventListener(t,r),e.cursorPosition={x:0,y:0},e.cursorPagePosition={x:0,y:0},e.isStarted=!1},destroy:function(){this.stop(),e.isDestroyed=!0},on:function(t){i.add(t),e.isStarted||this.start()},off:function(t){i.delete(t),e.isStarted&&!i.size&&this.stop()}}}},635:function(t,e,i){"use strict";i.d(e,{WQ:function(){return n},Uh:function(){return y},dI:function(){return S},$X:function(){return P},DX:function(){return k}});var n,r=i(308),o=i(636),a=i(341),s=i(343),c=i(624),l=i(623),d=i(637);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(t){t.None="none",t.OnHover="hover",t.OnScroll="scroll",t.FadeOnHover="fade-hover"}(n||(n={}));var v=function(t){return"touchmove"===t.type};function b(t){var e=t.cursor,i=t.rect,n=t.scale,r=void 0===n?1:n;return!(0===e.x&&0===e.y&&0===i.width&&0===i.height)&&i.x*r<=e.x&&e.x<=i.x*r+i.width*r&&i.y*r<=e.y&&e.y<=i.y*r+i.height*r}function y(t){var e=t.widgets,i=void 0===e?[]:e,c=t.page,u=t.scale,p=void 0===u?1:u,f="ontouchstart"in document.documentElement?"touchmove":"mousemove",y=i.filter((function(t){return void 0!==t.angle})).reduce((function(t,e){var i=(e.angle?-e.angle:0)*(Math.PI/180);return g(g({},t),{},m({},e._id,{cos:Math.cos(i),sin:Math.sin(i)}))}),{}),w={isDestroyed:!1,rafId:-1,cursorPosition:{x:0,y:0},lastCursorPosition:{x:0,y:0},screenCenter:0,pageTop:0,scrollTop:0,lastScrollTop:null,renderState:new Proxy({status:"idle",canUseTransition:!0},{set:function(t,e,i){if("canUseTransition"===e)return t[e]=i,!0;if(i!==t[e])if(t[e]=i,"idle"===i&&!1===t.canUseTransition)setTimeout((function(){"idle"===w.renderState.status&&(w.renderState.canUseTransition=!0)}),100);else if("running"===i&&!0===t.canUseTransition){s.Z.getDistance(w.lastCursorPosition,w.cursorPosition)<200&&w.lastScrollTop===w.scrollTop?w.renderState.canUseTransition=!1:setTimeout((function(){"running"===w.renderState.status&&(w.renderState.canUseTransition=!1)}),100)}return!0}})};function S(){w.isDestroyed||(w.rafId=window.requestAnimationFrame((function(){var t=function(){var t=null===w.lastScrollTop||w.lastScrollTop!==w.scrollTop,e=s.Z.getDistance(w.lastCursorPosition,w.cursorPosition);return{isScrollMoved:t,isCursorMoved:e>0}}(),e=t.isCursorMoved,o=t.isScrollMoved;(e||o)&&function(){var t,e=w.cursorPosition,o={x:w.screenCenter,y:Math.abs(window.pageYOffset-w.pageTop)},a=function(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=h(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}(i);try{var s=function(){var i=t.value;if(i.isShadowEnabled&&i.shadow){var a=i.shadow.onScroll,s=i.shadow.onHover,c=i.shadow.fadeOnHover,l=a||s;if(l||c){var d="number"==typeof i.shadow.ratio?i.shadow.ratio:1,u=1===d?10:100*(1-d),h=i.$el.get(0).getBoundingClientRect();a&&i.fixed_position&&(h.y=h.y-w.scrollTop+w.pageTop);var f=a&&!s,m=l?O({blur:i.shadow.blur,rect:h,angleData:i.angle?y[i._id]:void 0,cursor:f?g(g({},o),{},{x:i.shadow.x}):e,vertical:f,flipH:i.flip_h,flipV:i.flip_v,shadowRatio:u}):{},v=b({cursor:e,rect:h,scale:p}),S=i.shadow.color||r.Z.shadow.initialShadow.color,k=c?v?S:"ffffff00":S;i.redrawShadow({shadow:g(g({},i.shadow),{},{color:k},m),transition:c?"filter ".concat(i.shadow.duration,"s"):void 0,useTransition:c||w.renderState.canUseTransition})}}else if("text"===i.type){var C=i.$el.get(0),x=C.getBoundingClientRect();C.querySelectorAll("[data-shadow-interactions]").forEach((function(t){var a=t.getAttribute("data-shadow-interactions"),s=a===n.OnScroll,c=a===n.OnHover,l=a===n.FadeOnHover,d=s||c;if(d||l){var u=s&&!c,h=parseInt(t.getAttribute("data-shadow-x")||"")||0,p=parseInt(t.getAttribute("data-shadow-y")||"")||0,f=parseInt(t.getAttribute("data-shadow-blur")||"")||0,m=parseFloat(t.getAttribute("data-shadow-ratio")||""),v="number"==typeof m?m:1,S=1===v?40:100*(1-v)+40,k=parseFloat(t.getAttribute("data-shadow-duration")||""),C="number"==typeof k?k:0,T=t.getAttribute("data-shadow-color")||r.Z.shadow.initialShadow.color,_=t.getBoundingClientRect(),Z=b({cursor:e,rect:_,scale:1});s&&i.fixed_position&&(x.y=x.y-w.scrollTop+w.pageTop);var I=l?Z?T:"ffffff00":T,M=d?O({blur:f,rect:x,angleData:i.angle?y[i._id]:void 0,cursor:u?g(g({},o),{},{x:h}):e,vertical:u,flipH:i.flip_h,flipV:i.flip_v,shadowRatio:S}):{x:h,y:p,blur:f,color:I},E=P(g({color:I},M)).textShadow;if(E){var j=t;j.style.textShadow=E,j.style.transition=l?"text-shadow ".concat(C,"s"):w.renderState.canUseTransition?"text-shadow .1s":""}}}))}};for(a.s();!(t=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}}(),(e||o)&&"running"!==w.renderState.status?w.renderState.status="running":e||o||"idle"===w.renderState.status||(w.renderState.status="idle"),w.lastScrollTop!==w.scrollTop&&(w.lastScrollTop=w.scrollTop),w.lastCursorPosition.x===w.cursorPosition.x&&w.lastCursorPosition.y===w.cursorPosition.y||(w.lastCursorPosition=g({},w.cursorPosition)),S()})))}function k(){var t=c.$el.offset();w.pageTop=(null==t?void 0:t.top)||0,w.screenCenter=window.innerWidth/2}function C(t){w.scrollTop=t}function x(t){w.cursorPosition={x:v(t)?t.touches[0].clientX:t.clientX,y:v(t)?t.touches[0].clientY:t.clientY}}function O(t){var e=t.blur,i=void 0===e?0:e,n=t.rect,r=t.angleData,a=t.cursor,c=t.vertical,l=t.flipH,d=t.flipV,u=t.shadowRatio,h=void 0===u?10:u,f={x:n.x*p+n.width*p/2,y:n.y*p+n.height*p/2},g={x:c?a.x:f.x-a.x,y:c?f.y:f.y-a.y};if(r){var m=r.cos,v=r.sin;g.x=g.x*m-g.y*v,g.y=g.x*v+g.y*m}l&&(g.x*=-1),d&&(g.y*=-1);var b=c?g.x:Math.round(g.x/h),y=Math.round(g.y/h),w=0;if(i>0){var S=c?g.y:s.Z.getDistance(f,a);w=Math.min(Math.round(o.Z.easeInQuint(S/500)),40)+i}return{x:b,y:y,blur:w}}function T(){var t,e;return(null==c||null===(t=c.mag)||void 0===t?void 0:t.viewOpts)&&(null==c||null===(e=c.mag)||void 0===e?void 0:e.viewOpts.viewertype)||"vertical"}return k(),C(window.pageYOffset),{start:function(){!w.isDestroyed&&i.some((function(t){return!!t.shadow||!(!(0,d.qp)(t)||!t.styles)&&t.styles.some((function(t){var e,i;return null===(e=t.inlineStyles)||void 0===e||null===(i=e.keys)||void 0===i?void 0:i.includes(l.f.TextShadow)}))}))&&(window.addEventListener(f,x),window.addEventListener("resize",k),"vertical"===T()?a.Z.listenTo(c.mag,"mag scroll",C):a.Z.listenTo(c,"page scroll",C),S())},stop:function(){window.cancelAnimationFrame(w.rafId),window.removeEventListener(f,x),window.removeEventListener("resize",k),"vertical"===T()?a.Z.stopListening(c.mag,"mag scroll",C):a.Z.stopListening(c,"page scroll",C)},destroy:function(){this.stop(),w.isDestroyed=!0}}}function w(t){var e=[t.x,t.y,t.blur].map((function(t){return"".concat(t||0,"px")})).join(" "),i=(0,c.gn)(t.color);return{shadowPosition:e,shadowColor:"rgba(".concat(i.r,", ").concat(i.g,", ").concat(i.b,", ").concat(i.a,")")}}function S(t){var e="visible";if(t){var i=w(t),n=i.shadowPosition,r=i.shadowColor,o="".concat(n," ").concat(r),a="drop-shadow(".concat(o,")");return{filter:a,WebkitFilter:a,backfaceVisibility:e,MozBackfaceVisibility:e,WebkitBackfaceVisibility:e}}return{filter:"",WebkitFilter:"",backfaceVisibility:e,MozBackfaceVisibility:e,WebkitBackfaceVisibility:e}}function P(t){var e=w(t),i=e.shadowPosition,n=e.shadowColor;return{textShadow:"".concat(i," ").concat(n)}}function k(t){var e=u(t,8),i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],d=e[7];return{isShadowEnabled:"true"===i,shadow:{x:parseInt(r),y:parseInt(o),blur:parseInt(a),color:s,onHover:c===n.OnHover,onScroll:c===n.OnScroll,fadeOnHover:c===n.FadeOnHover,ratio:void 0!==l?parseFloat(l):.5,duration:void 0!==d?parseFloat(d):.5},interactions:c}}},637:function(t,e,i){"use strict";i.d(e,{xL:function(){return r},Qg:function(){return o},qp:function(){return a}});var n=i(638),r=function(t){return t.type===n.l9.slideshow},o=function(t){return t.type===n.l9.hotspot},a=function(t){return t.type===n.l9.text}},992:function(t,e,i){"use strict";var n;i.d(e,{j:function(){return n}}),function(t){t.UpgradeAccountToUse="upgradeAccountToUse",t.EcommHasInvalidAddToCartWidget="ecommHasInvalidAddToCartWidget",t.WorkspaceAnimationTriggerRemoved="workspaceAnimationTriggerRemoved",t.WorkspaceAnimationTriggerUnlinked="workspaceAnimationTriggerUnlinked",t.BottomBlocksToMove="bottomBlocksToMove",t.EduTipUseViewportsIcon="eduTipUseViewportsIcon",t.EduTipOnDeleteMobileWidget="eduTipOnDeleteMobileWidget",t.EduTipUseBundleDragTriangle="eduTipUseBundleDragTriangle",t.EduTipUseShortcutToChangeSizes="eduTipUseShortcutToChangeSizes",t.EduTipUseShortcutToMoveText="eduTipUseShortcutToMoveText",t.EduTipUseShortcutToCopyAnimation="eduTipUseShortcutToCopyAnimation",t.EduTipUseShortcutToEnableGuides="eduTipUseShortcutToEnableGuides",t.EduTipUseShortcutToEnableSizes="eduTipUseShortcutToEnableSizes",t.EduTipUseFix="eduTipUseFix",t.EduTipUseAbovePages="eduTipUseAbovePages",t.EduTipUseStylesForText="eduTipUseStylesForText",t.EduTipUseShortcutForGroup="eduTipUseShortcutForGroup",t.EduTipSetNamesForWidgets="eduTipSetNamesForWidgets",t.EduTipUseResrtorePanel="eduTipUseResrtorePanel",t.EduTipUseCmdToSelectWidgets="eduTipUseCmdToSelectWidgets",t.TextWidgetPasteWithoutFormatting="textWidgetPasteWithoutFormatting"}(n||(n={}))},1094:function(t,e,i){"use strict";i.d(e,{s:function(){return u}});var n,r=i(353),o=i(661),a=i(683),s=i(339);var c,l,d=(0,o.styled)(a.Box)(n||(c=["\n  &[disabled] {\n    opacity: 0.4 !important;\n    pointer-events: all !important;\n    cursor: default !important;\n\n    * {\n      user-select: none !important;\n      pointer-events: none !important;\n      cursor: default !important;\n    }\n\n    input::selection {\n      background: transparent !important;\n    }\n  }\n"],l||(l=c.slice(0)),n=Object.freeze(Object.defineProperties(c,{raw:{value:Object.freeze(l)}}))));d.displayName="PermissionContainer";function u(t){return(0,r.useMemo)((function(){return s.default.isPermissionAllowed(t)}),[t])}},1093:function(t,e,i){"use strict";i.d(e,{s:function(){return n.s}});var n=i(1094)},697:function(t,e,i){"use strict";i.r(e),i.d(e,{BackboneContext:function(){return h},BackboneContextProvider:function(){return p},BackboneCollectionContextProvider:function(){return f},CreateContextProvider:function(){return g},renderReact:function(){return m}});var n=i(698),r=i(353),o=i(601),a=i(651);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h=r.createContext({}),p=function(t){var e=t.domElement,i=t.model,n=t.children,s=t.context,l=t.onDestroy,u={modelSet:function(t,e){return i.set(t,e)},modelUnset:function(t,e){return i.unset(t,e)},modelSave:function(t,e){return i.save(t,e)},destroy:function(){e&&(o.unmountComponentAtNode(e),e&&e.parentNode&&e.parentNode.removeChild(e),l&&l())}},h=d((0,r.useState)({model:i.attributes}),2),p=h[0],f=h[1],g=function(t){f(c(c({},p),{},{model:t.attributes}))};return(0,r.useEffect)((function(){return i.on("change",g),function(){i.off("change",g)}}),[i]),(0,a.jsx)(s.Provider,{value:c(c({},p),u)},n)},f=function(t){var e=t.domElement,i=t.collection,n=t.children,s=t.context,l={elementSet:function(t,e,n){var r=i.get(t);if(!r)throw new Error("Element not found");return r.set(e,n)},elementUnset:function(t,e,n){var r=i.get(t);if(!r)throw new Error("Element not found");return r.unset(e,n)},elementSave:function(t,e,n){var r=i.get(t);if(!r)throw new Error("Element not found");return r.save(e,n)},destroy:function(){e&&(o.unmountComponentAtNode(e),e&&e.parentNode&&e.parentNode.removeChild(e))}},u=d((0,r.useState)({collection:i.map((function(t){return t.attributes}))}),2),h=u[0],p=u[1],f=function(t){var e=t.get("_id");p((function(i){var n=i.collection.findIndex((function(t){return t._id===e}));if(-1===n)return{collection:i.collection};var r=i.collection.splice(0);return r[n]=t.attributes,{collection:r}}))},g=function(t){p((function(e){var i=e.collection.splice(0);return i.push(t.attributes),{collection:i}}))},m=function(t){var e=t.get("_id");p((function(t){var i=t.collection.findIndex((function(t){return t._id===e}));if(-1===i)return{collection:t.collection};var n=t.collection.splice(0);return n.splice(i,1),{collection:n}}))};return(0,r.useEffect)((function(){return i.on("change",f),i.on("add",g),i.on("remove",m),function(){i.off("change",f),i.off("add",g),i.on("off",m)}}),[i]),(0,a.jsx)(s.Provider,{value:c(c({},h),l)},n)},g=function(t){var e=t.model,i=t.collection,n=t.domElement,o=t.context,s=t.children,c=t.onDestroy;return e?(0,a.jsx)(p,{model:e,domElement:n,context:o,onDestroy:c},s):i?(0,a.jsx)(f,{collection:i,domElement:n,context:o},s):(0,a.jsx)(r.Fragment,null,s)},m=function(t){var e=t.component,i=t.domElement,r=t.model,s=t.onDestroy,c=t.onRenderComplete;r?o.render((0,a.jsx)(n.Z,null,(0,a.jsx)(g,{model:r,domElement:i,context:h,onDestroy:s},(0,a.jsx)(e,null))),i,c):o.render((0,a.jsx)(e,null),i)}},636:function(t,e){"use strict";e.Z={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},1278:function(t,e,i){"use strict";var n=i(308),r=i(1279);function o(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=Boolean("undefined"!=typeof window&&window.viewerConfig&&window.viewerConfig.homepageRewrite),d=Boolean("undefined"!=typeof window&&window.viewerConfig&&window.viewerConfig.isDownloadedSource)&&!l,u=function(t){return n.Z.allowedLambdaExt.includes(t)},h=function(t){return Boolean(!d&&t&&t.lambdaUrl&&u(t.type))},p=function(t,e){switch(e){case"video":case"slideshow":return Boolean(!d&&t&&t.url&&u(t.type));case"background":return Boolean(!d&&t&&(t.url||t.finalUrl)&&u(t.type));default:return Boolean(!d&&t&&(t.unscaledUrl||t.unscaledOptimizedUrl)&&u(t.type))}},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,i=t.height,r=t.cropX,o=t.cropY,a=t.cropW,s=t.cropH,c=t.originalW,l=void 0===c?9999:c,d=t.originalH,u=void 0===d?9999:d,h=t.quality,p=t.ext,f=t.scale,g=t.animationScale,m=t.isStretched,v=t.dpr,b=t.lossless,y=t.nearLossless,w=t.fit,S=void 0===w?"none":w,P=window.devicePixelRatio||n.Z.minDpr,k=v||(P<n.Z.minDpr?n.Z.minDpr:P),C=[],x=Math.max(f||1,1),O=g||1;if(!m&&e){var T=Math.min(Math.round(e*k*x*O),l);T<l&&C.push("w=".concat(T))}if(!m&&!e&&i){var _=Math.min(Math.round(i*k*x*O),u);_<u&&C.push("h=".concat(_))}if(h&&C.push("q=".concat(h)),p&&C.push("e=".concat(p)),b&&C.push("ll=true"),y&&C.push("nll=true"),"auto"===S&&e&&i){var Z=Math.min(Math.round(i*k*x*O),u);Z<u&&C.push("h=".concat(Z))}return void 0!==r&&void 0!==o&&a&&s&&(a!==l||s!==u)&&(C.push("cX=".concat(r)),C.push("cY=".concat(o)),C.push("cW=".concat(a)),C.push("cH=".concat(s))),C.length?"?".concat(C.join("&")):""},g=function(t){return t?"".concat(t.lambdaUrl||function(t){if(!t)return"";try{var e=new URL(t.unscaledUrl||t.url||t.unscaledOptimizedUrl||t.finalUrl||"");return"".concat(n.Z.readymag_lambda_host).concat(e.pathname)}catch(t){return""}}(t)):""},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";var i=s({},e);return p(t)&&!h(t)&&(i.cropX=void 0,i.cropY=void 0,i.cropW=e.originalW,i.cropH=e.originalH),r.Z.isSupported("webp")&&(i.ext="webp","png"===t.type&&(i.nearLossless=!0)),"".concat(g(t)).concat(f(i))};e.Z={allowedLambdaExt:u,useLambdaUrl:h,useLambdaUrlOldProjects:p,useLqipUrl:function(t){return Boolean(t&&t.lqipUrl||h(t))},getLambdaUrl:m,getOriginalLambdaUrl:g,getLambdaParams:f,getSrcset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.dprSet,n=void 0===i?[2,3]:i,r=o(e,["dprSet"]),a=[];(n||[]).forEach((function(e){var i;r.dpr=e;var n=m(t,r);n!==(null===(i=a[a.length-1])||void 0===i?void 0:i.url)&&a.push({dpr:e,url:n})}));var s=a.map((function(t){return"".concat(t.url," ").concat(t.dpr,"x")}));return s.length>1?s.join(", "):void 0},getLqipUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";if(t.lqipUrl)return t.lqipUrl;var i=s({dpr:1,width:n.Z.lqipWidth,quality:n.Z.lqipQuality},e);return m(t,i)},getThumbnailUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";var i=s({width:n.Z.THUMB_SIZE,height:n.Z.THUMB_SIZE,quality:n.Z.THUMB_QUALITY,fit:"auto"},e);return m(t,i)}}},645:function(t,e,i){"use strict";i.d(e,{M:function(){return a}});var n=i(353);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t){var e=t,i=[];function o(t){var n=e;e=t,i.forEach((function(e){var i=e.update,r=e.options;(!r||!r.shouldUpdate||!r.shouldUpdate(n,t))&&i()}))}return[function(t){var a,s=(a=r((0,n.useState)({}),2)[1],(0,n.useCallback)((function(){a({})}),[]));return(0,n.useEffect)((function(){var e={options:t,update:s};return i.push(e),function(){!function(t,e){var i=t.indexOf(e);if(-1===i)return;t.splice(i,1)}(i,e)}})),[e,o]},o,function(){return e}]}},1398:function(t,e,i){"use strict";i.r(e),i.d(e,{Widgets:function(){return d},preloadWidgets:function(){return p}});var n=i(322),r=i(1345),o=i(1350),a=i(1358),s=i(1371),c=i(1374);function l(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}var d={background:r.default,button:o.default,picture:a.default,shape:s.default,text:c.default},u={addtocart:"add-to-cart",ecommercecart:"e-commerce-cart",rmheader:"rm-header",rmfooter:"rm-footer"},h=["addtocart","audio","background","button","ecommercecart","facebook","form","picture","gmaps","hotspot","iframe","shape","slideshow","text","twitter","video","rmheader","rmfooter","shots"],p=function(){var t,e=(t=regeneratorRuntime.mark((function t(e){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.default.isEmpty(e)?h:n.default.intersection(h,n.default.difference(n.default.uniq(e),Object.keys(d))),t.next=3,Promise.all(r.map((function(t){return i(1399)("./"+(u[t]?u[t]:t))})));case 3:o=t.sent,n.default.each(r,(function(t,e){d[t]=o[e].default}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){l(o,n,r,a,s,"next",t)}function s(t){l(o,n,r,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()},1365:function(t,e,i){"use strict";i.r(e);i(353);var n=i(336),r=i.n(n),o=i(1340),a=i(697),s=i(696),c=i(344),l=i(352),d=i(971),u=i(446),h=i(970),p=i(651),f=o.Z.extend({antialiasRotation:!0,initialize:function(t,e,i){this.model=new(r().Model)(t),o.Z.prototype.initialize.apply(this,[t,e,i])},render:function(){var t=this;this.makeBox("widget-text-v3"),this.propsModel=new(r().Model)({page:this.page,currentPage:this.mag.currentPage||this.page,scale:this.page.scale,viewport:this.page.pageViewport,viewerOptions:this.mag.viewOpts,mag:this.mag});var e=u.EditorState.createWithContent(l.ZP.importTextContent(this.model),d.t);this.model["editorState"+this.page.pageViewport]=e;return(0,a.renderReact)({component:function(){return(0,p.jsx)(a.CreateContextProvider,{context:s.T,model:t.propsModel},(0,p.jsx)(h.Z,{editorState:e}))},domElement:this.$el[0],model:this.model}),this.rendered=!0,window.RM.screenshot&&!this.insideHotspot?this.waitForUsedFontsLoad():this.widgetIsLoaded(),this.seamlessFontsShow((function(){t.$el.removeClass("fonts-pending")}),(function(){t.$el.addClass("fonts-pending")})),c.Z.isDesktopDefault(this.mag.viewport)&&c.Z.isScaleLayout(this.mag.viewOpts)&&c.Z.isCSSZoom()&&this.listenTo(this.page,"resize",this.onScaleChange),this},hasFontsToLoad:function(){return!0},updatePage:function(t){var e=this.page;(!e||t&&e.num!==t.num)&&(this.page=t,this.propsModel.set({currentPage:t}))},onScaleChange:function(){this.propsModel.set({scale:this.page.scale})},waitForUsedFontsLoad:function(){this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.widgetIsLoaded):this.widgetIsLoaded()},destroy:function(){this.stopListening(this.page,"resize",this.onScaleChange);for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return o.Z.prototype.destroy.apply(this,e)}});e.default=f},1374:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return o}});var n=i(1365),r=i(1364);function o(t,e,i){switch(t.version){case 3:return new n.default(t,e,i);default:return new r.default(t,e,i)}}},638:function(t,e,i){"use strict";var n,r,o,a;i.d(e,{l9:function(){return n},us:function(){return a}}),function(t){t.text="text",t.video="video",t.audio="audio",t.background="background",t.picture="picture",t.slideshow="slideshow",t.twitter="twitter",t.facebook="facebook",t.shape="shape",t.iframe="iframe",t.gmaps="gmaps",t.button="button",t.hotspot="hotspot",t.form="form",t.ecommercecart="ecommercecart",t.addtocart="addtocart",t.rmheader="rmheader",t.rmfooter="rmfooter",t.shots="shots"}(n||(n={})),function(t){t.canInjectCode="can_inject_code",t.canExportPDF="can_export_pdf",t.canExportCode="can_export_code",t.canUseShots="can_use_shots",t.canUseForms="can_use_forms",t.canUseIFrame="can_use_iframe"}(r||(r={})),function(t){t.Vertical="vertical",t.Horizontal="horizontal"}(o||(o={})),function(t){t.viewer="viewer",t.constructor="constructor"}(a||(a={}))},351:function(t,e,i){"use strict";i.d(e,{f:function(){return r}});var n=i(322),r=function(t){return n.default.template(t.raw.join(""))}},1416:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-branding",a=(0,l.f)(n||(s=['\n\t<div class="rm-branding offscreen-initially">\n\t<% if (!hasCreateWithTemplateBtn) { %>\n\t\t<a class="rm-branding-button" href="<%="https://readymag.com" + \'?\' + utm_params%>" target="_blank"></a>\n\t<% } else { %>\n\t\t<a class="start-with-template" href="<%="https://readymag.com/start-with-template/" + numId%>" target="_blank"></a>\n\t<% } %>\n\t</div>\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1403:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-cart-sidebar",a=(0,l.f)(n||(s=['\n  <div id="cart-sidebar" class="cart-sidebar<% if (isViewer) { %> cart-in-viewer<% } %><% if (isMobile) { %> cart-is-mobile<% } %>">\n    <div class="close-button" data-alt="Close cart" data-alt-pos="bottom" data-alt-offset="9">\n      <div class="line-1"></div>\n      <div class="line-3"></div>\n    </div>\n\n    <div class="text-size-calc-container"></div>\n\n    <div class="cart-sidebar-wrapper">\n      <div class="cart-sidebar-tabs">\n\n        <div class="cart-sidebar-tab tab-items active">\n          <div class="sidebar-header">\n            <div class="sidebar-title">\n              <input\n                  type="text"\n                  class="cart-text-input cart-title-input"\n                  name="title"\n                  placeholder="Cart"\n                  maxlength="32"\n                  translate="no"\n                  autocomplete="off"\n                  autocorrect="off"\n                  spellcheck="false"\n                  <% if (isViewer) { %>readonly<% } %>\n                />\n            </div>\n            <div class="sidebar-settings-container"></div>\n          </div>\n\n          <div class="sidebar-body">\n            <div class="cart-items-list"></div>\n            <div class="sidebar-btn сheck-out-btn" data-tab="tab-inputs" aria-labelledby="cart-sidebar-checkout-button">\n              <input\n                type="text"\n                class="cart-text-input cart-checkout-input"\n                name="checkout"\n                placeholder="Check out"\n                maxlength="32"\n                translate="no"\n                autoComplete="off"\n                autocorrect="off"\n                spellcheck="false"\n                <% if (isViewer) { %>readonly<% } %>\n              />\n              <img class="btn-icon-right svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-right-arrow.svg" />\n            </div>\n            <div class="empty-cart">\n              <div class="empty-cart-title">\n                <input\n                  type="text"\n                  class="cart-text-input empty-cart-title-input"\n                  name="emptyСartTitle"\n                  placeholder="Cart is empty"\n                  maxlength="32"\n                  translate="no"\n                  autoComplete="off"\n                  autocorrect="off"\n                  spellcheck="false"\n                  <% if (isViewer) { %>readonly<% } %>\n                />\n              </div>\n            </div>\n            <div class="payment-success-main-tab hidden">\n              <div class="success-msg-content">\n                <div class="title">Payment completed</div>\n                <div class="description">Check your email for details</div>\n                <div class="billing-portal-url"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="cart-sidebar-tab tab-inputs">\n          <div class="sidebar-header">\n            <div class="sidebar-btn go-back" data-tab="tab-items">\n                <img class="btn-icon-center svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-left-arrow.svg" />\n            </div>\n            <div class="sidebar-btn go-forward" data-tab="tab-order">\n              Summary\n              <img class="btn-icon-right svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-right-arrow.svg" />\n            </div>\n          </div>\n          <div class="sidebar-body">\n            <div class="order-details-form shipping-form">\n              <div class="form-title">Shipping address</div>\n              <div class="form-row">\n                <div class="form-error country-error hidden"></div>\n                <div class="countries-select"></div>\n              </div>\n              <div class="form-row">\n                <div class="form-error name-error hidden"></div>\n                <input type="text" class="form-input name-input" name="name" placeholder="Customer name" />\n              </div>\n              <div class="form-row">\n                <div class="form-error line1-error hidden"></div>\n                <input type="text" class="form-input line1-input" name="line1" placeholder="Address" />\n              </div>\n              <div class="form-row">\n                <input type="text" class="form-input line2-input" name="line2" placeholder="Apt, unit, building, floor…" />\n              </div>\n              <div class="form-row">\n                <div class="form-error city-error hidden"></div>\n                <input type="text" class="form-input city-input" name="city" placeholder="City" />\n              </div>\n              <div class="form-row">\n                <input type="text" class="form-input state-input" name="state" placeholder="State/Region" />\n              </div>\n              <div class="form-row">\n                <input type="text" class="form-input postal_code-input" name="postal_code" placeholder="Zip/Postal code" />\n              </div>\n              <div class="form-row">\n                <div class="form-error phone-error hidden"></div>\n                <input type="text" class="form-input phone-input" name="phone" placeholder="Phone" />\n              </div>\n            </div>\n            <div class="order-details-form">\n              <div class="form-title">Email</div>\n              <div class="form-row">\n                <div class="form-error email-error hidden"></div>\n                <input type="text" class="form-input email-input" name="email" placeholder="address@sample.com" />\n              </div>\n            </div>\n            <div class="order-details-form">\n              <div class="form-title">Note</div>\n              <div class="form-row">\n                <textarea class="form-input note-input" rows="4" name="note" placeholder="Add shipping details"></textarea>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="cart-sidebar-tab tab-order">\n          <div class="sidebar-header">\n            <div class="sidebar-btn go-back" data-tab="tab-inputs">\n                <img class="btn-icon-center svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-left-arrow.svg" />\n            </div>\n            <div class="sidebar-btn go-forward cart-pay-btn hidden" data-tab="tab-checkout">\n              Pay\n              <img class="btn-icon-right svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-right-arrow.svg" />\n            </div>\n            <div class="preloader">\n              <div class="svg-wrap">\n              <svg width="14px" height="26px" viewBox="0 0 14 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n                      <g transform="translate(-1094.000000, -34.000000)" fill-rule="nonzero" stroke="#FFFFFF" stroke-width="2">\n                          <g transform="translate(1070.000000, 22.000000)">\n                              <path d="M25,37 C31.627417,37 37,31.627417 37,25 C37,18.372583 31.627417,13 25,13" id="Path"></path>\n                          </g>\n                      </g>\n                  </g>\n              </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class="sidebar-body">\n            <div class="order-details">\n              <div class="order-items-block order-row">\n                <div class="order-title-row summary-title">Order summary</div>\n                <div class="order-items-list order-info-block"></div>\n              </div>\n              <div class="order-id-container order-row">\n                  <div class="order-title-row">Order ID</div>\n                  <div class="order-id order-info-block"></div>\n              </div>\n              <div class="shipping-details">\n                <div class="shipping-address order-row">\n                  <div class="order-title-row">Shipping address</div>\n                  <div class="order-shipping-address order-info-block"></div>\n                </div>\n                <div class="shipping-method order-row">\n                    <div class="order-title-row">Shipping method</div>\n                    <div class="order-shipping-method order-info-block"></div>\n                </div>\n              </div>\n              <div class="shipping-tax-size order-row">\n                <div class="order-title-row">Order tax</div>\n                <div class="order-tax order-info-block"></div>\n              </div>\n              <div class="shipping-email order-row hidden">\n                    <div class="order-title-row">Email</div>\n                    <div class="order-shipping-email order-info-block"></div>\n              </div>\n              <div class="shipping-phone order-row hidden">\n                    <div class="order-title-row">Phone</div>\n                    <div class="order-shipping-phone order-info-block"></div>\n              </div>\n              <div class="shipping-total-price order-row">\n                <div class="order-title-row">Grand total</div>\n                <div class="order-total-price order-info-block"></div>\n              </div>\n            </div>\n          </div>\n          <div class="order-error hidden">\n            <div class="order-error-container">\n              <div class="order-error-title">\n                Error\n              </div>\n              <div class="order-error-message">\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="cart-sidebar-tab tab-checkout">\n          <div class="sidebar-header">\n            <div class="sidebar-btn go-back" data-tab="tab-order">\n                <img class="btn-icon-center svg" src="<%= imgPublicPath %>img/viewer/cart-sidebar/sidebar-left-arrow.svg" />\n            </div>\n            <div class="preloader">\n              <div class="svg-wrap">\n              <svg width="14px" height="26px" viewBox="0 0 14 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n                      <g transform="translate(-1094.000000, -34.000000)" fill-rule="nonzero" stroke="#FFFFFF" stroke-width="2">\n                          <g transform="translate(1070.000000, 22.000000)">\n                              <path d="M25,37 C31.627417,37 37,31.627417 37,25 C37,18.372583 31.627417,13 25,13" id="Path"></path>\n                          </g>\n                      </g>\n                  </g>\n              </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class="sidebar-body">\n            <div class="payment-title">Pay with card</div>\n            <form action="/charge" method="post" id="payment-form">\n              <div class="form-row">\n                <div class="form-error card-number-error hidden"></div>\n                <div id="card-number-element" class="payment-input">\n                </div>\n              </div>\n              <div class="form-row">\n                <div class="form-error card-expiry-error hidden"></div>\n                <div id="card-expiry-element" class="payment-input">\n                </div>\n              </div>\n              <div class="form-row">\n                <div class="form-error card-name-error hidden"></div>\n                <input type="text" class="payment-input card-name-input hidden" name="name" placeholder="Name on card" />\n              </div>\n              <div class="form-row">\n                <div class="form-error card-cvc-error hidden"></div>\n                <div id="card-cvc-element" class="payment-input">\n                </div>\n              </div>\n\n              \x3c!-- Used to display Element errors. --\x3e\n              <div id="card-number-errors" role="alert"></div>\n              <div id="card-expiry-errors" role="alert"></div>\n              <div id="card-name-errors" role="alert"></div>\n              <div id="card-cvc-errors" role="alert"></div>\n\n              <div id="payment-failed-msg">\n                <div class="failed-msg-content">\n                  <div class="error-icon">\n                    <svg width="4px" height="27px" viewBox="0 0 4 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                          <g transform="translate(-1010.000000, -261.000000)" fill="#FFFFFF" fill-rule="nonzero">\n                              <g transform="translate(1010.000000, 261.000000)">\n                                  <g>\n                                      <path d="M2,0 C3.05322259,-1.93473851e-16 3.90702819,0.853805605 3.90702819,1.90702819 C3.90702819,1.93727706 3.90630849,1.96752165 3.9048697,1.99773628 L3.04535404,20.0475651 C3.01996411,20.5807536 2.58027854,21 2.0464859,21 L1.9535141,21 C1.41972146,21 0.980035886,20.5807536 0.954645959,20.0475651 L0.0951302988,1.99773628 C0.045033609,0.945705789 0.857261433,0.0522551831 1.90929192,0.00215849327 C1.93950655,0.000719701408 1.96975113,5.55662667e-18 2,0 Z"></path>\n                                      <circle cx="2" cy="25" r="2"></circle>\n                                  </g>\n                              </g>\n                          </g>\n                      </g>\n                    </svg>\n                  </div>\n                  <div class="error-message"></div>\n                </div>\n              </div>\n\n              <button class="sidebar-btn cart-payment-btn">Pay</button>\n            </form>\n            <div id="payment-request-button"></div>\n            <div class="cart-cancel-btn">Cancel order</div>\n          </div>\n          <div id="payment-success-msg">\n            <div class="success-msg-content">\n              <div class="title">Payment completed</div>\n              <div class="description">Check your email for details</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1414:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-mag-menu",a=(0,l.f)(n||(s=['\n\t<noindex>\n\t\t<div class="mag-menu <%=(!hasProjectInfo ? \'no-project-info\' : \'\')%> <%= viewport %>" data-nosnippet>\n\t\t\t<div class="menu-wrapper">\n\n\t\t\t\t\n\t\t\t\t<div class="menu-info">\n\t\t\t\t\t<a class="link <%= !common.isDownloadedSource? \'\': \'inactive-link\'%>" href="<%-mag.model.user.getLink()%>">\n\t\t\t\t\t\t<div class="userpic" style="background-image:url(\'<%=mag.model.user.getUserpic(64)%>\')"></div>\n\t\t\t\t\t\t<div class="username"><%-mag.user.name%></div>\n\t\t\t\t\t</a>\n\t\t\t\t\t<div class="published-by" data_caption="published by" data_date="<%=publishDate%>"></div>\n\t\t\t\t\t<div class="mag-title"><%-mag.title%></div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="scroll-wrapper">\n\n\t\t\t\t\t<div class="pages-wrapper has-<%=viewerType%>-scroll">\n\t\t\t\t\t\t<div class="pages">\n\n\t\t\t\t\t\t\t<%_.each(pages, function(page, index) {\n\t\t\t\t\t\t\t\tvar direction = viewerType == \'horizontal\' ? \'left\' : \'top\';\n\t\t\t\t\t\t\t\tvar offset = index * (viewerType == \'horizontal\' ? frameWidth : frameHeight);\n\t\t\t\t\t\t\t\tvar screenshot = getScreenshot(page._id);\n\t\t\t\t\t\t\t%>\n\t\t\t\t\t\t\t\t<div class="page" data-id="<%=page._id%>" data-num="<%=page.num%>" data-src="<%= screenshot.src %>" style="width:<%=frameWidth%>px;height:<%=frameHeight%>px;<%=direction%>:<%=offset%>px">\n\t\t\t\t\t\t\t\t\t<img class="screenshot" src="<%=stub%>" style="width:<%= screenshot.width %>px; height:<%= screenshot.height %>px; margin: auto; top: 0; bottom: 0; left: 0; right: 0;" />\n\t\t\t\t\t\t\t\t\t<% if (page.unauthorized) { %>\n\t\t\t\t\t\t\t\t\t<div class="private-page"></div>\n\t\t\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t\t\t<div class="num <%=(page.pageNestedNum && page.pageNestedNum.length > 3 ? page.pageNestedNum.length > 4 ? \'nested-over-4\' : \'nested-over-3\' : page.num > 99 ? \'over99\' : \'\')%>"><%=page.pageNestedNum ? page.pageNestedNum : page.num%></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<%});%>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="scroll"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</noindex>\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1394:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-mag",a=(0,l.f)(n||(s=['\n\n\t<div class="mag">\n\t\t<div class="mag-pages-container">\n\t\t\t<div class="container disable-transitions">\n\n\t\t\t\t<div class="blackout"></div>\n\t\t\t</div>\n\t\t\t<div class="above-pages-container"></div>\n\t\t</div>\n\n\t\t<% if (hasStandaloneBottomArrow) {%>\n\t\t\t<div class="navigation-arrow bottom offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t\t<%}%>\n\n\n\t\t<% if (isPreview) {%>\n\t\t\t<div class="mag-pages-viewport-device"></div>\n\t\t<%}%>\n\t</div>\n\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1408:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-navigation",a=(0,l.f)(n||(s=['\n\n\t<div class="navigation">\n\t\t<div class="navigation-arrow left offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t\t<div class="navigation-arrow right offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t\t<div class="navigation-arrow bottom offscreen"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div></div>\n\t</div>\n\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1396:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-page",a=(0,l.f)(n||(s=['\n\t<div class="page hidden">\n\t\t<div id="page-<%=pageNum%>-password-container" class="polyfill-sticky"></div>\n\t\t<div class="page-fixed-bg-container polyfill-sticky"></div>\n\t\t<div class="fixed-position-container-top polyfill-sticky"></div>\n\t\t<div class="fixed-position-container polyfill-sticky"></div>\n\t\t<div class="content-scroll-wrapper <%=isStickyVerticalViewer ? \'\' : \'has-vertical-scroll\'%>">\n\t\t\t<div class="content-bounds">\n\t\t\t\t<div class="page-content-container" tabindex="-1"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1412:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-share",a=(0,l.f)(n||(s=['\n\t<% if (hasOverlay) {%>\n\t\t<div class="share-popup-overlay hidden" data-nosnippet></div>\n\t<%}%>\n\n\t<div class="share-popup hidden" data-nosnippet>\n\t\t<noindex>\n\t\t\t<div class="content-wrapper">\n\n\t\t\t\t<div class="share-wrapper">\n\t\t\t\t\t<div class="caption">Share</div>\n\n\t\t\t\t\t<div class="type-selector">\n\t\t\t\t\t\t\x3c!--__magterm--\x3e\n\t\t\t\t\t\t<div class="type-full">Project</div>\n\t\t\t\t\t\t<div class="type-page">Current Page</div>\n\t\t\t\t\t\t<div class="arrow sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="buttons-wrapper">\n\t\t\t\t\t\t<div class="share-facebook button" data-tp="facebook"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Share</div>\n\t\t\t\t\t\t<div class="share-twitter button" data-tp="twitter"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Tweet</div>\n\t\t\t\t\t\t<div class="share-pinterest button" data-tp="pinterest"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Pin</div>\n\t\t\t\t\t\t<div class="share-linkedin button" data-tp="linkedin"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Linkedin</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<% if (!common.isDownloadedSource) { %>\n\t\t\t\t\t\t<div class="open-embed"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Embed</div>\n\t\t\t\t\t\t<div class="close">Close</div>\n\t\t\t\t\t\t<div class="send-report" data-tp="report"><div class="icon sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>Report</div>\n\t\t\t\t\t<% } %>\n\t\t\t\t</div>\n\n\t\t\t\t<% if (!common.isDownloadedSource) { %>\n\t\t\t\t\t<div class="embed-wrapper">\n\t\t\t\t\t\t<div class="caption">Embed</div>\n\n\t\t\t\t\t\t<div class="size-selector" data-selected="responsive">\n\t\t\t\t\t\t\t<div class="size responsive" data-size="responsive">Responsive</div>\n\t\t\t\t\t\t\t<div class="size big" data-size="big">512×383</div>\n\t\t\t\t\t\t\t<div class="size small" data-size="small">288×236</div>\n\t\t\t\t\t\t\t<div class="arrow sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="code-block">\n\t\t\t\t\t\t\t<div class="thumb">\n\t\t\t\t\t\t\t\t<img class="thumb-pic" src="" alt=""/>\n\t\t\t\t\t\t\t\t<div class="thumb-toolbar">\n\t\t\t\t\t\t\t\t\t<div class="icon arrows" style="background-image: url(\'<%=icons.thumbArrows%>\')"></div>\n\t\t\t\t\t\t\t\t\t<div class="icon open" style="background-image: url(\'<%=icons.thumbOpen%>\')"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<textarea class="embed-code"></textarea>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="back">Back</div>\n\t\t\t\t\t</div>\n\t\t\t\t<% } %>\n\t\t\t</div>\n\n\t\t\t<div class="corner-wrapper">\n\t\t\t\t<div class="corner"></div>\n\t\t\t</div>\n\t\t</noindex>\n\t</div>\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1410:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-toolbar",a=(0,l.f)(n||(s=['\n\n\t<div class="toolbar for-viewer <%= viewport %>">\n\n\t\t<%\tvar offscreenClass = (isPreview || common.embedMode) ? \'\' : \'offscreen-initially\'; %>\n\n\t\t<% if (hasPageCounter && !pageCounterInsideMenu) { %>\n\t\t\t<div class="page-counter-wrapper <%=offscreenClass%>">\n\t\t\t\t<div class="page-counter"><span class="cur"></span> of <span class="total"><%=totalPages%></span></div>\n\t\t\t</div>\n\t\t<% } %>\n\n\t\t<% if (brandingInToolbar) { %>\n\t\t\t<div class="toolbar-branding"></div>\n\t\t<% } %>\n\n\t\t<% if (hasShare) { %>\n\t\t\t<div class="share-button sprite <%=offscreenClass%>" data-alt="Share" data-alt-pos="<%= !controlsOnTop ? \'top\' : \'bottom\' %>" data-alt-offset="9"  data-alt-style="toolbar-share-tooltip" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t<% } %>\n\n\t\t<% if (hasMenu) { %>\n\t\t\t<div class="menu-button <%=offscreenClass%>" data-alt="Menu (M)" data-alt-pos="<%= !controlsOnTop ? \'top\' : \'bottom\' %>" data-alt-offset="9" data-alt-style="toolbar-menu-tooltip">\n\t\t\t\t<% if (hasPageCounter && pageCounterInsideMenu) { %>\n\t\t\t\t\t<div class="page-counter"><span class="cur"></span> of <span class="total"><%=totalPages%></span></div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<svg class="menu-icon" width="32" height="14" viewBox="0 0 32 14">\n\t\t\t\t\t<g fill="currentColor" fill-rule="evenodd"><path d="M1 0h30a1 1 0 010 2H1a1 1 0 110-2zM1 12h30a1 1 0 010 2H1a1 1 0 010-2z"/></g>\n\t\t\t\t</svg>\n\t\t\t\t<svg class="cross-icon" width="18" height="18" viewBox="0 0 18 18">\n\t\t\t\t\t<path d="M17.485.515a1 1 0 010 1.414L10.415 9l7.07 7.071a1 1 0 01-1.414 1.414L9 10.415l-7.071 7.07a1 1 0 01-1.414-1.414L7.585 9 .516 1.929A1 1 0 011.929.515L9 7.585l7.071-7.07a1 1 0 011.414 0z" fill="currentColor" fill-rule="evenodd"></path>\n\t\t\t\t</svg>\n\t\t\t\t<div class="page-preloader sprite" style="background-image: url(\'<%=icons.sprite%>\')"></div>\n\t\t\t</div>\n\t\t<% } %>\n\n\t\t<% if (common.embedMode) { %>\n\t\t\t<div class="embed-close-button <%=offscreenClass%>">Close</div>\n\t\t<% } %>\n\n\t</div>\n\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},1346:function(t,e,i){"use strict";var n,r,o,a,s,c,l=i(351);e.Z=(r={},o="template-viewer-widget-background",a=(0,l.f)(n||(s=['\n\t<div class="rmwidget widget-background" style="background-color: #<%=data.color%>">\n\n        <% if (data.selectedType == \'picture\') { %>\n            <div class="picture-background" style="opacity: <%=data.opacity || 1%>;"></div>\n        <% } %>\n\n        <% if (data.selectedType == \'video\') { %>\n            <div class="video-background" style="opacity: <%=data.videoopacity || 1%>;">\n                <div class="video-container"></div>\n                <div class="overlay"></div>\n            </div>\n\t\t<% } %>\n\n\t\t<% if (data.selectedType == \'slideshow\') { %>\n\t\t\t<div class="slideshow-background">\n\t\t\t\t<div class="slideshow-container"></div>\n\t\t\t\t<div class="slideshow-preload"></div>\n\t\t\t</div>\n\t\t<% } %>\n\t</div>\n'],c||(c=s.slice(0)),n=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(c)}})))),o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},986:function(t,e,i){"use strict";var n=i(312),r=i(336),o=i.n(r),a=i(321),s=i(344),c=i(339),l=i(323);function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var f={LOOP_TYPES:{swing:"swing",repeat:"repeat"},EVENT_TYPES:["load","scroll","hover","click"],POINTER_EVENTS:["click","hover"],EXTERNAL_TRIGGER_BLOCK_EXCLUDE:["facebook","twitter","form","gmaps","slideshow","audio","video"],ANIMATION_BLOCK_EXCLUDE:["facebook","twitter"],POINTER_EVENTS_BLOCK_EXCLUDE:["form","gmaps","slideshow","audio","video"],DEFAULT_LOOP_TYPE:"swing",ACTIVE_TRIGGER_CLASS:"active-trigger",ACTIVE_TRIGGER_REMOVE_CLASS:"active-trigger-remove",ACTIVE_TRIGGER_HIGHLIGHT_CLASS:"active-trigger-highlight",ANIMATIONS_PLAYED_STORAGE_KEY:"animationsPlayed",DEG_TO_RAD:Math.PI/180,ANIMATION_PROPERTIES:"undefined"==typeof window?{}:function(){var t=!1,e="animation",i="AnimationIteration",n="AnimationEnd",r="animation-timing-function",o="@keyframes",a="transform",s="transform",c="Webkit Moz O ms Khtml".split(" "),l="webkit moz o MS кhtml".split(" "),d=document.createElement("div");if(null!=d.style.animationName)t=!0,i=i.toLowerCase(),n=n.toLowerCase();else for(var u=0;u<c.length;u++)if(null!=d.style[c[u]+"AnimationName"]){e=c[u]+"Animation",i=l[u]+i,n=l[u]+n,r="-"+c[u].toLowerCase()+"-"+r,o="@-"+c[u].toLowerCase()+"-keyframes",t=!0;break}if(null==d.style.transform)for(u=0;u<c.length;u++)if(null!=d.style[c[u]+"Transform"]){a=c[u]+"Transform",s="-"+c[u].toLowerCase()+"-transform";break}return d=null,{animationSupported:t,animationJS:e,animationIterationJS:i,animationEndJS:n,animationTimingFunctionCSS:r,keyframeCSS:o,transformJS:a,transformCSS:s}}(),createAnimationTimeline:function(t){return new b(t)},getNormalizedAnimation:function(t,e,i,n,r,o,c,l){var d={dx:0,dy:0,from_opacity:100,opacity:100,from_rotate:0,rotate:0,from_scale:100,scale:100},u={use_move:["dx","dy"],use_opacity:["from_opacity","opacity"],use_rotate:["from_rotate","rotate"],use_scale:["from_scale","scale"]},h=a.Z.extend({},t),p=h.loop;h.loop=!1,h.steps=[];for(var f={dx:0,dy:0},g=0;g<t.steps.length;g++){var m=a.Z.extend({},t.steps[g]);a.Z.each(u,a.Z.bind((function(t,e){m[e]?(d[t[0]]=m[t[0]],d[t[1]]=m[t[1]]):(m[t[0]]=d[t[0]],m[t[1]]=d[t[1]])}),this)),i&&(m.dx=0,m.rotate=0,m.from_rotate=0),n&&(m.dy=0,m.rotate=0,m.from_rotate=0),"scroll"!=h.type||e||0!=g||(m.delay_px=0),1!=r&&e&&(m.dx*=r,m.dy*=r),"scroll"==h.type?(m.calcedDuration=v(m,f),m.calcedDelay=m.delay_px?m.delay_px*s.Z.normalize(r,void 0,o,c,l):0):(m.calcedDuration=m.duration||.001,m.calcedDelay=m.delay||0),m.acceleration=m.acceleration||"none","scroll"===h.type?m.loop=!1:p&&0===g&&(m.loop=p),h.steps.push(m),f=m}return h.trigger=t.trigger&&!a.Z.isArray(t.trigger)?[t.trigger]:a.Z.clone(t.trigger)||[],h;function v(t,e){var i,n=t.dx-e.dx,r=t.dy-e.dy;return i=0!=n||0!=r?Math.pow(n*n+r*r,.5)/t.speed:300/t.speed,Math.ceil(i)}},normalizeLoopValue:function(t){return!!t&&(this.LOOP_TYPES[t]||this.DEFAULT_LOOP_TYPE)},isExternalTriggerAllowed:function(t){return this.isPointerEvent(t)},normalizeAnimationTriggers:function(t){return t&&!a.Z.isArray(t)?[t]:a.Z.clone(t)||[]},normalizeAnimations:function(t){return t&&!a.Z.isArray(t)?[t]:t||[]},isEmpty:function(t){return!(t&&t.type&&"none"!==t.type&&t.steps&&t.steps.length)},isMoveOnly:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.steps&&t.steps.length&&t.steps.every((function(t){return t.use_move&&!t.use_scale&&!t.use_rotate}))},isNonMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.steps&&t.steps.length&&t.steps.every((function(t){return!t.use_move}))},getUuidHash:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return t.UUID})).filter((function(t){return t})).sort().join(",")},isPointerEvent:function(t){return-1!==this.POINTER_EVENTS.indexOf(t)},canHaveAnimation:function(t){var e=t.attributes||t.model&&t.model.attributes||{};return e.type&&-1===this.ANIMATION_BLOCK_EXCLUDE.indexOf(e.type)},arePointerEventsAllowed:function(t){var e=t.attributes||t.model&&t.model.attributes||{};return e.type&&-1===this.POINTER_EVENTS_BLOCK_EXCLUDE.indexOf(e.type)},getBlocksContainingTriggers:function(t){var e=a.Z.map(t,(function(t){return t.id||t._id}));return a.Z.reduce(t,function(t,i){var n=this.normalizeAnimations(i.model?i.model.get("animation"):i.animation),r=[].concat(h(n.reduce((function(t,e){return e.trigger?[].concat(h(t),h(f.normalizeAnimationTriggers(e&&e.trigger))):t}),[])),h(i.triggers||i.model&&i.model.get("triggers")||[]));return r.length&&a.Z.intersection(e,r).length&&t.push(i.id?i.id:i._id),t}.bind(this),[])},restoreTriggers:function(t,e,i){var n=[];return a.Z.each(t,function(t){var r=this,o=e[t],s=a.Z.find(i,{id:o});if(s&&s.getAllTriggers().length){n.push(s),s.model.getAnimations().forEach((function(t){var i=r.normalizeAnimationTriggers(t&&t.trigger);t.trigger=i.reduce((function(t,i){return e[i]?[].concat(h(t),[e[i]]):t}),[])}));var c=s.model.get("triggers");c&&s.model.set("triggers",c.reduce((function(t,i){return e[i]?[].concat(h(t),[e[i]]):t}),[]))}}.bind(this)),n},isScaleUp:function(t){return Boolean(a.Z.find(t&&t.steps,(function(t,e){return t.use_scale&&(0===e&&t.from_scale>100||t.scale>100)})))},maxScaleAnimation:function(t){return t&&t.steps&&t.steps.length?t.steps.reduce((function(t,e){return Math.max(t,e.from_scale||0,e.scale||0)}),0):0},canBeAccelerated:function(t){return!l.Z.isDesktop||!this.isScaleUp(t)},getPermanentAnimationId:function(t,e){return t.fixed_position||t.is_full_width||t.is_full_height||t.sticked?t._id:e},getAnimationsPlayed:function(){if(a.Z.isUndefined(this._animationsPlayed))try{var t=Modernizr.localstorage?window.localStorage.getItem(this.ANIMATIONS_PLAYED_STORAGE_KEY):c.default.getCookie(this.ANIMATIONS_PLAYED_STORAGE_KEY),e=t&&JSON.parse(t);this._animationsPlayed=a.Z.isArray(e)?e:[]}catch(t){this._animationsPlayed=[]}return this._animationsPlayed},persistHasPlayed:function(t){if(!this.hasPlayed(t))try{var e=JSON.stringify([].concat(this.getAnimationsPlayed(),t));Modernizr.localstorage?window.localStorage.setItem(this.ANIMATIONS_PLAYED_STORAGE_KEY,e):c.default.createCookie(this.ANIMATIONS_PLAYED_STORAGE_KEY,e),delete this._animationsPlayed}catch(t){}},hasPlayed:function(t){return t&&-1!==this.getAnimationsPlayed().indexOf(t)},hasExpired:function(t){var e=this,i=this.normalizeAnimations(t.animation);return Boolean(i.length)&&i.every((function(i){var n=e.getPermanentAnimationId(t,i.UUID);return i.playOnce&&e.hasPlayed(n)}))}},g=0,m=f.ANIMATION_PROPERTIES,v=function(){function t(e){var i=e.id,n=e.steps,r=e.initialStep;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"name",void 0),u(this,"duration",void 0),u(this,"iterationCount",void 0),u(this,"fillMode","none"),u(this,"css",void 0),u(this,"hasRotation",!1),u(this,"force3d",void 0),u(this,"loop",void 0),this.name="animation_".concat(i);var o=n.find((function(t){return t.loop}));this.loop=!!o&&f.normalizeLoopValue(o.loop),this.iterationCount=this.loop?"infinite":1,this.hasRotation=n.find((function(t,e){return Boolean(t.use_rotate&&(0===e&&0!==t.from_rotate||0!==t.rotate))})),this.duration=n.reduce((function(t,e){return t+e.calcedDelay+e.calcedDuration}),0),this.css=t.getKeyframes(i,n,this.duration,this.hasRotation,this.force3d,r)}var e,i,n;return e=t,n=[{key:"getKeyframes",value:function(t,e,i,n,r,o){for(var a=0,s=[[0]],c=e.length,l=0;l<c;l++){var d=e[l].calcedDelay/i,u=e[l].calcedDuration/i;d>=1e-4?s[s.length-1].push(a+d):d=0,a+=d+u,l==c-1&&(a=1),s.push([a])}var h="".concat(m.keyframeCSS," animation_").concat(t," {\n"),p={none:"linear","ease-in":"ease-in","ease-out":"ease-out","ease-both":"ease-in-out"};for(h+=this.getKeyframe(s[0],{dx:o?o.dx:0,dy:o?o.dy:0,opacity:o?o.opacity:e[0].from_opacity,rotate:o?o.rotate:e[0].from_rotate,scale:o?o.scale:e[0].from_scale},p[e[0].acceleration],n,r),l=0;l<c;l++)h+=this.getKeyframe(s[l+1],e[l],e[l+1]?p[e[l+1].acceleration]:void 0,n,r);return h+="}\n"}},{key:"getKeyframe",value:function(t,e,i,n,r){var o="\t";return o+=a.Z.map(t,(function(t){return 100*t+"%"})).join(", ")+" {",o+=m.transformCSS+": "+this.getTransformString({x:e.dx,y:e.dy,angle:e.rotate,scale:e.scale/100,hasRotation:n,isKeyframe:!0,force3d:r})+"; ",o+="opacity: "+(0===e.opacity?0:e.opacity/100)+"; ",i&&(o+=m.animationTimingFunctionCSS+": "+i),o+="}\n"}},{key:"getTransformString",value:function(t){var e,i=t.x,n=t.y,r=t.angle,o=t.scale,a=t.hasRotation,c=t.isKeyframe,l=t.force3d;if(o<.001&&(o=.001),a&&c)e=l?"translate3d(".concat(i,"px, ").concat(n,"px, 0) rotate(").concat(r,"deg) scale(").concat(o,")"):"translate(".concat(i,"px, ").concat(n,"px) rotate(").concat(r,"deg) scale(").concat(o,")");else{var d=o,u=0,h=",";if(r&&(r*=f.DEG_TO_RAD,d=Math.cos(r)*o,u=Math.sin(r)*o),d=Math.abs(d)<1e-6?0:d,u=Math.abs(u)<1e-6?0:u,Modernizr.edge){var p,g=null===(p=window.RM.viewerRouter)||void 0===p?void 0:p.mag;g&&(n*=s.Z.getRatio(g.getViewportWidth(g.viewport)))}var m=d+h+u,v=-u+h+d,b=i+h+n;e=l?"matrix3d(".concat(m,",0,0,").concat(v,",0,0,0,0,1,0,").concat(b,",0,1)"):"matrix(".concat(m).concat(h).concat(v).concat(h).concat(b,")")}return e}}],(i=[{key:"getDirection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?this.loop===f.LOOP_TYPES.repeat?"reverse":"alternate-reverse":this.loop===f.LOOP_TYPES.repeat?"normal":"alternate"}}])&&d(e.prototype,i),n&&d(e,n),t}(),b=o().View.extend({initialize:function(t){a.Z.bindAll(this),a.Z.extend(this,t),m.animationSupported&&(this.active=!1,this.reversed=!1,this.$el.toggleClass("force3d",!!this.force3d),"scroll"!==this.type?(this.generateKeyframeAnimation(),this.duration=this.sequences.reduce((function(t,e){return t+e.duration}),0)):(this.duration=this.steps.reduce((function(t,e){return t+e.calcedDelay+e.calcedDuration}),0),this.generateFrameByFrameAnimation()))},generateKeyframeAnimation:function(){var t=this;g+=1,this.id=g,this.sequences=this.steps.reduce((function(e,i,n){var r=t.steps.slice(n+1),o=r.findIndex((function(t){return t.loop}));return 0===n||i.loop?[].concat(h(e),[new v({id:"".concat(t.id,"_").concat(e.length+1),steps:[i].concat(h(r.slice(0,-1!==o?o:r.length))),force3d:t.force3d,initialStep:e.length?t.steps[n-1]:void 0})]):e}),[]),this.loop=this.sequences.map((function(t){return t.loop})).find((function(t){return t})),this.isFullLoop=1===this.sequences.length&&Boolean(this.sequences[0].loop),this.keyframesStyle=document.createElement("style"),this.keyframesStyle.innerHTML=this.sequences.reduce((function(t,e){return t+e.css}),""),this.$el.append(this.keyframesStyle),this.$el.on(m.animationIterationJS,(function(e){e.stopPropagation();var i=t.sequences.find((function(t){return t.name===e.originalEvent.animationName}));i&&t.onAnimationIteration(e,i)})),this.$el.on(m.animationEndJS,(function(e){e.stopPropagation();var i=t.sequences.find((function(t){return t.name===e.originalEvent.animationName})),n=t.reversed?h(t.sequences).reverse():t.sequences;i&&i.name===n[n.length-1].name&&t.onAnimationEnd(e,i)})),this.applyStepState(this.screenshotMode&&"load"===this.type?this.steps.length-1:"initial",!0)},generateFrameByFrameAnimation:function(){var t=0,e={dx:0,dy:0,opacity:this.steps[0].from_opacity,rotate:this.steps[0].from_rotate,scale:this.steps[0].from_scale};this.frames=[],this.frames.push({ind:0,isDelay:!1,params:e});for(var i=0;i<this.steps.length;i++){var n=this.steps[i];n.calcedDelay&&(this.frames.push({ind:t+1,isDelay:!0,params:e}),t+=n.calcedDelay),e={dx:n.dx,dy:n.dy,opacity:n.opacity,rotate:n.rotate,scale:n.scale,acceleration:n.acceleration},this.frames.push({ind:t+1,isDelay:!1,params:e}),t+=n.calcedDuration}this.seek(0)},applyStepState:function(t,e){var i;if(this.$el.removeClass("invisible"),"initial"===t)this.$el[0].style[m.transformJS]=v.getTransformString({x:0,y:0,angle:this.steps[0].from_rotate,scale:this.steps[0].from_scale/100,hasRotation:this.hasRotation,isKeyframe:e,force3d:this.force3d}),i=this.steps[0].from_opacity,this.$el[0].style.opacity=0===i?0:i/100;else{var n=this.steps[t];this.$el[0].style[m.transformJS]=v.getTransformString({x:n.dx,y:n.dy,angle:n.rotate,scale:n.scale/100,hasRotation:this.hasRotation,isKeyframe:e,force3d:this.force3d}),i=n.opacity,this.$el[0].style.opacity=0===i?0:i/100}var r="hover"===this.type&&this.animationTrigger.length>0&&!this.selfTriggered,o="hover"!==this.type&&("initial"!==t||this.animationTrigger.length>0);0===i&&(r||o)&&this.$el.addClass("invisible")},play:function(){if(!this.screenshotMode&&m.animationSupported){var t=m.animationJS;this.stop(),this.$el.removeClass("invisible"),this.$el.outerHeight(),window.requestAnimationFrame(function(){var e=this;this.$el[0].style[t+"Name"]=this.sequences.map((function(t){return t.name})).join(", "),this.$el[0].style[t+"Duration"]=this.sequences.map((function(t){return t.duration+"s"})).join(", "),this.$el[0].style[t+"Delay"]=this.sequences.reduce((function(t,i,n){var r=e.sequences[n-1];return[].concat(h(t),[r?"".concat(r.duration,"s"):"0s"])}),[]).join(", "),this.$el[0].style[t+"IterationCount"]=this.sequences.map((function(t){return t.iterationCount})).join(", "),this.$el[0].style[t+"Direction"]=this.sequences.map((function(t){return t.getDirection()})).join(", "),this.$el[0].style[t+"FillMode"]=this.sequences.map((function(t){return t.fillMode})).join(", "),this.$el[0].style[t+"PlayState"]=""}.bind(this)),this.active=!0,this.reversed=!1}},reverse:function(){if(!this.screenshotMode&&m.animationSupported){var t=m.animationJS;this.stop(),this.$el.removeClass("invisible"),this.$el.outerHeight();var e=h(this.sequences).reverse().filter((function(t){return t.loop!==f.LOOP_TYPES.swing}));this.$el[0].style[t+"Name"]=e.map((function(t){return t.name})).join(", "),this.$el[0].style[t+"Duration"]=e.map((function(t){return t.duration+"s"})).join(", "),this.$el[0].style[t+"Delay"]=e.reduce((function(t,i,n){var r=e[n-1];return[].concat(h(t),[r?"".concat(r.duration,"s"):"0s"])}),[]).join(", "),this.$el[0].style[t+"IterationCount"]=e.map((function(){return 1})).join(", "),this.$el[0].style[t+"Direction"]=e.map((function(t){return t.getDirection(!0)})).join(", "),this.$el[0].style[t+"FillMode"]=e.map((function(t){return t.fillMode})).join(", "),this.$el[0].style[t+"PlayState"]="",this.active=!0,this.reversed=!0}},stop:function(){this.$el.removeClass("invisible"),this.$el[0].style[m.animationJS]="",this.active=!1,this.reversed=!1},onAnimationEnd:function(){this.reversed=!this.reversed,this.active=!1,this.$el[0].style[m.animationJS]="",this.applyStepState(this.reversed?this.steps.length-1:"initial",!0),this.trigger("full-cycle-end")},onAnimationIteration:function(t,e){this.loop===f.LOOP_TYPES.swing?Math.round(t.originalEvent.elapsedTime/e.duration)%2?this.reversed=!0:(this.reversed=!1,this.trigger("full-cycle-end")):this.trigger("full-cycle-end")},resume:function(){this.screenshotMode||m.animationSupported&&(l.Z.isDesktop?this.$el[0].style[m.animationJS+"PlayState"]="running":this.play(),this.active=!0)},pause:function(){m.animationSupported&&(l.Z.isDesktop?this.$el[0].style[m.animationJS+"PlayState"]="paused":this.stop(),this.active=!1)},seek:function(t){if(m.animationSupported){t=Math.max(Math.min(t,this.duration),0);var e,i,n,r,o=this.frames.length;for(e=0;e<o&&!(this.frames[e].ind>t);e++);e--,this.frames[e].isDelay?i=a(this.frames[e].params,this.frames[e].params,0,1):(n=e?this.frames[e].ind-1:0,r=e==o-1?this.duration:this.frames[e+1].ind-1,i=a(this.frames[e?e-1:0].params,this.frames[e].params,t-n,r-n+1)),this.$el[0].style[m.transformJS]=v.getTransformString({x:i.dx,y:i.dy,angle:i.rotate,scale:i.scale/100,hasRotation:this.hasRotation,isKeyframe:!1,force3d:this.force3d}),this.$el[0].style.opacity=0==i.opacity?0:i.opacity/100,this.$el.toggleClass("invisible",0==i.opacity)}function a(t,e,i,n){if(0==i)return t;if(i==n-1)return e;var r=i/(n-1);return{dx:t.dx==e.dx?t.dx:s(t.dx,e.dx,r,e.acceleration),dy:t.dy==e.dy?t.dy:s(t.dy,e.dy,r,e.acceleration),opacity:t.opacity==e.opacity?t.opacity:s(t.opacity,e.opacity,r,e.acceleration),rotate:t.rotate==e.rotate?t.rotate:s(t.rotate,e.rotate,r,e.acceleration),scale:t.scale==e.scale?t.scale:s(t.scale,e.scale,r,e.acceleration)}}function s(t,e,i,n){return t+(e-t)*(n&&"none"!=n?"ease-in"==n?i*i:"ease-out"==n?i*(2-i):i<.5?i*i*2:2*i*(2-i)-1:i)}},destroy:function(){this.$el.off(m.animationIterationJS,this.onAnimationIteration),this.$el.off(m.animationEndJS,this.onAnimationEnd),this.$el[0].style[m.animationJS]="",this.$el[0].style[m.transformJS]="",this.$el[0].style.opacity="",this.$el.removeClass("force3d"),this.keyframesStyle&&(0,n.ZP)(this.keyframesStyle).remove(),this.reversed=!1,this.active=!1}});e.Z=f},1347:function(t,e,i){"use strict";var n=i(312),r=i(336),o=i.n(r),a=i(321),s=i(1278),c=o().View.extend({pictures:[],domPictures:[],preloadPictures:[],currentSlide:null,nextSlide:null,selectedSlide:null,defaultDelay:4,defaultCrossfade:.5,isAnimationRunning:!1,cursor:0,rendered:!1,lastSlideshowAnimationStart:null,initialize:function(t){this.initSlideshowData(t.data),this.$container=t.container,this.$preloadContainer=t.preloadContainer},initSlideshowData:function(t){this.pictures=t&&t.pictures?a.Z.sortBy(t.pictures,"num"):[],this.delay=t&&"number"==typeof t.delay?t.delay:this.defaultDelay,this.crossfade=t&&"number"==typeof t.crossfade?t.crossfade:this.defaultCrossfade,this.name=t&&t.name?t.name:"slideshow"+(new Date).getTime(),this.domPictures=[],this.preloadPictures=[],this.currentSlide=null,this.nextSlide=null,this.selectedSlide=null,this.isAnimationRunning=!1,this.cursor=0},render:function(t){RM.screenshot?this.pictures.length?this.addPicture(this.pictures[0]):this.trigger("loaded"):this.loadPictures(),this.isAnimationRunning||t||this.startAnimationLoop(),this.rendered=!0},rerender:function(t){this.stopAnimationLoop(),this.initSlideshowData(t),this.removePictures(),this.render(!0)},runAnimation:function(){this.isAnimationRunning||(this.rendered?this.startAnimationLoop():this.render())},setDelay:function(t){t<this.crossfade?console.error("delay mast be longer than crossfade"):this.delay=t},setCrossfade:function(t){t>this.delay?console.error("delay mast be longer than crossfade"):(this.crossfade=t,this.updateCrossfade())},updateCrossfade:function(){this.domPictures.forEach(function(t){t.css({"transition-duration":this.crossfade+"s"})}.bind(this))},updatePicture:function(t){var e=a.Z.findIndex(this.pictures,(function(e){return e.uuid===t.uuid}));this.pictures[e]=t,this.domPictures[e].css({"background-image":'url("'.concat(this.getPoorUrl(t),'")')}),s.Z.useLqipUrl(t)&&this.domPictures[e].addClass("lqip"),this.loadFullSizePicture(t)},updatePicturePosition:function(t){this.destroy(),this.initSlideshowData({pictures:t,delay:this.delay,crossfade:this.crossfade}),this.render()},addPicture:function(t){var e=this.domPictures.length===this.cursor+1,i=0===this.domPictures.length?2:e?1:0,r=0===this.domPictures.length||e?"block":"none";this.pictures.push(t),this.domPictures.push((0,n.ZP)("<div>").addClass("slideshow-image fade-in".concat(s.Z.useLqipUrl(t)?" lqip":"")).css({"z-index":i,display:r,"background-image":'url("'.concat(this.getPoorUrl(t),'")'),"transition-property":"opacity","transition-duration":this.crossfade+"s","transition-timing-function":"linear"}).appendTo(this.$container)),this.loadFullSizePicture(t)},selectSlide:function(t){if(t){var e=this.pictures.findIndex((function(e){return e.uuid===t}));if(-1!==e){if(this.currentSlide&&this.selectedSlide!==this.domPictures[e]&&(this.isAnimationRunning&&this.stopAnimationLoop(),this.currentSlide!==this.domPictures[e])){var i=this.cursor;this.nextSlide&&this.nextSlide.css({"z-index":0,display:"none"}),this.domPictures[e].css({"z-index":1,display:"block"}),this.currentSlide=this.domPictures[e],this.cursor=e,this.selectedSlide=this.domPictures[e],this.domPictures.length>1?this.domPictures[e+1]?this.nextSlide=this.domPictures[e+1]:this.nextSlide=this.domPictures[0]:this.nextSlide=null,this.domPictures[i].css({"transition-duration":"0.3s"}),this.domPictures[i].removeClass("fade-in").addClass("fade-out"),setTimeout(function(){this.domPictures[i].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.currentSlide.css({"z-index":2}),this.nextSlide&&this.nextSlide.css({"z-index":1,display:"block"})}.bind(this),310)}}else console.warn("Did't find slide for uuid:",t)}},removePictures:function(){this.domPictures=[],this.preloadPictures=[],this.$container.empty(),this.$preloadContainer.empty()},removePicture:function(t){if(t){var e=this.pictures.findIndex((function(e){return e.uuid===t}));if(this.domPictures[e]===this.currentSlide&&1!==this.domPictures.length&&this.selectedSlide!==this.domPictures[e]){var i=1e3*this.crossfade+1e3*this.delay+50;i=this.lastSlideshowAnimationStart?Math.abs(i-((new Date).getTime()-this.lastSlideshowAnimationStart.getTime())):i,setTimeout(function(){this.cursor&&(this.cursor-=1);var e=this.pictures.findIndex((function(e){return e.uuid===t}));this.domPictures[e].remove(),this.domPictures.splice(e,1),this.pictures.splice(e,1)}.bind(this),i)}else{if(this.domPictures[e]===this.nextSlide&&1!==this.domPictures.length&&(this.domPictures[e+1]?(this.domPictures[e+1].css({"z-index":1,display:"block"}),this.nextSlide=this.domPictures[e+1]):(this.domPictures[0].css({"z-index":1,display:"block"}),this.nextSlide=this.domPictures[0])),this.selectedSlide===this.domPictures[e]&&this.nextSlide){var n=this.domPictures.findIndex(function(t){return t===this.nextSlide}.bind(this));this.currentSlide=this.domPictures[n],this.cursor=n,this.selectedSlide=null,this.currentSlide.css({"z-index":2}),this.domPictures.length>2?this.domPictures[this.cursor+1]?this.nextSlide=this.domPictures[this.cursor+1]:this.nextSlide=this.domPictures[0]:this.nextSlide=null,this.nextSlide&&this.nextSlide.css({"z-index":1,display:"block"}),setTimeout(function(){this.startAnimationLoop()}.bind(this),0)}this.domPictures[e].remove(),this.domPictures.splice(e,1),this.pictures.splice(e,1)}}},getThumbnailUrl:function(t){return t?s.Z.useLambdaUrl(t)?s.Z.getThumbnailUrl(t):t.thumbUrl:""},getPictureUrl:function(t){return s.Z.useLambdaUrl(t)||s.Z.useLambdaUrlOldProjects(t,"background")?s.Z.getLambdaUrl(t):t.url},getPoorUrl:function(t){return s.Z.useLqipUrl(t)?s.Z.getLqipUrl(t):t.poorUrl},loadPictures:function(){this.pictures.forEach(function(t,e){this.domPictures[e]=(0,n.ZP)("<div>").addClass("slideshow-image fade-in".concat(s.Z.useLqipUrl(t)?" lqip":"")).css({"z-index":0===e?2:1===e?1:0,display:0===e||1===e?"block":"none","background-image":'url("'.concat(this.getPoorUrl(t),'")'),"transition-property":"opacity","transition-duration":this.crossfade+"s","transition-timing-function":"linear"}).appendTo(this.$container)}.bind(this)),this.loadFullSizePictures()},loadFullSizePictures:function(){function t(t,e){this.domPictures[e].css({"background-image":'url("'.concat(t,'")')}),this.domPictures[e].removeClass("lqip"),this.preloadPictures[e].remove(),0===e&&this.trigger("loaded")}function e(t,e){this.domPictures[t].removeClass("lqip"),0===t&&this.trigger("loaded"),RM.screenshot||this.preloadPictures[t].remove()}this.preloadPictures=[],this.pictures.forEach(function(i,r){var o=this.getPictureUrl(i);this.preloadPictures[r]=(0,n.ZP)("<img>").addClass("preload-slideshow-image").appendTo(this.$preloadContainer).attr("src",o).on("load",t.bind(this,o,r)).on("error",e.bind(this,r))}.bind(this))},loadFullSizePicture:function(t){var e=(0,n.ZP)("<img>").addClass("preload-slideshow-image").appendTo(this.$preloadContainer).attr("src",this.getPictureUrl(t)).on("load",function(i){var n=a.Z.findIndex(this.pictures,(function(e){return t.uuid===e.uuid}));this.domPictures[n].css({"background-image":'url("'.concat(this.getPictureUrl(t),'")')}),this.domPictures[n].removeClass("lqip"),e.remove(),this.trigger("loaded")}.bind(this)).on("error",function(i){var n=a.Z.findIndex(this.pictures,(function(e){return t.uuid===e.uuid}));this.domPictures[n].removeClass("lqip"),e.remove(),this.trigger("loaded"),RM.screenshot||e.remove()}.bind(this))},initCursor:function(){this.cursor=0,this.currentSlide=this.domPictures[this.cursor],this.domPictures[this.cursor+1]&&(this.nextSlide=this.domPictures[this.cursor+1])},startAnimationLoop:function(){this.isAnimationRunning=!0,this.selectedSlide=null,this.currentSlide||this.initCursor(),this.slideshowLouncher=setTimeout(function t(){this.fadeAnimation(),this.slideshowLouncher=setTimeout(t.bind(this),1e3*this.delay)}.bind(this),1e3*this.delay)},fadeAnimation:function(){var t;this.lastSlideshowAnimationStart=new Date,this.domPictures.length<2||(this.currentSlide&&this.nextSlide||this.initCursor(),this.cursor+1<this.domPictures.length?(this.currentSlide.removeClass("fade-in").addClass("fade-out"),t=this.cursor,setTimeout(function(){this.domPictures[t]&&this.domPictures[t].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.domPictures[t+1].css({"z-index":2}),this.domPictures[t+2]?this.domPictures[t+2].css({"z-index":1,display:"block"}):this.domPictures[0].css({"z-index":1,display:"block"})}.bind(this),1e3*this.crossfade),this.cursor+=1,this.currentSlide=this.domPictures[this.cursor],this.domPictures[this.cursor+1]?this.nextSlide=this.domPictures[this.cursor+1]:this.nextSlide=this.domPictures[0]):(this.currentSlide.removeClass("fade-in").addClass("fade-out"),t=this.cursor,setTimeout(function(){this.domPictures[t]&&this.domPictures[t].css({"z-index":0,"transition-duration":"0s",display:"none"}).removeClass("fade-out").addClass("fade-in").css({"transition-duration":this.crossfade+"s"}),this.domPictures[0].css({"z-index":2}),this.domPictures[1].css({"z-index":1,display:"block"})}.bind(this),1e3*this.crossfade),this.cursor=0,this.currentSlide=this.domPictures[this.cursor],this.nextSlide=this.domPictures[this.cursor+1]))},stopAnimationLoop:function(t){this.isAnimationRunning=!1,clearTimeout(this.slideshowLouncher),t&&"function"==typeof t&&t()},destroy:function(){this.rendered=!1,this.stopAnimationLoop(this.removePictures.bind(this))}});e.Z=c},1351:function(t,e,i){"use strict";i.d(e,{Z:function(){return O}});var n,r=i(312),o=i(336),a=i.n(o),s=i(321),c=i(351);var l,d,u,h,p,f,g=(l={},d="template-common-button-widget",u=(0,c.f)(n||(h=['\n\n    <div class="common-button" data-id="<%-data._id%>">\n\n        <div class="icon"></div>\n\n    </div>\n\n'],p||(p=h.slice(0)),n=Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(p)}})))),d in l?Object.defineProperty(l,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[d]=u,l);var m,v=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-constructor-block-button",(0,c.f)(f||(f=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n\n    <input class="text"\n           value="<%-data.text%>"\n           type="text"\n           autocapitalize="off"\n           autocorrect="off"\n           autocomplete="off"\n           spellcheck="false"/>\n\n']))));var b=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},"template-viewer-widget-button",(0,c.f)(m||(m=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n    <div class="text"><%-data.text%></div>\n'])))),y=i(646),w=i(339),S={STYLE_PREFIXES:{viewer:[".rmwidget.widget-button .common-button"],viewerCurrentLink:[".maglink.current .widget-button .common-button"],constructor:[".block.button .common-button"]},generateIndividualStyleCSS:function(t){var e=this.STYLE_PREFIXES[t.env],i=t.model,n=i.tp,o=this,a=function(r){r=r||"default";var a={default:"",hover:"hovered",current:"current"},l={default:"",hover:"hover-",current:"current-"},d=s.Z.isUndefined(a[r])?a.default:a[r],u=s.Z.isUndefined(l[r])?l.default:l[r],h=s.Z.map(e,(function(t){return t+'[data-id="'+i._id+'"]'+(d?"."+d:"")})).join(",\n");c=h+" {\n",c+=o.generateStylesStr({model:i,attrPrefix:u,indentation:!0,lineBreaks:!0,env:t.env,state:r}),c+="}\n\n";var p="default"===r?i.baselineShift:"current"===r?i["current-baselineShift"]:null;if("number"==typeof p){var f={transform:"translateY(".concat(p,"px)")},g="".concat(h," .text, ").concat(h," .icon { ").concat((0,y.aR)(f)," }");c+="\n\n".concat(g,"\n\n")}return"viewer"===t.env&&("current"===r&&o.isNeedCurrentStyle(i)&&(c+=o.STYLE_PREFIXES.viewerCurrentLink+'[data-id="'+i._id+'"] {\n',c+=o.generateStylesStr({model:i,attrPrefix:u,indentation:!0,lineBreaks:!0}),c+="}\n\n"),"icon"!==n&&"text_and_icon"!==n||(c+=s.Z.map(e,(function(t){return t+'[data-id="'+i._id+'"]'+(d?"."+d:"")+" .icon"})).join(",\n")+" {\n",c+='\t background-image: url("'+(Modernizr.retina?i[u+"icon_raster2xUrl"]||i[u+"icon_b64url"]:i[u+"icon_rasterUrl"]||i[u+"icon_b64url"])+'");\n',c+="}\n\n","current"===r&&(c+=o.STYLE_PREFIXES.viewerCurrentLink+'[data-id="'+i._id+'"] .icon {\n',c+='\t background-image: url("'+(Modernizr.retina?i[u+"icon_raster2xUrl"]||i[u+"icon_b64url"]:i[u+"icon_rasterUrl"]||i[u+"icon_b64url"])+'");\n',c+="}\n\n"))),c},c=a("default");s.Z.find(s.Z.keys(i),(function(t){return/^current/.test(t)}))&&(c+=a("current")),c+=a("hover");var l="individual_button_style_"+i._id+"_"+t.env;(0,r.ZP)("#"+l).remove();var d=document.createElement("style");d.type="text/css",d.id=l,d.className="button_styles",d.appendChild(document.createTextNode(c)),document.getElementsByTagName("head")[0].appendChild(d)},generateStylesStr:function(t){var e="",i=t.model,n=t.indentation?"\t":"",r=";"+(t.lineBreaks?"\n":""),o=t.attrPrefix||"";return e+=n+"background-color: "+w.default.getRGBA(a("background-color"),a("background-color-opacity")/100)+r,e+=n+"border-radius: "+s(a("border-radius"))+r,e+=n+"border-width: "+s(a("border-width"))+r,e+=n+"border-color: "+w.default.getRGBA(a("border-color"),a("border-color-opacity")/100)+r,e+=n+"font-family: "+a("font-family")+r,e+=n+"font-weight: "+a("font-weight")+r,e+=n+"font-style: "+a("font-style")+r,e+=n+"color: "+w.default.getRGBA(a("color"),a("color-opacity")/100)+r,e+=n+"font-size: "+s(a("font-size"))+r,e+=n+"letter-spacing: "+s(a("letter-spacing"))+r,i["hover-tansition-duration"]&&(e+=n+"transition: ".concat(i["hover-tansition-duration"],"s")+r),t.env&&t.state&&"viewer"===t.env&&"hover"===t.state&&i["hover-cursor"]&&(e+=n+"cursor: ".concat(i["hover-cursor"])+r),e;function a(t){var e=i[o+t];return("inherit"===e&&o||void 0===e)&&(e=i[t]),"border-color"===t&&"hover-"===o?0==i["hover-border-width"]&&(e=i["border-color"]):"border-color"===t&&"current-"!==o&&0==i["border-width"]&&(e=i["hover-border-color"]),"border-color-opacity"===t&&"hover-"===o?0==i["hover-border-width"]&&(e=i["border-color-opacity"]):"border-color-opacity"===t&&0==i["border-width"]&&(e=i["hover-border-color-opacity"]),e}function s(t){return t+(/px/i.test(t)?"":"px")}},destroyIndividualStyleCSS:function(t){var e="individual_button_style_"+t.model._id+"_"+t.env;(0,r.ZP)("#"+e).remove()},isNeedCurrentStyle:function(t){var e=t.clickLink;return!(!e||!t.is_global)&&(!(/^http(s?)\:\/\//i.test(e)||/^mailto\:/i.test(e)||/^tel\:/i.test(e))&&!!t.mag.getPageUri(e))}};function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){C(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var x=k(k(k({},g),v),b),O=a().View.extend({MIN_ICON_MARGIN:8,initialize:function(t){t&&(s.Z.bindAll(this),this.block=t.block,this.model=t.block&&t.block.model,this.model=t.model,this.$container=t.$container,this.environment=t.environment,this.mag=t.mag,s.Z.extend(this.model,{env:this.environment}),this.generateIndividualStyleCSS({env:this.environment,model:this.model}),this.template=x["template-common-button-widget"],"constructor"===this.environment?this.text_template=x["template-constructor-block-button"]:this.text_template=x["template-viewer-widget-button"],this.render())},render:function(){var t=S.generateStylesStr({model:this.model});this.setElement((0,r.ZP)(this.template({data:this.model}))),(0,r.ZP)(this.text_template({data:this.model})).appendTo(this.$el),this.$text=this.$(".text"),this.$icon=this.$(".icon"),this.$button=this.$text.closest(".common-button"),this.$button.attr("style",t),this.applyButtonType(this.model.tp),"circle"===this.model.form&&this.applyCircleRadius(this.model.w),this.applyTextContainerSize(this.model),this.applyIconContainerSize(this.model),this.applyIconPosition(this.model),"viewer"===this.environment&&this.$container.css("border-radius",this.$button.css("border-radius")),this.$el.appendTo(this.$container),this.renderFinishTimeout=setTimeout(function(){var t=["background-color","background-color-opacity","border-width","border-color","border-color-opacity","font-family","font-style","font-weight","color","color-opacity","font-size","letter-spacing"];"circle"!==this.model.form&&t.push("border-radius"),t.forEach(function(t){this.$button.css(t,"")}.bind(this)),this.applyTransition()}.bind(this),500)},renderButtonText:function(t){this.$el.find(".text").text(t)},renderButtonTextWithSizes:function(t,e){e&&this.applyTextContainerSize(e),this.$el.find(".text").text(t).css({display:t?"block":"none"})},applyTransition:function(){"viewer"!==this.environment||Modernizr.touch||(this.model.transition||!!this.model.transitionTime)&&this.$button.addClass("transition").css("transition","all ".concat(this.model.transitionTime,"s ease 0s"))},applyButtonType:function(t){var e="inline-block";"text"===t?(this.$text.css("display",e),this.$icon.css("display","none")):"icon"===t?(this.$icon.css("display",e),this.$text.css("display","none")):"text_and_icon"===t&&this.$icon.add(this.$text).css("display",e)},applyCircleRadius:function(){this.$button.css("border-radius","100%")},applyTextContainerSize:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="viewer"===this.environment&&S.isNeedCurrentStyle(this.model),n=e||i?t["current-text_w"]:t.text_w,r=e||i?t["current-text_h"]:t.text_h,o=e||i?t["current-letter-spacing"]:t["letter-spacing"],a=0,s=0;o>0?a=o:o<0&&(s=o),this.$text.css({width:"".concat(n,"px"),"padding-left":"".concat(a,"px"),"text-indent":"".concat(s,"px"),height:"viewer"===this.environment?"".concat(t.h,"px"):"".concat(r,"px"),"line-height":"viewer"===this.environment?"".concat(t.h,"px"):"".concat(t.text_h,"px")})},applyIconContainerSize:function(t){var e=t.tp,i=t.icon_w,n=t.icon_h,r=t.icon_pos,o=0,a=0;"text_and_icon"===e&&("left"===r?a=8:"right"===r&&(o=8)),this.$icon.css({width:i+"px",height:n+"px","margin-right":a+"px","margin-left":o+"px"})},calcIconMarginFromText:function(t){return Math.ceil(t/4)},calcIconTopBottomMargin:function(t){return Math.ceil(t/3)},calcTextTopBottomMargin:function(t){return Math.ceil(t/6)},applyIconPosition:function(t){var e=t.icon_pos;"left"===e?this.$button.css({"flex-direction":"row","-webkit-flex-direction":"row"}):"right"===e&&this.$button.css({"flex-direction":"row-reverse","-webkit-flex-direction":"row-reverse"})},generateIndividualStyleCSS:function(t){S.generateIndividualStyleCSS({env:t.env,model:t.model,viewport:t.viewport})},destroy:function(){clearTimeout(this.renderFinishTimeout),S.destroyIndividualStyleCSS({env:this.environment,model:this.model}),this.$el&&this.$el.remove()}})},1404:function(t,e,i){"use strict";i.d(e,{h:function(){return n}});var n=[{value:"AF",caption:"Afghanistan"},{value:"AX",caption:"Aland Islands"},{value:"AL",caption:"Albania"},{value:"DZ",caption:"Algeria"},{value:"AS",caption:"American Samoa"},{value:"AD",caption:"Andorra"},{value:"AO",caption:"Angola"},{value:"AI",caption:"Anguilla"},{value:"AQ",caption:"Antarctica"},{value:"AG",caption:"Antigua and Barbuda"},{value:"AR",caption:"Argentina"},{value:"AM",caption:"Armenia"},{value:"AW",caption:"Aruba"},{value:"AU",caption:"Australia"},{value:"AT",caption:"Austria"},{value:"AZ",caption:"Azerbaijan"},{value:"BS",caption:"Bahamas"},{value:"BH",caption:"Bahrain"},{value:"BD",caption:"Bangladesh"},{value:"BB",caption:"Barbados"},{value:"BY",caption:"Belarus"},{value:"BE",caption:"Belgium"},{value:"BZ",caption:"Belize"},{value:"BJ",caption:"Benin"},{value:"BM",caption:"Bermuda"},{value:"BT",caption:"Bhutan"},{value:"BO",caption:"Bolivia, Plurinational State of"},{value:"BQ",caption:"Bonaire, Sint Eustatius and Saba"},{value:"BA",caption:"Bosnia and Herzegovina"},{value:"BW",caption:"Botswana"},{value:"BV",caption:"Bouvet Island"},{value:"BR",caption:"Brazil"},{value:"IO",caption:"British Indian Ocean Territory"},{value:"BN",caption:"Brunei Darussalam"},{value:"BG",caption:"Bulgaria"},{value:"BF",caption:"Burkina Faso"},{value:"BI",caption:"Burundi"},{value:"KH",caption:"Cambodia"},{value:"CM",caption:"Cameroon"},{value:"CA",caption:"Canada"},{value:"CV",caption:"Cape Verde"},{value:"KY",caption:"Cayman Islands"},{value:"CF",caption:"Central African Republic"},{value:"TD",caption:"Chad"},{value:"CL",caption:"Chile"},{value:"CN",caption:"China"},{value:"CX",caption:"Christmas Island"},{value:"CC",caption:"Cocos (Keeling) Islands"},{value:"CO",caption:"Colombia"},{value:"KM",caption:"Comoros"},{value:"CG",caption:"Congo"},{value:"CD",caption:"Congo, the Democratic Republic of the"},{value:"CK",caption:"Cook Islands"},{value:"CR",caption:"Costa Rica"},{value:"CI",caption:"Côte d'Ivoire"},{value:"HR",caption:"Croatia"},{value:"CU",caption:"Cuba"},{value:"CW",caption:"Curaçao"},{value:"CY",caption:"Cyprus"},{value:"CZ",caption:"Czech Republic"},{value:"DK",caption:"Denmark"},{value:"DJ",caption:"Djibouti"},{value:"DM",caption:"Dominica"},{value:"DO",caption:"Dominican Republic"},{value:"EC",caption:"Ecuador"},{value:"EG",caption:"Egypt"},{value:"SV",caption:"El Salvador"},{value:"GQ",caption:"Equatorial Guinea"},{value:"ER",caption:"Eritrea"},{value:"EE",caption:"Estonia"},{value:"ET",caption:"Ethiopia"},{value:"FK",caption:"Falkland Islands (Malvinas)"},{value:"FO",caption:"Faroe Islands"},{value:"FJ",caption:"Fiji"},{value:"FI",caption:"Finland"},{value:"FR",caption:"France"},{value:"GF",caption:"French Guiana"},{value:"PF",caption:"French Polynesia"},{value:"TF",caption:"French Southern Territories"},{value:"GA",caption:"Gabon"},{value:"GM",caption:"Gambia"},{value:"GE",caption:"Georgia"},{value:"DE",caption:"Germany"},{value:"GH",caption:"Ghana"},{value:"GI",caption:"Gibraltar"},{value:"GR",caption:"Greece"},{value:"GL",caption:"Greenland"},{value:"GD",caption:"Grenada"},{value:"GP",caption:"Guadeloupe"},{value:"GU",caption:"Guam"},{value:"GT",caption:"Guatemala"},{value:"GG",caption:"Guernsey"},{value:"GN",caption:"Guinea"},{value:"GW",caption:"Guinea-Bissau"},{value:"GY",caption:"Guyana"},{value:"HT",caption:"Haiti"},{value:"HM",caption:"Heard Island and McDonald Islands"},{value:"VA",caption:"Holy See (Vatican City State)"},{value:"HN",caption:"Honduras"},{value:"HK",caption:"Hong Kong"},{value:"HU",caption:"Hungary"},{value:"IS",caption:"Iceland"},{value:"IN",caption:"India"},{value:"ID",caption:"Indonesia"},{value:"IR",caption:"Iran, Islamic Republic of"},{value:"IQ",caption:"Iraq"},{value:"IE",caption:"Ireland"},{value:"IM",caption:"Isle of Man"},{value:"IL",caption:"Israel"},{value:"IT",caption:"Italy"},{value:"JM",caption:"Jamaica"},{value:"JP",caption:"Japan"},{value:"JE",caption:"Jersey"},{value:"JO",caption:"Jordan"},{value:"KZ",caption:"Kazakhstan"},{value:"KE",caption:"Kenya"},{value:"KI",caption:"Kiribati"},{value:"KP",caption:"Korea, Democratic People's Republic of"},{value:"KR",caption:"Korea, Republic of"},{value:"KW",caption:"Kuwait"},{value:"KG",caption:"Kyrgyzstan"},{value:"LA",caption:"Lao People's Democratic Republic"},{value:"LV",caption:"Latvia"},{value:"LB",caption:"Lebanon"},{value:"LS",caption:"Lesotho"},{value:"LR",caption:"Liberia"},{value:"LY",caption:"Libya"},{value:"LI",caption:"Liechtenstein"},{value:"LT",caption:"Lithuania"},{value:"LU",caption:"Luxembourg"},{value:"MO",caption:"Macao"},{value:"MK",caption:"Macedonia, the Former Yugoslav Republic of"},{value:"MG",caption:"Madagascar"},{value:"MW",caption:"Malawi"},{value:"MY",caption:"Malaysia"},{value:"MV",caption:"Maldives"},{value:"ML",caption:"Mali"},{value:"MT",caption:"Malta"},{value:"MH",caption:"Marshall Islands"},{value:"MQ",caption:"Martinique"},{value:"MR",caption:"Mauritania"},{value:"MU",caption:"Mauritius"},{value:"YT",caption:"Mayotte"},{value:"MX",caption:"Mexico"},{value:"FM",caption:"Micronesia, Federated States of"},{value:"MD",caption:"Moldova, Republic of"},{value:"MC",caption:"Monaco"},{value:"MN",caption:"Mongolia"},{value:"ME",caption:"Montenegro"},{value:"MS",caption:"Montserrat"},{value:"MA",caption:"Morocco"},{value:"MZ",caption:"Mozambique"},{value:"MM",caption:"Myanmar"},{value:"NA",caption:"Namibia"},{value:"NR",caption:"Nauru"},{value:"NP",caption:"Nepal"},{value:"NL",caption:"Netherlands"},{value:"NC",caption:"New Caledonia"},{value:"NZ",caption:"New Zealand"},{value:"NI",caption:"Nicaragua"},{value:"NE",caption:"Niger"},{value:"NG",caption:"Nigeria"},{value:"NU",caption:"Niue"},{value:"NF",caption:"Norfolk Island"},{value:"MP",caption:"Northern Mariana Islands"},{value:"NO",caption:"Norway"},{value:"OM",caption:"Oman"},{value:"PK",caption:"Pakistan"},{value:"PW",caption:"Palau"},{value:"PS",caption:"Palestine, State of"},{value:"PA",caption:"Panama"},{value:"PG",caption:"Papua New Guinea"},{value:"PY",caption:"Paraguay"},{value:"PE",caption:"Peru"},{value:"PH",caption:"Philippines"},{value:"PN",caption:"Pitcairn"},{value:"PL",caption:"Poland"},{value:"PT",caption:"Portugal"},{value:"PR",caption:"Puerto Rico"},{value:"QA",caption:"Qatar"},{value:"RE",caption:"Réunion"},{value:"RO",caption:"Romania"},{value:"RU",caption:"Russian Federation"},{value:"RW",caption:"Rwanda"},{value:"BL",caption:"Saint Barthélemy"},{value:"SH",caption:"Saint Helena, Ascension and Tristan da Cunha"},{value:"KN",caption:"Saint Kitts and Nevis"},{value:"LC",caption:"Saint Lucia"},{value:"MF",caption:"Saint Martin (French part)"},{value:"PM",caption:"Saint Pierre and Miquelon"},{value:"VC",caption:"Saint Vincent and the Grenadines"},{value:"WS",caption:"Samoa"},{value:"SM",caption:"San Marino"},{value:"ST",caption:"Sao Tome and Principe"},{value:"SA",caption:"Saudi Arabia"},{value:"SN",caption:"Senegal"},{value:"RS",caption:"Serbia"},{value:"SC",caption:"Seychelles"},{value:"SL",caption:"Sierra Leone"},{value:"SG",caption:"Singapore"},{value:"SX",caption:"Sint Maarten (Dutch part)"},{value:"SK",caption:"Slovakia"},{value:"SI",caption:"Slovenia"},{value:"SB",caption:"Solomon Islands"},{value:"SO",caption:"Somalia"},{value:"ZA",caption:"South Africa"},{value:"GS",caption:"South Georgia and the South Sandwich Islands"},{value:"SS",caption:"South Sudan"},{value:"ES",caption:"Spain"},{value:"LK",caption:"Sri Lanka"},{value:"SD",caption:"Sudan"},{value:"SR",caption:"Suriname"},{value:"SJ",caption:"Svalbard and Jan Mayen"},{value:"SZ",caption:"Swaziland"},{value:"SE",caption:"Sweden"},{value:"CH",caption:"Switzerland"},{value:"SY",caption:"Syrian Arab Republic"},{value:"TW",caption:"Taiwan, Province of China"},{value:"TJ",caption:"Tajikistan"},{value:"TZ",caption:"Tanzania, United Republic of"},{value:"TH",caption:"Thailand"},{value:"TL",caption:"Timor-Leste"},{value:"TG",caption:"Togo"},{value:"TK",caption:"Tokelau"},{value:"TO",caption:"Tonga"},{value:"TT",caption:"Trinidad and Tobago"},{value:"TN",caption:"Tunisia"},{value:"TR",caption:"Turkey"},{value:"TM",caption:"Turkmenistan"},{value:"TC",caption:"Turks and Caicos Islands"},{value:"TV",caption:"Tuvalu"},{value:"UG",caption:"Uganda"},{value:"UA",caption:"Ukraine"},{value:"AE",caption:"United Arab Emirates"},{value:"GB",caption:"United Kingdom"},{value:"US",caption:"United States"},{value:"UM",caption:"United States Minor Outlying Islands"},{value:"UY",caption:"Uruguay"},{value:"UZ",caption:"Uzbekistan"},{value:"VU",caption:"Vanuatu"},{value:"VE",caption:"Venezuela, Bolivarian Republic of"},{value:"VN",caption:"Viet Nam"},{value:"VG",caption:"Virgin Islands, British"},{value:"VI",caption:"Virgin Islands, U.S."},{value:"WF",caption:"Wallis and Futuna"},{value:"EH",caption:"Western Sahara"},{value:"YE",caption:"Yemen"},{value:"ZM",caption:"Zambia"},{value:"ZW",caption:"Zimbabwe"}]},1225:function(t,e,i){"use strict";i.d(e,{ib:function(){return W},ZP:function(){return U},Kq:function(){return z}});var n=i(336),r=i.n(n),o=i(321),a=i(312),s=i(1226),c=i.n(s),l=i(1230),d=i.n(l),u=i(341),h=i(308),p=i(640);function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){m(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"onMagFullLoaded",value:function(t){t.addStripeLibrary();var e=new URL(window.location.href),i=new URLSearchParams(window.location.search),n=i.get("checkout_status"),r=i.get("session_id"),o=i.get("mode");window.history.pushState({},document.title,e.pathname),n&&"success"===n&&(t.clearCart(),t.openSidebarOnRender={checkoutComplete:!0},r&&"subscription"===o&&(0,p.fk)(t.mag.num_id,r).then((function(t){return t.data})).then((function(e){return(null==e?void 0:e.id)&&(0,p.$L)(t.mag.num_id,{customer:e.id,return_url:window.location.href.split("?")[0]})})).then((function(e){var i=e.data;null!=i&&i.url&&t.events.trigger("ecommerce:billingPortalUrl:get",i.url)})))}},{key:"checkProductActive",value:function(t){return t.active&&(this.productHasActiveSku(t)||this.productHasActivePrice(t))}},{key:"productHasActiveSku",value:function(t){return Array.isArray(null==t?void 0:t.articles)&&t.articles.some((function(t){return t.active}))}},{key:"productHasActivePrice",value:function(t){return t&&t.prices&&t.prices.length&&t.prices.some((function(t){return t.active}))}},{key:"mapProductsSelectList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=t.filter((function(t){return t.active&&(t.articles&&t.articles.length||t.prices&&t.prices.length)||e&&e===t.id})).map((function(t){return{value:t.id,caption:t.name}}));return i.unshift({value:"default",caption:"None"}),i}},{key:"getProductForAddToCart",value:function(t,e){if(!t)return null;var i=this.getActivePrice(t);if(i)return i.productObject=g(g({},t),{},{articles:null,prices:null}),i;var n=this.getSkuBySelectsValues(t,e);return n?(n.productObject=g(g({},t),{},{articles:null,prices:null}),n):null}},{key:"getActivePrice",value:function(t){return Array.isArray(t.prices)?t.prices.find((function(t){return t.active&&"per_unit"===t.billing_scheme})):null}},{key:"getSkuBySelectsValues",value:function(t,e){return t&&Array.isArray(t.articles)&&0!==t.articles.length?1===t.articles.length?t.articles[0]:t.articles.find((function(t){return JSON.stringify(t.attributes)===JSON.stringify(e)})):null}}])&&v(e.prototype,i),n&&v(e,n),t}();function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,n;return e=t,(i=[{key:"onMagFullLoaded",value:function(t){return null}},{key:"checkProductActive",value:function(t){return Boolean(null==t?void 0:t.active)}},{key:"productHasActiveSku",value:function(t){var e=this;return(null==t?void 0:t.options)&&t.options.some((function(t){return e.isOptionValid(t)}))}},{key:"isOptionValid",value:function(t){return["SELECT","SIZE","RADIO"].includes(null==t?void 0:t.type)}},{key:"mapProductsSelectList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=t.map((function(t){return{value:t.id,caption:t.name}}));return i.unshift({value:"default",caption:"None"}),e&&!i.find((function(t){return t.value===e}))&&i.push({value:e,caption:"inactive product"}),i}},{key:"getProductForAddToCart",value:function(t,e){var i=w({},t);if(i&&e&&(i.selectedOptions=w({},e),Array.isArray(i.combinations))){var n=i.combinations.find((function(t){return t.options.every((function(t){return e[t.name]===t.value}))}));n&&(i.selectedCombination=w({},n))}return i}},{key:"getProductQuantity",value:function(t){var e=(null==t?void 0:t.selectedCombination)||t;return null==e?void 0:e.quantity}},{key:"isProductAvailable",value:function(t){if(null!=t&&t.inStock){var e=this.getProductQuantity(t);if(void 0===e||e)return!0}return!1}},{key:"countCartItemsById",value:function(t,e){var i=0;return Object.keys(e.prices).forEach((function(n){var r,o=e.prices[n];!o||o.id!==t&&(null===(r=o.selectedCombination)||void 0===r?void 0:r.id)!==t||(i+=o.cart_count||0)})),i}},{key:"isOutOfStock",value:function(t,e){if(!t)return!0;var i=this.getProductQuantity(t);if(void 0===i)return!1;var n=this.countCartItemsById(t.selectedCombination?t.selectedCombination.id:t.id,e);return!!(i&&n+1>i)}},{key:"updateCartProductItems",value:function(t,e){var i=w({},e);return i.prices={},Object.keys(e.prices).forEach((function(n){var r=e.prices[n],o=t.find((function(t){return t.id===r.id}));if(o){if(i.prices[n]=w(w({},r),o),r.selectedCombination&&o.combinations){var a=o.combinations.find((function(t){var e;return t.id===(null===(e=r.selectedCombination)||void 0===e?void 0:e.id)}));a&&(i.prices[n].selectedCombination=a)}}else r&&(i.prices[n]=w({},r))})),i}}])&&P(e.prototype,i),n&&P(e,n),t}();function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function O(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function T(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function _(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){T(o,n,r,a,s,"next",t)}function s(t){T(o,n,r,a,s,"throw",t)}a(void 0)}))}}function Z(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function M(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){var e="function"==typeof Map?new Map:void 0;return(E=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return j(t,arguments,D(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),L(n,t)})(t)}function j(t,e,i){return(j=A()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&L(r,i.prototype),r}).apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $,F,R=function(){return{skus:{},prices:{},uniqSkusCount:0,uniqPricesCount:0,shippableProducts:0,changed:(new Date).toISOString(),order:null,provider:null}},B={out_of_stock:"Out of stock"},z={outOfStock:"outOfStock",nothingToInvoice:"nothingToInvoice"},W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(r,t);var e,i,n=(e=r,i=A(),function(){var t,n=D(e);if(i){var r=D(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return M(this,t)});function r(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n.call(this,t)).type=e,i}return r}(E(Error)),V=function(t,e,i,n){RM.screenshot&&(this.page=n),this.isMagLoaded=!1,this.haveEcommerceCartWidget=!1,this.isCartSidebarHidden=!0,this.productsLoading=!1,this.productsLoaded=!1,this.productsLoadingError=!1,this.cancelingOrder=!1,this.products=null,this.storageKey="_rmcartdata",this.connectedProvider,this.openSidebarOnAddItem=!1,this.environment=i,this.mag=e,this.router=t,this.events=o.Z.extend({},r().Events),this.cartData=R(),this.cartItemsLimit=25;var a=window.navigator.language;return this.userLocale=a?a.substring(0,2):"en",this.isConstructor()?this.mag.has("_id")?this.onMagFullLoaded():u.Z.once("mag:loadfull:complete",this.onMagFullLoaded,this):(this.mag.model.has("_id")&&this.onMagFullLoaded(),this.restoreBackupCartData()),this};o.Z.extend(V.prototype,{ecommerceProviders:["stripe","ecwid"],CONNECTION_TIMEOUT:5e3,stripeJsSrc:"https://js.stripe.com/v3/",isConstructor:function(){return this.environment===h.Z.environment.constructor},isViewer:function(){return this.environment===h.Z.environment.viewer},isPreview:function(){return this.environment===h.Z.environment.preview},getStorageKey:function(){return"".concat(this.storageKey,"_").concat(this.mag.num_id)},onMagFullLoaded:function(){this.isMagLoaded||(this.isMagLoaded=!0,this.haveEcommerceCartWidget=this.hasEcommerceWidget(),this.connectedProvider=this.getConnectedProvider(),this.cartData.provider=this.connectedProvider,this.connectEcommerceAdapter(),this.events.trigger("ecommerce:update:provider",this.connectedProvider),this.connectedProvider&&!this.productsLoading&&(this.adapter.onMagFullLoaded(this),this.getProducts(this.connectedProvider)))},hasEcommerceWidget:function(){var t=this.isConstructor()?this.mag.globalWidgets:RM.screenshot?this.page.widgetsData:[].concat(Z(this.mag.staticGlobalWidgetsData),Z(this.mag.aboveGlobalWidgetsData));return V.hasEcommerceWidget(this.environment,t)},getEcommerceData:function(){var t=null;return this.isConstructor()?this.mag.has("ecommerce_data")&&(t=this.mag.get("ecommerce_data")):this.mag.model.has("ecommerce_data")&&(t=this.mag.model.get("ecommerce_data")),t},connectEcommerceAdapter:function(){if(this.connectedProvider)switch(this.connectedProvider){case"stripe":this.adapter=new b;break;case"ecwid":this.adapter=new k}else this.adapter=null},updateEcommerceDataFromServer:function(){var t=this;(0,p.e5)(this.mag.get("num_id")).then((function(e){null!=e&&e.ecommerce_data&&(t.mag.set({ecommerce_data:e.ecommerce_data},{silent:!0}),t.connectedProvider=t.getConnectedProvider(),t.cartData.provider=t.connectedProvider,t.connectEcommerceAdapter(),t.events.trigger("ecommerce:update:provider",t.connectedProvider))}))},getStripeConnectedUserId:function(){if(!this.isMagLoaded)return null;var t=this.getEcommerceData();return t&&t.stripe&&t.stripe.stripe_data&&t.stripe.stripe_data.stripe_user_id?t.stripe.stripe_data.stripe_user_id:null},getProducts:(F=_(regeneratorRuntime.mark((function t(e){var i,n,r,o,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.productsLoading=!0,i=this.isConstructor()?this.mag.get("num_id"):this.mag.model.get("num_id"),n=this.isViewer()?"published_projects":"projects",r=RM.screenshot&&"preview"===RM.screenshotMode?"?type=preview":this.isViewer()?"?type=published":"",o="stripe"===e?"/api/".concat(n,"/").concat(i,"/ecommerce/stripe/products/"):"/api/ecommerce/".concat(i,"/").concat(e,"/products").concat(r),t.abrupt("return",a.ZP.ajax({type:"GET",url:o,context:this}).done((function(t){return t&&t.data&&(s.products=t.data),s.productsLoaded=!0,s.events.trigger("ecommerce:loadproducts:complete"),s.products})).fail((function(t){throw t.status,s.productsLoadingError=!0,s.events.trigger("ecommerce:loadproducts:complete"),new W("Loading products error")})).always((function(){s.productsLoading=!1})));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return F.apply(this,arguments)}),updateCartProductItems:($=_(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=null===(e=this.adapter)||void 0===e?void 0:e.updateCartProductItems(this.products,this.cartData))){t.next=9;break}return this.cartData=i,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),t.abrupt("return",this.cartData);case 9:throw new W("Update cart data error");case 10:case"end":return t.stop()}}),t,this)}))),function(){return $.apply(this,arguments)}),addStripeLibrary:function(){if(!(this.isConstructor()||window.Stripe&&window.Stripe.version)){var t=document.createElement("script"),e=document.getElementsByTagName("body")[0];t.setAttribute("async","async"),t.setAttribute("src",this.stripeJsSrc),e.appendChild(t)}},getConnectedProvider:function(){var t,e=this;return this.ecommerceProviders.forEach((function(i){e.isMagConnectedTo(i)&&(t=i)})),t},isMagConnectedTo:function(t){if(!this.isMagLoaded)return!1;if(!this.ecommerceProviders.includes(t))return!1;var e=this.getEcommerceData();return!!e&&Boolean(e[t]&&e[t].status&&"connected"===e[t].status)},canBeConnectedTo:function(t){if(!this.isConstructor())return!1;var e=this.getConnectedProvider();return!e||t===e},connectToStripe:function(){return new Promise(function(t,e){window.open("/api/connect/ecommerce/stripe/connect?num_id="+this.mag.get("num_id"),"_blank"),this.initSocket().then(function(e){this.mag.set({ecommerce_data:e},{silent:!0}),t()}.bind(this)).catch((function(t){e(t)}))}.bind(this))},disconnectFrom:function(t){return new Promise(function(e,i){a.ZP.ajax({type:"GET",url:"/api/connect/ecommerce/".concat(t,"/disconnect?num_id=").concat(this.mag.get("num_id")),success:function(i){if(i&&i.status){this.products=null;var n=this.getEcommerceData();n[t]||(n[t]={}),n[t]=i,this.mag.set({ecommerce_data:n},{silent:!0})}e(i)},error:function(t){i(t)},context:this})}.bind(this))},getTextValue:function(t){var e,i=this.getEcommerceData(),n=null==i||null===(e=i.texts)||void 0===e?void 0:e[t];return n?d()(n):B[t]},saveTextValue:function(t,e){var i=this.getEcommerceData();i.texts||(i.texts={});var n=e||B[t];i.texts[t]=n,this.mag.save({ecommerce_data:i},{patch:!0})},initSocket:function(){return new Promise(function(t,e){var i=window.location.origin===h.Z.readymag_auth_host&&h.Z.isProd?"sockets.readymag.com/stripe-auth":"/stripe-auth",n=io(i,{timeout:this.CONNECTION_TIMEOUT,transports:["websocket"]});n.on("connect",function(){n.emit("wainting for mag stripe auth update",{num_id:this.mag.get("num_id"),user:this.router.me.pick("name","email","_id"),hash:this.mag.get("socket_hash")}),n.on("state-update",(function(i){n.disconnect(),i.error?e(i.error):t(i.ecommerce_data)}))}.bind(this))}.bind(this))},checkCartDisabledControls:function(){if(this.haveEcommerceCartWidget){var t=this.getEcommerceCartBlock(),e=this.getEcommerceData();t&&t.checkDisabledControls(e.stripe&&e.stripe.status&&"connected"===e.stripe.status)}},getEcommerceCartBlock:function(){return this.haveEcommerceCartWidget&&this.isConstructor()?this.router.workspace.findBlockByFunction((function(t){return t.attributes.type===h.Z.ecommerceCartBlockName})):null},getCartWidgetData:function(){if(!this.isConstructor()){var t=this.mag.staticGlobalWidgetsData.find((function(t){return t.type===h.Z.ecommerceCartBlockName}));return t||this.mag.aboveGlobalWidgetsData.find((function(t){return t.type===h.Z.ecommerceCartBlockName}))}return null},getProductsLikeOptionsList:function(t){return this.products&&this.adapter?this.adapter.mapProductsSelectList(this.products,t):[]},checkProductActive:function(t){if(t){var e=this.getProductById(t);if(e)return!!this.adapter&&this.adapter.checkProductActive(e)}},productHasActiveSku:function(t){return!(!t||!this.adapter)&&this.adapter.productHasActiveSku(t)},isOptionValid:function(t){return this.adapter&&this.adapter.isOptionValid(t)},isSkuAvailable:function(t){return!!t.active&&("infinite"===t.inventory.type||("finite"===t.inventory.type&&t.inventory.quantity>0||"bucket"===t.inventory.type&&("in_stock"===t.inventory.value||"limited"===t.inventory.value)))},getProductById:function(t){return this.products&&Array.isArray(this.products)?this.products.find((function(e){return e.id===t})):null},getProductsStatus:function(){return this.productsLoading?"loading":this.productsLoaded?"loaded":"failed"},getSkusByProductId:function(t){var e=this.getProductById(t);return e?e.articles:null},getFirstAvailableSku:function(t){return t?t.find(function(t){return this.isSkuAvailable(t)}.bind(this)):null},getFirstAvailableSkuForProductId:function(t){return this.getFirstAvailableSku(this.getSkusByProductId(t))},changeCartSidebarVisibility:function(){if(!this.isCartSidebarHidden||!this.isViewer()||this.getConnectedProvider())return this.isCartSidebarHidden=!this.isCartSidebarHidden,u.Z.trigger("ecommerce:cartsidebar:visibility:changed",this.isCartSidebarHidden),this.isCartSidebarHidden},openCartSidebar:function(){this.isCartSidebarHidden&&this.changeCartSidebarVisibility()},checkItemQuantity:function(t){if("string"!=typeof t){var e=t;return!!("infinite"===e.inventory.type||"finite"===e.inventory.type&&e.inventory.quantity||"bucket"===e.inventory.type&&"out_of_stock"!==e.inventory.value)}if(this.cartData.skus[t]){var i=this.cartData.skus[t];return"infinite"===i.inventory.type||"finite"===i.inventory.type&&i.cart_count<i.inventory.quantity||"bucket"===i.inventory.type&&"out_of_stock"!==i.inventory.value}return!1},checkItemQuantityOnUpdate:function(t){if(this.cartData.skus[t]){var e=this.cartData.skus[t];return"infinite"===e.inventory.type||"finite"===e.inventory.type&&e.cart_count<=e.inventory.quantity||"bucket"===e.inventory.type&&"out_of_stock"!==e.inventory.value}return!1},getCartData:function(){return this.cartData},markCartChange:function(){this.cartData.changed=(new Date).toISOString()},isProductAvailable:function(t){var e;return null===(e=this.adapter)||void 0===e?void 0:e.isProductAvailable(t)},isOutOfStock:function(t){var e;return null===(e=this.adapter)||void 0===e?void 0:e.isOutOfStock(t,this.cartData)},getProductForAddToCart:function(t,e){var i;return null===(i=this.adapter)||void 0===i?void 0:i.getProductForAddToCart(t,e)},addProductToCart:function(t){switch(t.object){case"price":return this.addPriceToCart(t);case"product":return this.addEcwidToCart(t);case"sku":return this.addSkuToCart(t);default:return new W("provider not found")}},addSkuToCart:function(t){if(!t||!t.id)return new W("Sku data isn't valid or doesn’t have an id");if(this.cartData.skus[t.id]){if(!this.checkItemQuantity(t.id))return new W("You can’t add this product with attribute "+t.id+". It's out of stock",z.outOfStock);this.cartData.skus[t.id]=Object.assign({},t,{cart_count:this.cartData.skus[t.id].cart_count+1})}else{if(this.cartData.uniqSkusCount+1>this.cartItemsLimit)return new W("You can’t add more than "+this.cartItemsLimit+" items to the cart");if(!this.checkItemQuantity(t))return new W("You can’t add this product with attribute "+t.id+". It's out of stock",z.outOfStock);this.cartData.skus[t.id]=Object.assign({},t,{cart_count:1}),this.cartData.uniqSkusCount+=1,t.productObject.shippable&&(this.cartData.shippableProducts+=1)}return this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),this.openSidebarOnAddItem&&this.openCartSidebar(),this.cartData},addPriceToCart:function(t){if(!t||!t.id||!t.active)return new W("Price data isn't valid or doesn’t have an id");if(this.cartData.prices[t.id])this.cartData.prices[t.id]=Object.assign({},t,{cart_count:this.cartData.prices[t.id].cart_count+1});else{if(this.cartData.uniqPricesCount+1>this.cartItemsLimit)return new W("You can’t add more than "+this.cartItemsLimit+" items to the cart");this.cartData.prices[t.id]=Object.assign({},t,{cart_count:1}),this.cartData.uniqPricesCount+=1}return this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),this.openSidebarOnAddItem&&this.openCartSidebar(),this.cartData},addEcwidToCart:function(t){if(!t||!t.id)return new W("Product data isn't valid or doesn’t have an id");var e=this.getCartItenKey(t);return this.isProductAvailable(t)?this.isOutOfStock(t)?new W("You can’t add more product ".concat(t.id," items to the cart"),z.outOfStock):(this.cartData.prices[e]?this.cartData.prices[e].cart_count+=1:(this.cartData.prices[e]=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?x(Object(i),!0).forEach((function(e){O(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({cart_count:1},t),this.cartData.uniqPricesCount+=1),this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData),this.openSidebarOnAddItem&&this.openCartSidebar(),this.cartData):new W("You can’t add this product ".concat(t.id,". It's out of stock"),z.outOfStock)},getCartItenKey:function(t){return"product"===t.object&&t.selectedOptions&&Object.keys(t.selectedOptions).length>0?c()("".concat(t.id,"-").concat(JSON.stringify(t.selectedOptions))):t.id},increaseCartItem:function(t){this.cartData.prices[t]&&(this.cartData.prices[t].cart_count+=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},increaseSkuCartItem:function(t){if(this.cartData.skus[t]){if(!this.checkItemQuantity(t))return new W("You can’t add more this product with attribute "+t+". It's out of stock",z.outOfStock);this.cartData.skus[t].cart_count+=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData)}},decreaseCartItem:function(t){this.cartData.prices[t]&&this.cartData.prices[t].cart_count>1&&(this.cartData.prices[t].cart_count-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},decreaseSkuCartItem:function(t){this.cartData.skus[t]&&this.cartData.skus[t].cart_count>1&&(this.cartData.skus[t].cart_count-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},removeFromCart:function(t){this.cartData.prices[t]&&(delete this.cartData.prices[t],this.cartData.uniqPricesCount-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},removeSkuFromCart:function(t){this.cartData.skus[t]&&(this.cartData.skus[t].productObject.shippable&&(this.cartData.shippableProducts-=1),delete this.cartData.skus[t],this.cartData.uniqSkusCount-=1,this.markCartChange(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData))},clearCart:function(){this.cartData=R(),this.backupCartData(),this.events.trigger("ecommerce:cartdata:changed",this.cartData)},createCheckoutSession:function(t){var e=this,i=t.showPromoCodes,n=t.shippingRates,r=t.shippingAddressCollection,o=!1,a=[];Object.keys(this.cartData.prices).forEach((function(t){a.push({price:e.cartData.prices[t].id,quantity:e.cartData.prices[t].cart_count}),"recurring"===e.cartData.prices[t].type&&(o=!0)}));var s=window.location.href.split("?")[0],c=o?"subscription":"payment",l={line_items:a||[],success_url:"".concat(s,"?checkout_status=success&mode=").concat(c,"&session_id={CHECKOUT_SESSION_ID}"),cancel_url:"".concat(s,"?checkout_status=cancel"),payment_method_types:["card"],mode:c,allow_promotion_codes:i};return!o&&n&&r&&(l.shipping_rates=n,l.shipping_address_collection=r),(0,p.R)(this.mag.num_id,l)},updateCartSkus:function(t){var e=this,i=[];if(t.forEach((function(t){e.cartData.skus[t.id]&&(e.cartData.skus[t.id]=Object.assign({},e.cartData.skus[t.id],t),e.checkItemQuantityOnUpdate(t.id)||i.push(e.cartData.skus[t.id].productObject.name))})),this.backupCartData(),i.length)return i},updateCartData:function(){return new Promise(function(t,e){this.cartData&&this.cartData.skus||e(new W("Empty cart"));var i=[];for(var n in this.cartData.skus)this.cartData.skus.hasOwnProperty(n)&&i.push(n);var r=i.length?o.Z.uniq(i).join(","):null;a.ZP.ajax({type:"GET",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/skus/"+(r?"?skus_ids="+r:""),contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){if(i&&i.data){var n=this.updateCartSkus(i.data);if(n){var r=n.length>1;e(new W("This item".concat(r?"s":""," cannot be used to create an order: ").concat(n.join(", ")," ").concat(r?"are":"is"," out of stock"),z.outOfStock))}t(this.cartData)}}.bind(this),error:function(){e(new W("Error occurred while updating the skus:",i))}})}.bind(this))},hasShippableProducts:function(){return!!this.cartData.shippableProducts||!!this.cartData.uniqPricesCount},setShippingForm:function(t){this.cartData.shippingForm=o.Z.cloneWithObjects(t),this.markCartChange(),this.backupCartData()},getShippingForm:function(){return o.Z.cloneWithObjects(this.cartData.shippingForm)},getShippingOptions:function(){return this.cartData.order&&this.cartData.order.shipping_methods?this.cartData.order.shipping_methods.map((function(t){return{id:t.id,label:t.description,amount:t.amount}})):null},setOrder:function(t){this.cartData.order=t,this.backupCartData()},getOrder:function(){return this.cartData.order},deleteOrder:function(){this.cartData.order=null,this.backupCartData()},cancelOrder:function(){return this.changeOrder({status:"canceled"})},changeShippingMethod:function(t){return this.changeOrder({selected_shipping_method:t})},changeOrder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e,i){this.cartData.order||i(new W("No order")),this.cancelingOrder&&i(),this.cancelingOrder=!0,a.ZP.ajax({type:"PATCH",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/orders/"+this.cartData.order.id+"/",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){this.cancelingOrder=!1,e(t)}.bind(this),error:function(t){this.cancelingOrder=!1,i(new W(t.responseText))}})}.bind(this))},setCustomer:function(t){this.cartData.customer=t,this.backupCartData()},createOrUpdateCustomer:function(t,e){return new Promise((function(i,n){a.ZP.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/customers/"),data:JSON.stringify({customer_data:e}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){i(t)},error:function(t){n(new W(t.responseText))}})}))},getCustomer:function(){return this.cartData.customer},setInvoiceItems:function(t){this.cartData.invoiceItems=t,this.backupCartData()},unsetInvoiceItems:function(){delete this.cartData.invoiceItems,this.backupCartData()},createInvoiceItems:function(t,e,i){return new Promise((function(n,r){a.ZP.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoice_items/"),data:JSON.stringify({customer_id:e,prices:i}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){n(t)},error:function(t){r(new W(t.responseText))}})}))},setInvoice:function(t){this.cartData.invoice=t,this.backupCartData()},unsetInvoice:function(){delete this.cartData.invoice,this.backupCartData()},createInvoice:function(t,e){return new Promise((function(i,n){a.ZP.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/"),data:JSON.stringify({invoiceData:e}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){i(t)},error:function(t){t.responseJSON&&"invoice_no_customer_line_items"===t.responseJSON.code?n(new W(t.responseJSON.message,z.nothingToInvoice)):n(new W(t.responseText))}})}))},getInvoice:function(t,e){return new Promise((function(i,n){a.ZP.ajax({type:"GET",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new W("Not valid response, getInvoice"))},error:function(t){n(new W(t.responseText))}})}))},deleteDraftInvoice:function(t,e){return new Promise((function(i,n){a.ZP.ajax({type:"DELETE",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new W("Not valid response"))},error:function(t){n(new W(t.responseText))}})}))},voidDraftInvoice:function(t,e){return new Promise((function(i,n){a.ZP.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/void/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new W("Not valid response"))},error:function(t){n(new W(t.responseText))}})}))},finalizeInvoice:function(t,e){return new Promise((function(i,n){a.ZP.ajax({type:"POST",url:"/api/projects/".concat(t,"/ecommerce/stripe/invoices/").concat(e,"/finalize/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new W("Not valid response"))},error:function(t){n(new W(t.responseText))}})}))},getPaymentIntent:function(t,e){return new Promise((function(i,n){a.ZP.ajax({type:"GET",url:"/api/projects/".concat(t,"/ecommerce/stripe/payment_intents/").concat(e,"/"),contentType:"application/json; charset=utf-8",success:function(t){t&&t.data?i(t.data):n(new W("Not valid response"))},error:function(t){n(new W(t.responseText))}})}))},updatePaymentIntent:function(t,e,i){return new Promise((function(n,r){a.ZP.ajax({type:"PATCH",url:"/api/projects/".concat(t,"/ecommerce/stripe/payment_intents/").concat(e,"/"),contentType:"application/json; charset=utf-8",data:JSON.stringify({paymentIntentData:i}),dataType:"json",success:function(t){t&&t.data?n(t.data):r(new W("Not valid response"))},error:function(t){r(new W(t.responseText))}})}))},validateCartData:function(t){return!(!t||"object"!==C(t)||isNaN(Date.parse(t.changed))||isNaN(Date.parse(t.backuped))||"number"!=typeof t.uniqSkusCount||"number"!=typeof t.uniqPricesCount||"object"!==C(t.skus)||"object"!==C(t.prices)||"object"!==C(t.order)&&null!==t.order)},getInvalidAddToCartWidgets:function(){var t=this.mag.getAllWidgets().filter((function(t){return"addtocart"===t.type&&!t.hidden}));if(!t||!t.length)return[];var e=this.products?this.products.map((function(t){return t.id})):[];return t.filter((function(t){return!t.selected_product_id||!e.includes(t.selected_product_id)}))},restoreBackupCartData:function(){if(Modernizr.localstorage){var t=localStorage.getItem(this.getStorageKey());if(t){var e=JSON.parse(t);if(!e.provider||e.provider!==this.connectedProvider)return void this.clearBackup();var i=((Date.now()-Date.parse(e.backuped))/1e3/60/60).toFixed(2);this.validateCartData(e)&&i<=24?this.cartData=e:this.clearBackup()}}},backupCartData:function(){Modernizr.localstorage&&(this.cartData.backuped=(new Date).toISOString(),localStorage.setItem(this.getStorageKey(),JSON.stringify(this.cartData)))},clearBackup:function(){Modernizr.localstorage&&localStorage.removeItem(this.getStorageKey())}}),V.hasEcommerceWidget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t===h.Z.environment.constructor?Boolean(e.find((function(t){return t.get("type")===h.Z.ecommerceCartBlockName}))):Boolean(e.find((function(t){return t.type===h.Z.ecommerceCartBlockName})))};var U=V},985:function(t,e,i){"use strict";var n=i(321),r=i(986),o=i(339),a=i(342),s={GLOBAL_UNIQUE_KEYS:["hidden","z"],GLOBAL_UNIQUE_KEY_PREFIX:"_",FADE_DURATION:200,getUniqueValue:function(t,e,i){var r=e[this.GLOBAL_UNIQUE_KEY_PREFIX+t]||[],o=n.Z.findWhere(r,{pid:i});return void 0===(o=o||n.Z.findWhere(r,{pid:"default"})||{}).value?e[t]:o.value},resetGlobalData:function(t,e){var i=this;return n.Z.each(a.ZP.viewport_listall,(function(r){n.Z.each(i.GLOBAL_UNIQUE_KEYS,(function(o){r==="viewport_"+e?t.set(i.GLOBAL_UNIQUE_KEY_PREFIX+o,[]):n.Z.isEmpty(t[r])||(t[r][i.GLOBAL_UNIQUE_KEY_PREFIX+o]=[])}))})),{}},isGlobalKey:function(t){return-1!==this.GLOBAL_UNIQUE_KEYS.indexOf(t)},getGlobalPrefixedKey:function(t){return this.isGlobalKey(t)?this.GLOBAL_UNIQUE_KEY_PREFIX+t:null},fillUniqueAttributeSets:function(t,e,i){var r={};return e.is_global?((0,n.Z)(this.GLOBAL_UNIQUE_KEYS).each(function(o){if(n.Z.has(t,o)&&void 0!==t[o]){var a=e[this.GLOBAL_UNIQUE_KEY_PREFIX+o]||[],s=n.Z.findWhere(a,{pid:i}),c=n.Z.findWhere(a,{pid:"default"});s?s.value=t[o]:a.push({pid:i,value:t[o]}),c||a.push({pid:"default",value:void 0===e[o]?null:e[o]}),r[this.GLOBAL_UNIQUE_KEY_PREFIX+o]=a}}.bind(this)),r):t},ensurePageDefRecord:function(t){(0,n.Z)(this.GLOBAL_UNIQUE_KEYS).each(function(e){var i=t[this.GLOBAL_UNIQUE_KEY_PREFIX+e]||[];n.Z.findWhere(i,{pid:"default"})||i.push({pid:"default",value:void 0===t[e]?null:t[e]}),t[this.GLOBAL_UNIQUE_KEY_PREFIX+e]=i}.bind(this))},fillUniqueValues:function(t,e,i){i=i||{},n.Z.each(t,(function(r,o){if(n.Z.contains(this.GLOBAL_UNIQUE_KEYS,o)&&(!i.props||n.Z.contains(i.props,o))){var a=this.getUniqueValue(o,t,e);t[o]=void 0===a?r:a}}),this)},isHidden:function(t,e,i){return this.getUniqueValue("hidden",t,e)||!i&&r.Z.hasExpired(t)},show:function(t,e){e=Boolean(e),t.$el.toggleClass("no-transition",e),t.$el.addClass("above-all-fade"),t.$el.hasClass("fade-in")&&!e||(t.cancelHide&&t.cancelHide(),t.show(),n.Z.delay((function(){t.$el.addClass("fade-in")}),50))},hide:function(t,e){return e=Boolean(e),t.$el.addClass("above-all-fade"),new window.Promise((function(i){t.$el.hasClass("fade-in")||e?(t.$el.toggleClass("no-transition",e),t.$el.removeClass("fade-in"),e?(t.hide(),i()):t.cancelHide=o.default.waitForTransitionEnd(t.$el,s.FADE_DURATION,"opacity",(function(){t.hide(),i()}))):i()}))}};e.Z=s},1405:function(t,e,i){"use strict";i.d(e,{x:function(){return n}});var n=function(t,e){return new Intl.NumberFormat(window.navigator.language||"en-US",{style:"currency",currency:e}).format(t)}},1362:function(t,e,i){"use strict";var n=i(312);"undefined"!=typeof window&&(window.iconSVGCache=[]);var r=function(){};r.prototype={MAX_ICON_CACHE_SIZE:30,generateShapeSVG:function(t,e,i,r,o){var a,s=1e5,c=e.get("bg_color")||e.viewport_default&&e.viewport_default.bg_color,l=this.getRGBA(c||"ffffff",e.get("bg_opacity")),d=this.getRGBA(e.get("color"),e.get("opacity"));if("ellipse"==(o="hotspot"===e.get("type")?o||e.get("pin_type"):o||e.get("tp"))){var u=i/2,h=r/2,p=e.get("borders");a=Z("ellipse",{cx:u,cy:h,rx:u,ry:h},l,d,p=Math.min(p,u,h),e.id+"_"+t,e.get("opacity"))}if("rectangle"==o||"polygon"==o){"hotspot"===e.get("type")&&(d=l="rgba(0, 0, 0, 0)");var f,g="rectangle"==o?4:e.get("sides"),m=(p=e.get("borders"),e.get("radius")||0),v=e.get("radius_rect_independent"),b={tlRadius:e.get("radius_rect_tl")||0,trRadius:e.get("radius_rect_tr")||0,blRadius:e.get("radius_rect_bl")||0,brRadius:e.get("radius_rect_br")||0},y=function(t,e,i){for(var n,r,o,a=2*Math.PI/t,c=Math.PI/2-(t%2==1?0:a/2),l=[],d=999999,u=-999999,h=999999,p=-999999,f=0;f<t;f++)n=c+f*a,r=.5+.5*Math.cos(n),o=.5-.5*Math.sin(n),l.push({x:r,y:o}),r<d&&(d=r),r>u&&(u=r),o<h&&(h=o),o>p&&(p=o);for(f=0;f<t;f++)l[f].x=(l[f].x-d)*(e/(u-d)),l[f].y=(l[f].y-h)*(i/(p-h)),l[f].x=Math.round(l[f].x*s)/s,l[f].y=Math.round(l[f].y*s)/s;return l}(g,i,r),w=function(t){if(!t)return 99999;for(var e,i=99999,n=t.length,r=0;r<n;r++){var o=t[r].x-t[(r+1)%n].x,a=t[r].y-t[(r+1)%n].y;(e=Math.sqrt(o*o+a*a))<i&&(i=e),t[r].side=e}return i}(y);a=Z("path",{path:"rectangle"===o&&v?function(t,e){var i=t.tlRadius,n=t.trRadius,r=t.brRadius,o=t.blRadius,a=e.trTop,s=e.tlTop,c=e.tlLeft,l=e.blLeft,d=e.blBottom,u=e.brBottom,h=e.brRight,p=e.trRight;return"M ".concat(a.x," 0\n        L ").concat(s.x," ").concat(s.y,"\n        A ").concat(i," ").concat(i," 0 0 0 ").concat(c.x," ").concat(c.y,"\n        L ").concat(l.x," ").concat(l.y,"\n        A ").concat(o," ").concat(o," 0 0 0 ").concat(d.x," ").concat(d.y,"\n        L ").concat(u.x," ").concat(u.y,"\n        A ").concat(r," ").concat(r," 0 0 0 ").concat(h.x," ").concat(h.y,"\n        L ").concat(p.x," ").concat(p.y,"\n        A ").concat(n," ").concat(n," 0 0 0 ").concat(a.x," ").concat(a.y,"\n        Z")}(b,f=function(t,e,i){var n=e.trRadius,r=e.tlRadius,o=e.blRadius,a=e.brRadius;return n=Math.min(n,i/2),r=Math.min(r,i/2),o=Math.min(o,i/2),a=Math.min(a,i/2),{trTop:{x:t[0].x-n,y:t[0].y},tlTop:{x:t[1].x+r,y:t[1].y},tlLeft:{x:t[1].x,y:t[1].y+r},blLeft:{x:t[2].x,y:t[2].y-o},blBottom:{x:t[2].x+o,y:t[2].y},brBottom:{x:t[3].x-a,y:t[3].y},brRight:{x:t[3].x,y:t[3].y-a},trRight:{x:t[0].x,y:t[0].y+n}}}(y,b,w)):function(t,e,i){if(!t)return"";for(var n=t.length,r="",o=0;o<n;o++){var a=2*o+1,s=(2*o+2)%(2*n);if(r+=0==o?"M":"L",e){r+=e[a].x+" "+e[a].y+" ";var c=e[a].x-e[s].x,l=e[a].y-e[s].y,d=1/((c*c+l*l)/4)-1/(i*i),u=Math.sqrt(1/d);r+="A"+u+" "+u+" 0 0 0 "+e[s].x+" "+e[s].y+" "}else r+=t[o].x+" "+t[o].y+" "}return r+" Z "}(y,(f=function(t,e,i){if(!t)return{};if(e<=1e-4)return{};var n=[],r=t.length;e=Math.min(e,i/2);for(var o=0;o<r;o++){var a,c,l,d,u=t[o],h=t[(o+1)%r],p=t[o].side,f=(h.x-u.x)/p,g=(h.y-u.y)/p;a=u.x+f*e,c=u.y+g*e,l=h.x-f*e,d=h.y-g*e,a=Math.round(a*s)/s,c=Math.round(c*s)/s,l=Math.round(l*s)/s,d=Math.round(d*s)/s,n.push({x:a,y:c}),n.push({x:l,y:d})}return{points:n,radius:e}}(y,m,w)).points,f.radius)},l,d,p,e.id+"_"+t,e.get("opacity"))}if("line"==o){p=e.get("weight"),h=Math.round(r/2)+(p%2==1?.5:0);var S,P=[13*p/3,2*p/3].join(" "),k=p>1?[.001,5*p/3].join(" "):[1,2].join(" "),C=.5===p?"crispEdges":"auto",x="dotted"==e.get("stroke")?p/2:0;if(S="M"+x+" "+h+" L"+i+" "+h,"solid"==e.get("stroke")&&(a='<path d="'.concat(S,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(p,'" shape-rendering="').concat(C,'" />')),"double"==e.get("stroke")){var O="M"+x+" "+(h+p)+" L"+i+" "+(h+p);a='<path d="'.concat("M"+x+" "+(h-p)+" L"+i+" "+(h-p),'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(p,';" shape-rendering="').concat(C,'"/>'),a+='<path d="'.concat(O,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(p,'" shape-rendering="').concat(C,'"/>')}"dotted"==e.get("stroke")&&(a='<path d="'.concat(S,'" stroke-linecap="round" stroke-dasharray="').concat(k,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(p,'"  shape-rendering="').concat(C,'"/>')),"dashed"==e.get("stroke")&&(a='<path d="'.concat(S,'" stroke-dasharray="').concat(P,'" style="fill: none; stroke: ').concat(l,"; stroke-width: ").concat(p,'" shape-rendering="').concat(C,'"/>'))}if("icon"==o){var T=this.iconData||this.current_icon_data;if(!T)return null;var _=T.$svg.clone();return _.css({width:"100%",height:"100%"}),l=this.getRGBA(c,1),_.find("*:not(.fixed-color)").each((function(){var t=(0,n.ZP)(this);t.css({fill:"","fill-opacity":""}),t.get(0).removeAttribute("fill"),t.get(0).removeAttribute("fill-opacity")})),_.get(0).setAttribute("fill",l),_.get(0).setAttribute("fill-opacity",e.get("bg_opacity")),_}return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+i+'px" height="'+r+'px">'+a+"</svg>";function Z(t,e,i,n,r,o,a){var s="mask_"+o,c="clip_"+o,l="",d=2;return r>0&&a>.99&&(d=1),l="<defs>",r>0&&(l+='<mask id="'+s+'">',"path"==t&&(l+='<path d="'+e.path+'" style="fill:white; stroke:black; stroke-width:'+r*d+'"/>'),"ellipse"==t&&(l+='<ellipse cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:white; stroke:black; stroke-width:'+r*d+'"/>'),l+="</mask>"),l+='<clippath id="'+c+'">',"path"==t&&(l+='<path d="'+e.path+'"/>'),"ellipse"==t&&(l+='<ellipse cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'"/>'),l+="</clippath>",l+="</defs>","path"==t&&(l+='<path mask="url(#'+s+')" d="'+e.path+'" style="fill:'+i+'; stroke:none; stroke-width:0; pointer-events: visiblePainted;"/>'),"ellipse"==t&&(l+='<ellipse mask="url(#'+s+')" cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:'+i+'; stroke:none; stroke-width:0; pointer-events: visiblePainted;"/>'),0==r||("path"==t&&(l+='<path clip-path="url(#'+c+')" d="'+e.path+'" style="fill:none; stroke:'+n+"; stroke-width:"+2*r+'; pointer-events: visiblePainted;"/>'),"ellipse"==t&&(l+='<ellipse clip-path="url(#'+c+')" cx="'+e.cx+'" cy="'+e.cy+'" rx="'+e.rx+'" ry="'+e.ry+'" style="fill:none; stroke:'+n+"; stroke-width:"+2*r+'; pointer-events: visiblePainted;"/>')),l}},getRGBA:function(t,e){if(0==e)return"none";var i=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)];return e>.99?"rgb("+i[0]+","+i[1]+","+i[2]+")":"rgba("+i[0]+","+i[1]+","+i[2]+", "+e+")"}},e.Z=r},1315:function(t,e,i){"use strict";var n=i(312),r=i(321),o=function(){};o.prototype={text_viewport_attributes:["style","class","data-size-leading-linked","data-size-leading-ratio","data-anchor-link-pos"],switchTextToViewport:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if("default"===e)return t;var i=(0,n.ZP)("<div>").html(t),o=this.text_viewport_attributes,a=this;i.find("*").each((function(){var t=(0,n.ZP)(this);r.Z.each(o,(function(i){var n=a.getViewportAttributeName(i,e),r=a.getViewportAttributeName(i,"default"),o=t.attr(n),s=t.attr(i);t.removeAttr(r),s&&t.attr(r,s),o&&("empty"===o?t.removeAttr(i):t.attr(i,o))}))}));var s=i.html();return i.empty().remove(),s},getViewportAttributeName:function(t,e){var i=t+"-"+e;return/^data/.test(i)||(i="data-"+i),i}},e.Z=o},350:function(t,e,i){"use strict";i.d(e,{Z:function(){return O}});var n,r,o,a,s=i(312),c=i(321),l=i(308),d=i(339),u=i(342),h=i(351);function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var g=(p(a={},"template-export-pdf-typekit-substitution-news-gothic",(0,h.f)(n||(n=f(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Bold Italic/c6f4e54e-1d69-4559-b813-e2fc4ff29160-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Bold Italic/c6f4e54e-1d69-4559-b813-e2fc4ff29160-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Bold/9aab62b7-bc6f-405a-ad75-227bcf89d9dc-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Bold/9aab62b7-bc6f-405a-ad75-227bcf89d9dc-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic Italic/6327ba72-bfd5-4038-9658-e3a4a95a5c98-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic Italic/6327ba72-bfd5-4038-9658-e3a4a95a5c98-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 400;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/News Gothic/915b0ec4-cd16-40de-883e-1d77c3d07840-3.woff") format("woff"),\n\t\t url("/fonts/webtype/News Gothic/915b0ec4-cd16-40de-883e-1d77c3d07840-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 400;\n}\n</style>\n'])))),p(a,"template-export-pdf-typekit-substitution-georgia-pro",(0,h.f)(r||(r=f(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Black/4ec59c91-f66b-4751-8456-e114e9e14673-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Black/4ec59c91-f66b-4751-8456-e114e9e14673-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 900;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Bold Italic/6f283590-c3c2-416a-95c2-ca67d04aa929-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Bold Italic/6f283590-c3c2-416a-95c2-ca67d04aa929-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Bold/6f633c58-c751-4d08-9cea-2b27f74f37de-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Bold/6f633c58-c751-4d08-9cea-2b27f74f37de-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 700;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro Italic/e3bc0ad4-bdaa-4467-82a0-d90f697b7266-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro Italic/e3bc0ad4-bdaa-4467-82a0-d90f697b7266-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 400;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro SemiBold Italic/0e025df5-ba54-4bbb-84b4-c5b337a5b55b-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro SemiBold Italic/0e025df5-ba54-4bbb-84b4-c5b337a5b55b-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 600;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro SemiBold/60fe12ce-0223-4a9a-8e5c-b3e7bd381bc4-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro SemiBold/60fe12ce-0223-4a9a-8e5c-b3e7bd381bc4-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 600;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Georgia Pro/b97bef32-c0cb-4ad3-b724-1204d229731c-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Georgia Pro/b97bef32-c0cb-4ad3-b724-1204d229731c-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 400;\n}\n</style>\n'])))),p(a,"template-export-pdf-typekit-substitution-nitti",(0,h.f)(o||(o=f(['\n<style id="export-pdf-typekit-substitution">\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Light Italic/15aba0ec-4ceb-49e2-985c-a95134a60aed-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Light Italic/15aba0ec-4ceb-49e2-985c-a95134a60aed-4.svg#web") format("svg");\n\tfont-style: italic;\n\tfont-weight: 300;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Light/6fd7c5e9-3131-4cb6-a99e-da74343b1253-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Light/6fd7c5e9-3131-4cb6-a99e-da74343b1253-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 300;\n}\n@font-face {\n\tfont-family: "<%=id%>";\n\tsrc: url("/fonts/webtype/Nitti Medium/9054f262-2d2d-480f-9360-4560f110243b-3.woff") format("woff"),\n\t\t url("/fonts/webtype/Nitti Medium/9054f262-2d2d-480f-9360-4560f110243b-4.svg#web") format("svg");\n\tfont-style: normal;\n\tfont-weight: 500;\n}\n</style>\n'])))),a),m=i(345),v=i(352),b=i(644);function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){S(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function S(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function P(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var C=3500,x={STYLE_PREFIXES:{paragraph:{viewer:[".used-fonts-test p",".rmwidget.text div p"],editor:["p"],constructor:[".used-fonts-test p",".block.block-text .text-preview p",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h1":{viewer:[".used-fonts-test h1",".rmwidget.text div h1"],editor:["h1"],constructor:[".used-fonts-test h1",".block.block-text .text-preview h1",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h2":{viewer:[".used-fonts-test h2",".rmwidget.text div h2"],editor:["h2"],constructor:[".used-fonts-test h2",".block.block-text .text-preview h2",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h3":{viewer:[".used-fonts-test h3",".rmwidget.text div h3"],editor:["h3"],constructor:[".used-fonts-test h3",".block.block-text .text-preview h3",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},"header-h4":{viewer:[".used-fonts-test h4",".rmwidget.text div h4"],editor:["h4"],constructor:[".used-fonts-test h4",".block.block-text .text-preview h4",".controls .control.text_styles .panel .resizable-scroll-wrapper .resizable-content-wrapper .resizable-content .paragraph-style .style-caption"]},link:{viewer:[".rmwidget.text div a"],editor:["a"],constructor:[".block.block-text .text-preview a"]}},fontsShortList:{},generateStylesStr:function(t){var e,i,n,r="",o=t.style,a=t.indentation?"\t":"",s=";"+(t.lineBreaks?"\n":""),c=t.attrPrefix||"";return"paragraph"==t.tp&&(r+=a+"font-family: "+l("font-family")+s,r+=a+"font-style: "+l("font-style")+s,r+=a+"font-weight: "+l("font-weight")+s,r+=a+"font-size: "+u(l("font-size"))+s,r+=a+"letter-spacing: "+u(l("letter-spacing"))+s,r+=a+"line-height: "+u(l("line-height"))+s,r+=a+"text-align: "+l("text-align")+s,r+=a+"text-decoration: "+l("text-decoration")+s,r+=a+"text-transform: "+l("text-transform")+s,r+=a+"color: "+d.default.getRGBA(l("color"),l("opacity")/100)+s,r+=a+"padding-top: "+u(l("padding-top"))+s,r+=a+"padding-right: "+u(l("padding-right"))+s,r+=a+"padding-bottom: "+u(l("padding-bottom"))+s,r+=a+"padding-left: "+u(l("padding-left"))+s),"link"==t.tp&&(r+=a+"text-decoration: none"+s,r+=a+"color: "+d.default.getRGBA(l("color"),l("opacity")/100)+s,"none"!=l("u-style")?(e=d.default.getRGBA(l("u-color"),l("u-opacity")/100),i=parseInt(l("u-size"),10),n=parseInt(l("u-offset"),10)+i,r+=a+"padding-bottom: "+u(Math.max(n,0))+s,"solid"==l("u-style")&&(r+=a+"background: linear-gradient(to right, "+e+" 0%, "+e+" 100%)"+s,r+=a+"background-size: 1px "+u(i)+s),"dotted"==l("u-style")&&(r+=a+"background: linear-gradient(to right, "+e+" 0%, "+e+" 50%, transparent 50%,transparent 100%)"+s,r+=a+"background-size: "+u(2*i)+" "+u(i)+s),"dashed"==l("u-style")&&(r+=a+"background: linear-gradient(to right, "+e+" 0%, "+e+" 66.6666%, transparent 66.6666%,transparent 100%)"+s,r+=a+"background-size: "+u(3*i)+" "+u(i)+s),r+=n<0?a+"background-position: 0 "+(100+n)+"%"+s:a+"background-position: 0 100%"+s,r+=a+"background-repeat: repeat-x"+s):r+=a+"background: none"+s),r;function l(t){var e=o[c+t];return"inherit"==e&&c&&(e=o[t]),e}function u(t){return t+(/px/i.test(t)?"":"px")}},generateCSS:function(t,e,i,n,r){if(n){var o=this.STYLE_PREFIXES[t][e],a=(r=r||{},this),d="";c.Z.each(n,(function(i){if("paragraph"==t&&(i.tag&&"p"!==i.tag&&l.Z.AVAILABLE_TEXT_TAGS.includes(i.tag)&&(o=[].concat(a.STYLE_PREFIXES["header-"+i.tag][e],a.STYLE_PREFIXES[t][e]).filter((function(t,e,i){return i.indexOf(t)===e}))),d+=c.Z.map(o,(function(t){return t+"."+i._name})).join(",\n")+" {\n",d+=a.generateStylesStr({tp:t,style:i,indentation:!0,lineBreaks:!0}),d+="}\n\n"),"link"==t){if(r.forcePseudoState&&r.forcePseudoClass==i._name)d+=c.Z.map(o,(function(t){return t+"."+i._name})).join(",\n")+" {\n",d+=a.generateStylesStr({tp:t,style:i,attrPrefix:r.forcePseudoState+"-",indentation:!0,lineBreaks:!0}),d+="}\n\n";else d+=c.Z.map(o,(function(t){return t+"."+i._name})).join(",\n")+" {\n",d+=a.generateStylesStr({tp:t,style:i,indentation:!0,lineBreaks:!0}),d+="}\n\n",c.Z.find(c.Z.keys(i),(function(t){return/^current/.test(t)}))&&(d+=c.Z.map(o,(function(t){return t+".current."+i._name})).join(",\n")+" {\n",d+=a.generateStylesStr({tp:t,style:i,attrPrefix:"current-",indentation:!0,lineBreaks:!0}),d+="}\n\n"),d+=c.Z.map(o,(function(t){return t+".hovered."+i._name})).join(",\n")+" {\n",d+=a.generateStylesStr({tp:t,style:i,attrPrefix:"hover-",indentation:!0,lineBreaks:!0}),d+="}\n\n";d+=c.Z.map(o,(function(t){return t+"."+i._name+" *"})).join(",\n")+" {\n",d+="\tcolor: inherit !important;\n",d+="\ttext-decoration: none !important;\n",d+="}\n\n"}})),i=i||document;var u="text_styles_"+t+"_"+e;(0,s.ZP)("#"+u,i).remove();var h=i.createElement("style");h.type="text/css",h.id=u,h.className="text_styles",h.appendChild(i.createTextNode(d)),i.getElementsByTagName("head")[0].appendChild(h)}},appendFontsCssToDocument:function(t,e){window.TypekitPreview&&window.TypekitPreview.setup&&window.TypekitPreview.setup({auth_id:l.Z.TYPEKIT_ID,auth_token:l.Z.TYPEKIT_TOKEN,default_subset:"all"});var i,n=(0,s.ZP)("link.fonts, style.fonts"),r=[],o=[],a={};n.each((function(){var t=(0,s.ZP)(this),e=t.attr("data-provider"),i=t.attr("data-fonts-and-variations").split("||");c.Z.each(i,(function(t){r.push(e+"|"+t)}))})),c.Z.each(t.fonts,(function(t){c.Z.each(t.used_variations||t.variations,(function(e){o.push(t.provider+"|"+t.css_name+"|"+e)}))})),i=c.Z.difference(o,r);var u={};c.Z.each(i,(function(t){var e=t.split("|"),i=e[0],n=e[1],r=e[2],o=i+"|"+n;u[o]=u[o]||[],u[o].push(r)}));var h=[];c.Z.each(u,(function(t,e){var i=e.split("|"),n=i[0],r=i[1],o=t;h.push({provider:n,css_name:r,variations:o})})),c.Z.each(h,(function(e){var i,n=e.provider,r=e.css_name+"|"+e.variations.join("||"+e.css_name+"|");if(a[n]||(a[n]=[]),"google"==n){var o=s.ZP.map(e.variations,(function(t){return 100*(t.substr(1,1)-0)+("n"==t.substr(0,1)?"":"italic")}));i={fontAndVariations:r,data:e.css_name.split(" ").join("+")+":"+o.join(",")}}if("webtype"==n&&(i={fontAndVariations:r,data:e.css_name+":"+e.variations.join(",")}),"typetoday"==n&&(i={fontAndVariations:r,data:e.css_name+":"+e.variations.join(",")}),"custom"==n){var l=c.Z.findWhere(t.fonts,{provider:"custom",css_name:e.css_name});l&&l.css_url&&(i={fontAndVariations:r,data:{css_name:e.css_name,css_url:l.css_url,signed_css_url:l.signed_css_url}})}"typekit"==n&&(i={fontAndVariations:r,data:{id:e.css_name,variations:e.variations}}),i&&a[n].push(i)}));var p=RM.screenshot&&"true"==d.default.queryUrlGetParam("pdf");p&&this.loadTypekitSubstitutionFonts(a.typekit);var f=c.Z.has(a,"custom");function g(t){var e=(0,s.ZP)("<link>").attr("type","text/css").attr("rel","stylesheet").attr("href",t);(0,s.ZP)("head").append(e)}c.Z.each(a,(function(i,n){var r,o,a,u,h,f,m="custom"==n?1:"google"==n?22:i.length,v=Math.ceil(i.length/m),b=0,y=function(){if(o=r*m,a=Math.min((r+1)*m,i.length),u=i.slice(o,a),h=c.Z.pluck(u,"data"),f=c.Z.pluck(u,"fontAndVariations"),(0,s.ZP)("link, style").addClass("existing"),"google"==n&&(S=(l.Z.IS_FILE_PROTOCOL?"http://":"//")+"fonts.googleapis.com/css?family=",w=h.join("%7C"),"&subset=latin,vietnamese,khmer,cyrillic-ext,greek-ext,greek,devanagari,latin-ext,cyrillic",g(S+w+"&subset=latin,vietnamese,khmer,cyrillic-ext,greek-ext,greek,devanagari,latin-ext,cyrillic")),"typekit"==n){if("edit"==t.version&&!p)try{window.TypekitPreview&&window.TypekitPreview.load(h)}catch(t){}"published"==t.version&&t.typekit_url&&("undefined"!=typeof Typekit&&(Typekit=void 0),(0,s.ZP)("style.typekit-kit").remove(),s.ZP.getScript(t.typekit_url,(function(){try{Typekit.load({active:function(){var t=(0,s.ZP)("style").filter((function(t,e){return/typekit/i.test(e.innerHTML)}));t.addClass("typekit-kit"),y(t)}})}catch(t){}})))}var v;function y(t){t.addClass("fonts").attr("data-id",d.default.generateUUID()).attr("data-provider",n).attr("data-fonts-and-variations",f.join("||"))}"webtype"==n&&(S=RM.common.isDownloadedSource?l.Z.readymag_host:"",(0,s.ZP)('link.fonts[data-provider="webtype"]').length||(P=window.ServerData&&window.ServerData.fonts&&window.ServerData.fonts.webtype,g(S+P))),"typetoday"!=n||p||(S=RM.common.isDownloadedSource?l.Z.readymag_host:"",(0,s.ZP)('link.fonts[data-provider="typetoday"]').length||(P=window.ServerData&&window.ServerData.fonts&&window.ServerData.fonts.typetoday,g(S+P))),"custom"==n&&(k=h[0].signed_css_url||h[0].css_url,/^\/api\/fonts\//i.test(k)?(v=(0,s.ZP)("<style>").attr("type","text/css"),(0,s.ZP)("head").append(v),s.ZP.get(k,(function(t){v.text(t),++b>=i.length&&c.Z.isFunction(e)&&e()}))):g(k)),y((0,s.ZP)("link:not(.existing), style:not(.existing)")),(0,s.ZP)("link, style").removeClass("existing")};for(r=0;r<v;r++){var w,S,P,k;y()}})),!f&&c.Z.isFunction(e)&&e()},loadTypekitSubstitutionFonts:function(t){t&&t.length&&c.Z.each(t,(function(t){var e=t.data.id,i=c.Z.findWhere(x.fontsShortList.typekit,{id:e}),n=(i=(i=i&&i.browse_info)&&i.classification)&&i.length&&i[0]||"sans-serif",r={"sans-serif":"news-gothic",decorative:"news-gothic",handmade:"news-gothic",blackletter:"news-gothic",script:"news-gothic","slab-serif":"news-gothic",serif:"georgia-pro",monospaced:"nitti"},o=(0,g["template-export-pdf-typekit-substitution-"+(r[n]||r["sans-serif"])])({id:e});(0,s.ZP)("head").append(o)}))},appendFontsCssToIFrame:function(t){var e=(0,s.ZP)("link.fonts, style.fonts"),i=(0,s.ZP)("link.fonts, style.fonts",t),n={},r=(0,s.ZP)("head",t);i.each((function(){n[(0,s.ZP)(this).attr("data-id")]=!0})),e.each((function(){var t=(0,s.ZP)(this),e=this.href;if(!n[t.attr("data-id")]){var i=t.clone();e&&Modernizr.safari&&i.attr("href",e+"&edit_mode=true"),i.appendTo(r)}}))},isFastFontLoadCheckAvailable:function(){return Boolean(document.fonts&&window.Promise)},fastWaitForFontLoad:function(t,e,i){var n,r=this;if(document.fonts){var o=i+(e?" "+e:"")+" 12px "+t,a=function t(e,i){var n,r=P(document.fonts);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.family===e)return o.loaded}}catch(t){r.e(t)}finally{r.f()}return i>Date.now()-C?new Promise((function(n){setTimeout((function(){n(t(e,i))}),50)})):Promise.resolve(!1)},s=!document.fonts.check(o),c=(0,m._)("viewer.enhancedFontLoadCheck")&&!s?document.fonts.load(o).then((function(){return a(t,Date.now())})):document.fonts.load(o).then((function(){return document.fonts.check(o)?o:r.fontLoadedTimeoutCheck(o)})),l=new window.Promise((function(t,e){setTimeout(e.bind(null,o),C)}));n=window.Promise.race([c,l])}else n=window.Promise.reject();return n},exactWaitForFontLoad:function(t,e,i,n){var r=i+" "+e+" 12px "+t+", Arial",o=i+" "+e+" 12px Arial",a=(0,s.ZP)('<canvas width="20" height="20"></canvas>'),c=a[0],l=c.getContext("2d"),d="",u="",h=+new Date;a.appendTo("body").css({position:"absolute",left:0,top:"-999px"}),function s(){var p=+new Date-h>1e4,f=function(){var t=r;l.clearRect(0,0,20,20),d||(d=c.toDataURL("image/png"),t=o);l.font=t,l.fillStyle="000",l.fillText("a1-&q",0,20);var e=c.toDataURL("image/png");u||(u=e);return e!=d&&e!=u}();if(f||p)return l=void 0,a.remove(),void n(f,t,e,i);setTimeout(s,100)}()},fontLoadedTimeoutCheck:function(t){var e=Date.now(),i=function i(n,r){var o=Date.now()-e;document.fonts.check(t)?n(t):o<C?setTimeout(i.bind(null,n,r),100):r(t)};return new window.Promise((function(t,e){i(t,e)}))},getHotspotTextModels:function(t){var e=[];return t.widgets_collection&&t.widgets_collection.length?e=t.widgets_collection.filter((function(e){return"text"===e.get("type")&&(t.get?t.get("wids"):t.wids).indexOf(e.get("_id"))>-1})):t._nestedWidgetsJSON&&t._nestedWidgetsJSON.length?e=c.Z.filter(t._nestedWidgetsJSON,(function(t){return"text"===t.type})):t.wids&&t.wids.length&&(e=c.Z.filter(t.wids,(function(t){return"text"===t.type}))),e},getUsedFontsFromWidgetsModels:function(t){var e={},i={},n={},r={},o={},a={},s=t.models;function d(t,e){return"function"==typeof t.get?t.get(e):t[e]}for(var h=0;h<s.length;h++){var p=s[h];if("slideshow"===d(p,"type"))if(2===d(p,"version")){var f=d(p,"pictures");null!=f&&f.length&&f.forEach((function(e){var n;null!==(n=e.caption)&&void 0!==n&&n.blocks&&c.Z.extend(i,v.ZP.getTextWidgetFontsList(e.caption,t.activeViewports))}))}else if(d(p,"text_style")){var g=d(p,"text_style");g["font-family"]&&g["font-weight"]&&g["font-style"]&&(i[g["font-family"]+"|"+g["font-style"]+"|"+g["font-weight"]]=1)}if("button"===d(p,"type")){d(p,"font-family")&&d(p,"font-weight")&&d(p,"font-style")&&(n[d(p,"font-family")+"|"+d(p,"font-style")+"|"+d(p,"font-weight")]=1);for(var m=0;m<u.ZP.viewports.length;m++){var b=p["viewport_"+u.ZP.viewports[m].name];b&&(n[b["font-family"]+"|"+b["font-style"]+"|"+b["font-weight"]]=1)}}if(d(p,"type")===l.Z.ecommerceCartBlockName&&d(p,"font-family")&&d(p,"font-weight")&&d(p,"font-style")&&(o[d(p,"font-family")+"|"+d(p,"font-style")+"|"+d(p,"font-weight")]=1),d(p,"type")===l.Z.addToCartBlockName&&(d(p,"font-family")&&d(p,"font-weight")&&d(p,"font-style")&&(a[d(p,"font-family")+"|"+d(p,"font-style")+"|"+d(p,"font-weight")]=1),d(p,"attrs-font-family")&&d(p,"attrs-font-weight")&&d(p,"attrs-font-style")&&(a[d(p,"attrs-font-family")+"|"+d(p,"attrs-font-style")+"|"+d(p,"attrs-font-weight")]=1)),"form"===d(p,"type")){var y=d(p,"style-"+d(p,"style")+"-fields"),w=c.Z.clone(d(p,"style-"+d(p,"style")+"-button-default"));c.Z.isEmpty(w)||(w["font-family"]="inherit"==w["font-family"]?y["font-family"]:w["font-family"],w["font-style"]="inherit"==w["font-style"]?y["font-style"]:w["font-style"],w["font-weight"]="inherit"==w["font-weight"]?y["font-weight"]:w["font-weight"]),r[y["font-family"]+"|"+y["font-style"]+"|"+y["font-weight"]]=1,w&&(r[w["font-family"]+"|"+w["font-style"]+"|"+w["font-weight"]]=1);for(var S=0;S<u.ZP.viewports.length;S++){var P=p["viewport_"+u.ZP.viewports[S].name];P&&(y=P["style-"+P.style+"-fields"],w=c.Z.clone(P["style-"+P.style+"-button-default"]),c.Z.isEmpty(w)||(w["font-family"]="inherit"==w["font-family"]?y["font-family"]:w["font-family"],w["font-style"]="inherit"==w["font-style"]?y["font-style"]:w["font-style"],w["font-weight"]="inherit"==w["font-weight"]?y["font-weight"]:w["font-weight"]),y&&(r[y["font-family"]+"|"+y["font-style"]+"|"+y["font-weight"]]=1),w&&(r[w["font-family"]+"|"+w["font-style"]+"|"+w["font-weight"]]=1))}}"text"===d(p,"type")&&3===d(p,"version")&&c.Z.extend(e,v.ZP.getTextWidgetFontsList(p,t.activeViewports)),"text"===d(p,"type")&&d(p,"text")&&3!==d(p,"version")&&c.Z.extend(e,this.scanTextForFontsAndVariationsRaw(d(p,"text"),d(p,"version"),t.excludeUnusedDefault,t.activeViewports)),"hotspot"===d(p,"type")&&c.Z.each(this.getHotspotTextModels(p),c.Z.bind((function(i){3===d(i,"version")?c.Z.extend(e,v.ZP.getTextWidgetFontsList(i,t.activeViewports)):d(i,"text")&&c.Z.extend(e,this.scanTextForFontsAndVariationsRaw(d(i,"text"),d(i,"version"),t.excludeUnusedDefault))}),this))}var k=c.Z.extend({},e,i,n,r,o,a),C={};if(t.onlyFontsNames){var O=[];return c.Z.each(k,(function(t,e){var i=e.split("|")[0];i&&O.push(i)})),O}var T={bold:700,normal:400};c.Z.each(k,(function(t,e){var i=e.split("|"),n=i[0],r=i[1].toLowerCase(),o=i[2].toLowerCase(),a=o in T?T[o]:o;C[n]=C[n]||[],C[n].push("variable"===a?"v":("italic"===r?"i":"n")+Math.floor(a/100))}));var _,Z=[],I=this;return c.Z.each(C,(function(e,i){(_=c.Z.findWhere(x.fontsShortList.webtype,{name:i}))?Z.push({provider:"webtype",css_name:_.name,name:_.name,variations:_.variations,used_variations:I.calcBrowserUsedVariation(e,_.variations)}):(_=c.Z.findWhere(x.fontsShortList.typetoday,{name:i}))?Z.push({provider:"typetoday",css_name:_.name,name:_.name,variations:_.variations,used_variations:I.calcBrowserUsedVariation(e,_.variations)}):(_=c.Z.findWhere(x.fontsShortList.google,{family:i}))?Z.push({provider:"google",css_name:_.family,name:_.family,variations:_.variations,used_variations:I.calcBrowserUsedVariation(e,_.variations)}):(_=c.Z.findWhere(x.fontsShortList.typekit,{id:i}))?Z.push({provider:"typekit",css_name:_.id,name:_.name,variations:_.variations,used_variations:I.calcBrowserUsedVariation(e,_.variations)}):t.includeCustom&&(_=c.Z.findWhere(t.customList,{css_name:i}))&&Z.push({provider:"custom",css_name:_.css_name,css_url:_.css_url,name:_.name,variations:_.variations,used_variations:I.calcBrowserUsedVariation(e,_.variations)})})),Z.filter((function(t){return t.used_variations&&t.used_variations.length>0}))},getStylesFromText3Model:function(t,e){function i(t,e){return"function"==typeof t.get?t.get(e):t[e]}var n=new Set;if("link"===e&&i(t,"entityMap")){var r=i(t,"entityMap");c.Z.isEmpty(r)||c.Z.each(r,(function(t){var e,i;"LINK"===t.type&&null!==(e=t.data)&&void 0!==e&&e.linkStyle&&n.add(null===(i=t.data)||void 0===i?void 0:i.linkStyle)}))}else if(i(t,"blocks")&&i(t,"blocksMeta")){var o=i(t,"blocks")||[],a=i(t,"blocksMeta");o.forEach((function(t){var i=a?a.find((function(e){return e.key===t.key})):t,r=null==i?void 0:i.data,o="paragraph"===e?"textStyle":"listStyle";null!=r&&r[o]&&n.add(r[o])}))}return n},getStylesFromText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=new Set,n=e||RM.constructorRouter.workspace.mag.edit_params.get("paragraph_styles");if(t)for(var r=0;r<n.length;r++){var o=n[r];t.indexOf(o._name)>=0&&i.add(o)}return i},getUsedStylesFromWidgetsModels:function(t){var e,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"paragraph",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="paragraph"===n?RM.constructorRouter.workspace.mag.edit_params.get("paragraph_styles"):"list"===n?null===(e=(0,b.we)())||void 0===e?void 0:e.project:[],a=new Set,s="";function l(t,e){return"function"==typeof t.get?t.get(e):t[e]}for(var d=function(e){var o=t[e];if("text"===l(o,"type")&&3===l(o,"version")){var d=i.getStylesFromText3Model(o,n);d.size&&d.forEach((function(t){return a.add(t)})),u.ZP.viewports.forEach((function(t){var e,r="viewport_".concat(t.name);if(null!==(e=o[r])&&void 0!==e&&e.blocksMeta){var s=o[r].blocks||l(o,"blocks"),c=i.getStylesFromText3Model(w(w({},o[r]),{},{blocks:s}),n);c.size&&c.forEach((function(t){return a.add(t)}))}}))}if(!r&&"text"===l(o,"type")&&3!==l(o,"version")&&l(o,"text")&&(s+=l(o,"text")),"slideshow"===l(o,"type")&&2===l(o,"version")){var h=l(o,"pictures");null!=h&&h.length&&h.forEach((function(t){var e,r;if(null!==(e=t.caption)&&void 0!==e&&e.blocks&&null!==(r=t.caption)&&void 0!==r&&r.blocksMeta){var o=i.getStylesFromText3Model(t.caption,n);o.size&&o.forEach((function(t){return a.add(t)}))}}))}"hotspot"===l(o,"type")&&c.Z.each(i.getHotspotTextModels(o),(function(t){if(3===l(t,"version")){var e=i.getStylesFromText3Model(t,n);e.size&&e.forEach((function(t){return a.add(t)}))}else!r&&l(t,"text")&&(s+=l(t,"text"))}))},h=0;h<t.length;h++)d(h);if(!r){var p=this.getStylesFromText(s,o);p.size&&p.forEach((function(t){return a.add(t)}))}return a},getUsedParagraphStylesFromWidgetsModels:function(t){var e,i,n="";for(e=0;e<t.length;e++)"text"==s(i=t[e],"type")&&s(i,"text")&&(n+=s(i,"text")),"hotspot"==s(i,"type")&&c.Z.each(this.getHotspotTextModels(i),c.Z.bind((function(t){n+=s(t,"text")||""}),this));var r=[],o=RM.constructorRouter.workspace.mag.edit_params.get("paragraph_styles");if(n)for(e=0;e<o.length;e++){var a=o[e];n.indexOf(a._name)>=0&&r.push(a)}function s(t,e){return"function"==typeof t.get?t.get(e):t[e]}return r},getUsedLinkStylesFromWidgetsModels:function(t){var e,i,n="";for(e=0;e<t.length;e++)"text"==s(i=t[e],"type")&&s(i,"text")&&(n+=s(i,"text")),"hotspot"==s(i,"type")&&c.Z.each(this.getHotspotTextModels(i),c.Z.bind((function(t){n+=s(t,"text")||""}),this));var r=[],o=RM.constructorRouter.workspace.mag.edit_params.get("link_styles");if(n)for(e=0;e<o.length;e++){var a=o[e];n.indexOf(a._name)>=0&&r.push(a)}function s(t,e){return"function"==typeof t.get?t.get(e):t[e]}return r},sortFontsByProvider:function(t){var e=[],i=[],n={};return c.Z.each(t,(function(t){"typekit"===t.provider&&e.push({id:t.css_name,variations:t.used_variations}),"custom"===t.provider&&i.push(t.css_name);var r="used_"+t.provider+"_fonts";n[r]=n[r]||[],"custom"===t.provider?n[r].push(t.css_name):n[r].push({id:t.css_name,variations:t.used_variations})})),{typekit:e,custom:i,dictionary:n}},scanTextForFontsAndVariationsRaw:function(t,e,i,n){var r,o,a,l,d,h,p,f,g,m,v,b={},y={},w=[],S=document.defaultView.getComputedStyle;for(r=0;r<u.ZP.viewports.length;r++)if(t.split("-"+u.ZP.viewports[r].name).length>1){if(n&&-1===n.indexOf(u.ZP.viewports[r].name))continue;w.push(u.ZP.viewports[r].name)}(a=(0,s.ZP)(".used-fonts-test")).length||(a=(0,s.ZP)("<div>").addClass("used-fonts-test").css({position:"absolute",display:"none !important",left:-9999,width:999}).appendTo("body")),a.removeClass("v1 v2").addClass("v"+(e||1)),(o=a[0]).innerHTML=t,p=(h=o.querySelectorAll("span,p,a")).length;var P,k=(d=S(o,null)).fontFamily+"|"+d.fontStyle+"|"+d.fontWeight;b[k]=1;for(var C=!1,x=function(t){return-1!==c.Z.findIndex(t.childNodes,(function(t){return t.nodeType===Node.TEXT_NODE&&t.textContent.replace(/\r?\n/g,"").length}))},O=c.Z.filter(h,x),T=0;T<O.length;T++)P=(d=S(O[T],null)).fontFamily+"|"+d.fontStyle+"|"+d.fontWeight,C=C||P===k,b[d.fontFamily+"|"+d.fontStyle+"|"+d.fontWeight]=1;var _=x(o);for(r=0;r<w.length;r++)if("default"!=(m=w[r])){for(l=0;l<p;l++)(f=(v=h[l]).getAttribute("data-style-"+m))&&("empty"==f?v.removeAttribute("style"):v.setAttribute("style",f)),(g=v.getAttribute("data-class-"+m))&&("empty"==g?v.removeAttribute("class"):v.setAttribute("class",g)),x(v)&&(P=(d=S(v,null)).fontFamily+"|"+d.fontStyle+"|"+d.fontWeight,C=C||P===k,b[P]=1);r<w.length-1&&(o.innerHTML=t,p=(h=o.querySelectorAll("span,p,a")).length)}return!i||C||_||delete b[k],c.Z.each(b,(function(t,e){var i=e.split("|"),n=i[0],r=i[1].toLowerCase(),o=i[2].toLowerCase();n=(n=n.split(",")[0]).replace(/'|"/g,""),o=(o=(o=o.replace(/normal/g,"400")).replace(/regular/g,"400")).replace(/bold/g,"700"),y[n+"|"+r+"|"+o]=1})),y},calcBrowserUsedVariation:function(t,e){for(var i={},n=0;n<t.length;n++){for(var r,o,a,s=t[n],l=s.substr(1,1),d=s.substr(0,1),u=99999,h="",p=0;p<e.length;p++)r=e[p].substr(1,1)-0,o=e[p].substr(0,1),l<4&&(a=10*Math.abs(r-l)+(o==d?0:1e3)+(r<=l?0:100)),l>5&&(a=10*Math.abs(r-l)+(o==d?0:1e3)+(r>=l?0:100)),4==l&&(a=5==r?0+(o==d?0:1e3)+0:10*Math.abs(r-l)+(o==d?0:1e3)+(r<=l?0:100)),5==l&&(a=10*Math.abs(r-l)+(o==d?0:1e3)+(r<=l?0:100)),l==r&&d==o&&(a=0),a<u&&(u=a,h=e[p]);i[h]=1}return c.Z.keys(i).filter((function(t){return!!t}))},getVeryShortList:function(t){var e={google:[],typekit:[],webtype:[],typetoday:[]};return c.Z.each(t,(function(t){var i,n=t.provider;switch(n){case"google":i={provider:n,family:t.name,variations:t.variations};break;case"typekit":i={provider:n,id:t.css_name,name:t.name,variations:t.variations};break;case"webtype":case"typetoday":i={provider:n,name:t.name,variations:t.variations}}e[n]&&e[n].push(i)})),e},getCustomVariationNameByFVD:function(t,e){return(x.fontCustomVariationNames[t]||{})[e]},setShortList:function(t){x.fontsShortList=t||{},x.fontCustomVariationNames={},c.Z.each(x.fontsShortList,(function(t,e){c.Z.each(t,(function(t){if(t.custom_variation_names){var i;switch(e){case"google":i=t.family;break;case"typekit":case"webtype":case"typetoday":i=t.name}x.fontCustomVariationNames[i]=t.custom_variation_names}}))}))}};"undefined"!=typeof window&&(window.fontsShortListCallback=function(t){x.setShortList(t)});var O=x},1277:function(t,e,i){"use strict";var n=i(312),r=i(339),o={getVideoAspectFromPoster:function(t,e){var i={abort:function(){u.onload=null,u.onerror=null}},r={aspect_poster:null,aspect_real:null};if(!t)return e(r),i;var o,a,s,c,l,d,u=new Image;return u.onload=function(){l=u.width,d=u.height,s=200,c=Math.floor(s*(d/l)),o=(0,n.ZP)('<canvas id="qqq" width="200" height="'+c+'"></canvas>').css("visibility","hidden").appendTo("body"),(a=o[0].getContext("2d")).drawImage(u,0,0,s,c);var t,i,h=a.getImageData(0,0,s,c),p=0,f=0,g=0,m=0;for(i=0;i<=c/2;i++){if(w(i,"row").isContrast){(i<=1||w(i-1,"row").isBlack||w(i-2,"row").isBlack)&&(p=i);break}}for(i=c-1;i>c/2;i--){if(w(i,"row").isContrast){(i>=c-2||w(i+1,"row").isBlack||w(i+2,"row").isBlack)&&(f=c-1-i);break}}var v=Math.max(p,f),b=0;if(!v){for(t=0;t<=100;t++){if(w(t,"column").isContrast){(t<=1||w(t-1,"column").isBlack||w(t-2,"column").isBlack)&&(g=t);break}}for(t=199;t>100;t--){if(w(t,"column").isContrast){(t>=198||w(t+1,"column").isBlack||w(t+2,"column").isBlack)&&(m=199-t);break}}b=Math.max(m,g)}v>c/3&&(v=0),b>s/3&&(b=0);var y=l/d;function w(t,e){var i,n,r,o,a,l="row"==e?s:c,d=0,u=0;for(i=0;i<l;i++)n=("row"==e?t*s+i:i*s+t)<<2,d+=(r=h.data[n])+(o=h.data[n+1])+(a=h.data[n+2]),r<20&&o<20&&a<20&&u++;return{isBlack:(d/=3*l)<5&&l-u<3,isContrast:u<l/2}}v?y=s/(c-2*v):b&&(y=(s-2*b)/c),o.remove(),r.aspect_poster=l/d,r.aspect_real=y,e(r)},u.onerror=function(){e(r)},u.src="/api/proxy/?url="+encodeURIComponent(t),i},setVideoPosition:function(t){if(t.aspect_poster&&t.$media&&t.$media.length){var e=t.$container.css("width"),i=t.$container.css("height");if(/px/.test(e+i))e=parseInt(e),i=parseInt(i);else{if(!t.mag)return;var n=t.mag.getContainerSizeCached();e=n.width,i=n.height}var r,o,a=t.aspect_poster,s=t.aspect_real||a,c=t.controls_remove?5:0,l=e+2*c,d=i+2*c,u=l,h=d;if(a)l/d>s?o=(r=l)/s:r=(o=d)*s,a<s?h=(u=r)/a:u=(h=o)*a;if("vimeo"==t.provider.toLowerCase()&&t.controls_remove){var p=50-(h-d)/2,f=46-(u-l)/2;if(p>0||f>0){var g=(h+2*p)/h,m=(u+2*f)/u,v=Math.max(g,m);u*=v,h*=v}}if("youtube"==t.provider.toLowerCase()&&t.controls_remove){var b=103-(h-d)/2;b>0&&(u=(h+=2*b)*a)}var y=-c-(u-l)/2,w=-c-(h-d)/2;t.$media.css({left:y,top:w,width:u,height:h})}},getHighResVideoThumbnail:function(t){if(!t.provider||!t.thumbnail_url)return Promise.resolve(t.thumbnail_url||"");switch(t.provider.toLowerCase()){case"vimeo":return Promise.resolve(t.thumbnail_url);case"youtube":return Promise.resolve((e=t.thumbnail_url,i="maxresdefault",e.replace(/(\/)(\w*default)(\.\w+$)/i,"$1"+i+"$3")));default:return Promise.resolve(t.thumbnail_url)}var e,i},getEmbedData:function(t,e,i){return n.ZP.ajax({type:"GET",url:"/api/proxy/",dataType:"json",data:{url:/oembed/i.test(t)?t:this.getEmbedUrl(t)},success:function(t){t.url=t.url&&r.default.toHttps(t.url),t.thumbnail_url=t.thumbnail_url&&r.default.toHttps(t.thumbnail_url),"function"==typeof e&&e(t)},error:function(t,e,n){"abort"!==e&&"function"==typeof i&&i(t,e,n)},global:!1})},getEmbedUrl:function(t){if(this.isVimeo(t))return"https://vimeo.com/api/oembed.json?url="+encodeURIComponent(t)+"&width=1280";var e=o.getYoutubeIdFromUrl(t);return e?"https://www.youtube.com/oembed?format=json&url="+encodeURIComponent("https://www.youtube.com/watch?v="+e):""},getYoutubeIdFromUrl:function(t){var e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);if(e&&11===e[2].length)return e[2];return(e=t.match(/.*(youtu.*\&v=)([^#\&\?]*).*/))&&11===e[2].length?e[2]:null},getVimeoIdFromUrl:function(t){var e=t.match(/(video\/)(\w+)(_\d+x\d+|_\d+)(\.\w+$)/i);return e&&e[2]?e[2]:null},getVideoProvider:function(t){return this.isVimeo(t)?"Vimeo":this.isYoutube(t)?"YouTube":""},isVimeo:function(t){return/vimeo\.com\/.+/.test(t)},isYoutube:function(t){return!!this.getYoutubeIdFromUrl(t)},brokenVimeoThumbnailRegexp:/\/\d+_[\dx]+(\.\w+)?$/};e.Z=o},1349:function(t,e){"use strict";function i(t){return new i.fn.init(t)}var n={},r={};Array.prototype.slice;function o(t,e,i){if(!i.contentWindow.postMessage)return!1;var n=JSON.stringify({method:t,value:e});i.contentWindow.postMessage(n,"*")}function a(t){var e,i;try{i=(e=JSON.parse(t.data)).event||e.method}catch(t){}if(!/^https?:\/\/player.vimeo.com/.test(t.origin))return!1;var o=e.value,a=e.data,s=""===s?null:e.player_id,c=function(t,e){return e?n[e]&&n[e][t]:n[t]}(i,s),l=[];return"ready"!==i||r[s]||(r[s]=!0),!!c&&(void 0!==o&&l.push(o),a&&l.push(a),s&&l.push(s),l.length>0?c.apply(null,l):c.call())}function s(t,e,i){i?(n[i]||(n[i]={}),n[i][t]=e):n[t]=e}function c(t){return!!(t&&t.constructor&&t.call&&t.apply)}i.fn=i.prototype={element:null,init:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.element=t,this.element?this:null},api:function(t,e){if(!this.element||!t)return!1;var i=this.element,n=""!==i.id?i.id:null,r=c(e)?null:e,a=c(e)?e:null;return a&&s(t,a,n),o(t,r,i),this},addEvent:function(t,e){if(!this.element)return!1;var i=this.element,n=""!==i.id?i.id:null;return s(t,e,n),"ready"!=t?o("addEventListener",t,i):"ready"==t&&r[n]&&e.call(null,n),this},removeEvent:function(t){if(!this.element)return!1;var e=this.element,i=function(t,e){if(e&&n[e]){if(!n[e][t])return!1;n[e][t]=null}else{if(!n[t])return!1;n[t]=null}return!0}(t,""!==e.id?e.id:null);"ready"!=t&&i&&o("removeEventListener",t,e)}},i.fn.init.prototype=i.fn,"undefined"!=typeof window&&(window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a)),e.Z=i},1336:function(t,e){"use strict";var i=["DOMMouseScroll","mousewheel"];e.Z=function(t,e,n,r){t||(t=document),e||(e=window),"boolean"!=typeof n&&(n=!0);var o,a,s,c=function(t){!function(t,e,i,n){i&&(t.preventDefault?t.preventDefault():event.returnValue=!1);var r=t.detail||-t.wheelDelta/40;r*=19,"number"!=typeof n||isNaN(n)||(r*=n),e.scrollBy?e.scrollBy(0,r):e.scrollTop+=r}(t=t||window.event,e,n,r)};return(o=t.addEventListener)?(o.call(t,i[0],c,!1),o.call(t,i[1],c,!1)):(o=t.attachEvent)&&o.call(t,"on"+i[1],c),(a=t.removeEventListener)?s=function(){a.call(t,i[0],c,!1),a.call(t,i[1],c,!1)}:(a=t.detachEvent)&&(s=function(){a.call(t,"on"+i[1],c)}),{restore:s}}},1397:function(t,e,i){"use strict";var n=i(336),r=i.n(n),o=i(321),a=i(339),s=i(986),c=i(344),l=i(343),d=i(323);function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return g(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var m=r().View.extend({initialize:function(t){o.Z.bindAll(this),o.Z.extend(this,t);var e={};o.Z.each(this.widgets,o.Z.bind((function(t){if(t.hasAnimation()){var i=t.fixed_position||t.is_full_width||t.is_full_height||t.sticked?a.default.generateUUID():s.Z.getUuidHash(t.getAnimations())||a.default.generateUUID();e[i]=e[i]||[],e[i].push(t)}}),this)),this.animations=[];var i=!d.Z.isDesktop||!Modernizr.safari;o.Z.each(e,function(t){this.addAnimation(t,{allowAccelerate:i})}.bind(this)),this.start.__debounced=o.Z.debounce(this.start,300)},addAnimation:function(t,e){var i=this;e=e||{},t=o.Z.isArray(t)?t:[t];var n=["nonMove","moveOnly"].concat(f(s.Z.EVENT_TYPES)).reverse();f(t[0].getAnimations()).map((function(t){return s.Z.isMoveOnly(t)?h(h({},t),{},{effects:"moveOnly"}):s.Z.isNonMove(t)?h(h({},t),{},{effects:"nonMove"}):t})).sort((function(t,e){return n.indexOf(t.effects||t.type)-n.indexOf(e.effects||e.type)})).filter((function(t){return!s.Z.isEmpty(t)})).map((function(n){var r=n.type;if(d.Z.isDesktop||"hover"!==r||t[0].getAnimationTriggers(n.UUID).length){var o=t[0].animationObjects,a=Boolean(o&&o.length),s=new v[r]({page:i.page,widgets:t,rawAnimation:n,$container:a?o[o.length-1].$el:void 0,allowAccelerate:e.allowAccelerate,isNested:a,topmostAnimation:a?o[0]:void 0});i.animations.push(s)}}))},removeAnimation:function(t){this.animations=o.Z.without(this.animations,t),t&&t.destroy()},start:function(){o.Z.each(this.animations,(function(t){t.start()}))},stop:function(){o.Z.each(this.animations,(function(t){t.stop()}))},resetStarted:function(){o.Z.each(this.animations,(function(t){t.started=!1}))},onScroll:function(t){t=t||{},(this.page.mag.currentPage===this.page||t.forceApply)&&o.Z.each(this.animations,(function(e){e.onScroll&&e.onScroll(t)}))},onResize:function(t){o.Z.each(this.animations,(function(e){e.onResize(t)}))},updateTimelines:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o.Z.each(this.animations,(function(e){t.includes(e.animation.UUID)||e.createAnimationTimeline()}))},hasScaleUp:function(){return Boolean(o.Z.find(this.animations,(function(t){return s.Z.isScaleUp(t.animation)})))},destroy:function(){o.Z.each(this.animations,(function(t){t.destroy()})),delete this.animations}}),v={},b=r().View.extend({visibilityRatio:.2,className:"animation-container",scrolledToView:!1,useOnscrollBoundsFallback:"undefined"!=typeof window&&!window.IntersectionObserver,initialize:function(t){o.Z.bindAll(this),o.Z.extend(this,t),o.Z.each(this.widgets,o.Z.bind((function(t){t.animationObj=this,t.animationObjects=[].concat(f(t.animationObjects||[]),[this])}),this)),this.isFixed=this.widgets[0].fixed_position,this.isFullwidth=this.widgets[0].is_full_width,this.isFullheight=this.widgets[0].is_full_height,this.isSticked=this.widgets[0].sticked,this.isAbove=this.widgets[0].is_above,this.playOnce=!this.page.mag.isPreview&&this.playOnce,this.$container=this.$container||(this.isFixed||this.isAbove?this.widgets[0].$fixedContainer:this.page.$content),this.$el.appendTo(this.$wrapper?this.$wrapper:this.$container),this.createAnimationTimeline(t),this.onResize({updateAll:!0})},createAnimationTimeline:function(){this.timeline&&this.timeline.destroy(),this.animation=s.Z.getNormalizedAnimation(this.rawAnimation,this.isFixed,this.isFullwidth,this.isFullheight,this.page.scale,this.page.pageViewport,this.page.mag.getViewportWidth(this.page.pageViewport),this.page.mag.viewOpts),this.timeline=s.Z.createAnimationTimeline({el:this.$el,steps:this.animation.steps,type:this.animation.type,force3d:!1,animationTrigger:this.animation.trigger,selfTriggered:Boolean(o.Z.intersection(s.Z.normalizeAnimationTriggers(this.animation.trigger),this.widgets.map((function(t){return t._id}))).length),screenshotMode:!!RM.screenshot})},start:function(){this.timeline&&this.paused&&(this.paused=!1,this.timeline.resume())},stop:function(){this.timeline&&this.timeline.active&&(this.isAbove||(this.paused=!0,this.timeline.pause()))},getAnimationContainer:function(){return this.$el},modifyWidgetPosition:function(t){return this.isFixed?(t.dimensions.left="50%",t.dimensions.top="50%",t.dimensions.right="",t.dimensions.bottom="",t.dimensions["margin-left"]=-t.dimensions.width/2,t.dimensions["margin-top"]=-t.dimensions.height/2):(t.dimensions.left-=this.bbox_css.left+(this.isNested?this.topmostAnimation.bbox_css.left:0),t.dimensions.top-=this.bbox_css.top+(this.isNested?this.topmostAnimation.bbox_css.top:0)),t},onResize:function(t){if((t=t||{}).updateAll||this.isFixed&&this.prevPageScale!==this.page.scale||this.isFullwidth||this.isFullheight||this.isSticked){var e,i={t:Number.POSITIVE_INFINITY,l:Number.POSITIVE_INFINITY,b:Number.NEGATIVE_INFINITY,r:Number.NEGATIVE_INFINITY,z:0};this.isFixed||this.isFullwidth||this.isFullheight||this.isSticked?this.bbox_css=h(h({},this.widgets[0].calcBoxStyle({calcBBox:!0}).dimensions),this.isNested?{left:0,top:0,"margin-left":0,"margin-top":0}:{}):(o.Z.each(this.widgets,(function(t){e=t.calcBoxStyle({calcBBox:!0}).dimensions,i.t=Math.min(i.t,e.top),i.l=Math.min(i.l,e.left),i.b=Math.max(i.b,e.top+e.height),i.r=Math.max(i.r,e.left+e.width),i.z=Math.max(i.z,e["z-index"])}),this),this.bbox_css={left:this.isNested?0:i.l,top:this.isNested?0:i.t,width:i.r-i.l,height:i.b-i.t,"z-index":i.z}),this.$el.css(this.bbox_css)}this.innerContentTop=this.page.contentPosition.top/this.page.scale,this.innerContainerHeight=this.page.mag.getContainerSizeCached().height/this.page.scale,this.prevPageScale=this.page.scale},withTriggerOrElement:function(t){var e=this,i=this.animation.trigger.filter((function(t){return t})).reduce((function(t,i){return t.concat(t,e.page.mag.getAllWidgetViewsById(i,e.page))}),[]),n=0;i.forEach((function(r){r.then((function(i){i.rendered?t(i.$el):e.listenToOnce(i,"rendered",(function(){return t(i.$el)}))})).catch((function(){++n===i.length&&t(e.$el)}))})),i.length||t(this.$el)},getBBScaleFactor:function(){return c.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.page.mag.viewOpts)&&c.Z.isCSSZoom()?this.page.scale:1},isInView:function(){var t=l.Z.getBoundingBoxOfElements(this.widgets.map((function(t){return t.$el[0]})),this.getBBScaleFactor());return l.Z.isBoxInView(t,this.visibilityRatio)},notifyWhenInOrOutOfView:function(){var t=this;window.requestAnimationFrame((function(){t.isInView()?(t.scrolledToView=!0,t.scrolledOutOfView=!1,t.trigger("scrolledToView")):(t.scrolledToView=!1,t.scrolledOutOfView=!0,t.trigger("scrolledOutOfView"))}))},whenInView:function(){return this.whenInOrOutOfView("in")},whenOutOfView:function(){var t=this;return this.isInView()?this.whenInOrOutOfView("out"):this.whenInOrOutOfView("in").then((function(){return t.whenInOrOutOfView("out")}))},whenInOrOutOfView:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"in",i="in"===e,n="out"===e;if(this.useOnscrollBoundsFallback)return i&&this.isInView()||n&&!this.isInView()?window.Promise.resolve():new window.Promise((function(e){t.listenToOnce(t,n?"scrolledOutOfView":"scrolledToView",e)}));var r=this.widgets.map((function(t){return t.$el[0]})),o=l.Z.getBoundingBoxOfElements(r,this.getBBScaleFactor());return i?new window.Promise((function(e){var i=new window.IntersectionObserver((function(t){t.some((function(t){return t.isIntersecting}))&&(r.forEach((function(t){return i.unobserve(t)})),e())}),{rootMargin:"-".concat(o.height*t.visibilityRatio,"px 0px")});r.forEach((function(t){return i.observe(t)}))})):n?Promise.all(r.map((function(t){return new window.Promise((function(e){var i=new window.IntersectionObserver((function(n){n.every((function(t){return!t.isIntersecting}))&&(i.unobserve(t),e())}));i.observe(t)}))}))):void 0},destroy:function(){this.stop(),this.timeline&&this.timeline.destroy(),this.remove()}});v.scroll=b.extend({onScroll:function(t){if(t=t||{},this.timeline&&(this.page.mag.currentPage===this.page&&!this.isAbove||t.forceApply)){var e=this.isAbove?t.scroll:Math.max(0,this.page.visibleWidgetsCoords.scrollTop||0);if(this.isFixed)this.timeline.seek(e);else{var i=this.animation.steps[0].start_point||"bottom",n=this.bbox_css.top+(this.isNested?this.topmostAnimation.bbox_css.top:0)+this.innerContentTop,r=n-this.innerContainerHeight,o={top:1,center:.5,bottom:0}[i]*(n-r)+r+this.animation.steps[0].start_offset||0;o<=0?this.timeline.seek(e/this.page.scale):this.timeline.seek(Math.max(0,e-o*this.page.scale)/this.page.scale)}}},onResize:function(){b.prototype.onResize.apply(this,arguments),this.onScroll()}}),v.load=b.extend({initialize:function(){b.prototype.initialize.apply(this,arguments);var t=this.animation.steps;this.startWhenInView=t&&t.length&&t[0].startWhenInView,this.notifyWhenInOrOutOfView.__throttled=o.Z.throttle(this.notifyWhenInOrOutOfView,100)},start:function(){b.prototype.start.apply(this,arguments),this.isReady().then(function(){this.timeline.play(),this.started=!0}.bind(this)).catch((function(t){t&&console.log(t&&t.stack)}))},onScroll:function(){this.useOnscrollBoundsFallback&&this.notifyWhenInOrOutOfView.__throttled()},isReady:function(){var t,e=this;if(RM.screenshot||this.started||a.default.PageVisibilityManager.isPageHidden())t=window.Promise.reject();else{var i=this.widgets[0],n=[],r=window.Promise.all(this.widgets.map((function(t){return t.loaded?window.Promise.resolve():new window.Promise((function(i){return e.listenToOnce(t,"loaded",i)}))})));if(this.isAbove){var o=this.page.mag.aboveAnimationsReady?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page.mag,"aboveAnimationsReady",t)}.bind(this)),s=i.rendered?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(i,"rendered",t)}.bind(this)),c=i.wasHidden?new window.Promise(function(t){this.listenToOnce(i,"shown",t)}.bind(this)):window.Promise.resolve();n=this.startWhenInView?[s,c,r]:[o,s,c,r]}else{var l=this.page.started?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page,"started",t)}.bind(this)),d=this.page.loadAnimationsReady?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page,"loadAnimationsReady",t)}.bind(this)),u=this.page.isCurrent()?window.Promise.resolve():new window.Promise(function(t){this.listenToOnce(this.page,"changedTo",t)}.bind(this)),h=this.startWhenInView?r.then((function(){return e.whenInView()})):window.Promise.resolve();n=this.startWhenInView?[l,u,h]:[d,l]}t=window.Promise.all(n)}return t}}),v.click=b.extend({resetWhenOutOfView:!1,initialize:function(){var t,e,i,n;b.prototype.initialize.apply(this,arguments);var r="pointer";null!==(t=this.page)&&void 0!==t&&null!==(e=t.mag)&&void 0!==e&&e.opts.useCustomCursor&&null!==(i=this.page)&&void 0!==i&&null!==(n=i.mag)&&void 0!==n&&n.opts.customHoverCursorImage&&(r=a.default.getCursorStylesString({cusrsorUrl:this.page.mag.opts.customHoverCursorImage,cursorSize:this.page.mag.opts.customHoverCursorSize,isLambda:this.page.mag.opts.customHoverCursorIsLambda,isHover:!0}));var s=function(t){t.on("click",this.onClick),t.css("cursor",r)}.bind(this);this.willStopOnEnd=!1,this.lastTimeClick=0,this.withTriggerOrElement(s),this.notifyWhenInOrOutOfView.__throttled=o.Z.throttle(this.notifyWhenInOrOutOfView,100)},onClick:function(){var t=this,e=s.Z.getPermanentAnimationId(this.widgets[0],this.animation.UUID),i=this.timeline&&!this.timeline.active&&this.timeline.reversed&&s.Z.hasPlayed(e);this.timeline&&!i&&(+new Date-this.lastTimeClick<300||(this.lastTimeClick=+new Date,this.timeline.active?(this.willStopOnEnd?this.timeline.off("full-cycle-end",this.onCycleEnd):this.timeline.on("full-cycle-end",this.onCycleEnd),this.willStopOnEnd=!this.willStopOnEnd):(this.willStopOnEnd=!1,this.timeline.reversed?this.timeline.reverse():this.timeline.play(),this.animation.playOnce&&!s.Z.hasPlayed(e)&&s.Z.persistHasPlayed(e),this.animation.resetWhenOutOfView&&this.whenOutOfView().then((function(){t.timeline.stop(),t.timeline.applyStepState("initial"),t.timeline.reversed=!1})),o.Z.each(this.widgets,(function(e){"video"===e.type&&e.player&&(t.timeline.reversed?e.player.pause():e.player.play())})))))},onScroll:function(){this.useOnscrollBoundsFallback&&this.notifyWhenInOrOutOfView.__throttled()},onCycleEnd:function(){this.willStopOnEnd=!1,this.timeline.off("full-cycle-end",this.onCycleEnd),this.timeline.loop?this.timeline.isFullLoop?this.timeline.stop():this.timeline.reverse():this.timeline.reversed?this.timeline.reverse():this.timeline.play()},destroy:function(){var t=function(t){t.css("cursor","")};this.withTriggerOrElement(t),b.prototype.destroy.apply(this,arguments)}}),v.hover=b.extend({initialize:function(){if(b.prototype.initialize.apply(this,arguments),d.Z.isDesktop){var t=function(t){t.on("mouseenter",this.onMouseEnter),t.on("mouseleave",this.onMouseLeave)}.bind(this);o.Z.each(this.widgets,o.Z.bind((function(t){-1!==["text","shape","picture","button"].indexOf(t.type)&&(t.hasHoverAnimation=!0)}),this)),this.withTriggerOrElement(t)}},onMouseEnter:function(){this.timeline&&(this.timeline.active?!this.timeline.loop&&this.timeline.reversed?this.timeline.on("full-cycle-end",this.onCycleEnd):this.timeline.off("full-cycle-end",this.onCycleEnd):!this.timeline.reversed&&this.timeline.play())},onMouseLeave:function(){this.timeline&&(this.timeline.active?!this.timeline.loop&&this.timeline.reversed?this.timeline.off("full-cycle-end",this.onCycleEnd):this.timeline.on("full-cycle-end",this.onCycleEnd):!this.timeline.loop&&this.timeline.reversed&&this.timeline.reverse())},onCycleEnd:function(){this.timeline.off("full-cycle-end",this.onCycleEnd),this.timeline.loop?this.timeline.isFullLoop?this.timeline.stop():this.timeline.reverse():this.timeline.reversed?this.timeline.reverse():this.timeline.play()}}),e.Z=m},1415:function(t,e,i){"use strict";var n=i(336),r=i.n(n),o=i(321),a=i(1416),s=r().View.extend({template:a.Z["template-viewer-branding"],initialize:function(t){return o.Z.bindAll(this),o.Z.extend(this,t),this},render:function(){var t=this.mag&&this.mag.num_id,e=t?"utm_source=made_with_readymag&utm_medium=referral&utm_campaign=".concat(t):"";return this.setElement(this.template({utm_params:e,hasCreateWithTemplateBtn:this.hasCreateWithTemplateBtn,numId:t})),this.$el.appendTo(this.$container),this.listenTo(this.mag,"pageChanged",this.onPageChange),o.Z.delay(function(){this.$el.removeClass("offscreen-initially")}.bind(this),800),this},destroy:function(){return this.remove()},onPageChange:function(){},hide:function(){this.$el.stop().fadeOut(200)},show:function(){this.$el.stop().fadeIn(200)}});e.Z=s},1406:function(t,e,i){"use strict";var n=i(321),r=i(312),o=i(336),a=i.n(o),s=i(676),c=i(1027),l=i.n(c),d=i(1230),u=i.n(d),h=i(1402),p=i(1403),f=i(339),g=i(341),m=i(308),v=i(1405),b=i(349),y=i(1342);function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function k(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function C(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){k(o,n,r,a,s,"next",t)}function s(t){k(o,n,r,a,s,"throw",t)}a(void 0)}))}}var x=function(){var t=C(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"==typeof window){t.next=5;break}return t.next=3,i.e(27).then(i.t.bind(i,1328,23));case 3:e=t.sent,O=e.default;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=C(regeneratorRuntime.mark((function t(){var e=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:O.apply(void 0,e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();x();var T=a().View.extend({template:p.Z["template-viewer-cart-sidebar"],initialize:function(t){return n.Z.bindAll(this),this.mag=t,this.environment=this.mag.router.environment,this.rendered=!1,this.havePrices=!1,this.isHiddenSettings=!0,this.hoveredItem=null,this.render(),this},render:function(){if(!RM.screenshot){var t=y.Z.getPermissions();if(t&&t.can_use_e_commerce&&!this.mag.eCommerceManager.isConstructor()&&this.mag.eCommerceManager.haveEcommerceCartWidget&&(!this.mag.eCommerceManager.isViewer()||this.mag.eCommerceManager.isMagConnectedTo("ecwid"))&&!this.rendered){this.rendered=!0,this.provider=this.mag.eCommerceManager.getConnectedProvider(),document.querySelectorAll("#cart-sidebar").length&&document.querySelectorAll("#cart-sidebar").forEach((function(t){return t.parentNode.removeChild(t)})),this.setElement(this.template({isMobile:(0,h.isMobile)(),isViewer:this.environment===m.Z.environment.viewer,imgPublicPath:b.folderImagesPath})),this.$el.appendTo((0,r.ZP)("body")),this.$toolbar=(0,r.ZP)(".toolbar.for-viewer"),this.$tabs=this.$el.find(".cart-sidebar-tabs"),this.$items=this.$el.find(".cart-items-list"),this.$closeButton=this.$el.find(".close-button"),this.$footer=this.$el.find(".sidebar-footer"),this.$calcTextContainer=this.$el.find(".text-size-calc-container"),this.$itemsTab=this.$tabs.find(".tab-items"),this.$checkOutButton=this.$itemsTab.find(".сheck-out-btn"),this.cartWidgetData=this.mag.eCommerceManager.getCartWidgetData(),this.environment===m.Z.environment.preview&&(this.cartWidgetData&&this.cartWidgetData._id&&this.setupSettingsPanel(),window.RM.constructorRouter.on("previewClose",this.closeSideBar.bind(this)),this.bindTextInputsEvents());var e=this.$el.find(".svg");O(e),this.$el.find("[data-alt]:not(.rmalttext)").RMAltText(),this.generateSidebarCSS(this.cartWidgetData);var i=this.mag.eCommerceManager.getEcommerceData();return(0,r.ZP)('<div class="ec-cart-widget"></div><div><script data-cfasync="false" type="text/javascript" src="https://app.ecwid.com/script.js?'.concat(i.ecwid.serviceData.storeId,"&data_platform=code&data_date=").concat(l()(this.mag.published?this.mag.published:this.mag.creation_date).format("YYYY-MM-DD"),'" charset="utf-8"><\/script></div>')).appendTo(this.$el),this.renderSidebarTexts(),this.renderCartItems(),this.bindDomEvents(),g.Z.on("ecommerce:cartsidebar:visibility:changed",this.toggleSidebar),this.mag.eCommerceManager.events.on("ecommerce:cartdata:changed",this.renderCartItems),this}}},bindDomEvents:function(){this.$closeButton.on("click",this.closeSideBar.bind(this)),this.$checkOutButton.on("click",this.goToCheckout.bind(this)),(0,r.ZP)(document).on("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),(0,r.ZP)(document).on("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave),this.bindStaticTextFieldsHovers()},unbindDomEvents:function(){this.$closeButton.off("click",this.closeSideBar),this.$checkOutButton.off("click",this.goToCheckout.bind(this)),(0,r.ZP)(document).off("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),(0,r.ZP)(document).off("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave)},bindStaticTextFieldsHovers:function(){this.environment===m.Z.environment.preview&&(this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseover",(function(t){(0,r.ZP)(t.target).addClass("active")})),this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseleave",(function(t){(0,r.ZP)(t.target).is(":focus")||(0,r.ZP)(t.target).removeClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseover",(function(t){(0,r.ZP)(t.target).find(".cart-checkout-input").addClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseleave",(function(t){var e=(0,r.ZP)(t.target).find(".cart-checkout-input");e.is(":focus")||e.removeClass("active")})))},hideSidebar:function(){this.$el.removeClass("show"),(0,r.ZP)("body").removeClass("cart-sidebar-shown"),(0,r.ZP)("html").removeClass("cart-disable-scroll"),!this.isHiddenSettings&&this.settingsPanel&&(this.isHiddenSettings=!0,this.settingsPanel.isHidden=this.isHiddenSettings)},toggleSidebar:function(t){t?this.hideSidebar():(this.$el.addClass("show"),(0,r.ZP)("body").addClass("cart-sidebar-shown"),(0,r.ZP)("html").addClass("cart-disable-scroll"))},closeSideBar:function(){this.mag.eCommerceManager.isCartSidebarHidden||this.mag.eCommerceManager.changeCartSidebarVisibility()},generateSidebarCSS:function(t){this.stylesElementId="cart_sidebar_styles_".concat(t._id);var e=f.default.getRGBA(t["bar-color"],t["bar-color-opacity"]/100),i=f.default.getRGBA(t["bar-background-color"],t["bar-background-color-opacity"]/100),n=f.default.getRGBA(t["bar-color"],.45*t["bar-color-opacity"]/100),o=f.default.getRGBA(t["bar-color"],.9*t["bar-color-opacity"]/100),a=16*(t["bar-font-size-factor"]||1),c=this.getAdditionalColor(i),l="    #cart-sidebar {\n      color: ".concat(e,";\n      background-color: ").concat(i,";\n      box-shadow: ").concat(t["bar-shadow"]?"0 0 4px rgba(124, 124, 125, 0.5)":"none",";\n      font-size: ").concat(a,"px !important;\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar textarea {\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar input {\n      color: ").concat(e,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar input::placeholder {\n      color: ").concat(n,";\n    }\n\n    #cart-sidebar .cart-title-input.active {\n      border-color: ").concat((0,s.transparentize)(.8,e),";\n    }\n\n    #cart-sidebar .empty-cart-title-input.active {\n      border-color: ").concat((0,s.transparentize)(.8,e),";\n    }\n\n    #cart-sidebar .cart-price-input.active, #cart-sidebar .cart-quantity-input.active {\n      border-color: ").concat((0,s.transparentize)(.2,n),";\n    }\n\n    #cart-sidebar .cart-checkout-input.active {\n      border-color: ").concat((0,s.transparentize)(.8,e),";\n    }\n\n    #cart-sidebar .cart-price-input {\n      color: ").concat(o,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar .cart-quantity-input {\n      color: ").concat(o,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar button {\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar .sidebar-btn > input, #cart-sidebar .sidebar-btn > span {\n      top: ").concat(t["bar-button-baseline"]+"px"||0,";\n    }\n\n    #cart-sidebar select {\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar .sidebar-btn {\n      color: ").concat(e,";\n      border-color: ").concat(n,";\n    }\n\n    #cart-sidebar .sidebar-btn path {\n      fill: ").concat(e,";\n    }\n\n    #cart-sidebar .sidebar-icon-btn path, #cart-sidebar .sidebar-icon-btn rect {\n      fill: ").concat(e,";\n    }\n\n    #cart-sidebar .preloader svg path {\n      stroke: ").concat(e,";\n    }\n\n    #cart-sidebar .expand-arrow svg path {\n      fill: ").concat(e,";\n    }\n\n    #cart-sidebar .cart-cancel-btn {\n      color: ").concat(e,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block.hover {\n      background-color: ").concat(c,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-attributes {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-price {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-items-quantity {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-remove-btn-icon path {\n      fill: ").concat(e,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-decrease-btn-icon rect {\n      fill: ").concat(e,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-increase-btn-icon path {\n      fill: ").concat(e,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-button path {\n      stroke: ").concat(e,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-button:hover path {\n      stroke: ").concat(n,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-toggle {\n      color: ").concat(e,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-toggle:hover {\n      color: ").concat(n,";\n    }\n\n    #cart-sidebar.cart-is-mobile .sidebar-body .cart-item-block {\n      background-color: ").concat(c,";\n    }");(0,r.ZP)("#".concat(this.stylesElementId)).remove();var d=document.createElement("style");d.id=this.stylesElementId,d.className="cart-sidebar-styles",d.appendChild(document.createTextNode(l)),document.querySelector("head").appendChild(d)},getAdditionalColor:function(t){return(0,s.getLuminance)(t)<.05&&(0,s.getContrast)("#fff",t)-(0,s.getContrast)("#000",t)>=8?(0,s.lighten)(.1,t):(0,s.darken)(.1,t)},renderCartItems:function(){var t=this.mag.eCommerceManager.getCartData();if(t){var e=Object.keys(t.prices);this.$items.empty(),this.havePrices=Boolean(e.length),this.havePrices?(this.$itemsTab.find(".сheck-out-btn").css("display","flex"),this.$itemsTab.find(".empty-cart").css("display","none"),this.environment===m.Z.environment.viewer&&this.$itemsTab.find(".sidebar-title").css("display","flex")):(this.$itemsTab.find(".сheck-out-btn").css("display","none"),this.$itemsTab.find(".empty-cart").css("display","flex"),this.environment===m.Z.environment.viewer&&this.$itemsTab.find(".sidebar-title").css("display","none")),this.renderPricesCartItems(e);var i=this.$items.find(".svg");O(i),this.renderSidebarTexts(),this.unbindTextInputsEvents(!0),this.bindTextInputsEvents(!0)}},renderPricesCartItems:function(t){var e=this,i=this.mag.eCommerceManager.getCartData();t.forEach((function(t){var n=i.prices[t];n.active&&e.renderCartItem(n)}))},renderCartItem:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"price",o=this.mag.eCommerceManager.getCartItenKey(t),a=this.hoveredItem===o,s=(0,r.ZP)("<div/>",{class:"cart-item-block".concat(a?" hover":"")});s.data("".concat(n,"-id"),o);var c=(null===(e=t.selectedCombination)||void 0===e?void 0:e.thumbnailUrl)||t.image||t.images&&t.images.length;if(c){var l=this.getProductImage(t);i=(0,r.ZP)("<div/>",{class:"cart-item-image",css:{"background-position":"center center","background-size":"cover","background-repeat":"no-repeat","background-image":"url(".concat(l,")")}}),s.append(i)}var d=(0,r.ZP)("<div/>",{class:i?"cart-item-title":"cart-item-title without-image"}).text(t.nameTranslated&&t.nameTranslated[this.mag.eCommerceManager.userLocale]?t.nameTranslated[this.mag.eCommerceManager.userLocale]:t.name),u=t.cart_count,h=this.getOneItemPrice(t),p=(0,v.x)(h,t.currency),f=(0,v.x)((h*u).toFixed(2),t.currency),g=(0,r.ZP)("<div/>",{class:"cart-item-price"}),m=(0,r.ZP)("<input/>",{type:"text",class:"cart-text-input cart-price-input",name:"price",placeholder:"Price",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});m.get(0).dataset.dynamicWidth=!0;var y=(0,r.ZP)('<span class="cart-item-price-value"/>').html(u>1?": ".concat(p," × ").concat(u," = ").concat(f):": ".concat(p));g.append(m).append(y);var w=this.getTranslatedOptions(t),S=(0,r.ZP)("<div/>",{class:"cart-items-quantity"}),P=(0,r.ZP)("<input/>",{type:"text",class:"cart-text-input cart-quantity-input",name:"quantity",placeholder:"Quantity",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});P.get(0).dataset.dynamicWidth=!0;var k=(0,r.ZP)('<span class="cart-item-quantity-value"/>').html(": ".concat(u));S.append(P).append(k);var C=(0,r.ZP)("<div/>",{class:"cart-item-remove-btn",title:"remove"}).attr("data-".concat(n,"-id"),o),x=(0,r.ZP)("<img/>",{class:"svg cart-item-remove-btn-icon sidebar-icon-btn",src:(0,b.findImagePath)("./viewer/cart-sidebar/cart-item-delete.svg")});C.append(x),C.on("click",this.onRemoveItem);var O=(0,r.ZP)("<div/>",{class:"cart-item-edit-group"}),T=(0,r.ZP)("<div/>",{class:"cart-item-increase-btn"}).attr("data-".concat(n,"-id"),o),_=(0,r.ZP)("<img/>",{class:"svg cart-item-increase-btn-icon sidebar-icon-btn",src:(0,b.findImagePath)("./viewer/cart-sidebar/cart-item-increase.svg")});if(T.append(_),O.append(T),this.mag.eCommerceManager.isOutOfStock(t)||(T.addClass("active"),T.on("click",this.onIncreaseItem)),u>1){var Z=(0,r.ZP)("<div/>",{class:"cart-item-decrease-btn decrease-btn-".concat(o)}).attr("data-".concat(n,"-id"),o),I=(0,r.ZP)("<img/>",{class:"svg cart-item-decrease-btn-icon sidebar-icon-btn",src:(0,b.findImagePath)("./viewer/cart-sidebar/cart-item-decrease.svg")});Z.append(I),O.append(Z),Z.on("click",this.onDecreaseItem)}else{var M=this.$items.find("decrease-btn-".concat(o));M.off("click",this.onDecreaseItem),M.remove()}s.append(d).append(w).append(g).append(S).append(C).append(O),this.$items.append(s)},getProductImage:function(t){var e;return null!==(e=t.selectedCombination)&&void 0!==e&&e.thumbnailUrl?t.selectedCombination.thumbnailUrl:t.image?t.image:t.images?t.images[0]:""},getTranslatedOptions:function(t){var e=this;if(t.selectedOptions){var i=(0,r.ZP)("<div/>",{class:"cart-item-attributes"});return Object.keys(t.selectedOptions).forEach((function(n){var o=f.default.capitalize(n),a=t.selectedOptions[n],s=e.mag.eCommerceManager.userLocale,c=t.options.find((function(t){return t.name===n}));if(null!=c&&c.nameTranslated&&null!=c&&c.nameTranslated[s]&&(o=f.default.capitalize(c.nameTranslated[s])),null!=c&&c.choices){var l=c.choices.find((function(e){return e.text===t.selectedOptions[n]}));null!=l&&l.textTranslated&&null!=l&&l.textTranslated[s]&&(a=l.textTranslated[s])}var d=(0,r.ZP)("<div/>",{class:"cart-item-attribute"}).html("".concat(o,": ").concat(a));i.append(d)})),i}},getOneItemPrice:function(t){var e,i=t.price;return null!==(e=t.selectedCombination)&&void 0!==e&&e.price&&(i=t.selectedCombination.price),t.selectedOptions&&Object.keys(t.selectedOptions).forEach((function(e){var n=t.options.find((function(t){return t.name===e})),r=n?n.choices.find((function(i){return i.text===t.selectedOptions[e]})):null;r&&r.priceModifier&&("ABSOLUTE"===r.priceModifierType?i+=r.priceModifier:"PERCENT"===r.priceModifierType&&(i+=t.price*(r.priceModifier/100).toFixed(2)))})),i},onRemoveItem:function(t){t.currentTarget.dataset.priceId&&this.mag.eCommerceManager.removeFromCart(t.currentTarget.dataset.priceId)},onIncreaseItem:function(t){t.currentTarget.dataset.priceId&&this.mag.eCommerceManager.increaseCartItem(t.currentTarget.dataset.priceId)},onDecreaseItem:function(t){t.currentTarget.dataset.priceId&&this.mag.eCommerceManager.decreaseCartItem(t.currentTarget.dataset.priceId)},goToCheckout:function(t){var e=this;if(!t.isDefaultPrevented()){var i=this.mag.eCommerceManager.getCartData(),n=window.Ecwid;if(n){n.init();var o=Object.keys(i.prices),a=[];n.Cart.clear(),o.forEach((function(t){var s={id:Number(i.prices[t].id),quantity:i.prices[t].cart_count,callback:function(i){var s;i&&(s=t,a.push(s)),o.length===a.length&&(n.OnOrderPlaced.add((function(){e.mag.eCommerceManager.clearCart(),e.mag.eCommerceManager.getProducts(e.mag.eCommerceManager.connectedProvider)})),n.Cart.gotoCheckout(),g.Z.trigger("ecwid:checkout:opened"),e.closeSideBar(),e.mag.eCommerceManager.getProducts(e.mag.eCommerceManager.connectedProvider).then((function(){e.mag.eCommerceManager.updateCartProductItems()})),(0,r.ZP)("html, body").css({overflow:"auto"}),(0,r.ZP)(".ecwid-popup-closeButton, .ecwid-overlay").on("mousedown",(function(){(0,r.ZP)("html, body").css("overflow",""),g.Z.trigger("ecwid:checkout:closed")})),(0,r.ZP)(".ecwid-popup").on("mousedown",(function(t){t.currentTarget===t.target&&((0,r.ZP)("html, body").css("overflow",""),g.Z.trigger("ecwid:checkout:closed"))})),n.OnOrderPlaced.add((function(){setTimeout((function(){(0,r.ZP)(".ec-confirmation__continue > .form-control--done > button").on("mousedown",(function(){(0,r.ZP)("html, body").css("overflow",""),g.Z.trigger("ecwid:checkout:closed")}))}),300)})))}};i.prices[t].selectedOptions?s.options=S({},i.prices[t].selectedOptions):i.prices[t].options.length&&i.prices[t].options.forEach((function(t){t.required&&(s.options||(s.options={}),s.options[t.name]=t.choices[t.defaultChoice])})),n.Cart.addProduct(s)}))}else alert("No Ecwid")}},getTextFieldModelKey:function(t){return"bar-".concat(t)},getSidebarTextValue:function(t){var e=this.getTextFieldModelKey(t);return this.cartWidgetData&&this.cartWidgetData[e]?u()(this.cartWidgetData[e]):m.Z.defaultSidebarTexts[t]?m.Z.defaultSidebarTexts[t]:null},calcTextFieldSize:function(t){if(!t)return null;var e=getComputedStyle(t);this.$calcTextContainer.css({"font-family":e.fontFamily,"font-size":e.fontSize,"font-style":e.fontStyle,"font-weight":e.fontWeight,"letter-spacing":e.letterSpacing}),this.$calcTextContainer.text(t.value);var i=this.$calcTextContainer.width();return Math.ceil(i)},renderSidebarTexts:function(){var t=this;this.$itemsTab.find(".cart-text-input").each((function(e,i){var n=i.getAttribute("name"),r=t.getSidebarTextValue(n);if(r&&(i.value=r,i.dataset.dynamicWidth)){var o=t.calcTextFieldSize(i);o&&(i.style.width="".concat(o,"px"))}}))},bindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){(0,r.ZP)(i).on("click",t.onTextFieldClick),(0,r.ZP)(i).on("input",t.onTextFieldChange),(0,r.ZP)(i).on("blur",t.onTextFieldBlur)})),e&&this.environment===m.Z.environment.preview&&(this.$itemsTab.find(".cart-item-block").on("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").on("mouseleave",this.onDynamicMouseLeave))},unbindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){(0,r.ZP)(i).off("click",t.onTextFieldClick),(0,r.ZP)(i).off("input",t.onTextFieldChange),(0,r.ZP)(i).off("blur",t.onTextFieldBlur)})),e&&this.environment===m.Z.environment.preview&&(this.$itemsTab.find(".cart-item-block").off("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").off("mouseleave",this.onDynamicMouseLeave))},onDynamicMouseOver:function(t){(0,r.ZP)(t.target).find(".cart-price-input, .cart-quantity-input").addClass("active")},onDynamicMouseLeave:function(t){(0,r.ZP)(t.target).find(".cart-price-input, .cart-quantity-input").each((function(){(0,r.ZP)(this).is(":focus")||(0,r.ZP)(this).removeClass("active")}))},onTextFieldClick:function(t){t.preventDefault()},onTextFieldChange:function(t){if(t.target.dataset.dynamicWidth){var e=this.calcTextFieldSize(t.target);e&&(t.target.style.width="".concat(e,"px"))}},onTextFieldFocus:function(t){this.environment===m.Z.environment.preview&&(0,r.ZP)(t.target).addClass("active")},onTextFieldBlur:function(t){var e=this;this.environment===m.Z.environment.preview&&(0,r.ZP)(t.target).removeClass("active");var i=t.target.getAttribute("name"),n=this.getSidebarTextValue(i);if(n)if(t.target.value){if(this.cartWidgetModel){var o=P({},this.getTextFieldModelKey(i),t.target.value);this.updateCartWidgetData(o),this.cartWidgetModel.save(o,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){t.target.dataset.dynamicWidth&&e.renderSidebarTexts()}))}}else t.target.value=n},toogleSettings:function(){this.isHiddenSettings=!this.isHiddenSettings,this.settingsPanel&&(this.settingsPanel.isHidden=this.isHiddenSettings)},getSettingsData:function(){var t={};if(this.cartWidgetData){var e=n.Z.clone(this.cartWidgetData);t={"bar-color":e["bar-color"],"bar-color-opacity":e["bar-color-opacity"],"bar-background-color":e["bar-background-color"],"bar-background-color-opacity":e["bar-background-color-opacity"],"bar-shadow":e["bar-shadow"],"bar-font-family":e["bar-font-family"],"bar-font-style":e["bar-font-style"],"bar-font-weight":e["bar-font-weight"],"bar-letter-spacing":e["bar-letter-spacing"]}}return{isHidden:this.isHiddenSettings,model:t,onOverlayClick:this.onSettingsOverlayClick.bind(this),eCommerceManager:this.mag.eCommerceManager}},setupSettingsPanel:function(){},onSettingsOverlayClick:function(){this.toogleSettings()},onModelChange:function(t){this.saveModelChanges_debounced(t)},saveModelChanges:function(t){var e=this;this.updateCartWidgetData(t),this.generateSidebarCSS(this.cartWidgetData),this.cartWidgetModel&&this.cartWidgetModel.save(t,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){e.renderSidebarTexts()}))},updateCartWidgetData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cartWidgetData=S(S({},this.cartWidgetData),t)},destroy:function(){if(this.rendered)return this.mag.eCommerceManager.events.off("ecommerce:cartsidebar:visibility:changed"),this.mag.eCommerceManager.events.off("ecommerce:cartdata:changed"),this.$items.find(".cart-item-remove-btn").each((function(t,e){(0,r.ZP)(e).off("click")})),this.unbindDomEvents(),this.settingsPanel&&(this.settingsPanel.$off("change",this.onModelChange),this.settingsPanel.$destroy()),this.$settingButton&&this.$settingButton.off("click",this.toogleSettings),this.environment===m.Z.environment.preview&&this.unbindTextInputsEvents(),(0,r.ZP)("#".concat(this.stylesElementId)).remove(),this.remove()},cartItemBlockHover:function(t){var e=(0,r.ZP)(t.currentTarget);e&&e.length&&(e.addClass("hover").siblings().removeClass("hover"),this.hoveredItem=e.data("price-id")||e.data("sku-id"))},cartItemBlockLeave:function(t){var e=(0,r.ZP)(t.currentTarget);e&&e.length&&(e.removeClass("hover"),(e.data("price-id")||e.data("sku-id"))===this.hoveredItem&&(this.hoveredItem=null))}});e.Z=T},1401:function(t,e,i){"use strict";var n=i(321),r=i(312),o=i(336),a=i.n(o),s=i(676),c=i(1230),l=i.n(c),d=i(1402),u=i(1403),h=i(339),p=i(341),f=i(308),g=i(1405),m=i(1404),v=i(1225),b=i(349),y=i(1342);function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function x(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){C(o,n,r,a,s,"next",t)}function s(t){C(o,n,r,a,s,"throw",t)}a(void 0)}))}}var O=f.Z.stripe_live?f.Z.STRIPE_LIVE_PUBLIC_KEY:f.Z.STRIPE_TEST_PUBLIC_KEY,T=function(){var t=x(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"==typeof window){t.next=5;break}return t.next=3,i.e(27).then(i.t.bind(i,1328,23));case 3:e=t.sent,_=e.default;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=x(regeneratorRuntime.mark((function t(){var e=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:_.apply(void 0,e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();T();var Z,I,M,E,j,A,L,D,$,F,R,B,z,W=a().View.extend({template:u.Z["template-viewer-cart-sidebar"],cardStyle:{base:{letterSpacing:"0.3px",color:"#0080FF",fontSize:"16px",fontFamily:"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Ubuntu, 'Fira Sans', Roboto, 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, sans-serif","::placeholder":{color:"#CFD7DF"},fontSmoothing:"antialiased"},invalid:{color:"#e5424d",":focus":{color:"#303238"}}},getRenderStatus:function(){return this.rendered},initialize:function(t){return n.Z.bindAll(this),this.mag=t,this.environment=this.mag.router.environment,this.rendered=!1,this.haveSkus=!1,this.havePrices=!1,this.checkoutComplete=!1,this.isHiddenSettings=!0,this.activeTab="tab-items",this.orderLoading=!1,this.paymentLoading=!1,this.hoveredItem=null,this.shippingForm={name:{value:null,error:null,validationRules:[{title:"required"}]},phone:{value:null,error:null,validationRules:[{title:"phoneNumber"}]},line1:{value:null,error:null,validationRules:[{title:"required"}]},line2:{value:null,error:null,validationRules:[]},city:{value:null,error:null,validationRules:[{title:"required"}]},state:{value:null,error:null,validationRules:[]},country:{value:"default",error:null,validationRules:[{title:"required",func:function(t,e){return"default"===e?"field is required":null}}]},postal_code:{value:null,error:null,validationRules:[]},email:{value:null,error:null,validationRules:[{title:"required"},{title:"email"}]},note:{value:null,error:null,validationRules:[]}},this.cardHolderNameValue=null,this.clearShippingFormField_debounced=n.Z.debounce(this.clearShippingFormField,200),this.render(),this},render:function(){if(!RM.screenshot){var t=y.Z.getPermissions();if(t&&t.can_use_e_commerce&&!this.mag.eCommerceManager.isConstructor()&&this.mag.eCommerceManager.haveEcommerceCartWidget&&(!this.mag.eCommerceManager.isViewer()||this.mag.eCommerceManager.isMagConnectedTo("stripe"))&&!this.rendered){this.rendered=!0,document.querySelectorAll("#cart-sidebar").length&&document.querySelectorAll("#cart-sidebar").forEach((function(t){return t.parentNode.removeChild(t)})),this.setElement(this.template({isMobile:(0,d.isMobile)(),isViewer:this.environment===f.Z.environment.viewer,imgPublicPath:b.folderImagesPath})),this.$el.appendTo((0,r.ZP)("body")),this.$toolbar=(0,r.ZP)(".toolbar.for-viewer"),this.$tabs=this.$el.find(".cart-sidebar-tabs"),this.$items=this.$el.find(".cart-items-list"),this.$closeButton=this.$el.find(".close-button"),this.$footer=this.$el.find(".sidebar-footer"),this.$navButtons=this.$el.find(".sidebar-btn"),this.$calcTextContainer=this.$el.find(".text-size-calc-container"),this.$successPaymentInMainTab=this.$el.find(".payment-success-main-tab"),this.$itemsTab=this.$tabs.find(".tab-items"),this.$shippingTab=this.$tabs.find(".tab-inputs"),this.$orderTab=this.$tabs.find(".tab-order"),this.$paymentTab=this.$tabs.find(".tab-checkout"),this.$goToPayment=this.$orderTab.find(".cart-pay-btn"),this.$orderDetails=this.$orderTab.find(".order-details"),this.$orderItems=this.$orderTab.find(".order-items-list"),this.$orderError=this.$orderTab.find(".order-error"),this.$orderShippingAddress=this.$orderTab.find(".order-shipping-address"),this.$orderShippingMethod=this.$orderTab.find(".order-shipping-method"),this.$orderShippingEmail=this.$orderTab.find(".order-shipping-email"),this.$orderTax=this.$orderTab.find(".order-tax"),this.$orderTotalPrice=this.$orderTab.find(".order-total-price"),this.$paymentSuccess=this.$tabs.find("#payment-success-msg"),this.$paymentFailed=this.$tabs.find("#payment-failed-msg"),this.cartWidgetData=this.mag.eCommerceManager.getCartWidgetData(),this.environment===f.Z.environment.preview&&(this.cartWidgetData&&this.cartWidgetData._id&&this.setupSettingsPanel(),window.RM.constructorRouter.on("previewClose",this.closeSideBar.bind(this)),this.bindTextInputsEvents());var e=this.$el.find(".svg");return _(e),this.$el.find("[data-alt]:not(.rmalttext)").RMAltText(),this.generateSidebarCSS(this.cartWidgetData),this.renderSidebarTexts(),this.renderCartItems(),this.renderShippingForm(),this.initNavigation(),this.bindDomEvents(),p.Z.on("ecommerce:cartsidebar:visibility:changed",this.toggleSidebar),this.mag.eCommerceManager.events.on("ecommerce:cartdata:changed",this.renderCartItems),this.mag.eCommerceManager.openSidebarOnRender&&(this.mag.eCommerceManager.events.once("ecommerce:billingPortalUrl:get",this.onGetBillingPortalUrl),"object"===k(this.mag.eCommerceManager.openSidebarOnRender)&&n.Z.extend(this,this.mag.eCommerceManager.openSidebarOnRender),this.mag.eCommerceManager.openCartSidebar(),this.mag.eCommerceManager.openSidebarOnRender=!1),this}}},bindDomEvents:function(){this.$closeButton.on("click",this.closeSideBar.bind(this)),this.$tabs.find(".cart-cancel-btn").on("click",this.cancelOrder.bind(this)),(0,r.ZP)(document).on("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),(0,r.ZP)(document).on("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave),this.bindStaticTextFieldsHovers()},unbindDomEvents:function(){this.$closeButton.off("click",this.closeSideBar),this.$tabs.find(".cart-cancel-btn").off("click",this.cancelOrder),(0,r.ZP)(document).off("mouseover",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockHover),(0,r.ZP)(document).off("mouseleave",".cart-sidebar .sidebar-body .cart-item-block",this.cartItemBlockLeave)},bindStaticTextFieldsHovers:function(){this.environment===f.Z.environment.preview&&(this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseover",(function(t){(0,r.ZP)(t.target).addClass("active")})),this.$itemsTab.find(".cart-title-input, .empty-cart-title-input").on("mouseleave",(function(t){(0,r.ZP)(t.target).is(":focus")||(0,r.ZP)(t.target).removeClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseover",(function(t){(0,r.ZP)(t.target).find(".cart-checkout-input").addClass("active")})),this.$itemsTab.find(".сheck-out-btn").on("mouseleave",(function(t){var e=(0,r.ZP)(t.target).find(".cart-checkout-input");e.is(":focus")||e.removeClass("active")})))},hideSidebar:function(){this.$el.removeClass("show"),(0,r.ZP)("body").removeClass("cart-sidebar-shown"),(0,r.ZP)("html").removeClass("cart-disable-scroll"),!this.isHiddenSettings&&this.settingsPanel&&(this.isHiddenSettings=!0,this.settingsPanel.isHidden=this.isHiddenSettings)},toggleSidebar:function(t){t?(this.hideSidebar(),this.checkoutComplete&&(this.checkoutComplete=!1,this.mag.eCommerceManager.clearCart(),this.goToInitialTab(),this.hideSuccessPaymentMessage(),this.$paymentFailed.empty(),!this.$successPaymentInMainTab.hasClass("hidden")&&this.$successPaymentInMainTab.addClass("hidden"),this.$successPaymentInMainTab.find(".billing-portal-url").empty()),this.clearOrderError()):(this.$el.addClass("show"),(0,r.ZP)("body").addClass("cart-sidebar-shown"),(0,r.ZP)("html").addClass("cart-disable-scroll"),this.checkoutComplete&&(this.$itemsTab.find(".empty-cart").css("display","none"),this.$successPaymentInMainTab.removeClass("hidden")))},closeSideBar:function(){this.mag.eCommerceManager.isCartSidebarHidden||this.mag.eCommerceManager.changeCartSidebarVisibility()},onGetBillingPortalUrl:function(t){t&&this.$successPaymentInMainTab.find(".billing-portal-url").append('<a href="'.concat(t,'">Manage your subscription</a>'))},initNavigation:function(){this.$tabs.find("[data-tab^='tab-']").each(function(t,e){(0,r.ZP)(e).on("click",function(t){t.isDefaultPrevented()||(this.haveSkus&&this.havePrices?window.alert("You can't buy all these products, try separately"):(this.haveSkus||this.havePrices)&&(this.customNavigationActions(e,t)||this.goToTabByClassname("."+e.dataset.tab)))}.bind(this))}.bind(this))},customNavigationActions:function(t){if("tab-inputs"===t.dataset.tab){if(this.havePrices)return this.goToStripeCheckout(),!0;this.updateShippingForm(),RM.analytics&&RM.analytics.sendEvent("Checkout 1st step completed")}if("tab-order"===t.dataset.tab){if(!this.validateShippingForm())return this.renderShippingFormErrors(),!0;this.clearShippingFormErrors(),RM.analytics&&RM.analytics.sendEvent("Checkout 2nd step completed");var e,i,r=this.mag.eCommerceManager.getShippingForm();r&&(e=n.Z.mapObject(r,(function(t){return{value:t.value}})),i=n.Z.mapObject(this.shippingForm,(function(t){return{value:t.value}}))),(!r||r&&!n.Z.isEqual(e,i))&&(this.mag.eCommerceManager.setShippingForm(this.shippingForm),this.havePrices&&(this.needForUpdateCustomer=!0)),this.haveSkus&&this.renderOrderTab(),this.havePrices&&this.renderOrderTabForPrices()}"tab-checkout"===t.dataset.tab&&(RM.analytics&&RM.analytics.sendEvent("Checkout 3rd step completed"),this.haveSkus&&this.renderCheckoutForm(),this.havePrices&&this.renderCheckoutFormPaymentIntent())},goToTabByClassname:function(t){this.$tabs.find(".cart-sidebar-tab").each((function(t,e){(0,r.ZP)(e).removeClass("active")})),this.$tabs.find(t).addClass("active"),this.activeTab=t.slice(1)},goToInitialTab:function(){this.goToTabByClassname(".tab-items")},generateSidebarCSS:function(t){var e="cart_sidebar_styles_".concat(t._id),i=h.default.getRGBA(t["bar-color"],t["bar-color-opacity"]/100),n=h.default.getRGBA(t["bar-background-color"],t["bar-background-color-opacity"]/100),o=h.default.getRGBA(t["bar-color"],.45*t["bar-color-opacity"]/100),a=h.default.getRGBA(t["bar-color"],.9*t["bar-color-opacity"]/100),c=16*(t["bar-font-size-factor"]||1),l=this.getAdditionalColor(n);this.cardStyle=S(S({},this.cardStyle),{},{base:S(S({},this.cardStyle.base),{},{color:i,fontSize:"".concat(c,"px"),fontWeight:t["bar-font-weight"],"::placeholder":{color:o}}),invalid:S(S({},this.cardStyle.invalid),{},{color:o,fontWeight:t["bar-font-weight"],":focus":{color:i},"::placeholder":{color:o}})});var d="    #cart-sidebar {\n      color: ".concat(i,";\n      background-color: ").concat(n,";\n      box-shadow: ").concat(t["bar-shadow"]?"0 0 4px rgba(124, 124, 125, 0.5)":"none",";\n      font-size: ").concat(c,"px !important;\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar textarea {\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar input, #cart-sidebar .сheck-out-btn {\n      color: ").concat(i,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar input::placeholder {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .cart-title-input.active {\n      border-color: ").concat((0,s.transparentize)(.8,i),";\n    }\n\n    #cart-sidebar .empty-cart-title-input.active {\n      border-color: ").concat((0,s.transparentize)(.8,i),";\n    }\n\n    #cart-sidebar .payment-success-main-tab a {\n      color: ").concat(i,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar .cart-price-input.active, #cart-sidebar .cart-quantity-input.active {\n      border-color: ").concat((0,s.transparentize)(.2,o),";\n    }\n\n    #cart-sidebar .cart-checkout-input.active {\n      border-color: ").concat((0,s.transparentize)(.8,i),";\n    }\n\n    #cart-sidebar .cart-price-input {\n      color: ").concat(a,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar .cart-quantity-input {\n      color: ").concat(a,";\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar button {\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar .sidebar-btn > input, #cart-sidebar .sidebar-btn > span {\n      top: ").concat(t["bar-button-baseline"]+"px"||0,";\n    }\n\n    #cart-sidebar select {\n      font-family: ").concat(t["bar-font-family"],";\n      font-weight: ").concat(t["bar-font-weight"],";\n      font-style: ").concat(t["bar-font-style"],";\n    }\n\n    #cart-sidebar .sidebar-btn {\n      color: ").concat(i,";\n      border-color: ").concat(o,";\n    }\n\n    #cart-sidebar .sidebar-btn path {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-icon-btn path, #cart-sidebar .sidebar-icon-btn rect {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .preloader svg path {\n      stroke: ").concat(i,";\n    }\n\n    #cart-sidebar .expand-arrow svg path {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .cart-cancel-btn {\n      color: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block.hover {\n      background-color: ").concat(l,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-attributes {\n      color: ").concat(a,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-price {\n      color: ").concat(a,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-items-quantity {\n      color: ").concat(a,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-remove-btn-icon path {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-decrease-btn-icon rect {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .cart-item-block .cart-item-increase-btn-icon path {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .order-details-form, #cart-sidebar .sidebar-body .order-details-form .form-input {\n      color: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .order-details-form .form-input::placeholder {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .sidebar-body .order-details-form .rm-native-fake-select {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .sidebar-body .order-details-form .rm-native-fake-select.selected {\n      color: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .order-details-form svg path {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .order-details-form .form-title {\n      color: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .form-error {\n      background-color: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-body .order-details-form .rm-native-select-popup {\n      background-color: ").concat(l,";\n    }\n\n    #cart-sidebar .tab-order .order-details .order-title-row {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .tab-order .order-details .rm-native-fake-select {\n      color: ").concat(i,";\n    }\n\n    #cart-sidebar .tab-checkout .payment-input {\n      color: ").concat(i,";\n    }\n\n    #cart-sidebar .tab-checkout .payment-input::placeholder {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar .tab-checkout #payment-failed-msg .error-icon {\n      border-color: ").concat(o,";\n    }\n\n    #cart-sidebar .tab-checkout #payment-failed-msg .error-icon svg g {\n      fill: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-button path {\n      stroke: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-button:hover path {\n      stroke: ").concat(o,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-toggle {\n      color: ").concat(i,";\n    }\n\n    #cart-sidebar .sidebar-settings-container .settings-toggle:hover {\n      color: ").concat(o,";\n    }\n\n    #cart-sidebar.cart-is-mobile .sidebar-body .cart-item-block {\n      background-color: ").concat(l,";\n    }");(0,r.ZP)("#".concat(e)).remove();var u=document.createElement("style");u.type="text/css",u.id=e,u.className="cart-sidebar-styles",u.appendChild(document.createTextNode(d)),document.querySelector("head").appendChild(u)},getAdditionalColor:function(t){return(0,s.getLuminance)(t)<.05&&(0,s.getContrast)("#fff",t)-(0,s.getContrast)("#000",t)>=8?(0,s.lighten)(.1,t):(0,s.darken)(.1,t)},renderCartItems:function(){var t=this.mag.eCommerceManager.getCartData();if(t&&t.skus){var e=Object.keys(t.skus),i=Object.keys(t.prices);this.$items.empty(),this.haveSkus=!!e.length,this.havePrices=!!i.length,this.checkoutComplete||this.$successPaymentInMainTab.hasClass("hidden")||this.$successPaymentInMainTab.addClass("hidden"),this.haveSkus||this.havePrices?(this.$itemsTab.find(".сheck-out-btn").css("display","flex"),!this.checkoutComplete&&this.$itemsTab.find(".empty-cart").css("display","none"),this.environment===f.Z.environment.viewer&&this.$itemsTab.find(".sidebar-title").css("display","flex")):(this.$itemsTab.find(".сheck-out-btn").css("display","none"),!this.checkoutComplete&&this.$itemsTab.find(".empty-cart").css("display","flex"),this.environment===f.Z.environment.viewer&&this.$itemsTab.find(".sidebar-title").css("display","none")),this.renderPricesCartItems(i),this.renderSkusCartItems(e);var n=this.$items.find(".svg");_(n),this.renderSidebarTexts(),this.unbindTextInputsEvents(!0),this.bindTextInputsEvents(!0)}},renderCartItem:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"price",n=this.hoveredItem===t.id,o=(0,r.ZP)("<div/>",{class:"cart-item-block".concat(n?" hover":"")});o.data("".concat(i,"-id"),t.id);var a=t.image||t.productObject.images&&t.productObject.images.length;if(a){var s=t.image?t.image:t.productObject.images?t.productObject.images[0]:"";e=(0,r.ZP)("<div/>",{class:"cart-item-image",css:{"background-position":"center center","background-size":"cover","background-repeat":"no-repeat","background-image":"url(".concat(s,")")}}),o.append(e)}var c=(0,r.ZP)("<div/>",{class:e?"cart-item-title":"cart-item-title without-image"}).text(t.productObject.name),l=t.cart_count,d=(("price"===i?t.unit_amount:t.price)/100).toFixed(2),u=(0,g.x)(d,t.currency),p=(0,g.x)((d*l).toFixed(2),t.currency),f=(0,r.ZP)("<div/>",{class:"cart-item-price"}),m=(0,r.ZP)("<input/>",{type:"text",class:"cart-text-input cart-price-input",name:"price",placeholder:"Price",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});m.get(0).dataset.dynamicWidth=!0;var v,y=(0,r.ZP)('<span class="cart-item-price-value"/>').html(l>1?": ".concat(u," × ").concat(l," = ").concat(p):": ".concat(u));if(f.append(m).append(y),"sku"===i){v=(0,r.ZP)("<div/>",{class:"cart-item-attributes"});var w=t.attributes;for(var S in w){var P=(0,r.ZP)("<div/>",{class:"cart-item-attribute"}).html("".concat(h.default.capitalize(S),": ").concat(w[S]));v.append(P)}}var k=(0,r.ZP)("<div/>",{class:"cart-items-quantity"}),C=(0,r.ZP)("<input/>",{type:"text",class:"cart-text-input cart-quantity-input",name:"quantity",placeholder:"Quantity",maxlength:"32",translate:"no",autocomplete:"no",autocorrect:"no",spellcheck:"false"});C.get(0).dataset.dynamicWidth=!0;var x=(0,r.ZP)('<span class="cart-item-quantity-value"/>').html(": ".concat(l));k.append(C).append(x);var O=(0,r.ZP)("<div/>",{class:"cart-item-remove-btn",title:"remove"}).attr("data-".concat(i,"-id"),t.id),T=(0,r.ZP)("<img/>",{class:"svg cart-item-remove-btn-icon sidebar-icon-btn",src:(0,b.findImagePath)("./viewer/cart-sidebar/cart-item-delete.svg")});O.append(T),O.on("click",this.onRemoveItem);var _=(0,r.ZP)("<div/>",{class:"cart-item-edit-group"}),Z=(0,r.ZP)("<div/>",{class:"cart-item-increase-btn"}).attr("data-".concat(i,"-id"),t.id),I=(0,r.ZP)("<img/>",{class:"svg cart-item-increase-btn-icon sidebar-icon-btn",src:(0,b.findImagePath)("./viewer/cart-sidebar/cart-item-increase.svg")});if(Z.append(I),_.append(Z),("price"===i||this.mag.eCommerceManager.checkItemQuantity(t.id))&&(Z.addClass("active"),Z.on("click",this.onIncreaseItem)),l>1){var M=(0,r.ZP)("<div/>",{class:"cart-item-decrease-btn decrease-btn-".concat(t.id)}).attr("data-".concat(i,"-id"),t.id),E=(0,r.ZP)("<img/>",{class:"svg cart-item-decrease-btn-icon sidebar-icon-btn",src:(0,b.findImagePath)("./viewer/cart-sidebar/cart-item-decrease.svg")});M.append(E),_.append(M),M.on("click",this.onDecreaseItem)}else{var j=this.$items.find("decrease-btn-".concat(t.id));j.off("click",this.onDecreaseItem),j.remove()}"price"===i?o.append(c).append(f).append(k).append(O).append(_):o.append(c).append(v).append(f).append(k).append(O).append(_),this.$items.append(o)},renderPricesCartItems:function(t){var e=this,i=this.mag.eCommerceManager.getCartData();t.forEach((function(t){var n=i.prices[t];n.active&&e.renderCartItem(n)}))},renderSkusCartItems:function(t){var e=this,i=this.mag.eCommerceManager.getCartData();t.forEach((function(t){var n=i.skus[t];n.active&&e.renderCartItem(n,"sku")}))},onRemoveItem:function(t){t.currentTarget.dataset.priceId?this.mag.eCommerceManager.removeFromCart(t.currentTarget.dataset.priceId):t.currentTarget.dataset.skuId&&this.mag.eCommerceManager.removeSkuFromCart(t.currentTarget.dataset.skuId)},onIncreaseItem:function(t){t.currentTarget.dataset.priceId?this.mag.eCommerceManager.increaseCartItem(t.currentTarget.dataset.priceId):t.currentTarget.dataset.skuId&&this.mag.eCommerceManager.increaseSkuCartItem(t.currentTarget.dataset.skuId)},onDecreaseItem:function(t){t.currentTarget.dataset.priceId?this.mag.eCommerceManager.decreaseCartItem(t.currentTarget.dataset.priceId):t.currentTarget.dataset.skuId&&this.mag.eCommerceManager.decreaseSkuCartItem(t.currentTarget.dataset.skuId)},getTextFieldModelKey:function(t){return"bar-".concat(t)},getSidebarTextValue:function(t){var e=this.getTextFieldModelKey(t);return this.cartWidgetData&&this.cartWidgetData[e]?l()(this.cartWidgetData[e]):f.Z.defaultSidebarTexts[t]?f.Z.defaultSidebarTexts[t]:null},calcTextFieldSize:function(t){if(!t)return null;var e=getComputedStyle(t);this.$calcTextContainer.css({"font-family":e.fontFamily,"font-size":e.fontSize,"font-style":e.fontStyle,"font-weight":e.fontWeight,"letter-spacing":e.letterSpacing}),this.$calcTextContainer.text(t.value);var i=this.$calcTextContainer.width();return Math.ceil(i)},renderSidebarTexts:function(){var t=this;this.$itemsTab.find(".cart-text-input").each((function(e,i){var n=i.getAttribute("name"),r=t.getSidebarTextValue(n);if(r&&(i.value=r,i.dataset.dynamicWidth)){var o=t.calcTextFieldSize(i);o&&(i.style.width="".concat(o,"px"))}}))},bindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){(0,r.ZP)(i).on("click",t.onTextFieldClick),(0,r.ZP)(i).on("input",t.onTextFieldChange),(0,r.ZP)(i).on("focus",t.onTextFieldFocus),(0,r.ZP)(i).on("blur",t.onTextFieldBlur)})),e&&this.environment===f.Z.environment.preview&&(this.$itemsTab.find(".cart-item-block").on("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").on("mouseleave",this.onDynamicMouseLeave))},unbindTextInputsEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$itemsTab.find(".cart-text-input"+(e?'[data-dynamic-width="true"]':"")).each((function(e,i){(0,r.ZP)(i).off("click",t.onTextFieldClick),(0,r.ZP)(i).off("input",t.onTextFieldChange),(0,r.ZP)(i).off("focus",t.onTextFieldFocus),(0,r.ZP)(i).off("blur",t.onTextFieldBlur)})),e&&this.environment===f.Z.environment.preview&&(this.$itemsTab.find(".cart-item-block").off("mouseover",this.onDynamicMouseOver),this.$itemsTab.find(".cart-item-block").off("mouseleave",this.onDynamicMouseLeave))},onDynamicMouseOver:function(t){(0,r.ZP)(t.target).find(".cart-price-input, .cart-quantity-input").addClass("active")},onDynamicMouseLeave:function(t){(0,r.ZP)(t.target).find(".cart-price-input, .cart-quantity-input").each((function(){(0,r.ZP)(this).is(":focus")||(0,r.ZP)(this).removeClass("active")}))},onTextFieldClick:function(t){t.preventDefault()},onTextFieldChange:function(t){if(t.target.dataset.dynamicWidth){var e=this.calcTextFieldSize(t.target);e&&(t.target.style.width="".concat(e,"px"))}},onTextFieldFocus:function(t){this.environment===f.Z.environment.preview&&(0,r.ZP)(t.target).addClass("active")},onTextFieldBlur:function(t){var e=this;this.environment===f.Z.environment.preview&&(0,r.ZP)(t.target).removeClass("active");var i=t.target.getAttribute("name"),n=this.getSidebarTextValue(i);if(n)if(t.target.value){if(this.cartWidgetModel){var o=P({},this.getTextFieldModelKey(i),t.target.value);this.updateCartWidgetData(o),this.cartWidgetModel.save(o,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){t.target.dataset.dynamicWidth&&e.renderSidebarTexts()}))}}else t.target.value=n},goToStripeCheckout:function(){var t=this;return x(regeneratorRuntime.mark((function e(){var i,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.mag.eCommerceManager.getStripeConnectedUserId(),t.stripe||(t.stripe=Stripe(O,{stripeAccount:r})),o={showPromoCodes:Boolean(t.cartWidgetData["stripe-allow_promotion_codes"])},null!==(i=t.cartWidgetData["stripe-shipping_rates"])&&void 0!==i&&i.length&&null!==(n=t.cartWidgetData["stripe-allowed_countries"])&&void 0!==n&&n.length&&(o.shippingRates=t.cartWidgetData["stripe-shipping_rates"],o.shippingAddressCollection=P({},"allowed_countries",t.cartWidgetData["stripe-allowed_countries"].map((function(t){return t.value})))),t.mag.eCommerceManager.createCheckoutSession(o).then((function(e){var i=e.data;t.stripe.redirectToCheckout({sessionId:i.id})})).catch((function(t){console.error("Error:",t)}));case 5:case"end":return e.stop()}}),e)})))()},renderShippingForm:(z=x(regeneratorRuntime.mark((function t(){var e,o,a,s,c,l,d,u,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=n.Z.clone(m.h)).unshift({value:"default",caption:"Country"}),o=this.mag.eCommerceManager.getCartData(),(a=o.shippingForm)&&"object"===k(a)&&(this.shippingForm=a),t.next=7,i.e(25).then(i.bind(i,1477));case 7:return s=t.sent,c=s.default,t.next=11,Promise.resolve().then(i.bind(i,346));case 11:l=t.sent,d=l.default,u=d.extend(c),this.countrySelect=new u({el:this.$tabs.find(".countries-select").get(0),propsData:{options:function(){return e},value:this.shippingForm.country.value,isDesktop:!1,callback:this.onCountryChange}}),this.mag.eCommerceManager.hasShippableProducts()?this.$shippingTab.find(".shipping-form").removeClass("hidden"):this.$shippingTab.find(".shipping-form").addClass("hidden"),this.$tabs.find(".order-details-form .form-input").each((function(t,e){var i=e.getAttribute("name");h.shippingForm[i]&&(e.value=h.shippingForm[i].value),(0,r.ZP)(e).on("input",h.onShippingFormChange)}));case 17:case"end":return t.stop()}}),t,this)}))),function(){return z.apply(this,arguments)}),updateShippingForm:function(){var t=this.mag.eCommerceManager.getShippingForm();t&&"object"===k(t)&&(this.shippingForm=t),this.mag.eCommerceManager.hasShippableProducts()?this.$shippingTab.find(".shipping-form").removeClass("hidden"):this.$shippingTab.find(".shipping-form").addClass("hidden")},onCountryChange:function(t){this.shippingForm.country.value=t,this.countrySelect.value=t,this.clearShippingFormField_debounced("country")},onShippingFormChange:function(t){var e=t.target.getAttribute("name");void 0!==this.shippingForm[e]&&"object"===k(this.shippingForm[e])&&(this.shippingForm[e].value=t.target.value,this.clearShippingFormField_debounced(e))},renderShippingFormErrors:function(){var t=this;Object.keys(this.shippingForm).forEach((function(e){t.shippingForm[e].error&&t.$shippingTab.find(".form-error.".concat(e,"-error")).removeClass("hidden")}))},clearShippingFormErrors:function(){var t=this;Object.keys(this.shippingForm).forEach((function(e){t.$tabs.find(".form-error.".concat(e,"-error")).addClass("hidden")}))},clearShippingFormField:function(t){if(void 0!==this.shippingForm[t]&&this.shippingForm[t].error){var e=this.validateShippingFormField(t);e&&e.success&&(this.$tabs.find(".form-error.".concat(t,"-error")).addClass("hidden"),this.shippingForm[t].error=null)}},validateShippingFormField:function(t){var e=this,i=[];if(void 0!==this.shippingForm[t])return this.shippingForm[t].validationRules.length?(this.shippingForm[t].validationRules.forEach((function(n){if("function"==typeof n.func){var r=n.func(t,e.shippingForm[t].value);r&&i.push(r)}else{var o=e["".concat(n.title,"Validation")](t,e.shippingForm[t].value);o&&i.push(o)}})),i.length?{success:!1,error:!0,errorMessages:i}:{success:!0}):{success:!0}},requiredValidation:function(t,e){return e?null:"field is required"},emailValidation:function(t,e){return e?h.default.isValidEmail(e)?null:"it's not email":null},phoneNumberValidation:function(t,e){return e?h.default.isValidPhoneNumber(e)?null:"it's not  phone number":null},validateShippingForm:function(){var t=!1;if(this.mag.eCommerceManager.hasShippableProducts())for(var e in this.shippingForm){var i=this.validateShippingFormField(e);i&&(i.success?this.shippingForm[e].error=null:(this.shippingForm[e].error=i.errorMessages,t=!0))}else{var n=this.validateShippingFormField("email");n&&(n.success?this.shippingForm.email.error=null:(this.shippingForm.email.error=n.errorMessages,t=!0))}return!t},renderOrderTab:function(){var t=this;this.clearOrderError();var e=this.mag.eCommerceManager.getCartData(),i=e.order;if(i&&i.created<Math.floor(Date.parse(e.changed)/1e3))return this.showOrderLoader(),void this.mag.eCommerceManager.cancelOrder().then((function(e){e.data&&"canceled"===e.data.status&&(t.mag.eCommerceManager.deleteOrder(),t.createOrder())})).catch((function(e){t.hideOrderLoader(),t.renderOrderError(e&&e.message?e.message:""),t.mag.eCommerceManager.deleteOrder()}));i?this.renderOrderDetails():this.createOrder()},renderOrderTabForPrices:(B=x(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearOrderError(),this.showOrderLoader(),t.next=4,this.getCustomer();case 4:if(!(e=t.sent)){t.next=42;break}return t.next=8,this.getInvoiceItemsForCustomer(e.id);case 8:if(!t.sent){t.next=42;break}return t.next=12,this.getInvoiceForCustomer(e.id);case 12:if(!(i=t.sent)){t.next=42;break}if(!(i.created<Math.floor(Date.parse(this.mag.eCommerceManager.getCartData().changed)/1e3))){t.next=41;break}if(!this.needForUpdateCustomer){t.next=19;break}return t.next=18,this.updateOrCreateCustomer();case 18:this.needForUpdateCustomer=!1;case 19:return t.prev=19,t.next=22,this.cancelInvoice(i);case 22:t.next=29;break;case 24:return t.prev=24,t.t0=t.catch(19),this.renderOrderError("can't cancel old order"),this.hideOrderLoader(),t.abrupt("return");case 29:return t.prev=29,t.next=32,this.createInvoiceWithItems();case 32:(n=t.sent)&&this.renderInvoiceDetails(n),t.next=39;break;case 36:t.prev=36,t.t1=t.catch(29),this.renderOrderError("can't create order");case 39:t.next=42;break;case 41:this.renderInvoiceDetails(i);case 42:this.hideOrderLoader();case 43:case"end":return t.stop()}}),t,this,[[19,24],[29,36]])}))),function(){return B.apply(this,arguments)}),renderInvoiceDetails:(R=x(regeneratorRuntime.mark((function t(e){var i,n,o,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$orderItems.empty(),this.$orderShippingAddress.empty(),this.$orderShippingMethod.empty(),this.$orderShippingEmail.empty(),this.$orderTax.empty(),this.$orderTotalPrice.empty(),e.lines.data.forEach((function(t){var e=(0,r.ZP)("<div/>",{class:"order-item"}).html(t.quantity+" × "+t.description),i=(0,r.ZP)("<div/>",{class:"order-item-price"}).text((0,g.x)((t.amount/100).toFixed(2),t.currency));e.append(i),a.$orderItems.append(e)})),e.customer_shipping&&e.customer_shipping.address&&(i=function(t){return t?" ".concat(t):""},n=e.customer_shipping.address,o="".concat(n.line1).concat(i(n.line2)," ").concat(n.city,",").concat(i(n.state)).concat(i(n.postal_code)," ").concat(n.country),this.$orderShippingAddress.text(o),this.$tabs.find(".shipping-details").removeClass("hidden")),this.$orderShippingMethod.parent(".shipping-method.order-row").addClass("hidden"),this.$orderDetails.find(".order-id").text(String(e.id).slice(0,20)+"..."),this.$orderShippingEmail.text(e.customer_email),this.$orderDetails.find(".shipping-email").removeClass("hidden"),e.customer_phone?(this.$orderDetails.find(".order-shipping-phone").text(e.customer_phone),this.$orderDetails.find(".shipping-phone").removeClass("hidden")):this.$orderDetails.find(".shipping-phone").addClass("hidden"),e.tax?(this.$orderTax.parent(".shipping-tax-size.order-row").removeClass("hidden"),this.$orderTax.text((0,g.x)((e.tax/100).toFixed(2),e.currency))):this.$orderTax.parent(".shipping-tax-size.order-row").addClass("hidden"),this.$orderTotalPrice.text((0,g.x)((e.total/100).toFixed(2),e.currency)),this.$goToPayment.removeClass("hidden");case 16:case"end":return t.stop()}}),t,this)}))),function(t){return R.apply(this,arguments)}),getCustomer:(F=x(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.mag.eCommerceManager.getCartData()).customer){t.next=17;break}return t.prev=2,t.next=5,this.mag.eCommerceManager.createOrUpdateCustomer(this.mag.num_id,this.generateCustomerDataFromShippingForm(e.shippingForm));case 5:if(!(i=t.sent)||!i.data){t.next=9;break}return this.mag.eCommerceManager.setCustomer(i.data),t.abrupt("return",i.data);case 9:t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(2),console.error(t.t0),t.t0;case 15:t.next=18;break;case 17:return t.abrupt("return",e.customer);case 18:case"end":return t.stop()}}),t,this,[[2,11]])}))),function(){return F.apply(this,arguments)}),updateOrCreateCustomer:($=x(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.mag.eCommerceManager.getCartData(),t.next=3,this.mag.eCommerceManager.createOrUpdateCustomer(this.mag.num_id,this.generateCustomerDataFromShippingForm(e.shippingForm));case 3:if(!(i=t.sent)||!i.data){t.next=7;break}return this.mag.eCommerceManager.setCustomer(i.data),t.abrupt("return",i.data);case 7:case"end":return t.stop()}}),t,this)}))),function(){return $.apply(this,arguments)}),generateCustomerDataFromShippingForm:function(t){var e={email:t.email.value,name:t.name.value,shipping:{address:{country:t.country.value,city:t.city.value,line1:t.line1.value},name:t.name.value}};return t.phone.value&&(e.phone=t.phone.value,e.shipping.phone=t.phone.value),t.line2.value&&(e.shipping.address.line2=t.line2.value),t.postal_code.value&&(e.shipping.address.postal_code=t.postal_code.value),t.state.value&&(e.shipping.address.state=t.state.value),e},getInvoiceItemsForCustomer:(D=x(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((i=this.mag.eCommerceManager.getCartData()).invoiceItems&&i.invoiceItems.length>0)){t.next=5;break}return t.abrupt("return",i.invoiceItems);case 5:return t.next=7,this.createInvoiceItemsForCustomer(e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return D.apply(this,arguments)}),createInvoiceItemsForCustomer:(L=x(regeneratorRuntime.mark((function t(e){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.mag.eCommerceManager.getCartData(),n=Object.keys(i.prices).map((function(t){return{price:i.prices[t].id,quantity:i.prices[t].cart_count}})),t.prev=2,t.next=5,this.mag.eCommerceManager.createInvoiceItems(this.mag.num_id,e,n);case 5:if(!((r=t.sent)&&r.data&&r.data.length)){t.next=9;break}return this.mag.eCommerceManager.setInvoiceItems(r.data),t.abrupt("return",r.data);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.error(t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,11]])}))),function(t){return L.apply(this,arguments)}),getInvoiceForCustomer:(A=x(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=this.mag.eCommerceManager.getCartData()).invoice||!i.invoice.id){t.next=15;break}return t.next=4,this.mag.eCommerceManager.getInvoice(this.mag.num_id,i.invoice.id);case 4:if(!(n=t.sent)||"draft"!==n.status&&"open"!==n.status){t.next=10;break}return this.mag.eCommerceManager.setInvoice(n),t.abrupt("return",n);case 10:return t.next=12,this.createInvoiceForCustomer(e);case 12:return t.abrupt("return",t.sent);case 13:t.next=18;break;case 15:return t.next=17,this.createInvoiceForCustomer(e);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return A.apply(this,arguments)}),createInvoiceForCustomer:(j=x(regeneratorRuntime.mark((function t(e){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.mag.eCommerceManager.getCartData(),n={customer:e,collection_method:"charge_automatically",auto_advance:!1},i.shippingForm&&i.shippingForm.note.value&&(n.metadata={customer_note:i.shippingForm.note.value}),t.prev=3,t.next=6,this.mag.eCommerceManager.createInvoice(this.mag.num_id,n);case 6:if(!(r=t.sent)||!r.data){t.next=10;break}return this.mag.eCommerceManager.setInvoice(r.data),t.abrupt("return",r.data);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),t.t0&&t.t0.type===v.Kq.nothingToInvoice&&(this.mag.eCommerceManager.clearCart(),this.goToInitialTab());case 15:case"end":return t.stop()}}),t,this,[[3,12]])}))),function(t){return j.apply(this,arguments)}),createInvoiceWithItems:(E=x(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCustomer();case 2:return e=t.sent,t.next=5,this.createInvoiceItemsForCustomer(e.id);case 5:return t.next=7,this.createInvoiceForCustomer(e.id);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)}),cancelInvoice:(M=x(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("draft"!==e.status){t.next=5;break}return t.next=3,this.mag.eCommerceManager.deleteDraftInvoice(this.mag.num_id,e.id);case 3:t.next=8;break;case 5:if("open"!==e.status&&"uncollectible"!==e.status){t.next=8;break}return t.next=8,this.mag.eCommerceManager.voidDraftInvoice(this.mag.num_id,e.id);case 8:this.mag.eCommerceManager.unsetInvoiceItems(),this.mag.eCommerceManager.unsetInvoice();case 10:case"end":return t.stop()}}),t,this)}))),function(t){return M.apply(this,arguments)}),createOrder:function(){this.showOrderLoader(),this.mag.eCommerceManager.updateCartData().then(function(){var t=this,e=this.generateOrderRequestData();e&&e instanceof Error?this.renderOrderError(e.message):e&&e.currency&&r.ZP.ajax({type:"POST",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/orders/",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t.hideOrderLoader(),e&&e.data&&(t.mag.eCommerceManager.setOrder(e.data),t.renderOrderDetails())},error:function(e){var i=JSON.parse(e.responseText);t.hideOrderLoader(),t.renderOrderError(i.message)}})}.bind(this)).catch(function(t){this.hideOrderLoader(),t&&t.message&&this.renderOrderError(t.message)}.bind(this))},showOrderLoader:function(){this.orderLoading||(this.orderLoading=!0,this.$goToPayment.hasClass("hidden")||this.$goToPayment.addClass("hidden"),this.$orderTab.find(".preloader").addClass("show"),this.$orderDetails.addClass("hidden"))},hideOrderLoader:function(){this.orderLoading&&(this.orderLoading=!1,this.$goToPayment.hasClass("hidden")&&this.$goToPayment.removeClass("hidden"),this.$orderTab.find(".preloader").removeClass("show"),this.$orderDetails.removeClass("hidden"))},renderOrderDetails:(I=x(regeneratorRuntime.mark((function t(){var e,n,o,a,s,c,l,d,u,h,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.mag.eCommerceManager.getOrder(),this.$orderItems.empty(),this.$orderShippingAddress.empty(),this.$orderShippingMethod.empty(),this.$orderShippingEmail.empty(),this.$orderTax.empty(),this.$orderTotalPrice.empty(),e.items.forEach(function(t){if("tax"===t.type)n=t;else if("shipping"===t.type)o=t;else{var e=(0,r.ZP)("<div/>",{class:"order-item"}).html(t.quantity+" × "+t.description),i=(0,r.ZP)("<div/>",{class:"order-item-price"}).text((0,g.x)((t.amount/100).toFixed(2),t.currency));e.append(i),this.$orderItems.append(e)}}.bind(this)),e.shipping?(a=function(t){return t?" ".concat(t):""},s=e.shipping.address,c="".concat(s.line1).concat(a(s.line2)," ").concat(s.city,",").concat(a(s.state)).concat(a(s.postal_code)," ").concat(s.country),this.$orderShippingAddress.text(c),this.$tabs.find(".shipping-details").removeClass("hidden")):this.$tabs.find(".shipping-details").addClass("hidden"),!(e.shipping_methods.length>1)){t.next=23;break}return l=this.shippingMethodsOptions(e.shipping_methods),t.next=13,i.e(25).then(i.bind(i,1477));case 13:return d=t.sent,u=d.default,t.next=17,Promise.resolve().then(i.bind(i,346));case 17:h=t.sent,p=h.default,f=p.extend(u),this.shippingMethodSelect?(this.shippingMethodSelect.options=function(){return l},this.shippingMethodSelect.value=o.parent):this.shippingMethodSelect=new f({el:this.$orderShippingMethod.get(0),propsData:{options:function(){return l},value:o.parent,isDesktop:!1,callback:this.onShippingMethodChange}}),t.next=25;break;case 23:this.$orderShippingMethod.parent(".shipping-method.order-row").removeClass("hidden"),this.$orderShippingMethod.text(o.description+" "+(0,g.x)((o.amount/100).toFixed(2),o.currency));case 25:this.$orderDetails.find(".order-id").text(String(e.id).slice(0,20)+"..."),e.email?(this.$orderShippingEmail.text(e.email),this.$orderDetails.find(".shipping-email").removeClass("hidden")):this.$orderDetails.find(".shipping-email").addClass("hidden"),e.phone?(this.$orderDetails.find(".order-shipping-phone").text(e.phone),this.$orderDetails.find(".shipping-phone").removeClass("hidden")):this.$orderDetails.find(".shipping-phone").addClass("hidden"),n&&(this.$orderTax.parent(".shipping-tax-size.order-row").removeClass("hidden"),this.$orderTax.text(n.description+" "+(0,g.x)((n.amount/100).toFixed(2),n.currency))),this.$orderTotalPrice.text((0,g.x)((e.amount/100).toFixed(2),e.currency)),this.$goToPayment.removeClass("hidden");case 31:case"end":return t.stop()}}),t,this)}))),function(){return I.apply(this,arguments)}),shippingMethodsOptions:function(t){return t.map((function(t){return{value:t.id,caption:t.description+" "+(0,g.x)((t.amount/100).toFixed(2),t.currency)}}))},onShippingMethodChange:function(t){var e=this;this.shippingMethodSelect.value=t,this.showOrderLoader(),this.mag.eCommerceManager.changeShippingMethod(t).then((function(t){e.hideOrderLoader(),t.data&&(e.mag.eCommerceManager.setOrder(t.data),e.renderOrderDetails())})).catch((function(){e.hideOrderLoader()}))},renderOrderError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$orderError.find(".order-error-message").text(t),this.$orderError.removeClass("hidden"),this.$orderDetails.addClass("hidden"),this.$goToPayment.addClass("hidden")},clearOrderError:function(){this.$orderError.addClass("hidden"),this.$orderDetails.removeClass("hidden"),this.$goToPayment.removeClass("hidden")},transformShippingFormToOrderRequest:function(){var t=this.checkShippableInCart(),e={currency:"usd",email:this.shippingForm.email.value,items:[]};return this.shippingForm.note.value&&(e.metadata={note:this.shippingForm.note.value}),t?(e.shipping={name:this.shippingForm.name.value,phone:this.shippingForm.phone.value,address:{line1:this.shippingForm.line1.value,line2:this.shippingForm.line2.value,city:this.shippingForm.city.value,state:this.shippingForm.state.value,country:this.shippingForm.country.value,postal_code:this.shippingForm.postal_code.value}},e):e},generateOrderRequestData:function(){var t=this.mag.eCommerceManager.getCartData();if(!t||!t.skus)return new Error("Empty cart");var e=[],i=this.transformShippingFormToOrderRequest();for(var n in t.skus)t.skus[n].active&&(i.items.push({type:t.skus[n].object,parent:n,currency:t.skus[n].currency,quantity:t.skus[n].cart_count}),-1===e.indexOf(t.skus[n].currency)&&e.push(t.skus[n].currency));return e.length>1?new Error("mixed currencies"):(i.currency=e.pop(),i)},cancelOrder:function(){var t=this;if(this.showPaymentLoader(),this.havePrices){var e=this.mag.eCommerceManager.getCartData();e.invoice&&this.cancelInvoice(e.invoice).then((function(){t.hidePaymentLoader(),t.goToTabByClassname(".tab-items")})).catch((function(){t.hidePaymentLoader()}))}else this.mag.eCommerceManager.cancelOrder().then((function(e){t.hidePaymentLoader(),e.data&&"canceled"===e.data.status&&(t.mag.eCommerceManager.deleteOrder(),t.goToTabByClassname(".tab-items"))})).catch((function(){t.hidePaymentLoader()}))},renderCheckoutFormPaymentIntent:(Z=x(regeneratorRuntime.mark((function t(){var e,i,n,r,o,a,s,c,l=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.mag.eCommerceManager.getCustomer()){t.next=4;break}return this.$paymentFailed.text("Customer not found"),t.abrupt("return");case 4:return t.next=6,this.getInvoiceForCustomer(e.id);case 6:if(i=t.sent){t.next=10;break}return this.$paymentFailed.text("Invoice not found"),t.abrupt("return");case 10:if(n=this.mag.eCommerceManager.getCartData(),this.showPaymentLoader(),"draft"!==i.status){t.next=27;break}return t.next=15,this.mag.eCommerceManager.finalizeInvoice(this.mag.num_id,i.id);case 15:return r=t.sent,this.mag.eCommerceManager.setInvoice(r),t.next=19,this.mag.eCommerceManager.getPaymentIntent(this.mag.num_id,r.payment_intent);case 19:if((o=t.sent).receipt_email){t.next=23;break}return t.next=23,this.mag.eCommerceManager.updatePaymentIntent(this.mag.num_id,o.id,{receipt_email:n.shippingForm.email.value});case 23:this.clientSecret=o.client_secret,this.hidePaymentLoader(),t.next=36;break;case 27:if("open"!==i.status){t.next=36;break}return t.next=30,this.mag.eCommerceManager.getPaymentIntent(this.mag.num_id,i.payment_intent);case 30:if((a=t.sent).receipt_email){t.next=34;break}return t.next=34,this.mag.eCommerceManager.updatePaymentIntent(this.mag.num_id,a.id,{receipt_email:n.shippingForm.email.value});case 34:this.clientSecret=a.client_secret,this.hidePaymentLoader();case 36:s=this.mag.eCommerceManager.getStripeConnectedUserId(),this.stripe||(this.stripe=Stripe(O,{stripeAccount:s})),c=this.stripe.elements(),this.cardNumber||(this.cardNumber=c.create("cardNumber",{style:this.cardStyle,placeholder:"Card number"}),this.cardNumber.mount("#card-number-element"),this.cardNumber.addEventListener("change",(function(t){var e=l.$paymentTab.find(".card-number-error");t.error?e.removeClass("hidden"):e.addClass("hidden")})),this.cardNumber.addEventListener("ready",(function(){l.renderCartHolderInput()}))),this.cardExpiry||(this.cardExpiry=c.create("cardExpiry",{style:this.cardStyle,placeholder:"M/Y"}),this.cardExpiry.mount("#card-expiry-element"),this.cardExpiry.addEventListener("change",(function(t){var e=l.$paymentTab.find(".card-expiry-error");t.error?e.removeClass("hidden"):e.addClass("hidden")}))),this.cardCvc||(this.cardCvc=c.create("cardCvc",{style:this.cardStyle,placeholder:"Security code"}),this.cardCvc.mount("#card-cvc-element"),this.cardCvc.addEventListener("change",(function(t){var e=l.$paymentTab.find(".card-cvc-error");t.error?e.removeClass("hidden"):e.addClass("hidden")}))),this.form||(this.form=document.getElementById("payment-form"),this.form.addEventListener("submit",this.onPaymentFormSubmit.bind(this)));case 43:case"end":return t.stop()}}),t,this)}))),function(){return Z.apply(this,arguments)}),renderCheckoutForm:function(){var t=this,e=this.mag.eCommerceManager.getStripeConnectedUserId();this.stripe||(this.stripe=Stripe(O,{stripeAccount:e}));var i=this.stripe.elements();this.cardNumber||(this.cardNumber=i.create("cardNumber",{style:this.cardStyle,placeholder:"Card number"}),this.cardNumber.mount("#card-number-element"),this.cardNumber.addEventListener("change",(function(e){var i=t.$paymentTab.find(".card-number-error");e.error?i.removeClass("hidden"):i.addClass("hidden")})),this.cardNumber.addEventListener("ready",(function(){t.renderCartHolderInput()}))),this.cardExpiry||(this.cardExpiry=i.create("cardExpiry",{style:this.cardStyle,placeholder:"M/Y"}),this.cardExpiry.mount("#card-expiry-element"),this.cardExpiry.addEventListener("change",(function(e){var i=t.$paymentTab.find(".card-expiry-error");e.error?i.removeClass("hidden"):i.addClass("hidden")}))),this.cardCvc||(this.cardCvc=i.create("cardCvc",{style:this.cardStyle,placeholder:"Security code"}),this.cardCvc.mount("#card-cvc-element"),this.cardCvc.addEventListener("change",(function(e){var i=t.$paymentTab.find(".card-cvc-error");e.error?i.removeClass("hidden"):i.addClass("hidden")}))),this.form||(this.form=document.getElementById("payment-form"),this.form.addEventListener("submit",this.onPaymentFormSubmit.bind(this)))},renderCartHolderInput:function(){this.cardHolderName||(this.cardHolderName=this.$paymentTab.find(".card-name-input"),this.cardHolderName.removeClass("hidden"),this.cardHolderName.on("input",this.onCardHolderNameChange))},onCardHolderNameChange:function(t){this.cardHolderNameValue=t.target.value,this.cardHolderNameValue?this.$paymentTab.find(".card-name-error").hasClass("hidden")||this.$paymentTab.find(".card-name-error").addClass("hidden"):this.$paymentTab.find(".card-name-error").hasClass("hidden")&&this.$paymentTab.find(".card-name-error").removeClass("hidden")},onPaymentFormSubmit:function(t){t.preventDefault(),this.cardHolderNameValue?(this.$paymentTab.find(".card-name-error").addClass("hidden"),this.haveSkus?this.onSkuPaymentFormSubmit():this.havePrices&&this.onPricesPaymentFormSubmit()):this.$paymentTab.find(".card-name-error").removeClass("hidden")},onSkuPaymentFormSubmit:function(){var t=this;this.stripe.createToken(this.cardNumber,{name:this.cardHolderNameValue}).then((function(e){e.error||t.stripeTokenHandler(e.token)}))},onPricesPaymentFormSubmit:function(){var t=this;this.clientSecret?(this.hideErrorPaymentMessage(),this.showPaymentLoader(),this.stripe.confirmCardPayment(this.clientSecret,{payment_method:{card:this.cardNumber,billing_details:{name:this.cardHolderNameValue}}}).then((function(e){e.error?(t.hidePaymentLoader(),t.showErrorPaymentMessage("Payment Failed on confirmCardPayment"),t.checkoutComplete=!0):(t.hidePaymentLoader(),"succeeded"===e.paymentIntent.status&&(t.showSuccessPaymentMessage(),RM.analytics&&RM.analytics.sendEvent("Checkout success")),t.checkoutComplete=!0)}))):this.showErrorPaymentMessage("Not client secret")},stripeTokenHandler:function(t,e){var i=this.mag.eCommerceManager.getOrder();if(i){var n=i.email;n?(this.hideErrorPaymentMessage(),this.showPaymentLoader(),r.ZP.ajax({type:"POST",url:"/api/projects/"+this.mag.num_id+"/ecommerce/stripe/orders/"+i.id+"/pay/",data:JSON.stringify({stripe_token:t.id,email:n}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){this.hidePaymentLoader(),t&&t.data&&("paid"===t.data.status&&(RM.analytics&&RM.analytics.sendEvent("Checkout success"),this.showSuccessPaymentMessage(),"function"==typeof e&&e({status:"success"})),this.checkoutComplete=!0)}.bind(this),error:function(){this.hidePaymentLoader(),this.showErrorPaymentMessage("Payment Failed"),"function"==typeof e&&e({status:"fail"}),this.checkoutComplete=!0}.bind(this)})):this.showErrorPaymentMessage("Email is required")}else this.showErrorPaymentMessage("Order not found")},showPaymentLoader:function(){this.paymentLoading||(this.paymentLoading=!0,this.$paymentTab.find(".preloader").addClass("show"),this.$paymentTab.find(".cart-payment-btn").css("display","none"),this.$paymentTab.find(".cart-cancel-btn").css("display","none"))},hidePaymentLoader:function(){this.paymentLoading&&(this.paymentLoading=!1,this.$paymentTab.find(".preloader").removeClass("show"),this.$paymentTab.find(".cart-payment-btn").css("display","block"),this.$paymentTab.find(".cart-cancel-btn").css("display","block"))},showErrorPaymentMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$paymentFailed.find(".error-message").text(t),this.$paymentFailed.addClass("show")},hideErrorPaymentMessage:function(){this.$paymentFailed.find(".error-message").empty(),this.$paymentFailed.removeClass("show")},showSuccessPaymentMessage:function(){this.$paymentTab.find(".sidebar-header").css("display","none"),this.$paymentTab.find(".sidebar-body").css("display","none"),this.$paymentSuccess.addClass("show")},hideSuccessPaymentMessage:function(){this.$paymentTab.find(".sidebar-header").css("display","block"),this.$paymentTab.find(".sidebar-body").css("display","block"),this.$paymentSuccess.removeClass("show")},toogleSettings:function(){this.isHiddenSettings=!this.isHiddenSettings,this.settingsPanel&&(this.settingsPanel.isHidden=this.isHiddenSettings)},getSettingsData:function(){var t={};if(this.cartWidgetData){var e=n.Z.clone(this.cartWidgetData);t={"bar-color":e["bar-color"],"bar-color-opacity":e["bar-color-opacity"],"bar-background-color":e["bar-background-color"],"bar-background-color-opacity":e["bar-background-color-opacity"],"bar-shadow":e["bar-shadow"],"bar-font-family":e["bar-font-family"],"bar-font-style":e["bar-font-style"],"bar-font-weight":e["bar-font-weight"],"bar-letter-spacing":e["bar-letter-spacing"],"stripe-allow_promotion_codes":e["stripe-allow_promotion_codes"]}}return{isHidden:this.isHiddenSettings,model:t,onOverlayClick:this.onSettingsOverlayClick.bind(this),eCommerceManager:this.mag.eCommerceManager}},setupSettingsPanel:function(){},onSettingsOverlayClick:function(){this.toogleSettings()},onModelChange:function(t){this.saveModelChanges_debounced(t)},saveModelChanges:function(t){var e=this;this.updateCartWidgetData(t),this.generateSidebarCSS(this.cartWidgetData),this.cartWidgetModel&&this.cartWidgetModel.save(t,{toHistory:!1,skipHistory:!0,patch:!0}).then((function(){e.renderSidebarTexts()}))},updateCartWidgetData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cartWidgetData=S(S({},this.cartWidgetData),t)},checkShippableInCart:function(){var t=this.mag.eCommerceManager.getCartData();for(var e in t.skus)if(t.skus[e].productObject.shippable)return!0;return!1},destroy:function(){var t=this;if(this.rendered)return this.checkoutComplete&&(this.mag.eCommerceManager.clearCart(),this.goToInitialTab(),this.hideSuccessPaymentMessage(),this.$paymentFailed.empty()),this.mag.eCommerceManager.events.off("ecommerce:cartsidebar:visibility:changed"),this.mag.eCommerceManager.events.off("ecommerce:cartdata:changed"),this.form&&this.form.removeEventListener("submit",this.onPaymentFormSubmit),this.cardHolderName&&this.cardHolderName.off("input",this.onCardHolderNameChange),this.$tabs.find("[data-tab^='tab-']").each((function(t,e){(0,r.ZP)(e).off("click")})),this.$items.find(".cart-item-remove-btn").each((function(t,e){(0,r.ZP)(e).off("click")})),this.$tabs.find(".order-details-form .form-input").each((function(e,i){(0,r.ZP)(i).off("input",t.onShippingFormChange)})),this.unbindDomEvents(),this.settingsPanel&&(this.settingsPanel.$off("change",this.onModelChange),this.settingsPanel.$destroy()),this.$settingButton&&this.$settingButton.off("click",this.toogleSettings),this.environment===f.Z.environment.preview&&this.unbindTextInputsEvents(),this.remove()},cartItemBlockHover:function(t){var e=(0,r.ZP)(t.currentTarget);e&&e.length&&(e.addClass("hover").siblings().removeClass("hover"),this.hoveredItem=e.data("price-id")||e.data("sku-id"))},cartItemBlockLeave:function(t){var e=(0,r.ZP)(t.currentTarget);e&&e.length&&(e.removeClass("hover"),(e.data("price-id")||e.data("sku-id"))===this.hoveredItem&&(this.hoveredItem=null))}});e.Z=W},1413:function(t,e,i){"use strict";var n=i(312),r=i(336),o=i.n(r),a=i(321),s=i(1414),c=i(323),l=i(349),d=i(341),u=i(342),h=i(345),p=o().View.extend({template:s.Z["template-viewer-mag-menu"],events:{"click .page":"onPageClick"},initialize:function(t){if(a.Z.bindAll(this),a.Z.extend(this,t),this.IMG_STUB=(0,l.findImagePath)("./spacer.gif"),(0,h._)("constructor.mobileScreenshots")){var e=this.mag.viewport,i="vertical"===this.viewerType,n=e===u.sJ.PhonePortrait||e===u.sJ.TabletPortrait,r=n&&i?{width:120}:!n&&i?{width:240}:c.Z.isPhone&&!i?{height:213}:{height:184},o=(0,u.QP)(e,r);this.PAGE_WIDTH=o.width,this.PAGE_HEIGHT=o.height}else c.Z.isPhone?"horizontal"===this.viewerType?(this.PAGE_WIDTH=140,this.PAGE_HEIGHT=92):(this.PAGE_WIDTH=240,this.PAGE_HEIGHT=158):(this.PAGE_WIDTH="vertical"===this.viewerType?240:280,this.PAGE_HEIGHT="vertical"===this.viewerType?158:184);return this.loadVisibleScreenshots.__debounced=a.Z.debounce(this.loadVisibleScreenshots,500),this.unloadInvisibleScreenshots.__debounced=a.Z.debounce(this.unloadInvisibleScreenshots,3e3),this},render:function(){var t=this,e=this.mag.viewport;this.setElement(this.template({mag:this.mag,pages:this.pages,frameWidth:this.PAGE_WIDTH,frameHeight:this.PAGE_HEIGHT,stub:this.IMG_STUB,viewerType:this.viewerType,publishDate:this.publishDate,hasProjectInfo:this.hasProjectInfo,common:RM.common,viewport:e,getScreenshot:function(i){return t.mag.model.getPageScreenshot({_id:i},{width:t.PAGE_WIDTH,height:t.PAGE_HEIGHT},e)}})),this.$el.appendTo(this.$container),this.mag.currentPage&&this.setActivePage(this.mag.currentPage.num),this.$pagesWrapper=this.$(".pages-wrapper");var i=this.$(".page");if("horizontal"==this.viewerType?(this.$(".pages").css("width",i.length*this.PAGE_WIDTH),this.$pagesWrapper.scrollLeft(99999)):(this.$(".pages").css("height",i.length*this.PAGE_HEIGHT),this.$pagesWrapper.scrollTop(99999)),c.Z.isDesktop&&(this.scroll=this.$(".scroll-wrapper").RMScroll({$container:this.$pagesWrapper,$content:this.$(".pages"),$handle:this.$(".scroll"),wheelScrollSpeed:1.3,gap_start:8,gap_end:8,maxHandleSize:136,dragScroll:!0,tp:this.viewerType}).data("scroll")),this.$pagesWrapper.bind("scroll",this.onScroll),this.cacheSize(),this.cacheScroll(),this.cachePagesPos(),this.loadedScreenshots={},this.showInitially&&(this.loadVisibleScreenshots(),this.show(!0)),"horizontal"==this.viewerType&&c.Z.isPhone||(0,n.ZP)(".menu-info .mag-title").dotdotdot({height:c.Z.isPhone?48:68,wrap:"letter",callback:a.Z.bind((function(t){t&&this.$(".menu-info .mag-title").attr("title",this.mag.title)}),this)}),!c.Z.isDesktop){var r="horizontal"==this.viewerType?this.$el.height():this.$el.width(),o=this.$el.add(this.$toolbar);"horizontal"==this.viewerType&&this.mag.navigation&&(o=o.add(this.mag.navigation.$bottom)),this.menuSwipe=o.RMSwipe({$scrollElements:this.$pagesWrapper,minTransitionSpeed:200,maxTransitionSpeed:400,rubberBand:!1,getCurrentConstraints:a.Z.bind((function(){var t={};return t.$referenceItem=this.$el,t="horizontal"==this.viewerType?this.shown?{up:{max:0,noTrigger:!0},down:{max:r}}:{up:{max:r},down:{max:0,noTrigger:!0}}:this.shown?{left:{max:0,noTrigger:!0},right:{max:r}}:{left:{max:r},right:{max:0,noTrigger:!0}}}),this),callback:a.Z.bind((function(){this.shown?this.hide():this.show()}),this)}).data("swipe")}return this.isPreview&&this.listenTo(RM.constructorRouter,"renewScreenshot",this.onConstructorScreenshotRenew),this.listenTo(this.mag,"pageChanged",this.onPageChange),this.listenTo(this.mag,"keypress-"+n.ZP.keycodes.m,this.toggle),this.listenTo(this.mag,"keypress-"+n.ZP.keycodes.esc,this.hide),d.Z.on("constructorSettings:open",this.show),d.Z.on("constructorSettings:close",this.hide),(0,n.ZP)(window).on("resize",this.onResize),this.$el.bind("mousewheel",this.onMouseWheel),this},show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.shown||(this.shown=!0,e&&this.$el.css({transition:"none"}),this.mag.$el.addClass("viewer-mag-menu-shown"),(0,n.ZP)("html").addClass("mag-menu-shown"),this.mag.$el.toggleClass("viewer-mag-menu-no-project-info",!this.hasProjectInfo),this.loadOtherScreenshots(),this.mag.trigger("menuShown"),d.Z.trigger("magMenu:open"),e&&setTimeout((function(){return t.$el.css({transition:""})}))),this},toggle:function(){return this.shown?this.hide():this.show()},hide:function(){return this.shown&&(this.mag.$el.removeClass("viewer-mag-menu-shown viewer-mag-menu-no-project-info"),(0,n.ZP)("html").removeClass("mag-menu-shown"),this.clearLoadOtherTimeout(),this.mag.focusCurrentPage(),this.shown=!1,this.mag.trigger("menuHidden"),d.Z.trigger("magMenu:close")),this},destroy:function(){return(0,n.ZP)(window).off("resize",this.onResize),(0,n.ZP)("html").removeClass("mag-menu-shown"),this.$el.unbind("mousewheel",this.onMouseWheel),this.menuSwipe&&this.menuSwipe.destroy(),this.$pagesWrapper.unbind("scroll",this.onScroll),d.Z.off("constructorSettings:open",this.show),d.Z.off("constructorSettings:close",this.hide),this.hide(),this.remove()},onMouseWheel:function(t){t.preventDefault()},onResize:function(){this.cacheSize(),this.scroll&&this.scroll.recalc(),this.mag.currentPage&&this.shiftToPage(this.mag.currentPage.num,!1)},onScroll:function(){this.cacheScroll()},cacheSize:function(){this.cachedData=this.cachedData||{},this.cachedData.scrollSize="horizontal"==this.viewerType?this.$pagesWrapper.width():this.$pagesWrapper.height()},cacheScroll:function(){this.cachedData=this.cachedData||{},this.cachedData.scrollPos="horizontal"==this.viewerType?this.$pagesWrapper.scrollLeft():this.$pagesWrapper.scrollTop()},cachePagesPos:function(){this.cachedData=this.cachedData||{},this.cachedData.pagesPos={};var t=this.cachedData.pagesPos,e=this.viewerType,i=this.PAGE_WIDTH,n=this.PAGE_HEIGHT;a.Z.each(this.pages,(function(r,o){t[r.num]=o*("horizontal"==e?i:n)}))},onPageChange:function(t){this.shown||(this.loadVisibleScreenshots.__debounced(),!c.Z.isDesktop&&this.unloadInvisibleScreenshots.__debounced()),this.shiftToPage(t.num,this.shown),a.Z.isEmpty(this.loadedScreenshots)&&this.loadVisibleScreenshots()},shiftToPage:function(t,e){var i,n=this.cachedData.scrollSize,r=this.cachedData.scrollPos,o="horizontal"==this.viewerType?this.PAGE_WIDTH:this.PAGE_HEIGHT,a=this.cachedData.pagesPos[t],s=r+o/2,c=r+n-o/2;if(this.setActivePage(t),a<s)i=a-s;else{if(!(a+o>c))return;i=a+o-c}var l={};l["horizontal"==this.viewerType?"scrollLeft":"scrollTop"]=r+i,this.$pagesWrapper.stop().animate(l,e?300:0)},onPageClick:function(t){if(!this.scroll||!this.scroll.wasContentDrag){var e=(0,n.ZP)(t.currentTarget).data("num");this.mag.currentPage&&e==this.mag.currentPage.num||this.mag.showPage(e,{animation:!1})}},onConstructorScreenshotRenew:function(t,e,i){var r=this.$(".page").filter((function(){return(0,n.ZP)(this).data("id")===t})),o=RM.constructorRouter.mag.pages.find((function(e){return e.id===t}));if(o){var a=this.mag.model.get("pages").find((function(t){return t._id===o.id}));a&&[u.sJ.PhonePortrait,u.sJ.TabletPortrait].includes(i)?a["viewport_".concat(i)].screenshot=e:a&&(a.screenshot=e);var s=this.mag.model.getPageScreenshot({_id:o.id},{width:this.PAGE_WIDTH,height:this.PAGE_HEIGHT},this.mag.viewport).src;r.attr("data-src")?r.attr("data-src",s):r.find(".screenshot").prop("src",s)}},getVisibleScreenshotRange:function(){var t=this.cachedData.scrollSize,e=this.cachedData.scrollPos,i="horizontal"==this.viewerType?this.PAGE_WIDTH:this.PAGE_HEIGHT;return{min:Math.max(0,Math.floor(e/i)),max:Math.min(this.mag.getPagesCount()-1,Math.floor((e+t)/i))}},loadVisibleScreenshots:function(){if(this.mag.pages&&this.mag.pages.length){var t=this.getVisibleScreenshotRange(),e=this;this.$(".page").each((function(i){var r,o=(r=(0,n.ZP)(this)).attr("data-src");i>=t.min&&i<=t.max&&o&&!e.loadedScreenshots[i]&&((r=(0,n.ZP)(this)).find(".screenshot").prop("src",o),r.removeAttr("data-src"),e.loadedScreenshots[i]=!0)}))}},unloadInvisibleScreenshots:function(){if(!this.shown){var t=this.getVisibleScreenshotRange(),e=this;this.$(".page").each((function(i){var r,o=(r=(0,n.ZP)(this)).attr("data-src");(i<t.min||i>t.max)&&!o&&e.loadedScreenshots[i]&&((r=(0,n.ZP)(this)).attr("data-src",r.find(".screenshot").prop("src")),r.find(".screenshot").prop("src",e.IMG_STUB),delete e.loadedScreenshots[i])}))}},loadOtherScreenshots:function(){this.clearLoadOtherTimeout(),this.loadOtherSafeTimeout=500,this.loadNextScreenshot()},loadNextScreenshot:function(){var t,e,i,n=this.getVisibleScreenshotRange(),r=Math.floor((n.min+n.max)/2),o=this.loadedScreenshots,a=this.mag.getPagesCount()-1;for(t=r;t<=a&&o[t];t++);for(e=r;e>=0&&o[e];e--);if(!(e<0&&t>a)){o[i=t>a?e:e<0?t:t-r>r-e?e:t]=!0;var s=this.$(".page").eq(i),c=s.find(".screenshot"),l=this;c.one("load error",(function(){clearTimeout(l.$curLoadingTimeout),l.loadNextScreenshot()})),this.$curLoadingTimeout=setTimeout((function(){c.off(),l.loadOtherSafeTimeout*=1.1,l.loadNextScreenshot()}),this.loadOtherSafeTimeout),c.prop("src",s.attr("data-src")),s.removeAttr("data-src"),this.$curLoadingScreenshot=c}},clearLoadOtherTimeout:function(){this.$curLoadingScreenshot&&this.$curLoadingScreenshot.off(),clearTimeout(this.$curLoadingTimeout)},showProjectInfo:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.$el.find(".mag-menu");t?e.removeClass("no-project-info"):e.addClass("no-project-info"),this.hasProjectInfo=t},setActivePage:function(t){var e=this.$('.page[data-num="'+t+'"]');return this.$(".page.active").removeClass("active"),e.addClass("active"),this}});e.Z=p},1393:function(t,e,i){"use strict";var n=i(312),r=i(336),o=i.n(r),a=i(321),s=i(1394),c=i(348),l=i(339),d=i(308),u=i(350),h=i(352),p=i(340),f=i(1102),g=i(985),m=i(986),v=i(344),b=i(1395),y=i(342),w=i(1398),S=i(1397),P=i(1400),k=i.n(P),C=i(323),x=i(345),O=i(1225),T=i(1401),_=i(1406),Z=i(1407),I=i(1409),M=i(1415),E=i(349),j=i(1370),A=i.n(j),L=i(343),D=i(341),$=i(1417),F=i(1418);function R(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function B(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?R(Object(i),!0).forEach((function(e){z(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function z(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function W(t){return function(t){if(Array.isArray(t))return V(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return V(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var U=o().View.extend({TYPEKIT_PREVIEW_API_LINK:"//use.typekit.net/previewkits/pk-v1.js",PRELOAD_COUNT_HORIZONTAL:{backward:1,forward:C.Z.isDesktop?5:C.Z.isPhone?3:2},PRELOAD_COUNT_VERTICAL:{backward:C.Z.isDesktop?2e3:(C.Z.isPhone,1e3),forward:C.Z.isDesktop?3e3:(C.Z.isPhone,2e3)},SCROLLABLE_TRESHOLD:100,SCROLL_SNAP:0,template:s.Z["template-viewer-mag"],staticGlobalWidgetsData:[],aboveGlobalWidgetsData:[],hasTextWidgetsV3:void 0,hasWidgetsWithVerticalOnscrollAnimation:void 0,whenWidgetsCreated:{},opts:{},initialize:function(t,e){var i=this;a.Z.bindAll(this),t||(t={}),a.Z.defaults(t,{pages:[]});var r=!1;if(t.hasSummary)this.staticGlobalWidgetsData=t.globalWidgets||[],this.aboveGlobalWidgetsData=t.aboveAllWidgets||[];else{var o=(0,a.Z)(t.pages).chain().reduce((function(t,e){return t.concat(e.wids||[])}),[]).each((function(t){m.Z.normalizeAnimations(t.animation).find((function(t){return"scroll"===t.type&&t.steps&&t.steps.find((function(t){return t.dy}))}))&&(r=!0)})).filter({is_global:!0}).value();this.staticGlobalWidgetsData=o.filter((function(t){return!t.is_above})),this.aboveGlobalWidgetsData=o.filter((function(t){return t.is_above}))}var s=this.aboveGlobalWidgetsData.map((function(t){return t._id})),l=this.staticGlobalWidgetsData.map((function(t){return t._id}));return t.pages.forEach((function(t){t.pagePath=t.pagePath||t.uri||t.num.toString()})),t.pages.forEach((function(t){t.uri=t.pagePath})),t.pages.forEach((function(t){if(t.wids.length&&"string"==typeof t.wids[0])t.wids=t.wids.filter((function(t){return!s.includes(t)&&!l.includes(t)})).concat(l),t.widgetsData=W(i.staticGlobalWidgetsData);else{var e=i.staticGlobalWidgetsData.filter((function(e){return e.pid!==t._id})),n=t.wids.concat(e);t.wids=a.Z.unique(n,(function(t){return t._id||Math.random()})).filter((function(t){return!s.includes(t._id)}))}})),a.Z.extend(this,t),this.hasWidgetsWithVerticalOnscrollAnimation=r||t.hasWidgetsWithVerticalOnscrollAnimation,this.hasTextWidgetsV3=t.hasTextWidgetsV3,this.model=new c.w(t,{parse:!0}),this.router=e,this.eCommerceManager=new O.ZP(this.router,this,this.router.environment),this.setupEcommerceSidebar(),this.isPreview=e.isPreview,this.$container=e.$mags_container||(0,n.ZP)("#root"),C.Z.isDesktop&&(0,n.ZP)("<div>").bind("mousewheel",(function(){})),this.setViewerOptions(this.getMagViewport()),this.continueLoading.__debounced=a.Z.debounce(this.continueLoading,200),this.loadPages.__debounced=a.Z.debounce(this.loadPages,700),this.onResize.__debounced=a.Z.debounce(this.onResize,300),this.redrawAboveGlobalWidgets.__debounced=a.Z.debounce(this.redrawAboveGlobalWidgets,500,!0),this.widgetPackCount=0,this.getAboveGlobalBoxMemoized=a.Z.memoize(this.getAboveGlobalBox,(function(t,e,i){return t+" "+(e&&e.num)+" "+(e&&e.pageViewport)+" "+(i&&i.width)+" "+(i&&i.height)})),this},detectStickyVerticalViewer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"vertical"===t.viewertype&&C.Z.isDesktop?!t.slidein&&!this.isPreview&&!this.hasWidgetsWithVerticalOnscrollAnimation:"vertical"===t.viewertype&&Modernizr.csspositionsticky},getProjectOptions:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.sJ.Default,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=a.Z.extend(r?{arrows:!0,menubutton:!0,projectinfo:!0,sharebutton:!0,pagecounter:!0,controlsontop:!1,viewertype:"vertical",slidein:!1,scalewidth:3600,lqip:!1}:{},i);(o.viewertype=RM.screenshot?"horizontal":o.viewertype,(!C.Z.isDesktop||this.isPreview&&"default"!==n)&&(o.slidein=!1),"vertical"!==o.viewertype||C.Z.isDesktop||this.detectStickyVerticalViewer(o))||(o.viewertype="horizontal",(null===(e=this.pages)||void 0===e?void 0:e.length)>1&&(o.arrows=!0));return o.sharebutton=o.sharebutton&&!this.isPreview&&!!this.published&&!this.is_private,o.pagecounter=o.pagecounter&&!this.isPreview&&(null===(t=this.pages)||void 0===t?void 0:t.length)>1,o.branding=(a.Z.isUndefined(o.branding)?o.endpage:o.branding)&&!this.isPreview,(0,x._)("constructor.previewSettings")&&(o.menubutton=o.menubutton&&!this.isPreview),(0,x._)("constructor.mobileScreenshots")&&[y.sJ.PhonePortrait,y.sJ.TabletPortrait].includes(this.viewport)&&(o.projectinfo=!1),this.model.user&&this.model.user.get&&"540dc7a3a5c9259a383b910b"==this.model.user.get("_id")&&(o=a.Z.extend(o,{arrows:!0,menubutton:this.isPreview,sharebutton:!1,pagecounter:!1,branding:!1})),o},getViewportOptions:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.sJ.Default,i="viewport_".concat(e);return B(B({},this.model.get("opts")),e!==y.sJ.Default&&(null===(t=this.model.get(i))||void 0===t?void 0:t.opts)||{})},setViewerOptions:function(t){if((0,x._)("constructor.viewportMagOverrides"))if(this.viewport=t,"undefined"!=typeof window&&void 0!==window.Proxy){var e=this;this.viewOpts=new Proxy({},{get:function(t,i){var n=e.getProjectOptions(e.model.get("opts"),e.viewport,!0);if(e.viewport!==y.sJ.Default){var r,o="viewport_".concat(e.viewport),a=e.getProjectOptions(null===(r=e.model.get(o))||void 0===r?void 0:r.opts,e.viewport,!1)[i];return void 0!==a?a:n[i]}return n[i]}})}else{var i,n="viewport_".concat(this.viewport);this.viewOpts=B(B({},this.getProjectOptions(this.model.get("opts"),this.viewport,!0)),this.viewport!==y.sJ.Default?this.getProjectOptions(null===(i=this.model.get(n))||void 0===i?void 0:i.opts,this.viewport,!1):{})}else this.viewOpts=this.getProjectOptions(this.model.get("opts"),t,!0);this.isStickyVerticalViewer=this.detectStickyVerticalViewer(this.viewOpts),this.PRELOAD_COUNT="horizontal"==this.viewOpts.viewertype?this.PRELOAD_COUNT_HORIZONTAL:this.PRELOAD_COUNT_VERTICAL},setViewerClasses:function(){this.$el.removeClass("viewer-type-horizontal viewer-type-vertical").addClass("viewer-type-"+this.viewOpts.viewertype).removeClass("pages-pos-normal pages-pos-overlap").addClass("pages-pos-"+(this.viewOpts.slidein?"overlap":"normal")),"vertical"==this.viewOpts.viewertype&&((0,n.ZP)("html").addClass("overflow-on-vertical-view"),this.isStickyVerticalViewer&&(this.$el.addClass("viewer-type-vertical-sticky"),(0,n.ZP)("body").addClass("overflow-on-vertical-view"))),this.toggleControlsOnTop(this.viewOpts.controlsontop),(0,n.ZP)("html").addClass("new-settings"),(0,x._)("constructor.mobileScreenshots")&&(0,n.ZP)("html").addClass("mobile-screenshots"),this.viewOpts.useCustomCursor&&this.initProjectCursors()},getCursorCssStylesString:function(t){var e=t.cursorUrl,i=t.cursorSize,n=t.isLambda,r=t.isHover;if(!e)return"";var o="cursor: url(".concat(e,"), ").concat(r?"pointer":"auto",";");if(i&&n){var a=Math.max(i.width,i.height),s="\n      cursor: -webkit-image-set(\n        url(".concat(e,"?w=").concat(Math.round(a/2),") 1x,\n        url(").concat(e,") 2x\n      ), ").concat(r?"pointer":"auto",";");o+="\n ".concat(s)}return o},initProjectCursors:function(){if(this.viewOpts.useCustomCursor){if(this.viewOpts.customCursorImage){if(Boolean(document.getElementById("default-custom-cursor-style")))return;var t=this.getCursorCssStylesString({cursorUrl:this.viewOpts.customCursorImage,cursorSize:this.viewOpts.customCursorSize,isLambda:this.viewOpts.customCursorIsLambda}),e=document.createElement("style");e.id="default-custom-cursor-style",e.appendChild(document.createTextNode("html, body {".concat(t,"}"))),document.querySelector("head").appendChild(e)}if(this.viewOpts.customHoverCursorImage){if(Boolean(document.getElementById("hover-custom-cursor-style")))return;var i=this.getCursorCssStylesString({cursorUrl:this.viewOpts.customHoverCursorImage,cursorSize:this.viewOpts.customHoverCursorSize,isLambda:this.viewOpts.customHoverCursorIsLambda,isHover:!0}),n="        #mags a.external-link, #mags a.maglink, #mags a.anchor-link, #mags .goback-link, #mags .mailchimp-link, #mags .share-link {\n          ".concat(i,"\n        }\n        #mags .common-hotspot .pin {\n          ").concat(i,"\n        }\n        #mags .common-form .button {\n          ").concat(i,"\n        }\n        #mags .common-slideshow .images .prev-picture-arrow-middle, #mags .common-slideshow .images .next-picture-arrow-middle, #mags .common-slideshow .thumbnails .thumb:not(.active) {\n          ").concat(i,"\n        }\n        #mags .rmwidget.e-com-cart-button > .common-button.hovered {\n          ").concat(i,"\n        }\n        #mags .widget-add-to-cart .add-to-cart-button {\n          ").concat(i,"\n        }\n        #cart-sidebar .sidebar-btn, #cart-sidebar .sidebar-icon-btn {\n          ").concat(i,"\n        }\n      "),r=document.createElement("style");r.id="hover-custom-cursor-style",r.appendChild(document.createTextNode(n)),document.querySelector("head").appendChild(r)}}},toggleControlsOnTop:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e="controls-on-top";(0,n.ZP)("html").toggleClass(e,t)},unsetViewerClasses:function(){var t;if(this.$el.removeClass("viewer-type-horizontal viewer-type-vertical").removeClass("pages-pos-normal pages-pos-overlap viewer-type-vertical-sticky"),(0,n.ZP)("html").removeClass("overflow-on-vertical-view controls-on-top"),null===(t=this.$magScrollSizer)||void 0===t||t.css("height",""),(0,n.ZP)("body").removeClass("overflow-on-vertical-view"),this.viewOpts.useCustomCursor){if(this.viewOpts.customCursorImage&&document.body.style.cursor&&(document.body.style.cursor="auto"),this.viewOpts.customCursorImage){var e=document.getElementById("default-custom-cursor-style");e&&e.remove()}if(this.viewOpts.customHoverCursorImage){var i=document.getElementById("hover-custom-cursor-style");i&&i.remove()}}},render:function(){var t,e=this;if(!this.active){this.title=this.title||"Project",this.magOpenTime=new Date,document.documentElement.style.setProperty("--min-desktop-width","".concat(y.ZP.dictionary[y.sJ.Default].min_scale_width,"px")),this.setElement(this.template({hasStandaloneBottomArrow:(!this.isPreview||(0,x._)("constructor.previewSettings"))&&"vertical"==this.viewOpts.viewertype&&this.viewOpts.arrows,isPreview:!!this.isPreview,icons:{sprite:(0,E.findImagePath)("./common/navigation/sprite".concat(E.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.setViewerClasses(),D.Z.on("ecwid:checkout:opened",this.onEcwidOpened.bind(this)),D.Z.on("ecwid:checkout:closed",this.onEcwidClosed.bind(this)),(0,n.ZP)("body").on("click","a.external-link",this.toExternalLink).on("click",".maglink.back-to-top",this.backToTopCurrentPage).on("click",".maglink",this.maglink).on("click",".goback-link",this.onGobackLinkClick).on("click",".mailchimp-link",this.onMailchimpLinkClick).on("click",".anchor-link",this.onAnchorLinkClick).on("click",".share-link",this.onShareLinkClick),this.$mag_container=this.$(".mag-pages-container"),this.$mag_container.on("scroll",this.fixFocusScroll),this.$mag_viewport_device=this.$(".mag-pages-viewport-device"),this.$pages_container=this.$(".mag-pages-container .container"),this.$pages_blackout=this.$pages_container.find(".blackout"),this.$aboveWidgetsContainer=this.$(".above-pages-container"),"vertical"==this.viewOpts.viewertype&&(this.$magScrollContainer=(0,n.ZP)(window),this.$magScrollSizer=(0,n.ZP)("body"),this.isStickyVerticalViewer&&(this.$magScrollSizer=(0,n.ZP)("body").add(this.$el)),this.$magScrollHandler=(0,n.ZP)(window),this.$magScrollAnimate=(0,n.ZP)("body, html")),"vertical"===this.viewOpts.viewertype&&(this.$bottomArrow=this.$(".navigation-arrow.bottom"),this.$bottomArrow.on("click",this.scrollMagALittle)),this.active=!0,this.globalEvents=new F.x({mag:this});var i=this.pages;this.pages=null,this.viewport=null,this.switchToViewport(this.getMagViewport()),C.Z.isDesktop||setTimeout(this.onResize,1500),this.pages=(0,a.Z)(i).chain().sortBy((function(t){return t.num})).map(a.Z.bind((function(t){var e="";try{e=new b.Z({mag:this,router:this.router,totalPages:i.length,pageData:t,viewerType:this.viewOpts.viewertype,isStickyVerticalViewer:this.isStickyVerticalViewer,$container:this.$pages_container,viewOpts:this.viewOpts}).render()}catch(t){console.log("Error page rendering.",t)}return e}),this)).filter((function(t){return!!t})).value();var r,s=this.getPage(this.getPagesCount());if(s&&s.markAsLast(),"horizontal"===this.viewOpts.viewertype&&this.setPagesTransitions(),!RM.screenshot){"horizontal"===this.viewOpts.viewertype&&this.viewOpts.arrows&&(this.navigation=new Z.Z({mag:this,router:this.router,$container:this.$el,isPreview:this.isPreview,viewerType:this.viewOpts.viewertype}).render());var c=window.location.href.indexOf("".concat(d.Z.readymag_host,"/designs/"))>-1,h=(this.must_show_branding||this.viewOpts.branding)&&!(RM.common.embedMode&&!C.Z.isDesktop),p=(h||c)&&C.Z.isDesktop&&!this.viewOpts.controlsontop||this.isPreview;this.toolbar=new I.Z({mag:this,pages:this.pages,router:this.router,$container:this.$el,isPreview:this.isPreview,hasMenu:this.viewOpts.menubutton,hasProjectInfo:this.viewOpts.projectinfo,hasShare:this.viewOpts.sharebutton&&!d.Z.IS_FILE_PROTOCOL,hasPageCounter:this.viewOpts.pagecounter,controlsOnTop:this.viewOpts.controlsontop,brandingInToolbar:p,viewerType:this.viewOpts.viewertype,publishDate:this.published?k()(new Date(this.published),"mmm dd, yyyy"):"unpublished",isSettingsOpened:this.isSettingsOpened,defaultHidden:this.defaultHideToolbar}).render(),(h||c)&&(this.branding=new M.Z({mag:this,hasCreateWithTemplateBtn:c,$container:p?this.toolbar.$el.find(".toolbar-branding"):this.$el}).render())}if(this.onResize(),"vertical"===this.viewOpts.viewertype&&(C.Z.isDesktop&&this.getPage(1)&&this.getPage(1).$content.focus(),(0,n.ZP)("body").on("keydown",this.onVerticalViewKeyDown)),C.Z.isDesktop?((0,n.ZP)(window).on("mousedown",this.onMouseDown),(0,n.ZP)(window).on("mouseup",this.onMouseUp),(0,n.ZP)(window).on("mousewheel",this.onMouseWheel)):((0,n.ZP)(window).on("touchstart",this.onDragStart),(0,n.ZP)(window).on("touchmove",this.onDragMove),(0,n.ZP)(window).on("touchend touchcancel",this.onDragEnd),(0,n.ZP)(window).on("pageshow",this.onResize)),l.default.PageVisibilityManager.addEventListener(this.onPageVisibilityChange),this.listenTo(o(),"form:focus",this.onFormFocus),this.listenTo(o(),"form:blur",this.onFormBlur),(0,n.ZP)(window).on("resize",this.onResize),(0,x._)("constructor.previewSettings")&&this.isPreview&&(this.listenTo(this.model,"change:opts",(function(t,i){e.onOptionsChange(t.previous("opts"),i)})),this.listenTo(this.model,"change:viewport_phone_portrait",(function(t,i){var n,r,o=e.model.get("opts"),a=null!==(n=null===(r=t.previous("viewport_phone_portrait"))||void 0===r?void 0:r.opts)&&void 0!==n?n:{};e.onOptionsChange(B(B({},o),a),null==i?void 0:i.opts,y.sJ.PhonePortrait)})),this.listenTo(this.model,"change:viewport_tablet_portrait",(function(t,i){var n,r,o=e.model.get("opts"),a=null!==(n=null===(r=t.previous("viewport_tablet_portrait"))||void 0===r?void 0:r.opts)&&void 0!==n?n:{};e.onOptionsChange(B(B({},o),a),null==i?void 0:i.opts,y.sJ.TabletPortrait)})),this.on("change:viewport",(function(t){var i=t.viewport,n=t.oldViewport;e.onOptionsChange(e.getViewportOptions(n),e.getViewportOptions(i),i)}))),C.Z.isDesktop||(0,n.ZP)(window).on("orientationchange",this.onResize),(0,n.ZP)(window).on("gesturestart gestureend",this.onGestureChange),"vertical"==this.viewOpts.viewertype)null===(r=this.$magScrollHandler)||void 0===r||r.on("scroll",this.onMagScroll);(0,n.ZP)("body").on("keyup",this.onKeyup),u.Z.generateCSS("paragraph","viewer",document,this.edit_params&&this.edit_params.paragraph_styles),u.Z.generateCSS("link","viewer",document,this.edit_params&&this.edit_params.link_styles),RM.screenshot&&"true"==l.default.queryUrlGetParam("pdf")||this.isPreview||u.Z.setShortList(u.Z.getVeryShortList(this.edit_params&&this.edit_params.fonts));var f=!this.isPreview&&this.model.get("is_published")?"published":"edit",g=this;return"edit"!=f||window.TypekitPreview?m():n.ZP.getScript(this.TYPEKIT_PREVIEW_API_LINK,(function(){m()})),null===(t=this.globalEvents)||void 0===t||t.start(),this}function m(){u.Z.appendFontsCssToDocument({version:f,fonts:g.edit_params&&g.edit_params.fonts,typekit_url:g.typekit_url})}},destroy:function(){var t,e,i=this;return a.Z.each(this.pages,(function(t){t.destroy()})),this.pages=null,null===(t=this.globalEvents)||void 0===t||t.destroy(),D.Z.off("ecwid:checkout:opened",this.onEcwidOpened.bind(this)),D.Z.off("ecwid:checkout:closed",this.onEcwidClosed.bind(this)),(0,n.ZP)("body").off("click","a.external-link",this.toExternalLink).off("click",".maglink.back-to-top",this.backToTopCurrentPage).off("click",".maglink",this.maglink).off("click",".goback-link",this.onGobackLinkClick).off("click",".mailchimp-link",this.onMailchimpLinkClick).off("click",".anchor-link",this.onAnchorLinkClick).off("keydown",this.onVerticalViewKeyDown).off("click",".share-link",this.onShareLinkClick),this.toolbar&&this.toolbar.destroy(),this.navigation&&this.navigation.destroy(),this.cartSidebar&&setTimeout((function(){i.cartSidebar.destroy()}),320),C.Z.isDesktop?((0,n.ZP)(window).off("mousedown",this.onMouseDown),(0,n.ZP)(window).off("mouseup",this.onMouseUp),(0,n.ZP)(window).off("mousewheel",this.onMouseWheel)):((0,n.ZP)(window).off("touchstart",this.onDragStart),(0,n.ZP)(window).off("touchmove",this.onDragMove),(0,n.ZP)(window).off("touchend touchcancel",this.onDragEnd),(0,n.ZP)(window).off("pageshow")),this.unsetViewerClasses(),l.default.PageVisibilityManager.removeEventListener(this.onPageVisibilityChange),(0,n.ZP)(window).off("resize",this.onResize),(0,n.ZP)(window).off("orientationchange",this.onResize),(0,n.ZP)(window).off("gesturestart gestureend",this.onGestureChange),null===(e=this.$magScrollHandler)||void 0===e||e.off("scroll",this.onMagScroll),(0,n.ZP)("body").off("keyup",this.onKeyup),this.active=!1,this.trigger("destroyed"),this.remove()},onEcwidOpened:function(){this.isEcwidOpened=!0},onEcwidClosed:function(){this.isEcwidOpened=!1},rerenderPage:function(t,e){var i,n=this.pages.findIndex((function(e){return e._id===t._id}));if(-1!==n){var r=n+1<this.pages.length?this.pages[n+1].$el:void 0;this.pages[n].destroy();var o=new b.Z({mag:this,router:this.router,totalPages:this.pages.length,pageData:B(B({},t),{},{wids:[].concat(W(t.wids.filter((function(t){return!t.is_global}))),W(e.globalWidgets||[]))}),viewerType:this.viewOpts.viewertype,isStickyVerticalViewer:this.isStickyVerticalViewer,$container:this.$pages_container,viewOpts:this.viewOpts});r&&r.length&&o.$el.remove().insertBefore(r),o.render(),this.pages[n]=o,t._id===(null===(i=this.currentPage)||void 0===i?void 0:i._id)&&(this.currentPage=void 0),this.onResize()}},getUrl:function(){return RM.common.isDomainViewer?window.location.protocol+"//"+window.location.hostname+"/"+(RM.common.customDomainProfile?this.num_id+"/":""):window.location.protocol+"//"+window.location.hostname+"/"+this.num_id+"/"},getPage:function(t){return parseInt(t,10)==t&&(t=parseInt(t,10)),a.Z.isNumber(t)?this.pages[t-1]:(0,a.Z)(this.pages).find((function(e){return e.uri==t}))},getPageByPath:function(t){return"1"===t.toString()?this.pages[0]:this.pages.find((function(e){return e.pagePath===t}))},getPagesCount:function(){return this.pages&&this.pages.length},isFirstPage:function(){return this.currentPage&&!this.getPage(this.currentPage.num-1)},isLastPage:function(){return this.currentPage&&!this.getPage(this.currentPage.num+1)},getPageId:function(t){var e=a.Z.find(this.pages,(function(e){return e.num_id===t}));return e&&e._id},getPageNum:function(t){var e=a.Z.find(this.pages,(function(e){return e._id==t}));return e&&e.num},getPageUri:function(t){var e=a.Z.find(this.pages,(function(e){return e._id==t}));if(!e)return null;var i=e.uri?e.uri+"/":1==e.num?"":e.num+"/";return this.router.getMagUri(this)+i},getPageById:function(t){return a.Z.find(this.pages,(function(e){return e._id==t}))},getPageTransitionTime:function(){var t=Math.min(this.viewOpts.scalewidth,this.getContainerSizeCached().width),e=this.getContainerSizeCached().height;return C.Z.isDesktop?550:C.Z.isTablet?t>e?550:470:t>e?520:370},onPageVisibilityChange:function(){var t=this;if(this.currentPage)if(clearTimeout(this.visibilityHandlerTimeout),l.default.PageVisibilityManager.isPageHidden())this.visibilityHandlerTimeout=setTimeout((function(){t.currentPage.stop({widgetTypes:["video","background","iframe"]});var e=t.getPage(t.currentPage.num+1);e&&e.started&&(e.stop({widgetTypes:["video","background","iframe"]}),t.restartNextPage=!0)}),700);else{this.currentPage.start({widgetTypes:["audio","video","background","iframe"],forceStart:!0});var e=this.getPage(this.currentPage.num+1);e&&this.restartNextPage&&(e.start({widgetTypes:["audio","video","background","iframe"],forceStart:!0}),delete this.restartNextPage)}},updateArrowsColor:function(t){if(t){var e=t.arrows_color||"white";this.$el.removeClass("navigation-white-arrows").removeClass("navigation-black-arrows").addClass("navigation-"+e+"-arrows")}},onFormFocus:function(){if(Modernizr.safari&&!C.Z.isDesktop&&"vertical"===this.viewOpts.viewertype){var t=this.getScroll();a.Z.each(this.pages,(function(e){e.trigger("form:focus",t)})),this.$magScrollContainer&&this.$magScrollContainer.on("scroll",this.onScrollWithFormInFocus)}},onFormBlur:function(){(Modernizr.safari||!C.Z.isDesktop)&&"vertical"===this.viewOpts.viewertype&&(a.Z.each(this.pages,(function(t){t.trigger("form:blur")})),this.$magScrollContainer&&this.$magScrollContainer.off("scroll",this.onScrollWithFormInFocus))},onScrollWithFormInFocus:function(){if((Modernizr.safari||!C.Z.isDesktop)&&"vertical"===this.viewOpts.viewertype){var t=this.getScroll();a.Z.each(this.pages,(function(e){e.trigger("page:scrollWithFormInFocus",t)}))}},onDragStart:function(t){clearTimeout(this.touchInProgressTimeout),this.pauseLoading("touch");var e=t.originalEvent.targetTouches[0];this.globalTouchObject={$target:(0,n.ZP)(t.target).closest(".has-horizontal-scroll, .has-vertical-scroll"),x:e.screenX,y:e.screenY,startTime:+new Date}},onDragMove:function(t){if(!this.isWidgetDragging&&!this.isEcwidOpened){var e=this.globalTouchObject;if(!(t.originalEvent.touches.length>1)&&e){if("horizontal"==this.viewOpts.viewertype)this.currentPage&&this.currentPage.hasFixedWidgets&&(0,n.ZP)(t.target).closest(this.$mag_container).length&&!e.$target.length&&(e.$target=this.currentPage.$scrollWrapper);else e.$target.length||(e.$target=this.$magScrollContainer);if(e.$target.length){if(!l.default.isPageNativelyScaled()){var i=t.originalEvent.targetTouches[0].screenY-e.y;if(Math.abs(i)>5&&e.$target.hasClass("has-vertical-scroll")){var r=e.$target[0].scrollHeight,o=e.$target.outerHeight();i>0&&e.$target.scrollTop()<=0&&t.preventDefault(),i<0&&e.$target.scrollTop()>=r-o&&t.preventDefault()}e.$target.hasClass("has-horizontal-scroll")}}else t.preventDefault()}}},onDragEnd:function(t){this.checkDoubleTap(t),this.touchInProgressTimeout=setTimeout(a.Z.bind((function(){this.continueLoading("touch")}),this),400);var e=this.globalTouchObject;if(e){var i=t.originalEvent.changedTouches[0],r=i.screenX-e.x,o=i.screenY-e.y;this.toolbar&&this.toolbar.isMenuOpened()&&Math.abs(r)<3&&Math.abs(o)<3&&+new Date-e.startTime<500&&!l.default.isPageNativelyScaled()&&(0,n.ZP)(t.target).closest(this.$mag_container).length&&this.closeMagMenu()}delete this.globalTouchObject},checkDoubleTap:function(t){if(!(t.originalEvent.touches.length>0)){var e=+new Date,i=e-(this.lastTouchEndTime||e+1);if(this.lastTouchEndTime=e,i<500&&i>0&&l.default.isPageNativelyScaled()){var r=(0,n.ZP)('meta[name="viewport"]');if(r.length){var o=r.attr("content"),s=o.replace(/maximum\-scale\=[0-9\.]*/,"maximum-scale=1.0");if(r.attr("content",s),Modernizr.android){var c=(0,n.ZP)("<div>").appendTo("body");a.Z.delay((function(){c.remove()}),500),setTimeout(a.Z.bind((function(){r.attr("content",o);var t=(0,n.ZP)("<div>").appendTo("body");a.Z.delay((function(){t.remove()}),500)}),this),1e3)}else r.attr("content",o);this.lastTouchEndTime=0,a.Z.delay((function(){(0,n.ZP)(window).trigger("gesturechange")}),300),a.Z.delay((function(){(0,n.ZP)(window).trigger("gesturechange")}),1e3)}}}},onMouseDown:function(t){this.globalMouseObject={x:t.screenX,y:t.screenY,startTime:+new Date}},onMouseUp:function(t){var e=this.globalMouseObject;if(e){var i=t.screenX-e.x,r=t.screenY-e.y;this.toolbar&&this.toolbar.isMenuOpened()&&Math.abs(i)<3&&Math.abs(r)<3&&+new Date-e.startTime<500&&(0,n.ZP)(t.target).closest(this.$mag_container).length&&this.closeMagMenu()}delete this.globalMouseObject},onMouseWheel:function(t){t.originalEvent.deltaX<0&&Math.abs(t.originalEvent.deltaY)<2&&t.cancelable&&t.preventDefault()},onKeyup:function(t){var e;if("input"!=t.target.tagName.toLowerCase()&&("textarea"!==t.target.tagName.toLowerCase()||t.target.classList.contains("copyhack"))&&a.Z.isEmpty(RM.common.disableShortcuts)&&!this.isInPresentationMode){var i=String.fromCharCode(t.keyCode),r=null===(e=this.currentPage.viewport_tablet_portrait)||void 0===e?void 0:e.enabled,o="1"===i?y.sJ.Default:"2"===i&&r?y.sJ.TabletPortrait:"2"===i&&!r||"3"===i&&r?y.sJ.PhonePortrait:void 0;if(o&&this.isPreview){var s,c,l,d=this.viewOpts.viewertype,u=o===y.sJ.Default?this.model.get("opts").viewertype:null===(s=this.model.get("viewport_".concat(o)))||void 0===s||null===(c=s.opts)||void 0===c?void 0:c.viewertype;if(u&&d!==u)null===(l=RM.constructorRouter)||void 0===l||l.preview.restartMag({viewport:o});else this.switchToViewport(o)}a.Z.find(n.ZP.keycodes,(function(e,i){return n.ZP.keycodes[i]===t.keyCode}))&&this.trigger("keypress-"+t.keyCode,t)}},onKeydown:function(t){if("input"!=t.target.tagName.toLowerCase()&&("textarea"!==t.target.tagName.toLowerCase()||t.target.classList.contains("copyhack"))&&a.Z.isEmpty(RM.common.disableShortcuts)&&this.isInPresentationMode&&!(t.altKey||t.ctrlKey||t.metaKey))switch(t.which){case 8:case 33:case 80:case 37:case 72:case 38:case 75:t.preventDefault(),this.goPrevPage({animation:!0});break;case 13:case 34:case 78:case 39:case 76:case 40:case 74:t.preventDefault(),this.goNextPage({animation:!0});break;case 36:t.preventDefault(),this.goFirstPage();break;case 35:t.preventDefault(),this.goLastPage();break;case 9:case 32:t.preventDefault(),t.shiftKey?this.goPrevPage({animation:!0}):this.goNextPage({animation:!0});break;case 77:t.preventDefault(),this.trigger("keypress-"+t.keyCode,t)}},onVerticalViewKeyDown:function(t){var e;if(!this.isInPresentationMode&&"vertical"===this.viewOpts.viewertype&&(t.which===n.ZP.keycodes.down||t.which===n.ZP.keycodes.up)){if(t.preventDefault(),this.arrowKeyLastScrollAt&&new Date-this.arrowKeyLastScrollAt<400)return;var i=t.which===n.ZP.keycodes.down;this.arrowKeyLastScrollAt=+new Date;var r,o,s=window.innerHeight,c=this.getScroll(),l=this.getScrollPosition(),d=Math.round(s/4),u=function(t){return t&&t<=d},h=a.Z.bind((function(){var t=this.magPagesPos[this.currentPage.num];return Math.abs(c-t.y)}),this),p=this.currentPage.pageHeight,f=0===l&&!this.isFirstPage();if(i)u(r=p-l-s)?o=p-l:o=(e=r)>d&&e<s?r:s,f&&this.viewOpts.slidein&&(o+=h());else{if(f){var g=this.magPagesPos[this.currentPage.num-1];l=g?g.h:0}o=u(r=l-s)||l<s?-l:-s,f&&this.viewOpts.slidein&&(o-=this.SCROLL_SNAP-h())}this.setScrollPosition({delta:o,animate:!0})}},togglePresentationMode:function(t){!!this.isInPresentationMode!=t&&C.Z.isDesktop&&(this.isPreview||(t?((0,n.ZP)("body").on("keydown",this.onKeydown),this.trigger("presentationModeOn")):((0,n.ZP)("body").off("keydown",this.onKeydown),this.trigger("presentationModeOff")),this.isInPresentationMode=t))},recalcBottomArrowState:function(t){this.currentPage&&t===this.currentPage&&this.navigation&&this.navigation.recalcBottomArrowState(t)},setScrollPosition:function(t){var e;this.currentPage&&("vertical"==this.viewOpts.viewertype?(e=void 0!==t.offset?this.magPagesPos[this.currentPage.num].y+t.offset:this.getScroll()+t.delta,t.animate?this.$magScrollAnimate.animate({scrollTop:e},500):this.setScroll(e)):(e=void 0!==t.offset?t.offset:this.currentPage.$scrollWrapper.scrollTop()+t.delta,t.animate?this.currentPage.$scrollWrapper.animate({scrollTop:e},500):this.currentPage.$scrollWrapper.scrollTop(e)))},getScrollPosition:function(){if(!this.currentPage)return 0;return"vertical"==this.viewOpts.viewertype?Math.max(this.getScroll()-this.magPagesPos[this.currentPage.num].y,0):this.currentPage.$scrollWrapper.scrollTop()},getScroll:function(){return this.$magScrollContainer&&this.$magScrollContainer.scrollTop()},setScroll:function(t){this.$magScrollContainer&&this.$magScrollContainer.scrollTop(t)},onMagScroll:function(){if(document.fullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.hadPlayingVideoOnResize)this.hadPlayingVideoOnResize=!1;else{a.Z.isFunction(this._resetUrlStringTimeoutFunc)&&this._resetUrlStringTimeoutFunc(),this.pauseWidgetsLoadingOnScroll();var t=this.findPageOnCurrentMagScroll({pageStartsOnBottom:!1}),e=this.getScrollParams(t);this.lastPageScroll=e.pageScroll,this.lastPageScrollPercent=e.pageScrollPercent,this.showPage(t.page.num,e),this.aboveGlobalAnimations&&this.aboveGlobalAnimations.onScroll({forceApply:!0,scroll:this.getScroll()}),this.trigger("mag scroll",this.getScroll()),this.$bottomArrow&&+this.magOpenTime+2e3<+new Date&&this.hideBottomButton()}},showBottomButton:function(){var t;null===(t=this.$bottomArrow)||void 0===t||t.removeClass("offscreen")},hideBottomButton:function(){var t;null===(t=this.$bottomArrow)||void 0===t||t.addClass("offscreen")},scrollMagALittle:function(){this.$magScrollAnimate.animate({scrollTop:this.getScroll()+this.getContainerSizeCached().height},500)},findPageOnCurrentMagScroll:function(t){t=t||{};var e,i,n,r,o=this.getScroll(),a=this.getContainerSizeCached(),s=(o=Math.min(Math.max(o,0),this.magHeight-a.height),this.pages.length),c=o+(t.pageStartsOnBottom?a.height-50-16-16:0);for(e=0;e<s;e++){if(i=this.pages[e],n=this.magPagesPos[i.num],c>=(r?r.y+r.h:n.y)&&c<n.y+n.h||e==s-1)return{page:i,scroll:o,pos:n};r=n}},getScrollParams:function(t){var e=Math.max(t.scroll-t.pos.y,0),i={initiator:"scroll",pageScroll:e,pageScrollPercent:e/t.page.pageHeight};if(this.viewOpts.slidein?(i.nextPageScroll=0,i.slideInNextPageScroll=t.pos.h-i.pageScroll):i.nextPageScroll=i.pageScroll-t.pos.h,i.nextPageVisible=t.pos.h-i.pageScroll<this.getContainerSizeCached().height,this.viewOpts.slidein){var n=(t.pos.h-i.pageScroll)/this.getContainerSizeCached().height;i.nextPageBlackout=Math.min(Math.max(n,0),1)}return i},onCurrentPageScroll:function(t,e){this.pauseWidgetsLoadingOnScroll(),this.aboveGlobalAnimations&&this.aboveGlobalAnimations.onScroll({forceApply:!this.isStickyVerticalViewer,scroll:e}),this.lastPageScroll=e,this.lastPageScrollPercent=this.lastPageScroll/t.pageHeight,this.loadPages.__debounced()},scrollCurrentPageALittle:function(){this.currentPage&&this.currentPage.scrollPageALittle()},focusCurrentPage:function(){this.currentPage&&this.currentPage.focusPage()},backToTopCurrentPage:function(){if("vertical"==this.viewOpts.viewertype){var t=this.findPageOnCurrentMagScroll();this.getScroll()!==t.pos.y&&this.$magScrollAnimate.animate({scrollTop:t.pos.y},500)}else this.currentPage&&this.currentPage.backToTop();RM.analytics&&RM.analytics.sendEvent("Scroll Top Link")},scrollPageToPos:function(t,e){var i,n,r=this.getPage(t),o=this.getContainerSizeCached();e=e||0,e*=r.scale,e+=r.contentPosition.top,"vertical"==this.viewOpts.viewertype?(i=this.magPagesPos[r.num],n=Math.max(0,i.y+e),n=Math.min(n,i.y+i.h-o.height),this.$magScrollAnimate.animate({scrollTop:n},500)):(this.currentPage!=r&&this.showPage(r.num),n=Math.max(0,e),r.scrollTo(n))},pauseWidgetsLoadingOnScroll:function(){},toExternalLink:function(t){var e=(0,n.ZP)(t.target).closest("a").attr("href");RM.analytics&&RM.analytics.sendEvent("External Link",e)},maglink:function(t){if(2!==t.which&&!t.metaKey&&!t.ctrlKey&&"_blank"!==((0,n.ZP)(t.currentTarget).attr("target")||"").toLowerCase()){var e=(0,n.ZP)(t.currentTarget).data("link")||(0,n.ZP)(t.currentTarget).attr("href");if(!e)return!1;if(t.preventDefault(),(0,n.ZP)(t.currentTarget).hasClass("back-to-top"))return this.backToTopCurrentPage();this.router.navigate(e,{trigger:!0})}},onGobackLinkClick:function(){this.router.goBack()},onMailchimpLinkClick:function(t){var e,i=(0,n.ZP)(t.currentTarget);if(!i.hasClass("disabled")){i.flashClass("disabled",3e3);try{e=JSON.parse(i.attr("data-mailchimp"))}catch(t){e=null}e&&p.Z.initMailchimpAPI((function(t){l.default.deleteCookie("MCEvilPopupClosed"),t.start(e)}))}},onAnchorLinkClick:function(t){var e=(0,n.ZP)(t.currentTarget),i=parseInt(e.attr("data-anchor-link-pos"),10)||0,r=e.attr("data-page-id"),o=e.attr("data-page-uri");if(r){var a=this.pages.find((function(t){return t._id===r}));a&&(o=a.num)}i&&o&&(this.scrollPageToPos(o,i),RM.analytics&&RM.analytics.sendEvent("Anchor Link",i))},onShareLinkClick:function(t){f.share({host:(RM.common.embedDomainName||window.location.protocol+"//"+window.location.hostname)+"/",tp:(0,n.ZP)(t.currentTarget).attr("data-share-provider"),source:"mag links",page:this.currentPage||this.pages[0],mag:a.Z.extend(this.model.toJSON(),{user:this.user}),forProject:"mag"==(0,n.ZP)(t.currentTarget).attr("data-share-type"),customDomain:!(!RM.common.isDomainViewer&&!RM.common.embedDomainName),customDomainProfile:!(!RM.common.customDomainProfile&&"User"!=RM.common.embedDomainType),analytics:this.router.analytics})},showPageCounter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{showPageCounter:!0};if(this.toolbar){var i=1;this.currentPage&&(i=this.currentPage.num+(t?"left"==t?1:-1:0),i=Math.max(Math.min(i,this.getPagesCount()),1)),this.toolbar.showPageCounter(this.getPage(i),e)}},hidePageCounter:function(){this.toolbar&&this.toolbar.hidePageCounter()},showPage:function(t,e){e=e||{},this.active||this.render();var i=this.getPage(t),n=this.currentPage,r=i&&this.getPage(i.num+1),o=this;i&&!this.aboveGlobalWidgetsRendered&&this.renderAboveGlobalWidgets(i),this.isStickyVerticalViewer?this.redrawAboveGlobalWidgets():e.nextPageVisible||"horizontal"===this.viewOpts.viewertype?this.redrawAboveGlobalWidgets(i,r,e.slideInNextPageScroll||e.nextPageScroll,e.animation):i?this.redrawAboveGlobalWidgets(i):n&&this.redrawAboveGlobalWidgets.__debounced(),"vertical"===this.viewOpts.viewertype&&(e.animation=!1,i&&i.scrollOnVerticalMode(e.pageScroll||0),i&&r&&null!=e.nextPageScroll&&(r.scrollOnVerticalMode(e.nextPageScroll),e.nextPageVisible?r.start():r.stop()),i&&void 0!==e.nextPageBlackout&&this.$pages_blackout.css({display:r?"block":"none",opacity:e.nextPageBlackout,"z-index":i.getPageZIndex()}));var a=!this.currentPage;if(!a&&t===this.currentPage.num)return!1;if(!i)return 1!==t&&this.router.onError(),!1;if(n)if("horizontal"===this.viewOpts.viewertype||this.isStickyVerticalViewer)n.stop();else{r==n&&e.nextPageVisible||n.stop();var s=n&&this.getPage(n.num+1);s&&!(s==i||s==r&&e.nextPageVisible)&&s.stop()}else e.animation=!1;this.pauseLoading("page-change-animation"),this.currentPage=i,n&&n.resetWaitForAnimationEnd(),clearInterval(this.showPageCompleteInterval),this.$pages_container.toggleClass("disable-transitions",!e.animation),e.animation&&(this.viewOpts.slidein&&n&&n.num>i.num?n.waitForAnimationEnd(h):i.waitForAnimationEnd(h)),this.direction=!n||n.num<i.num?"forward":"backward";var c=i.num-this.getPreloadPageCount(i.num-1,"forward"===this.direction?"backward":"forward"),l=i.num+this.getPreloadPageCount(i.num-1,this.direction);"horizontal"!=this.viewOpts.viewertype||this.viewOpts.viewertype.arrows||(c=l=i.num);for(var d=0;d<this.pages.length;d++){var u=this.pages[d];u.num<i.num?u.setPosition("prev",u.num+1==i.num):u.num>i.num?u.setPosition("next",u.num-1==i.num):u.setPosition("center",u.num==i.num),u.num>=c&&u.num<=l&&(this.whenWidgetsCreated[u._id]=u.show()),"vertical"==this.viewOpts.viewertype&&(u.num<i.num||u.num>i.num+1)&&u.resetScrollOnVerticalMode()}function h(){e.animation||a||window.requestAnimationFrame((function(){o.$pages_container.removeClass("disable-transitions")})),o.continueLoading("page-change-animation"),"vertical"==o.viewOpts.viewertype&&"scroll"!=e.initiator&&o.setScroll(o.magPagesPos[i.num].y),o.isPreview&&o.$el.scrollTop(0),clearInterval(o.showPageCompleteInterval);var t=function(){i.start(),o.loadPages()};(o.loadingPaused?o.whenRenderResumed:Promise.resolve()).then((function(){var e;!function(){for(var t=0;t<o.pages.length;t++){var e=o.pages[t];(e.num<c||e.num>l)&&e.hide()}}(),null===(e=o.whenWidgetsCreated[i._id])||void 0===e||e.then(t),o.pages.forEach((function(t){var e;t.num>=c&&t.num<=l&&t._id!==i._id&&(null===(e=o.whenWidgetsCreated[t._id])||void 0===e||e.then((function(){return o.loadPages()})))}))}))}!e.animation&&h(),this.scheduleSetUrlString({replace:!a,skipInternalHistory:e.skipInternalHistory}),this.router.setTitle(),this.trigger("pageChanged",i,{showPageCounter:e.animation||e.bySwipe||a||"scroll"==e.initiator,initial:a}),i.trigger("changedTo"),"vertical"==this.viewOpts.viewertype&&this.updateArrowsColor(i)},scheduleSetUrlString:function(){if(!Modernizr.chrome)return this.router.setUrlString.apply(this.router,arguments),void(this._resetUrlStringTimeoutFunc=!1);var t=arguments;this._resetUrlStringTimeoutFunc=function(){clearTimeout(this._urlStrigScheduleTimeout),this._urlStrigScheduleTimeout=setTimeout(function(){this._resetUrlStringTimeoutFunc=null,this.router.setUrlString.apply(this.router,t)}.bind(this),100)}.bind(this),this._resetUrlStringTimeoutFunc()},goNextPage:function(t){this.isLastPage()||this.currentPage&&this.router.go(this.currentPage.num+1,B(B({},t),{},{isPageNum:!0}))},goPrevPage:function(t){this.isFirstPage()||this.currentPage&&this.router.go(this.currentPage.num-1,B(B({},t),{},{isPageNum:!0}))},goFirstPage:function(){this.router.go(1,{isPageNum:!0})},goLastPage:function(){this.router.go(this.getPagesCount(),{isPageNum:!0})},pauseLoading:function(t){var e=this;this.pauseReasons=this.pauseReasons||{},this.pauseReasons[t]=!0,this.loadingPaused=!0,this.whenRenderResumed=new Promise((function(t){var i;!function n(){e.loadingPaused?i=setTimeout(n,17):(clearTimeout(i),t())}()}))},continueLoading:function(t){this.pauseReasons=this.pauseReasons||{},this.pauseReasons[t]=!1,this.loadingPaused=!a.Z.every(a.Z.values(this.pauseReasons),(function(t){return!t}))},loadPages:function(){if($.ZP.setTiming($.qK.LoadPagesStart,Date.now()),this.pages&&this.pages.length){var t=this.getPagesLoadOrder();if(t&&t.length){var e,i,n=[],r=[];for(e=0;e<t.length;e++){var o=(i=this.pages[t[e]]).getWidgetsPacks();o.length&&n.push(o),r=r.concat(i.getImmediatePack())}if(n.length){var a=[];for(e=0;e<n.length;e++){0==e&&c(e,0),c(e+1,0);for(var s=1;s<n[e].length;s++)c(e,s)}a.unshift(r),this.widgetsPacksLoadQueue=a,this.stopPagesLoad(),this.renderNextWidgetPack()}}}function c(t,e){t<0||t>=n.length||e<0||e>=n[t].length||a.push(n[t][e])}},stopPagesLoad:function(){clearTimeout(this.loadNextWidgetsTimer)},renderNextWidgetPack:function(){if(!this.widgetsPacksLoadQueue.length)return $.ZP.setTiming($.qK.LoadPagesEnd,Date.now()),void o().trigger("widgetsQueue:empty",this.num_id);if(this.loadingPaused)this.loadNextWidgetsTimer=setTimeout(this.renderNextWidgetPack,50);else{var t=this.widgetsPacksLoadQueue.shift();if(t.length){var e=a.Z.uniq(a.Z.map(t,"page")),i=e[0];1!==e.length||i.shown&&!i.loaded?i.renderWidgetPack(t,a.Z.bind((function(){this.widgetPackCount++,this.loadNextWidgetsTimer=setTimeout(this.renderNextWidgetPack,17)}),this)):this.loadNextWidgetsTimer=setTimeout(this.renderNextWidgetPack,17)}else this.loadNextWidgetsTimer=setTimeout(this.renderNextWidgetPack,17)}},getPreloadPageCount:function(t,e){if("horizontal"==this.viewOpts.viewertype)return this.PRELOAD_COUNT[e];for(var i=1,n=0,r="forward"==e?1:-1;n<this.PRELOAD_COUNT[e]&&i*r+t<this.pages.length&&i*r+t>=0;)n+=this.pages[i*r+t].height,i++;return i},getPagesLoadOrder:function(){var t=this.currentPage;if(t){var e,i=t.num-1,n=this.pages.length,r=[],o=this,a=t.num-this.getPreloadPageCount(i,"forward"==this.direction?"backward":"forward"),s=t.num+this.getPreloadPageCount(i,this.direction);if(c(i),"backward"==this.direction){for(c(i-1),c(i+1),e=i-2;e>=a;e--)c(e);for(e=i+2;e<=s;e++)c(e)}else{for(c(i+1),c(i-1),e=i+2;e<=s;e++)c(e);for(e=i-2;e>=a;e--)c(e)}return r}function c(t){t<0||t>=n||!o.pages[t].shown||o.pages[t].loaded||r.push(t)}},onGestureChange:function(){this.onResize.__debounced()},checkFullscreen:function(){this.fullscreenCheckCounter=5,clearInterval(this.fullscreenCheckTimer),this.fullscreenCheckTimer=setInterval(a.Z.bind((function(){var t=window.fullScreen||window.innerWidth==screen.width&&window.innerHeight>=screen.height-1;this.togglePresentationMode(t),this.fullscreenCheckCounter--,this.fullscreenCheckCounter||clearInterval(this.fullscreenCheckTimer)}),this),500)},onResize:function(){var t=this;if(!this.isEcwidOpened){if(this.checkFullscreen(),!C.Z.isDesktop&&"horizontal"==this.viewOpts.viewertype||"vertical"==this.viewOpts.viewertype&&!this.isStickyVerticalViewer){var e="horizontal"==this.viewOpts.viewertype?(0,n.ZP)("html, body").add(this.$el):this.$el,i=l.default.isPageNativelyScaled(),r=window.innerHeight;337==r&&414==(0,n.ZP)(window).height()&&r++,e.height(i?"100%":r),!i&&e.scrollTop(0)}var o=this.getContainerSize(),s=this.isPortrait()?"portrait":"landscape",c=!1;if(!C.Z.isDesktop&&this.prevOrientation&&this.prevOrientation!==s){var d=this.getPage(this.currentPage.num-1),u=b.Z.findPlayingVideo(this.currentPage.widgets)||b.Z.findPlayingVideo(null==d?void 0:d.widgets),h=!!u&&L.Z.doBoundingBoxesIntersect(u.$el[0].getBoundingClientRect(),{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth});u&&h?(this.hadPlayingVideoOnResize=!0,setTimeout((function(){u.page.num===t.currentPage.num&&t.setScrollPosition({offset:u.y*t.getScale(t.currentPage.pageViewport)})}),500)):(this.hadPlayingVideoOnResize=!1,this.switchToViewport(this.getMagViewport()),this.setPagesTransitions(),this.stopPagesLoad(),setTimeout(this.onResize,300),setTimeout(this.onResize,1500)),c=!0}if(this.prevOrientation=s,this.isPreview&&"default"!=this.viewport){var p=Math.round((this.$el.width()-o.width)/2),f=Math.round((this.$el.height()-o.height)/2);this.$mag_container.add(this.$mag_viewport_device).css({top:Math.max(f,0),left:Math.max(p,0),width:o.width,height:o.height})}else this.$mag_container.add(this.$mag_viewport_device).css({top:"",left:"",width:"",height:""});this.$mag_viewport_device.attr("data-viewport",this.viewport),this.setNewPagesWidths(o.width,o.height),this.magHeight=0,this.magPagesPos=[];var g=this.pages&&this.pages.length;if(a.Z.each(this.pages,a.Z.bind((function(t,e){var i=t.onResize({absolutePosition:this.magHeight}),n=0;e<g-1&&this.viewOpts.slidein&&(n=this.SCROLL_SNAP),this.magPagesPos[t.num]={y:this.magHeight,h:i,dh:n},this.magHeight+=i+n}),this)),"vertical"===this.viewOpts.viewertype&&this.magHeight){var m,v,y,w=null===(m=this.$magScrollSizer)||void 0===m?void 0:m.width(),S=0;if(this.isPreview&&"default"!==this.viewport&&(S=Math.max(this.$el.height()-this.getViewportSetting("min_height"),0)),null===(v=this.$magScrollSizer)||void 0===v||v.css("height",this.magHeight+S),w!=(null===(y=this.$magScrollSizer)||void 0===y?void 0:y.width())&&C.Z.isDesktop&&this.onResize(),this.currentPage)if(this.isStickyVerticalViewer||this.hadPlayingVideoOnResize){if(c&&!this.hadPlayingVideoOnResize){var P=this.getScrollPosForNewSize();setTimeout(a.Z.bind((function(){this.setScroll(P)}),this),0)}}else this.setScroll(this.getScrollPosForNewSize()),this.onMagScroll();this.$bottomArrow&&this.$bottomArrow.toggleClass("offscreen",this.getScroll()+o.height+this.SCROLLABLE_TRESHOLD>this.magHeight)}if("horizontal"==this.viewOpts.viewertype&&this.currentPage&&c&&!this.hadPlayingVideoOnResize){P=this.getScrollPosForNewSize();setTimeout(a.Z.bind((function(){this.currentPage.$scrollWrapper.scrollTop(P)}),this),0),this.aboveGlobalWidgetsRendered||setTimeout(a.Z.bind((function(){this.aboveGlobalWidgetsRendered||this.renderAboveGlobalWidgets(this.currentPage)}),this),40)}this.currentPage&&this.loadPages.__debounced()}},onOptionsChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.sJ.Default,n=function(n){return i!==y.sJ.Default?e[n]!==(null==t?void 0:t[n])&&y.vJ.includes(n):e[n]!==(null==t?void 0:t[n])};i===y.sJ.Default&&(this.opts=e),n("projectinfo")&&this.toolbar.changeProjectInfoVisible(e.projectinfo);var r,o,a=n("arrows");if(a&&"horizontal"===e.viewertype&&e.arrows)null===(r=this.navigation)||void 0===r||r.destroy(),delete this.navigation,this.navigation=new Z.Z({mag:this,router:this.router,$container:this.$el,isPreview:this.isPreview,hasFinalPage:e.endpage,viewerType:e.viewertype}).render();else if(a&&"horizontal"===e.viewertype&&!e.arrows){var s;null===(s=this.navigation)||void 0===s||s.destroy(),delete this.navigation}(a&&"vertical"===e.viewertype&&e.arrows?this.showBottomButton():a&&"vertical"===e.viewertype&&!e.arrows&&this.hideBottomButton(),n("scalableviewer")&&window.dispatchEvent(new Event("resize")),n("slidein")&&(this.viewOpts.slidein=e.slidein,this.$el.removeClass("pages-pos-normal pages-pos-overlap").addClass("pages-pos-"+(e.slidein?"overlap":"normal"))),n("viewertype"))&&(null===(o=RM.constructorRouter)||void 0===o||o.preview.restartMag())},getScrollPosForNewSize:function(){return this.currentPage?"vertical"==this.viewOpts.viewertype?this.magPagesPos[this.currentPage.num].y+(this.lastPageScrollPercent||0)*this.currentPage.pageHeight:(this.lastPageScrollPercent||0)*this.currentPage.pageHeight:0},setNewPagesWidths:function(t,e){var i=this.$el.find("#page-position-style"),r=C.Z.isDesktop?"":" translateZ(0)",o="        .mag .mag-pages-container .container {\n          left: 0px;\n          width: "+t+"px;\n        }\n        .mag .mag-pages-container .container .page {\n          left: 0px;\n          width: "+t+"px;\n        }\n",a="";if("horizontal"==this.viewOpts.viewertype)a="          .mag .mag-pages-container .container .page.prev-page {\n            -webkit-transform: translateX("+(this.viewOpts.slidein?0:-t)+"px) "+r+";\n            transform: translateX("+(this.viewOpts.slidein?0:-t)+"px) "+r+";\n          }\n          .mag .mag-pages-container .container .page.center-page {\n            -webkit-transform: translateX(0) "+r+";\n            transform: translateX(0) "+r+";\n          }\n          .mag .mag-pages-container .container .page.next-page {\n            -webkit-transform: translateX("+t+"px) "+r+";\n            transform: translateX("+t+"px) "+r+";\n          }";else if(this.isStickyVerticalViewer){var s=window.innerHeight,c=this.getContainerSizeCached().height;a=(0,x._)("viewer.resizeFixedContainer")&&!C.Z.isDesktop?"\n               .mag .mag-pages-container .container .page .page-fixed-bg-container,\n               .mag .mag-pages-container .container .page .fixed-position-container,\n               .mag .mag-pages-container .container .page .fixed-position-container-top {\n                 height: ".concat(s,"px;\n               }\n               .mag .mag-pages-container .container .page .fixed-position-container-top {\n                 margin-top: -").concat(s,"px;\n               }\n               .mag .mag-pages-container .container .page .fixed-position-container {\n                 margin-top: -").concat(c,"px;\n               }\n               .mag .mag-pages-container .container .page:not(.hide-sticky) .content-scroll-wrapper {\n                 margin-top: ").concat(c-2*s,"px;\n               }\n           "):"              .mag .mag-pages-container .container .page .page-fixed-bg-container,              .mag .mag-pages-container .container .page .fixed-position-container,              .mag .mag-pages-container .container .page .fixed-position-container-top {                height: "+c+"px;              }\n              .mag .mag-pages-container .container .page .fixed-position-container,              .mag .mag-pages-container .container .page .fixed-position-container-top,              .mag .mag-pages-container .container .page:not(.hide-sticky) .content-scroll-wrapper {                margin-top: "+-c+"px;              }\n"}else a="            .mag .mag-pages-container .container .page.prev-page {\n              top: "+(-e-1)+"px;            }\n            .mag .mag-pages-container .container .page.next-page {\n              top: "+(e+1)+"px;            }\n";i.length||(i=(0,n.ZP)('<style id="page-position-style" type="text/css">')).appendTo(this.$el),"horizontal"==this.viewOpts.viewertype?(this.$pages_container.addClass("disable-transitions-on-resize"),i.text(o+a),this.$pages_container.height(),this.$pages_container.removeClass("disable-transitions-on-resize")):i.text(o+a)},setPagesTransitions:function(){var t=this.$el.find("#page-transition-style"),e=this.getPageTransitionTime(),i="cubic-bezier(0.40, 0.24, 0.40, 1)",r="        .mag .mag-pages-container .container .page {\n          -webkit-transition:\tall "+e+"ms "+i+";          transition: all "+e+"ms "+i+";        }\n        .mag .mag-pages-container .container .page.center-page {\n          -webkit-transition:\tall "+(e-5)+"ms "+i+";          transition: all "+(e-5)+"ms "+i+";        }\n        ";t.length||(t=(0,n.ZP)('<style id="page-transition-style" type="text/css">')).appendTo(this.$el),t.text(r)},switchToViewport:function(t){if(this.viewport!=t){var e=this.viewport;this.containerSize=null,this.viewport=t,this.trigger("change:viewport",{viewport:this.viewport,oldViewport:e}),this.aboveGlobalWidgetsRendered=!1,this.aboveGlobalWidgets&&this.aboveGlobalWidgets.forEach((function(t){t.destroy(),t.off()})),this.aboveGlobalAnimations&&this.aboveGlobalAnimations.destroy(),this.aboveGlobalWidgets=[],a.Z.each(this.pages,(function(t){t.updateViewport()}))}},getContainerSize:function(){var t,e,i=this;return this.isPreview&&"default"!=this.viewport?(t=this.getViewportWidth(this.viewport),e=Math.min(this.getViewportSetting("min_height"),this.$el.height())):(t=RM.screenshot?(0,n.ZP)(window).width():this.$el.width(),e=RM.screenshot?window.innerHeight:this.isStickyVerticalViewer&&(Modernizr.safari||Modernizr.android)&&!C.Z.isDesktop?i.isPortrait()?Math.max(window.innerHeight,screen.height-20-20+1):Math.min(screen.width,screen.height):this.isStickyVerticalViewer?window.innerHeight:this.$el.height()||window.innerHeight),this.containerSize={width:t,height:e,windowClientWidth:document.documentElement.clientWidth,windowClientHeight:document.documentElement.clientHeight},this.containerSize},getContainerSizeCached:function(){return this.containerSize||this.getContainerSize()},getViewportWidth:function(t){return t&&t!==y.sJ.Default?t===y.sJ.PhonePortrait?this.phoneWidth||y.ZP.dictionary[y.sJ.PhonePortrait].width:y.ZP.dictionary[t].width:this.desktopWidth||y.ZP.dictionary[y.sJ.Default].width},isPortrait:function(){return window.screen?window.screen.orientation&&window.screen.orientation.type?!!window.screen.orientation.type.match(/portrait/i):0===window.orientation||90!==window.orientation&&-90!==window.orientation&&window.innerWidth<window.innerHeight:window.innerWidth<window.innerHeight},getMagViewport:function(){var t=this.isPortrait();if(this.isPreview)return this.constructorViewport||"default";var e=y.sJ.Default,i=window.innerWidth;if(Modernizr.retina||!C.Z.isDesktop||Modernizr.ismobile){if(screen&&screen.width&&(i=t?Math.min(screen.width,screen.height):Math.max(screen.width,screen.height)),t)return i<600?y.sJ.PhonePortrait:i>=600&&i<=1024?y.sJ.TabletPortrait:y.sJ.Default;if(i>980)return y.sJ.Default}if(Modernizr.isipad)return t?y.sJ.TabletPortrait:y.sJ.Default;if(!C.Z.isDesktop){var n=i,r=a.Z.reduce(y.ZP.viewports,(function(t,e,i){return Math.abs(e.width-n)<=Math.abs(y.ZP.viewports[t].width-n)?i:t}),0);e=y.ZP.viewports[r].name}return e},getViewportSetting:function(t,e){return(y.ZP.dictionary[e||this.viewport]||{})[t]},log:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e]+" ";var i=(0,n.ZP)("#log");i.length||(i=(0,n.ZP)('<div id="log">').css({position:"fixed",background:"rgba(0, 0, 0, 0.7)",color:"#fff",width:200,height:300,left:10,top:10,"z-index":999999,overflow:"auto"}).appendTo("body"));var r=i.html(),o=r.split("<br>");i.html(o.slice(-17).join("<br/>")+"<br/>"+t),i.scrollTop(999999)},fixFocusScroll:function(){this.$mag_container.scrollTop(0),this.$mag_container.scrollLeft(0)},matchSameDomainLink:function(t){var e=t.match(new RegExp("//"+l.default.escapeSpecial(window.location.hostname)+"/(.*)")),i=e&&e[1];if(i){var n=this.getPageByPath(i);if(n)return n._id}return t},getScale:function(t){var e=Math.min(this.viewOpts.scalewidth,this.getContainerSizeCached().width),i=this.getViewportWidth(t),n=e/i;return v.Z.normalize(n,void 0,this.viewport,i,this.viewOpts)},getAllWidgetViewsById:function(t,e){var i=this,n=Boolean(this.staticGlobalWidgetsData.find((function(e){return e._id===t}))),r=Boolean(this.aboveGlobalWidgetsData.find((function(e){return e._id===t})));return n&&!r?this.pages.filter((function(e){var i;return null===(i=e.hasWidget)||void 0===i?void 0:i.call(e,t)})).map((function(e){return i.getWidgetById(t,e)})):[this.getWidgetById(t,e)]},getWidgetById:function(t,e){var i,n,r,o=null!=e&&null!==(i=e.hasWidget)&&void 0!==i&&i.call(e,t)?e:this.pages.find((function(e){var i;return null===(i=e.hasWidget)||void 0===i?void 0:i.call(e,t)}));return o?(r=o.getWidgetById(t))?n=window.Promise.resolve(r):o.loaded||(n=new window.Promise(function(e,i){this.listenToOnce(o,"loaded"+t,(function(){var n=o.getWidgetById(t);n?e(n):i()}))}.bind(this))):a.Z.find(this.aboveGlobalWidgetsData,{_id:t})&&((r=a.Z.find(this.aboveGlobalWidgets,{_id:t}))?n=window.Promise.resolve(r):this.aboveGlobalWidgetsRendered||(n=new window.Promise(function(e,i){this.listenToOnce(this,"aboveGlobalWidgetsRendered",(function(){var n=a.Z.find(this.aboveGlobalWidgets,{_id:t});n?e(n):i()}))}.bind(this)))),n||window.Promise.reject()},renderAboveGlobalWidgets:function(t){var e=[],i=t.pageViewport;a.Z.each(this.aboveGlobalWidgetsData,function(n){var r,o=a.Z.find(this.aboveGlobalWidgets,{_id:n._id});if(o&&(o.destroy(),o.off()),n){var s=t.getWidgetViewportData(n,i),c=!this.isPreview&&m.Z.hasExpired(s);w.Widgets[s.type]&&!c&&((r=new w.Widgets[s.type](s,t)).$fixedContainer=this.$aboveWidgetsContainer,r.isValid()&&e.push(r))}}.bind(this)),this.aboveGlobalAnimations=this.initializeAboveGlobalAnimation(e,t),a.Z.each(e,(function(e){try{e.render(),e.hidden||t.isPasswordProtected()?g.Z.hide(e,!0):g.Z.show(e,!0)}catch(t){console.error("Failed to render global widget ".concat(e._id))}})),this.aboveGlobalWidgets=a.Z.sortBy(e,"y"),this.aboveGlobalWidgetsRendered=!0,this.trigger("aboveGlobalWidgetsRendered")},initializeAboveGlobalAnimation:function(t,e){t=a.Z.isArray(t)?t:[t],e.scale=this.getScale(e.pageViewport);var i=new S.Z({page:e,widgets:t}),n=[];return a.Z.each(t,(function(t){var e=new window.Promise((function(e){t.loaded?e(t):t.on("loaded",e.bind(null,t))}));n.push(e)})),window.Promise.all(n).then(function(){this.aboveAnimationsReady=!0,this.trigger("aboveAnimationsReady")}.bind(this)),this.listenTo(e,"resize",(function(t){a.Z.isUndefined(t.prevScale)||t.prevScale===t.scale||i.updateTimelines(),i.onResize({updateAll:!0})})),i},updateAboveGlobalViewport:function(t,e){var i=a.Z.find(this.aboveGlobalWidgetsData,{_id:t._id}),n=e.getWidgetViewportData(i,e.pageViewport);if(t.animationObj&&this.aboveGlobalAnimations.removeAnimation(t.animationObj),t.destroy(),t.initialize(n,e),t.hasAnimation()){var r=this.aboveGlobalAnimations.addAnimation(t);r&&r.start()}t.render(),g.Z.hide(t,!0)},getAboveGlobalBox:function(t,e,i){var n=a.Z.find(this.aboveGlobalWidgetsData,{_id:t}),r=e.getWidgetViewportData(n,e.pageViewport);return l.default.getFixedPositionBox(r.fixed_position,a.Z.pick(r,["x","y","w","h"]),e.scale,i)},redrawAboveGlobalWidgets:function(t,e,i,n){if(!t){var r=a.Z.isUndefined(this.getScroll())?void 0:this.findPageOnCurrentMagScroll(),o=r&&r.page.num,s=r&&this.getScrollParams(r);t=o&&this.getPage(o),e=t&&this.getPage(t.num+1),i=s&&(s.slideInNextPageScroll||s.nextPageScroll),n=s&&s.animation}i=a.Z.isUndefined(i)?void 0:Math.abs(i);var c={width:Math.min(this.viewOpts.scalewidth,this.getContainerSizeCached().width),height:this.getContainerSizeCached().height},d=function(t,e){return!t.page||e&&t.page.pageViewport!==e.pageViewport};if(a.Z.isUndefined(i)){var u=this.getPageTransitionTime();a.Z.each(this.aboveGlobalWidgets,function(e){var i=t._id&&!g.Z.isHidden(e,t._id,this.isPreview)&&!t.isPasswordProtected(),r=t._id&&d(e,t);t._id&&e.updatePage(t),r&&this.updateAboveGlobalViewport(e,t),i?n?e.wasHidden&&l.default.waitForTransitionEnd(t.$el,u,"transform",g.Z.show.bind(null,e)):e.wasHidden&&g.Z.show(e):!e.wasHidden&&g.Z.hide(e)}.bind(this))}else{var h=Math.abs(i);a.Z.each(this.aboveGlobalWidgets,function(i){var n=!g.Z.isHidden(i,t._id,this.isPreview)&&!t.isPasswordProtected(),r=e&&!g.Z.isHidden(i,e._id,this.isPreview)&&!e.isPasswordProtected(),o=n&&r&&t.pageViewport===e.pageViewport,a=this.getAboveGlobalBoxMemoized(i._id,t,c),s=this.getAboveGlobalBoxMemoized(i._id,e||t,c),l=n&&h>a.top+a.height,u=e&&r&&s.top>h;if(l||u||o||!e&&n){var p=l?t:u?e:i.page,f=d(i,p);i.updatePage(p),f?(i.rendered=!1,g.Z.hide(i).then(function(){this.updateAboveGlobalViewport(i,p),g.Z.show(i)}.bind(this))):i.wasHidden&&g.Z.show(i)}else!i.wasHidden&&g.Z.hide(i)}.bind(this))}},getUsedFonts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.Z.getUsedFontsFromWidgetsModels(B(B({},t),{},{models:this.pages.reduce((function(t,e){return e.widgets.reduce((function(t,e){return t.push(e)&&t}),t)}),[]),customList:t.includeCustom?a.Z.filter(this.edit_params&&this.edit_params.fonts,{provider:"custom"}):[]}))},hasNewTextWidgets:function(){return this.hasTextWidgetsV3||h.ZP.hasNewTextWidgets(this.model.attributes)||h.ZP.someTextWidgets(this.aboveGlobalWidgetsData)},hasCodeInjection:function(){var t=this;if(a.Z.any(["ci_head","ci_body_top","ci_body_bottom","ci_css"],(function(e){return!!t[e]})))return!0;var e=!1;return a.Z.each(this.pages,(function(t){a.Z.each(t.widgetsData,(function(t){var i=!("iframe"!==t.type||!t.code);if(i&&!t.use_iframe){var n="codeinjection"===A()(t.code,t);if(n){var r=!(!a.Z.all(y.ZP.viewport_listall,(function(e){var i=t[e];return i&&i.hidden||!i}))||!t.hidden);i&&n&&!r&&(e=!0)}}}))})),e},setupEcommerceSidebar:function(){"ecwid"===this.eCommerceManager.getConnectedProvider()?this.cartSidebar=new _.Z(this):this.cartSidebar=new T.Z(this)},closeMagMenu:function(){this.toolbar&&this.toolbar.closeMenu()}});e.Z=U},1407:function(t,e,i){"use strict";var n=i(312),r=i(336),o=i.n(r),a=i(321),s=i(339),c=i(1408),l=i(323),d=i(349),u=i(344),h=o().View.extend({ARROWS_SHOW_DELAY:1e3,BOTTOM_SHOW_DELAY:1e3,BOTTOM_HIDE_DELAY:0,template:c.Z["template-viewer-navigation"],events:{"click .navigation-arrow.left":"goPrevPage","click .navigation-arrow.right":"goNextPage","click .navigation-arrow.bottom":"scrollCurrentPage"},initialize:function(t){return a.Z.bindAll(this),a.Z.extend(this,t),this.updateScaleState.__debounced=a.Z.debounce(this.updateScaleState,100),this.canSwitchPages=!0,this},render:function(){return this.setElement(this.template({icons:{sprite:(0,d.findImagePath)("./common/navigation/sprite".concat(d.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.$prev=this.$(".navigation-arrow.left"),this.$next=this.$(".navigation-arrow.right"),this.$bottom=this.$(".navigation-arrow.bottom"),a.Z.delay(a.Z.bind((function(){this.$prev.removeClass("offscreen"),this.$next.removeClass("offscreen")}),this),this.ARROWS_SHOW_DELAY),this.setArrowsPosition(this.mag.currentPage),this.listenTo(this.mag,"pageChanged",this.setArrowsPosition),this.listenTo(this.mag,"keypress-"+n.ZP.keycodes.left,this.goPrevPage),this.listenTo(this.mag,"keypress-"+n.ZP.keycodes.right,this.goNextPage),l.Z.isDesktop&&(0,n.ZP)(window).bind("mousewheel",this.onMouseWheel),l.Z.isDesktop||((0,n.ZP)(window).bind("gesturechange",this.updateScaleState.__debounced),this.updateScaleState(),this.mag.getPagesCount()>1&&this.setSwipeAction()),this},destroy:function(){return l.Z.isDesktop&&(0,n.ZP)(window).unbind("mousewheel",this.onMouseWheel),l.Z.isDesktop||((0,n.ZP)(window).unbind("gesturechange",this.updateScaleState.__debounced),this.pagesSwipe&&this.pagesSwipe.destroy()),this.remove()},onMouseWheel:function(t,e,i,n){this.preventTrackpadSwipeTill&&+new Date<this.preventTrackpadSwipeTill||Math.abs(i)>40&&Math.abs(i)>Math.abs(n)&&(i>0&&this.goPrevPage(),i<0&&this.goNextPage(),this.preventTrackpadSwipeTill=+new Date+1e3)},setSwipeAction:function(){this.pagesSwipe=this.mag.$mag_container.RMSwipe({$scrollElements:this.mag.$mag_container,getMaxTransitionSpeed:a.Z.bind((function(){return this.mag.getPageTransitionTime()}),this),customMoveCheck:a.Z.bind((function(t,e){return!(t.hasClass("prev-page")&&e<0)&&!(t.hasClass("next-page")&&e>0)}),this),beforeAutoAnimation:a.Z.bind((function(t){return this.mag.showPageCounter(t),{autoAnimate:!0,immediateCallback:!1}}),this),onSwipeStart:a.Z.bind((function(){this.mag.showPageCounter()}),this),getCurrentConstraints:a.Z.bind((function(t){var e={},i=this.mag.$mag_container.width(),n=t.closest(".page, .final-page");return n.length||(n=this.mag.currentPage.$el),e.$moveItems=n.add(n.prev()).add(n.next()),e.$referenceItem=e.$moveItems.filter(":not(.center-page)").first(),this.mag.isWidgetDragging?(e.left={max:0,noTrigger:!0},e.right={max:0,noTrigger:!0},e):(this.mag.isLastPage()?e.left={max:0,noTrigger:!0}:e.left={max:i},this.mag.isFirstPage()?e.right={max:0,noTrigger:!0}:e.right={max:i},e)}),this),callback:a.Z.bind((function(t){"right"===t&&this.mag.goPrevPage({animation:!1,bySwipe:!0}),"left"===t&&this.mag.goNextPage({animation:!1,bySwipe:!0})}),this)}).data("swipe")},setArrowsPosition:function(t){this.$next.toggleClass("hidden",!!this.mag.isLastPage()),this.recalcBottomArrowState(t),this.$prev.toggleClass("hidden",this.mag.isFirstPage()),this.mag.updateArrowsColor(t)},recalcBottomArrowState:function(t){clearTimeout(this.bottomArrowTimeout);var e=null==t?void 0:t.isBottomArrowVisible();"horizontal"===this.viewerType&&u.Z.isScaleLayout(this.mag.viewOpts)&&(e=!1),this.isPreview&&"default"!==this.mag.viewport&&(e=!1),this.bottomArrowTimeout=setTimeout(a.Z.bind((function(){this.$bottom.toggleClass("offscreen",!e)}),this),e?this.BOTTOM_SHOW_DELAY:this.BOTTOM_HIDE_DELAY)},goPrevPage:function(){this.canSwitchPages&&this.mag.goPrevPage({animation:!0})},goNextPage:function(){this.canSwitchPages&&this.mag.goNextPage({animation:!0})},scrollCurrentPage:function(){this.canSwitchPages&&this.mag.scrollCurrentPageALittle()},updateScaleState:function(){Modernizr.android||this.$prev.add(this.$next).add(this.$bottom).toggleClass("scaled-offscreen",s.default.isPageNativelyScaled())},hide:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0,i=[this.$prev,this.$next,this.$bottom];e<i.length;e++){var n=i[e];t?n.fadeOut(200):n.hide()}},show:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0,i=[this.$prev,this.$next,this.$bottom];e<i.length;e++){var n=i[e];t?n.fadeIn(200):n.show()}},disable:function(){this.canSwitchPages=!1},enable:function(){this.canSwitchPages=!0}});e.Z=h},1395:function(t,e,i){"use strict";i(353);var n=i(601),r=i(312),o=i(336),a=i.n(o),s=i(321),c=i(1396),l=i(1346),d=i(339),u=i(1278),h=i(344),p=i(986),f=i(1397),g=i(350),m=i(1277),v=i(342),b=i(985),y=i(1336),w=i(1398),S=i(323),P=i(640),k=i(635),C=i(1335),x=i(697),O=i(638),T=i(345),_=i(651);function Z(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function M(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function E(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){M(o,n,r,a,s,"next",t)}function s(t){M(o,n,r,a,s,"throw",t)}a(void 0)}))}}function j(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function A(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(Object(i),!0).forEach((function(e){L(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function L(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var D,$=A(A({},c.Z),l.Z),F=a().View.extend({template:$["template-viewer-page"],widgetsFetched:!1,whenWidgetsFetched:void 0,widgetsData:[],widgetIds:[],widgetFetchController:void 0,initialize:function(t){return s.Z.bindAll(this),this.mag=t.mag,this.router=t.router,this.$container=t.$container,this.viewerType=t.viewerType,this.totalPages=t.totalPages,this.isStickyVerticalViewer=t.isStickyVerticalViewer,t.pageData.wids.length&&"string"==typeof t.pageData.wids[0]?(this.widgetsData=t.pageData.widgetsData||[],this.widgetIds=t.pageData.wids):(this.widgetsData=t.pageData.wids,this.widgetIds=t.pageData.wids.map((function(t){return t._id})),this.widgetsFetched=!0),this.viewOpts=t.viewOpts,s.Z.defaults(t.pageData,{title:"",width:this.mag.getViewportWidth(t.mag.viewport),height:this.mag.getViewportSetting("min_height")}),s.Z.extend(this,s.Z.omit(t.pageData,["wids","widgets"])),this.contentPosition={left:0,top:0},this},render:function(){if(this.setElement(this.template({isStickyVerticalViewer:this.isStickyVerticalViewer,pageNum:this.num})),this.$el.appendTo(this.$container),RM.screenshot||Modernizr.csspositionsticky||(0,r.ZP)(".polyfill-sticky").Stickyfill(),this.zIndex=this.totalPages-this.num+2,"vertical"===this.viewerType&&this.$el.css("z-index",this.zIndex),this.$content=this.$(".page-content-container"),this.$scrollWrapper=this.$(".content-scroll-wrapper"),this.$scrollWrapper.one("scroll",this.fixSafariScroll),this.$fixedBgContainer=this.$(".page-fixed-bg-container"),this.$fixedPositionContainer=this.$(".fixed-position-container"),this.$fixedPositionContainerTop=this.$(".fixed-position-container-top"),this.$contentBounds=this.$(".content-bounds"),this.pageViewport=this.getPageViewport(),"horizontal"===this.viewerType&&this.$scrollWrapper.bind("scroll",this.onScroll),this.createLQBackground(),RM.screenshot===this._id){var t,e,i=this.getPageViewport(),n=RM.screenshot&&"true"===d.default.queryUrlGetParam("pdf");this.$el.css({overflow:"hidden",height:(null===(t=this["viewport_".concat(i)])||void 0===t?void 0:t.height)||Math.max(this.height,672),width:n?this.mag.getViewportWidth(v.sJ.Default):(null===(e=this["viewport_".concat(i)])||void 0===e?void 0:e.width)||v.ZP.dictionary[i].width,position:"relative"}),"true"===d.default.queryUrlGetParam("pdf")&&(this.$fixedPositionContainer.css({height:"100%"}),this.$fixedPositionContainerTop.css({height:"100%"})),this.onResize(),this.on("pageLoaded",(function(){this.mag.router.sendReadyEvent({page:this})}),this)}return this},show:function(){var t=this;return E(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.shown){e.next=16;break}if(t.$el.removeClass("hidden"),t.shown=!0,!t.isPasswordProtected()||t.passwordFormShown){e.next=7;break}return t.showPagePasswordForm(),t.passwordFormShown=!0,e.abrupt("return",Promise.resolve());case 7:if("horizontal"===t.viewerType&&t.onResize(),t.widgets||t.widgetsFetched||RM.screenshotMode&&"published"!==RM.screenshotMode){e.next=13;break}return t.whenWidgetsFetched=t.whenWidgetsFetched||new Promise((function(e){var i;t.widgetFetchController="undefined"!=typeof AbortController?new AbortController:void 0,(0,P.$I)(t.mag.num_id,t._id,null===(i=t.widgetFetchController)||void 0===i?void 0:i.signal).then((function(i){t.widgetsFetched=!0,t.widgetsData=[].concat(Z(t.widgetsData),Z(i.filter((function(t){return!t.is_global})))),t.createWidgetsForCurrentViewport(),e()})).catch((function(t){if("AbortError"!==t.name)throw t}))})),e.abrupt("return",t.whenWidgetsFetched);case 13:if(t.widgets&&t.lastViewportUsedForWidgetsCreation===t.pageViewport){e.next=16;break}return t.createWidgetsForCurrentViewport(),e.abrupt("return",Promise.resolve());case 16:return e.abrupt("return",t.whenWidgetsFetched||Promise.resolve());case 17:case"end":return e.stop()}}),e)})))()},start:function(t){var e;if(!this.started||t&&t.forceStart)return this.started=!0,this.trigger("started"),t=t||{},s.Z.each(this.widgets,(function(e){(!t||!t.widgetTypes||s.Z.indexOf(t.widgetTypes,e.type)>=0)&&e.start()})),this.focusPage(),this.$scrollWrapper.addClass("accelerated-scroll"),this.animations&&this.animations.start(),null===(e=this.shadowInteractions)||void 0===e||e.start(),this.mag.aboveGlobalAnimations&&this.mag.aboveGlobalAnimations.start(),this.lightboxModel||this.createLightbox(),this},stop:function(t){var e;if(this.started)return t=t||{},this.started=!1,this.trigger("stopped"),this.$scrollWrapper.removeClass("accelerated-scroll"),s.Z.each(this.widgets,(function(e){(!t||!t.widgetTypes||s.Z.indexOf(t.widgetTypes,e.type)>=0)&&e.stop()})),this.animations&&this.animations.stop(),this.mag.aboveGlobalAnimations&&this.mag.aboveGlobalAnimations.stop(),null===(e=this.shadowInteractions)||void 0===e||e.stop(),this},getUrl:function(){return window.location.protocol+"//"+window.location.hostname+"/p"+this.num_id+"/"},setPosition:function(t,e){this.lastPosition==t&&this.lastNeighbour==e||(this.$el.removeClass("center-page prev-page next-page neighbour").addClass(t+"-page "+(e?"neighbour":"")),this.lastPosition=t,this.lastNeighbour=e)},getScroll:function(){return this.visibleWidgetsCoords.scrollTop},scrollOnVerticalMode:function(t){this.hasScrollOnVerticalMode=!0;var e,i,n=this.pageHeight-this.pageBgHeight;t<0?(e=-t,i=0):n>=t?(e=0,i=-t):(e=n-t,i=-n),this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.scrollTop=-i,this.animations&&this.animations.onScroll({forceApply:!this.isStickyVerticalViewer}),this.trigger("page scroll",this.getScroll()),this.isStickyVerticalViewer||(this.$el.css("top",0),d.default.applyTransform(this.$el,e?"translateY("+e+"px) translateZ(0)":""),this.hasFixedWidgets?(this.$contentBounds.css({top:i}),d.default.applyTransform(this.$contentBounds,"")):(this.$contentBounds.css({top:""}),d.default.applyTransform(this.$contentBounds,i?"translateY("+i+"px)":"")))},resetScrollOnVerticalMode:function(){this.hasScrollOnVerticalMode&&(this.hasScrollOnVerticalMode=!1,this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.scrollTop=0,this.animations&&this.animations.onScroll({forceApply:!this.isStickyVerticalViewer}),this.isStickyVerticalViewer||(this.$el.css("top",""),d.default.applyTransform(this.$el,""),this.hasFixedWidgets?this.$contentBounds.css("top",0):d.default.applyTransform(this.$contentBounds,"")))},hide:function(){var t;this.shown&&(this.$el.addClass("hidden"),null===(t=this.widgetFetchController)||void 0===t||t.abort(),this.whenWidgetsFetched=void 0,this.shown=!1);return this},destroyAllWidgets:function(t){var e;this.loaded=!1,this.videoBGStarted=!1,s.Z.each(this.widgets,function(e,i){var n=this.widgetsData.some((function(t){var i=p.Z.normalizeAnimations(t.animation),n=t._id===e._id&&Boolean(i.find((function(t){return!p.Z.isEmpty(t)}))),r=t._id===e._id&&(t.viewport_default&&t.viewport_default.hidden||t.viewport_tablet_portrait&&t.viewport_tablet_portrait.hidden||t.viewport_phone_portrait&&t.viewport_phone_portrait.hidden||t.hidden);return n||r}));t&&t.includes(e.type)&&!n||(e.destroy(),e.off(),delete this.widgets[i])}.bind(this)),this.animations&&this.animations.destroy(),null===(e=this.shadowInteractions)||void 0===e||e.destroy(),delete this.animations,clearTimeout(this.fireReadyTimeout)},destroy:function(){return this.retargetScroll&&this.retargetScroll.restore&&this.retargetScroll.restore(),this.resetWaitForAnimationEnd(),this.destroyLQBackground({animate:!1}),this.destroyAllWidgets(),this.remove()},onFormFocus:function(t){!Modernizr.safari&&S.Z.isDesktop||(t=s.Z.isUndefined(t)?this.$scrollWrapper&&this.$scrollWrapper.scrollTop():t,this.$fixedBgContainer.css({top:t}))},onFormBlur:function(){!Modernizr.safari&&S.Z.isDesktop||this.$fixedBgContainer.css({top:0})},onScrollWithFormInFocus:function(t){!Modernizr.safari&&S.Z.isDesktop||(t=s.Z.isUndefined(t)?this.$scrollWrapper&&this.$scrollWrapper.scrollTop():t,this.$fixedBgContainer.css({top:t}))},isSwipeInProgress:function(){return this.$el.hasClass("swiping")},getPageZIndex:function(){return this.zIndex||1},getImmediatePack:function(){return s.Z.filter(this.widgets,(function(t){return t.canRenderImmediately()&&!t.rendered}))},getWidgetsPacks:function(){if(!this.widgets)return[];var t,e,i,n=this.visibleWidgetsCoords,r=(n.top+(n.scrollTop||0))/n.scale,o=(n.bottom+(n.scrollTop||0))/n.scale-r,a=[],s=[];if(!this.BGWidget||this.BGWidget.rendered||this.BGWidget.loaded||s.push(this.BGWidget),this.fixedWidgets&&this.fixedWidgets.length)for(t=0;t<this.fixedWidgets.length;t++)(i=this.fixedWidgets[t]).rendered||i.loaded||i.canRenderImmediately()||s.push(i);var c,l,d=[],u=99999,h=-99999,p=!1;for(t=0;t<this.widgets.length;t++)(e=this.widgets[t]).rendered||e.loaded||"background"==e.type||e.fixed_position||(c=(l=F.getScreenIndex(e,r,o,!0)).index,u=Math.min(l.start,u),h=Math.max(l.end,h),e.screenIndex=c,c!==1/0&&(d[c]=d[c]||[],d[c].push(e)),p=!0);if(p){for(d[0]&&a.push(d[0]),d[1]&&a.push(d[1]),d[-1]&&a.push(d[-1]),t=2;t<=h;t++)d[t]&&a.push(d[t]);for(t=-2;t>=u;t--)d[t]&&a.push(d[t])}return s.length&&(a.length?a[0]=s.concat(a[0]):a=[s]),a},renderWidgetPack:function(t,e){var i,n=0,r=0,o=0;for(i=0;i<t.length;i++){var a=t[i];if(!a.rendered&&!a.loaded&&!a.destroyed){a.canRenderImmediately()||(n++,a.on("loaded destroyed",s,a)),o++;try{a.render()}catch(t){console.error("Failed to render widget ".concat(a._id))}}}function s(){r++,n==r&&e()}o||e(),n==r&&e()},loadForScreenshotMode:function(){s.Z.each(this.widgets,function(){var t=E(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.render();case 3:t.sent.start(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Failed to render widget ".concat(e._id," for a screenshot"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())},createWidgetsForCurrentViewport:function(){this.destroyAllWidgets(["video"]),this.BGWidget=null,this.fixedWidgets=[];var t=this.pageViewport,e=[],i=[],n=99999,r=this,o=this;s.Z.each(this.widgetsData,function(e){var r=o.getWidgetViewportData(e,t),a=!this.mag.isPreview&&p.Z.hasExpired(r);!w.Widgets[r.type]||r.hidden||a||(!r.fixed_position&&r.z&&"background"!=r.type&&(n=Math.min(n,r.z)),i.push(r))}.bind(this)),99999==n&&(n=0),s.Z.each(i,function(i){var a=h.Z.isOn(t,this.mag.getViewportWidth(t),this.mag.viewOpts)&&h.Z.isCSSTransform();i.fixed_position&&(i.z<n||S.Z.isDesktop&&!this.mag.isStickyVerticalViewer&&!a)?i.$fixedContainer=o.$fixedPositionContainer:i.$fixedContainer=o.$fixedPositionContainerTop;var s=null;this.widgets&&this.widgets.length&&(s=this.widgets.find((function(t){return!!t&&t._id===i._id})));var c=s||new w.Widgets[i.type](i,r);"video"===c.type&&(c.updateWidgetData(i,r),c.applyBoxStyle(),c.updateVideoFrameSize(i.w,i.h)),"background"===c.type&&(o.BGWidget=c,o.hasVideoBG=c.hasVideoBG()),c.isValid()&&(c.fixed_position&&o.fixedWidgets.push(c),e.push(c))}.bind(this));var a=h.Z.isOn(t,this.mag.getViewportWidth(t),this.mag.viewOpts)&&h.Z.isCSSTransform();this.animations=new f.Z({page:this,widgets:e}),this.shadowInteractions=(0,k.Uh)({page:this,widgets:[].concat(e,Z(this.mag.aboveGlobalWidgets||[])),scale:a?1:this.mag.getScale(this.pageViewport)}),this.widgets=s.Z.sortBy(e,"y"),this.signalOnLoading(),this._onFontsLoad=[],this._widgetsWithFontsToLoad=[],this._fontLoaderCalled=0,this._widgetsWithFontsCount=s.Z.reduce(this.widgets,(function(t,e){return t+(e.hasFontsToLoad()?1:0)}),0),this._widgetsWithLoadAnimation=s.Z.reduce(this.widgets,(function(t,e){return t+(e.hasLoadAnimation()?1:0)}),0),this.hasFixedWidgets=!!this.fixedWidgets.length;var c=S.Z.isDesktop&&this.pageViewport!==v.sJ.TabletPortrait;this.$el.removeClass("page-with-fixeds-desktop page-with-fixeds-sticky-or-mobile").toggleClass("page-with-fixeds-desktop",this.hasFixedWidgets&&c).toggleClass("page-with-fixeds-sticky-or-mobile",!(!this.hasFixedWidgets||!this.isStickyVerticalViewer&&c&&!a)),this.hasFixedWidgets&&!this.retargetScroll&&"horizontal"===this.viewerType&&c&&(this.retargetScroll=y.Z&&(0,y.Z)(this.$fixedPositionContainerTop.get(0),this.$scrollWrapper.get(0)),y.Z&&(0,y.Z)(this.$fixedPositionContainer.get(0),this.$scrollWrapper.get(0))),this.lastViewportUsedForWidgetsCreation=t},getWidgetViewportData:function(t,e){var i=this,n=s.Z.clone(t),r={},o=["text_w","text_h","em_w","anchor_link_pos","font-size","font-style","font-weight","font-family","color","color-opacity","letter-spacing","baselineShift","hover-color","hover-color-opacity","current-font-size","current-font-style","current-font-weight","current-font-family","current-baselineShift","current-color","current-color-opacity","current-letter-spacing","current-text_w","current-text_h","background-color","background-color-opacity","hover-background-color","hover-background-color-opacity","current-background-color","current-background-color-opacity","border-radius","border-width","border-color","border-color-opacity","hover-border-width","hover-border-color","hover-border-color-opacity","current-border-radius","current-border-width","current-border-color","current-border-color-opacity","icon_h","icon_w"];return"default"!=e&&t["viewport_"+e]&&(s.Z.each(v.ZP.viewport_fields[t.type]||v.ZP.viewport_fields_common,(function(n){if(("shape"!=t.type||"borders"!=n&&"weight"!=n&&"bg_color"!=n)&&!("background"==t.type&&"picture"==n||"text"===t.type&&3===t.version&&"blocks"===n)){if(d.default.canUseMinimalViewport(i.mag)||(r[n]=void 0),b.Z.isGlobalKey(n)){var a=b.Z.getGlobalPrefixedKey(n);r[a]=void 0}d.default.canUseMinimalViewport(i.mag)||(r[n]="button"===t.type&&!s.Z.has(t["viewport_"+e],n)&&o.includes(n)?t[n]:void 0)}})),s.Z.extend(n,r,s.Z.omit(t["viewport_"+e],["_id","modelType"]))),t.is_global&&b.Z.fillUniqueValues(n,this._id,{}),n},getWidgetById:function(t){return s.Z.findWhere(this.widgets,{_id:t})},hasWidget:function(t){return this.widgetIds.includes(t)},signalOnLoading:function(){var t,e=(null===(t=this.widgets)||void 0===t?void 0:t.length)||0,i=this,n={};function r(){e--,clearTimeout(n[this._id]),"background"==this.type&&i.destroyLQBackground({animate:!0}),this.hasLoadAnimation()&&(i._widgetsWithLoadAnimation--,i._widgetsWithLoadAnimation||(i.loadAnimationsReady=!0,i.trigger("loadAnimationsReady"))),e||(i.fireReadyTimeout=setTimeout(o,200)),i.trigger("loaded"+this._id)}function o(){i.loaded=!0,i.trigger("pageLoaded")}s.Z.each(this.widgets,(function(t){RM.screenshot&&(n[t._id]=setTimeout((function(){t.widgetIsLoaded()}),2e4)),t.on("loaded",r,t)}),this),this.BGWidget&&this.hasVideoBG&&this.BGWidget.on("videoBGStarted",(function(){i.videoBGStarted=!0,s.Z.delay((function(){i.trigger("videoBGStarted")}),1300)}),this.BGWidget),0==e&&(this.fireReadyTimeout=setTimeout(o,200))},getFontsVariations:function(t,e){var i=g.Z.getUsedFontsFromWidgetsModels({includeCustom:!0,customList:s.Z.filter(this.mag.edit_params.fonts,{provider:"custom"}),models:t,excludeUnusedDefault:e,activeViewports:[this.getPageViewport()]}),n=[];return s.Z.each(i,(function(t){for(var e=0;e<t.used_variations.length;e++)n.push({fontFamily:t.css_name,fontWeight:100*(t.used_variations[e].substr(1,1)-0),fontStyle:"n"==t.used_variations[e].substr(0,1)?"normal":"italic"})})),n},addFontsToLoad:function(t,e){if(this._widgetsWithFontsToLoad.push(t),this._onFontsLoad.push(e),this._fontLoaderCalled++,this._fontLoaderCalled==this._widgetsWithFontsCount){var i=this.getFontsVariations(this._widgetsWithFontsToLoad);if(s.Z.isEmpty(i))return void this.onAllFontsLoad();this._fontsToLoadLeft=i.length,s.Z.each(i,s.Z.bind((function(t){g.Z.exactWaitForFontLoad(t.fontFamily,t.fontWeight,t.fontStyle,this.onOneFontLoad)}),this))}},onOneFontLoad:function(){this._fontsToLoadLeft--,0==this._fontsToLoadLeft&&s.Z.delay(this.onAllFontsLoad,500)},onAllFontsLoad:function(){s.Z.each(this._onFontsLoad,(function(t){t&&t()}))},updateViewport:function(){var t=this.getPageViewport();t!==this.pageViewport&&(this.pageViewport=t,this.createLQBackground(),this.shown&&(this.loadAnimationsReady=!1,this.createWidgetsForCurrentViewport(),this.started&&(this.started=!1,this.start())))},waitForAnimationEnd:function(t){this.resetWaitHook=d.default.waitForTransitionEnd(this.$el,this.mag.getPageTransitionTime()+1e3,"transform",t)},resetWaitForAnimationEnd:function(){this.resetWaitHook&&this.resetWaitHook()},backToTop:function(){this.scrollTo(0)},scrollTo:function(t){this.$scrollWrapper.finish(),this.$scrollWrapper&&this.$scrollWrapper.animate({scrollTop:t},500)},focusPage:function(){S.Z.isDesktop&&"vertical"!==this.viewerType&&0===this.$el[0].getBoundingClientRect().left&&(this.$content.focus(),this.mag.$el.scrollTop(0))},markAsLast:function(){this.lastPage=!0,this.$el.addClass("last")},isLastPage:function(){return!!this.lastPage},isBottomArrowVisible:function(){return!this.wasScrolled&&this.scrollable},isPasswordProtected:function(){return this.unauthorized},scrollPageALittle:function(){this.$scrollWrapper.animate({scrollTop:(0,r.ZP)(window).height()/2},500)},getPageViewport:function(){var t=this.mag.viewport,e=this;if("default"===t)return"default";if(this["viewport_"+t]&&this["viewport_"+t].enabled)return t;var i=s.Z.findWhere(v.ZP.viewports,{name:t}).width,n=s.Z.reduce(v.ZP.viewports,(function(t,n,r){return("default"==n.name||e["viewport_"+n.name]&&e["viewport_"+n.name].enabled)&&Math.abs(n.width-i)<=Math.abs(v.ZP.viewports[t].width-i)?r:t}),0);return v.ZP.viewports[n].name},onResizeAfterWidgetDrag:function(){this.reasizeAfterDragSet=!1,this.onResize()},onResize:function(t){if(t=t||{},this.mag.isWidgetDragging)this.reasizeAfterDragSet||(this.reasizeAfterDragSet=!0,this.mag.once("widget:drag:stopped",this.onResize.bind(this)));else if(!this.mag.isEcwidOpened&&(this.shown||"horizontal"!==this.viewerType)){var e=[v.sJ.PhonePortrait,v.sJ.TabletPortrait].includes(this.mag.viewport)&&this.pageViewport===v.sJ.Default&&this.mag.isPreview,i=this.pageViewport===v.sJ.PhonePortrait&&"top"===this.mag.viewOpts.phoneVerticalAlign,n=this.mag.getContainerSizeCached(),r=this.mag.getViewportWidth(this.pageViewport),o=v.ZP.dictionary[this.pageViewport].width,a=this.mag.getScale(this.pageViewport),s=this["viewport_"+this.pageViewport]&&this["viewport_"+this.pageViewport].height||this.height,c={width:o,height:s,scaledWidth:Math.round(r*a),scaledHeight:Math.round(s*a),scale:a},l=RM.screenshot&&"true"===d.default.queryUrlGetParam("pdf"),u=Math.min(c.scaledWidth,n.width),p=this.pageViewport===v.sJ.Default?672:v.ZP.dictionary[this.pageViewport].min_height,f=c.scaledHeight,g=l||i?0:Math.max(((RM.screenshot?p:n.height)-f)/2,0),m=Math.max(((RM.screenshot?v.ZP.dictionary[this.pageViewport].width:n.width)-u)/2,0)+(r-o)/2,b={width:c.width,height:c.height,top:i?0:g/(h.Z.isCSSZoom()&&h.Z.isDesktopDefault(this.pageViewport)&&!e?a:1),left:m};if(h.Z.isOn(this.pageViewport,r,this.mag.opts)&&h.Z.isCSSZoom()&&!e&&(b.zoom=a,b.left=n.width>this.mag.opts.scalewidth?(n.width/a-o)/2:(r-o)/2),this.$content.removeAttr("style"),this.$content.css(b),this.cachedSizes=void 0,this.contentPosition={left:m,top:g},e||1!==h.Z.normalize(a,"transform",this.pageViewport,r,this.mag.viewOpts)?(d.default.applyTransform(this.$content,"scale("+c.scale+")"),RM.screenshot&&h.Z.isCSSTransform()&&this.$content.css({"transform-origin":"left top"}),h.Z.isDesktopDefault(this.pageViewport)&&!e?this.$content.css({left:Math.max((n.width-u)/2,0)+(r-o)/2*c.scale}):this.$content.css({left:(r-o)/2*c.scale})):d.default.applyTransform(this.$content,""),this.contentHeight=s,this.pageHeight=this.isPasswordProtected()?n.height:Math.max(n.height,Math.round(s*a)),this.pageBgHeight=n.height,this.pageWidth=r,"vertical"===this.viewerType&&this.isStickyVerticalViewer&&this.$el.css({height:this.pageHeight,top:t.absolutePosition}),this.scale=a,this.$contentBounds.css({width:n.width,height:this.pageHeight}),this.getSizes(),void 0!==this.prevScale&&this.prevScale!==this.scale&&this.animations){var y,w=null===(y=this.animations.animations)||void 0===y?void 0:y.filter((function(t){return F.findPlayingVideo(t.widgets)}));this.animations.updateTimelines(w.map((function(t){return t.animation.UUID}))),this.animations.resetStarted(),this.animations.start.__debounced()}return this.animations&&this.animations.onResize(),this.trigger("resize",{containerSize:n,contentPosition:this.contentPosition}),this.scrollable=Math.round(s*a)-this.mag.SCROLLABLE_TRESHOLD>n.height,this.mag.recalcBottomArrowState(this),this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.top=-g,this.visibleWidgetsCoords.bottom=-g+n.height,this.visibleWidgetsCoords.scale=a,this.resizeLQBackground(),this.prevScale=this.scale,this.pageHeight}},onScroll:function(){this.wasScrolled=!0,this.mag.recalcBottomArrowState(this),this.visibleWidgetsCoords=this.visibleWidgetsCoords||{},this.visibleWidgetsCoords.scrollTop=this.$scrollWrapper.scrollTop(),this.mag.onCurrentPageScroll(this,this.visibleWidgetsCoords.scrollTop),this.animations&&this.animations.onScroll(),this.trigger("page scroll",this.visibleWidgetsCoords.scrollTop)},isCurrent:function(){return this.num===this.mag.currentPage.num},showPagePasswordForm:(D=E(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,T._)("viewer.reactEntrypoint")){t.next=8;break}return t.next=3,Promise.all([i.e(20),i.e(21),i.e(26)]).then(i.bind(i,1468));case 3:(0,t.sent.getForbiddenForPage)(document.getElementById("page-".concat(this.num,"-password-container"))),t.next=14;break;case 8:return t.next=10,i.e(54).then(i.bind(i,1474));case 10:e=t.sent,n=e.default,this.pagePasswordView=new n({router:this.router,mag:this.mag,page:this,$parent:(0,r.ZP)("#page-".concat(this.num,"-password-container"))}),this.pagePasswordView.render();case 14:case"end":return t.stop()}}),t,this)}))),function(){return D.apply(this,arguments)}),createLQBackground:function(){if(!RM.screenshot&&!this.isPasswordProtected()){var t=this.widgetsData.find((function(t){return"background"===t.type}));if(t){var e=this.getWidgetViewportData(t,this.pageViewport);if(this.LQBG){if("picture"===e.selectedType&&"picture"===this.LQBG.selectedType&&e.picture&&this.LQBG.picture&&e.picture.poorUrl===this.LQBG.picture.poorUrl||"video"===e.selectedType&&"video"===this.LQBG.selectedType&&e.video&&this.LQBG.video&&e.video.thumbnail_url===this.LQBG.video.thumbnail_url)return void this.resizeLQBackground();this.destroyLQBackground({animate:!1})}if(this.$fixedBgContainer.css("background-color","#"+e.color),e.picture&&"picture"===e.selectedType&&(e.picture.poorUrl||u.Z.useLambdaUrl(e.picture))||e.video&&"video"===e.selectedType&&e.video.thumbnail_url){this.LQBG=s.Z.extend({},e);var i=$["template-viewer-widget-background"];if(this.LQBG.$el=(0,r.ZP)(i({data:e})),this.LQBG.$el.addClass("low-quality").appendTo(this.$fixedBgContainer),"picture"===this.LQBG.selectedType){var n=this.LQBG.picture.poorUrl;u.Z.useLqipUrl(e.picture)&&(n=u.Z.getLqipUrl(this.LQBG.picture),this.LQBG.$el.addClass("lqip").appendTo(this.$fixedBgContainer)),(0,r.ZP)("<img/>").on("load",s.Z.bind((function(){this.LQBG&&this.LQBG.$el.find(".picture-background").css({"background-image":"url(".concat(n,")")})}),this)).attr("src",n)}if("video"===this.LQBG.selectedType){var o=this.LQBG.video.thumbnail_url.replace("http://","https://"),a=(0,r.ZP)("<img/>").addClass("poster").css("opacity",0).appendTo(this.LQBG.$el.find(".video-background .video-container"));a.on("load",s.Z.bind((function(){a.css({width:"",height:""}).css("opacity",1);var t=a[0].width,e=a[0].height;this.LQBG&&!this.LQBG.video.aspect_poster&&(this.LQBG.video.aspect_poster=t/e),this.resizeLQBackground()}),this)).attr("src",o)}}}}},resizeLQBackground:function(){RM.screenshot||this.isPasswordProtected()||!this.LQBG||"video"===this.LQBG.selectedType&&m.Z.setVideoPosition({mag:this.mag,$container:this.LQBG.$el.find(".video-background .video-container"),$media:this.LQBG.$el.find(".video-background .video-container .poster"),provider:this.LQBG.video.provider_name,aspect_poster:this.LQBG.video.aspect_poster,aspect_real:this.LQBG.video.aspect_real,controls_remove:!0})},destroyLQBackground:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!RM.screenshot&&!this.isPasswordProtected()&&this.LQBG){t.animate=t.animate&&"picture"===this.LQBG.selectedType&&this.started;var e=this.LQBG.$el;this.LQBG=null,t.animate?(e.css("opacity",0),setTimeout((function(){e.remove()}),400)):e.remove()}},fixSafariScroll:function(){Modernizr.safari&&S.Z.isDesktop&&(0!==this.$scrollWrapper.scrollTop()&&this.$scrollWrapper.scrollTop(0))},getSizes:function(){return{scrollWrapperWidth:this.$scrollWrapper.width(),scrollWrapperClientWidth:this.$scrollWrapper[0].clientWidth,contentContainerWidth:this.$content.width(),contentContainerHeight:this.$content.height()}},getCachedSizes:function(){return this.cachedSizes||(this.cachedSizes=this.getSizes()),this.cachedSizes},getLightboxWidgets:function(){return this.lightboxWidgets=(0,C.qX)(this.widgets),this.lightboxWidgets},createLightbox:function(){var t=this;return E(regeneratorRuntime.mark((function e(){var o,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(o=t.widgetsData)||void 0===o?void 0:o.some((function(t){return t.type===O.l9.picture&&!!t.lightbox})))){e.next=10;break}return e.next=4,Promise.all([i.e(20),i.e(32)]).then(i.bind(i,1476));case 4:s=e.sent,c=s.default,t.lightboxModel=new(a().Model)({isVisible:!1,slides:t.getLightboxWidgets(),index:0,originRect:{},onClose:function(){var e,i;t.lightboxModel.set({isVisible:!1}),null===(e=t.mag.navigation)||void 0===e||e.show(!0),null===(i=t.mag.navigation)||void 0===i||i.enable()},onSlideChange:function(e){return t.lightboxModel.set({index:e})}}),(0,r.ZP)("<div/>").addClass("lightbox-wrapper").appendTo(t.$el),l=function(){return n.createPortal((0,_.jsx)(c,null),document.body)},(0,x.renderReact)({component:l,domElement:t.$el.find(".lightbox-wrapper").get(0),model:t.lightboxModel});case 10:case"end":return e.stop()}}),e)})))()},showLightboxSlide:function(t){var e,i;null===(e=this.mag.navigation)||void 0===e||e.hide(!0),null===(i=this.mag.navigation)||void 0===i||i.disable();var n=this.lightboxWidgets.findIndex((function(e){return e._id===t._id}));n>-1&&this.lightboxModel.set({isVisible:!0,index:n,slides:this.getLightboxWidgets(),originRect:(0,C.OG)({widgetElement:t.$el.get(0),viewportWidth:this.mag.getViewportWidth(this.pageViewport),viewport:this.pageViewport,viewerOptions:this.mag.viewOpts})})}},{getScreenIndex:function(t,e,i,n){var r,o=Math.floor((t.y-e)/i),a=Math.ceil((t.y+t.h-e)/i)-1;return n&&t.canRenderImmediately()?r=1/0:t.hasLoadAnimation()||o<=0&&a>=0?r=0:o>0?r=o:a<0&&(r=a),{start:o,end:a!==1/0?a:0,index:r}},findPlayingVideo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.find((function(t){return"video"===t.type&&t.isPlaying}))}});e.Z=F},1411:function(t,e,i){"use strict";var n=i(312),r=i(336),o=i.n(r),a=i(321),s=i(1412),c=i(1102),l=i(308),d=i(323),u=i(349),h=o().View.extend({template:s.Z["template-viewer-share"],events:{"click .buttons-wrapper .button":"share","click .send-report":"share","click .open-embed":"openEmbed","click .close":"hide","click .embed-wrapper .back":"closeEmbed","click .embed-wrapper .embed-code":"selectEmbedCode","keyup .embed-wrapper .embed-code":"onKeyUp","click .type-selector":"onTypeSelectorClick","click .size-selector":"onSizeSelectorClick",click:"onClick"},initialize:function(t){return a.Z.bindAll(this),a.Z.extend(this,t),this},render:function(){return this.setElement(this.template({hasOverlay:d.Z.isPhone,common:RM.common,icons:{sprite:(0,u.findImagePath)("./viewer/share/sprite".concat(u.is2X?"@2x":"",".png")),thumbArrows:(0,u.findImagePath)("./viewer/share/thumb-arrows".concat(u.is2X?"@2x":"",".png")),thumbOpen:(0,u.findImagePath)("./viewer/share/thumb-open".concat(u.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.selectFullMode(),d.Z.isPhone&&(this.shareSwipe=this.$el.RMSwipe({minTransitionSpeed:200,maxTransitionSpeed:400,rubberBand:!1,beforeAutoAnimation:a.Z.bind((function(){return{autoAnimate:!0,immediateCallback:!0}}),this),getCurrentConstraints:a.Z.bind((function(){var t={},e=this.$el.filter(".share-popup");return t.$referenceItem=e,t.$moveItems=e,t.up={max:0,noTrigger:!0},t.down={max:e.height()},t}),this),callback:a.Z.bind((function(){this.hide()}),this)}).data("swipe")),this.listenTo(this.mag,"pageChanged",this.onPageChange),this.listenTo(this.mag,"keypress-"+n.ZP.keycodes.esc,this.hide),(0,n.ZP)("body").on("click",this.hideOnBodyClick),this},show:function(){return this.shown||(clearTimeout(this.hideTimeout),this.$el.removeClass("hidden"),this.$el.height(),this.$el.addClass("show-popup"),this.$container.addClass("no-hover"),this.shown=!0,this.updateEmbed()),this},toggle:function(){return this.shown?this.hide():this.show()},hide:function(){return this.shown&&(this.$el.removeClass("show-popup"),this.$container.removeClass("no-hover"),this.hideTimeout=setTimeout(a.Z.bind((function(){this.closeEmbed(),this.$el.addClass("hidden")}),this),400),this.shown=!1),this},destroy:function(){return clearTimeout(this.hideTimeout),(0,n.ZP)("body").off("click",this.hideOnBodyClick),this.shareSwipe&&this.shareSwipe.destroy(),this.remove()},hideOnBodyClick:function(t){d.Z.isPhone||(0,n.ZP)(t.target).closest(this.$container).length||this.hide()},onPageChange:function(){this.hide()},onClick:function(t){d.Z.isPhone&&(0,n.ZP)(t.currentTarget).hasClass("share-popup-overlay")&&this.hide()},onKeyUp:function(t){t.stopPropagation()},openEmbed:function(){this.router.analytics&&this.router.analytics.sendEvent("Embed","contents ("+this.shareMode+")"),this.selectEmbedCode(),this.$el.addClass("show-embed")},updateEmbed:function(){var t=this.mag.currentPage||this.mag.pages[0],e=this.$(".size-selector").attr("data-selected");if(!t||!t.unauthorized){this.$(".embed-wrapper .embed-code").val(h.getEmbedCode({shareMode:this.shareMode,cur_page_num_id:t.num_id,mag_num_id:this.mag.num_id,size:{responsive:"responsive",big:512,small:288}[e]}));var i=this.mag.model.getPageScreenshot({_id:"page"===this.shareMode?t._id:this.mag.coverPid}).src;this.currentEmbedSrc!==i&&(this.$(".thumb-pic").attr("src",i),this.currentEmbedSrc=i)}},closeEmbed:function(){this.$el.removeClass("show-embed")},share:function(t){c.share({host:(RM.common.embedDomainName||window.location.protocol+"//"+window.location.hostname)+"/",tp:(0,n.ZP)(t.currentTarget).attr("data-tp"),source:"share panel",page:this.mag.currentPage||this.mag.pages[0],mag:a.Z.extend(this.mag.model.toJSON(),{user:this.mag.user}),forProject:"full"===this.shareMode,customDomain:!(!RM.common.isDomainViewer&&!RM.common.embedDomainName),customDomainProfile:!(!RM.common.customDomainProfile&&"User"!==RM.common.embedDomainType),analytics:this.router.analytics,exportBasePath:window.RM.common.isDownloadedSource?window.RM.config&&window.RM.config.root:void 0})},onTypeSelectorClick:function(t){if(d.Z.isPhone){var e=(0,n.ZP)(t.target);e.closest(".type-full").length&&this.selectFullMode(),e.closest(".type-page").length&&this.selectPageMode()}else{"page"===(this.$(".type-selector").attr("data-tp")||"page")?this.selectFullMode():this.selectPageMode()}},onSizeSelectorClick:function(t){var e,i,r=(0,n.ZP)(t.currentTarget),o=r.attr("data-selected");i=(i=(e=a.Z.map(r.find(".size"),(function(t){return(0,n.ZP)(t).attr("data-size")}))).indexOf(o)+1)>=e.length?0:i,r.attr("data-selected",e[i]),this.updateEmbed()},selectPageMode:function(){this.$(".type-selector").attr("data-tp","page"),this.shareMode="page",this.updateEmbed()},selectFullMode:function(){this.$(".type-selector").attr("data-tp","full"),this.shareMode="full",this.updateEmbed()},selectEmbedCode:function(){d.Z.isDesktop&&this.$(".embed-wrapper .embed-code").get(0).setSelectionRange(0,9999)}},{getEmbedCode:function(t){var e,i,n,r,o='<script async src="'+l.Z.EMBED_SCRIPT_INIT+'" id="readymag-embed-init"><\/script>';return e=RM.common.embedDomainName||window.location.protocol+"//"+window.location.hostname,r=' data-uri="'+(i="full"===t.shareMode?t.mag_num_id:"p"+t.cur_page_num_id)+'" ',r+=' data-width="'+t.size+'" ',(RM.common.isDomainViewer||RM.common.embedDomainName)&&(r+=' data-domain="'+e+'" ',RM.common.customDomainProfile||"User"===RM.common.embedDomainType||(i="full"===t.shareMode?"":"p"+t.cur_page_num_id)),l.Z.IS_LIVE||(r+=' data-origin="'+l.Z.readymag_embed_host+'" '),'<a class="rm-mag-embed" href="'+(n=e+"/"+i)+'"'+r+' target="_blank">'+n+"</a>\n"+o}});e.Z=h},1409:function(t,e,i){"use strict";var n=i(312),r=i(336),o=i.n(r),a=i(321),s=i(1410),c=i(1411),l=i(1413),d=i(323),u=i(349),h=i(345),p=o().View.extend({PAGE_COUNTER_TIMEOUT:2800,PAGE_COUNTER_TIMEOUT_INITIAL:4e3,brandingInToolbar:!1,template:s.Z["template-viewer-toolbar"],events:{"click .menu-button":"toggleMenu","click .share-button":"toggleShare","click .embed-close-button":"onEmbedCloseClick"},newPreviewSettings:(0,h._)("constructor.previewSettings"),initialize:function(t){return a.Z.bindAll(this),a.Z.extend(this,t),this},render:function(){var t=this;if(this.setElement(this.template({mag:this.mag,isPreview:this.isPreview,hasMenu:this.hasMenu,hasShare:this.hasShare,hasPageCounter:this.hasPageCounter,pageCounterInsideMenu:this.hasMenu&&d.Z.isPhone,totalPages:this.mag.getPagesCount(),common:RM.common,viewport:this.mag.viewport,controlsOnTop:this.controlsOnTop,brandingInToolbar:this.brandingInToolbar,icons:{sprite:(0,u.findImagePath)("./common/toolbar/sprite".concat(u.is2X?"@2x":"",".png"))}})),this.$el.appendTo(this.$container),this.$menuButton=this.$el.find(".menu-button"),this.$shareButton=this.$el.find(".share-button"),this.$pageCounter=this.$el.find(".page-counter"),this.$pageCounterWrapper=this.$pageCounter.parent(),this.hasShare&&(this.share=new c.Z({mag:this.mag,router:this.router,$container:d.Z.isPhone?this.$container:this.$shareButton}).render(),this.hasMenu||this.$shareButton.addClass("without-menu-button")),(this.newPreviewSettings&&this.isPreview||this.hasMenu)&&(this.magMenu=new l.Z({mag:this.mag,pages:this.pages,router:this.router,isPreview:this.isPreview,hasProjectInfo:this.hasProjectInfo,publishDate:this.publishDate,$container:this.$container,$toolbar:this.$el,viewerType:this.viewerType,showInitially:this.isSettingsOpened}).render()),this.listenTo(this.mag,"pageChanged",this.onPageChange),this.listenTo(this.mag,"menuShown",this.onMenuShow),this.listenTo(this.mag,"menuHidden",this.onMenuHide),this.listenTo(this.mag,"presentationModeOn",this.onPresentationModeOn),this.listenTo(this.mag,"presentationModeOff",this.onPresentationModeOff),!this.isPreview){var e=this.$(".offscreen-initially:visible"),i=150*e.length+800;e.each((function(t,e){setTimeout((function(){(0,n.ZP)(e).removeClass("offscreen-initially")}),i),i-=150}))}return this.$("div[data-alt]:not(.rmalttext), a[data-alt]:not(.rmalttext)").RMAltText(),this.defaultHidden&&requestAnimationFrame((function(){t.toggleToolbarVisibility(!1)})),this},destroy:function(){return this.share&&this.share.destroy(),this.magMenu&&this.magMenu.destroy(),this.remove()},isMenuOpened:function(){return!!this.menuShown},closeMenu:function(){this.magMenu&&this.magMenu.hide()},onPageChange:function(t,e){this.showPageCounter(t,e),this.$menuButton.removeClass("waiting-video-bg-start preloading"),this.prevPage&&this.stopListening(this.prevPage),t&&(t.loaded||(this.$menuButton.addClass("preloading"),this.listenTo(t,"pageLoaded",this.onPageLoaded)),t.hasVideoBG&&!t.videoBGStarted&&(this.$menuButton.addClass("waiting-video-bg-start"),this.listenTo(t,"videoBGStarted",this.onVideoBGStarted)),this.prevPage=t)},onPageLoaded:function(){this.$menuButton.removeClass("preloading")},onVideoBGStarted:function(){this.$menuButton.removeClass("waiting-video-bg-start")},onPresentationModeOn:function(){this.isPresentationMode=!0,this.updateVisibilityState()},onPresentationModeOff:function(){this.isPresentationMode=!1,this.updateVisibilityState()},updateVisibilityState:function(){this.isPresentationMode?this.$el.stop().fadeOut(200):this.$el.stop().fadeIn(200)},onMenuShow:function(){this.menuShown=!0,(0,h._)("constructor.previewSettings")||this.hidePageCounter()},onMenuHide:function(){this.menuShown=!1},getPageCounterSize:function(t){if(!this.cachedPageCounterData){this.$pageCounter.find(".cur").text("0");var e=this.$pageCounter.outerWidth();this.$pageCounter.find(".cur").text("00");var i=this.$pageCounter.outerWidth()-e,n=e-i;this.cachedPageCounterData={baseSize:n,digitSize:i},this.$pageCounter.find(".cur").text(t)}var r=this.cachedPageCounterData;return r.baseSize+(t+"").length*r.digitSize},updatePageCounterSize:function(t){this.$pageCounter.length&&this.$pageCounterWrapper.length&&((0,h._)("constructor.previewSettings")?this.pageCounterShown?this.$pageCounterWrapper.css("width",this.getPageCounterSize(t)):this.$pageCounterWrapper.css("width",""):!this.menuShown&&this.pageCounterShown?this.$pageCounterWrapper.css("width",this.getPageCounterSize(t)):this.$pageCounterWrapper.css("width",""))},showPageCounter:function(t,e){this.hasPageCounter&&(this.$pageCounter.find(".cur").text(t.num),e.showPageCounter&&(clearTimeout(this.pageCounterTimeout),this.$el.addClass("show-page-counter"),this.pageCounterShown=!0,Modernizr.android?setTimeout(a.Z.bind((function(){this.updatePageCounterSize(t.num)}),this),17):this.updatePageCounterSize(t.num),this.isPreview||(this.pageCounterTimeout=setTimeout(this.hidePageCounter,e.initial?this.PAGE_COUNTER_TIMEOUT_INITIAL:this.PAGE_COUNTER_TIMEOUT))))},hidePageCounter:function(){this.hasPageCounter&&(clearTimeout(this.pageCounterTimeout),this.$el.removeClass("show-page-counter"),this.pageCounterShown=!1,this.updatePageCounterSize())},toggleMenu:function(){this.magMenu&&this.magMenu.toggle()},toggleShare:function(t){(0,n.ZP)(t.target).is(this.$shareButton)&&this.share&&this.share.toggle()},postMessageToParent:function(t,e){var i={type:t,data:e},n=window.parent;n&&n.postMessage(JSON.stringify(i),"*")},onEmbedCloseClick:function(){this.postMessageToParent("close-fullscreen")},rerender:function(){this.destroy(),this.render()},changeMenuVisible:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasMenu=t,this.$el.find(".menu-button").toggle(t)},changeProjectInfoVisible:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasProjectInfo!==t&&(this.hasProjectInfo=t,this.magMenu.showProjectInfo(t))},changeShareButtonVisible:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasShare=t,this.$el.find(".share-button").toggle(t)},changePageCounterVisible:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasPageCounter=t,this.$el.find(".page-counter-wrapper").toggle(t)},changeBrandingVisible:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$el.find(".toolbar-branding").toggle(t)},toggleToolbarVisibility:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.$el.addClass("show").removeClass("hide"):this.$el.removeClass("show").addClass("hide")}});e.Z=p},1340:function(t,e,i){"use strict";i.d(e,{Z:function(){return _}});var n,r=i(312),o=i(336),a=i.n(o),s=i(321),c=i(351);var l,d,u,h,p,f=(l={},d="template-viewer-widget",u=(0,c.f)(n||(h=['\n\t<div class="rmwidget" data-id="<%-id%>"></div>\n'],p||(p=h.slice(0)),n=Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(p)}})))),d in l?Object.defineProperty(l,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[d]=u,l),g=i(350),m=i(352),v=i(344),b=i(986),y=i(343),w=i(339),S=i(635),P=i(638),k=function(t){var e;switch(t){case"Drag/WidgetRendered":e=i.e(46).then(i.bind(i,1458));break;case"Drag/PointerDown":e=i.e(47).then(i.bind(i,1459));break;case"Drag/PointerUp":e=i.e(48).then(i.bind(i,1460));break;case"Drag/PointerMove":e=i.e(49).then(i.bind(i,1461));break;case"Drag/DragStart":e=i.e(50).then(i.bind(i,1462));break;case"Drag/TouchEnd":e=i.e(51).then(i.bind(i,1463));break;case"Cursor/WidgetRendered":e=i.e(52).then(i.bind(i,1464));break;default:e=new Promise((function(t,e){return e(new Error("try get unknown handler"))}))}return e};function C(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function x(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?C(Object(i),!0).forEach((function(e){O(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function O(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var T=1,_=a().View.extend({template:f["template-viewer-widget"],initialize:function(t,e,i){return s.Z.bindAll(this),s.Z.extend(this,a().Events),this.updateWidgetData(t,e,i),this.initStaticModifiers(),"default"!==e.getPageViewport()&&"bottom"!==this.sticked&&(this.sticked=void 0),this.destroyed=!1,this.$document=(0,r.ZP)(document),this._id=this._id||T++,this.initModifiersWithEventHandlers(),this},render:function(){return this.makeBox("some-widget-class"),this.rendered=!0,this.checkLink(),this},redraw:function(){return this.checkLink(),this.redrawShadow(),this},redrawShadow:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.shadow,n=void 0===i?this.shadow:i,r=e.isShadowEnabled,o=void 0===r?this.isShadowEnabled:r,a=e.useTransition,s=e.transition,c=void 0===s?"filter .1s":s,l=e.initialRender,d=void 0!==l&&l;o&&n&&window.requestAnimationFrame((function(){var e=d&&n.fadeOnHover?"ffffff00":n.color,i=[P.l9.video,P.l9.iframe].includes(t.type)?"auto":"filter, scroll-position, contents";t.$el.css(x(x({},(0,S.dI)(x(x({},n),{},{color:e}))),{},{willChange:i,transition:a?c:""}))}))},generateCursorStyle:function(){var t=this.cursor,e="";return t?e=this.cursorUrlIsLambda&&this.cursorImageDimension?"-webkit-image-set(url('".concat(t,"?w=").concat(Math.round(this.cursorImageDimension/2),"') 1x, url('").concat(t,"') 2x), auto"):"url('".concat(t,"'), auto"):e},updatePage:function(t){var e=this.page;(!e||t&&e.num!==t.num)&&(this.page=t,this.redraw())},canRenderImmediately:function(){return Boolean(this.DO_NOT_WAIT_FOR_PRELOAD)},widgetIsLoaded:function(){this.loaded||this.destroyed||(this.loaded=!0,this.started&&this.start(),this.trigger("loaded"))},isValid:function(){return!0},hasFontsToLoad:function(){return!1},seamlessFontsShow:function(t,e){if(g.Z.isFastFontLoadCheckAvailable()&&!RM.screenshot&&!this.insideHotspot&&this.hasFontsToLoad()){e();this.makeSureFontsLoaded().then((function(){window.requestAnimationFrame(t)})).catch((function(){t()}))}},makeSureFontsLoaded:function(){var t=this.page.getFontsVariations([this],!0),e=[];return s.Z.each(t,(function(t){try{var i=g.Z.fastWaitForFontLoad(t.fontFamily,t.fontWeight,t.fontStyle);e.push(i)}catch(t){console.error("Font checking error",t)}})),window.Promise.all(e)},hasAnimation:function(){return Boolean(this.getAnimations().find((function(t){return!b.Z.isEmpty(t)})))},hasLoadAnimation:function(){return Boolean(this.getAnimations().find((function(t){return"load"===t.type})))},initStaticModifiers:function(){var t,e=this;null!==(t=this.modifiers)&&void 0!==t&&t.length&&this.modifiers.forEach((function(t){var i;if(null!==(i=t.static)&&void 0!==i&&i.length&&t.static.forEach((function(t){t.modelField&&void 0!==t.value&&(e[t.modelField]=t.templateValue?t.templateValue.replace("#fieldValue",t.value):t.value)})),"cursor"===t.id){var n=e.generateCursorStyle();n&&(e.cursorStyle=n)}}))},initModifiersWithEventHandlers:function(){var t,e=this;null!==(t=this.modifiers)&&void 0!==t&&t.length&&function(){var t={};if(e.modifiers.forEach((function(e){var i;null!==(i=e.events)&&void 0!==i&&i.length&&e.events.forEach((function(e){var i=k(e.eventHandler);t[e.eventName]||(t[e.eventName]={global:[],isGlobalLoaded:!1,element:[],isElementLoaded:!1}),t[e.eventName][e.isGlobal?"global":"element"].push(i)}))})),!s.Z.isEmpty(t)){e.modifiersHandlers={};var i=function(i){t[i]&&(e.modifiersHandlers[i]={global:[],element:[]},t[i].element.length?Promise.all(t[i].element).then((function(n){e.modifiersHandlers[i].element=n,t[i].isElementLoaded=!0,e.checkAllHandlersLoadStatus(t)})):(t[i].isElementLoaded=!0,e.checkAllHandlersLoadStatus(t)),t[i].global.length?Promise.all(t[i].global).then((function(n){e.modifiersHandlers[i].global=n,t[i].isGlobalLoaded=!0,e.checkAllHandlersLoadStatus(t)})):(t[i].isGlobalLoaded=!0,e.checkAllHandlersLoadStatus(t)))};for(var n in t)i(n)}}()},checkAllHandlersLoadStatus:function(t){var e=Object.keys(t),i=0,n=0;e.forEach((function(e){var r,o;n+=1,null!==(r=t[e])&&void 0!==r&&r.isElementLoaded&&null!==(o=t[e])&&void 0!==o&&o.isGlobalLoaded&&(i+=1)})),n&&i&&i===n&&(this.modifiersHandlersLoaded=!0,this.trigger("modifiers.handlers.loaded"))},addModifierEventListener:function(t){var e=this;this["on".concat(t)]||(this["on".concat(t)]=function(i,n){var r,o,a;null!==(r=e.modifiersHandlers)&&void 0!==r&&null!==(o=r[t])&&void 0!==o&&null!==(a=o[i])&&void 0!==a&&a.length&&e.modifiersHandlers[t][i].forEach((function(t){t.default&&t.default({widget:e,e:n})}))})},startModifiersEventListeners:function(){var t,e,i=this;if(this.modifiersHandlers&&!this.modifiersEventListenersAdded)if(this.rendered)for(var n in this.modifiersEventListenersAdded=!0,this.modifiersHandlers){var r,o,a,s,c=this.modifiersHandlers[n];if(!this["on".concat(n)]&&(null!=c&&null!==(r=c.element)&&void 0!==r&&r.length||null!=c&&null!==(o=c.global)&&void 0!==o&&o.length)&&this.addModifierEventListener(n),null!=c&&null!==(a=c.element)&&void 0!==a&&a.length)switch(n){case"rendered":this["on".concat(n)]("element");break;default:null===(t=this.$el[0])||void 0===t||t.addEventListener(n,this["on".concat(n)].bind(this,"element"))}if(null!=c&&null!==(s=c.global)&&void 0!==s&&s.length)switch(n){case"pointermove":null===(e=this.mag.globalEvents)||void 0===e||e.on({id:this._id,eventHandler:this["on".concat(n)].bind(this,"global")});break;default:window.addEventListener(n,this["on".concat(n)].bind(this,"global"))}}else this.once("rendered",(function(){return i.startModifiersEventListeners()}))},stopModifiersEventListeners:function(){var t;if(this.modifiersHandlers&&this.modifiersEventListenersAdded)for(var e in this.modifiersEventListenersAdded=!1,this.modifiersHandlers){var i,n,r,o=this.modifiersHandlers[e];if(null!=o&&null!==(i=o.element)&&void 0!==i&&i.length)null===(r=this.$el[0])||void 0===r||r.removeEventListener(e,this["on".concat(e)]);if(null!=o&&null!==(n=o.global)&&void 0!==n&&n.length)switch(e){case"pointermove":null===(t=this.mag.globalEvents)||void 0===t||t.off({id:this._id,eventHandler:this["on".concat(e)]});break;default:window.removeEventListener(e,this["on".concat(e)])}}},start:function(){var t=this;return this.started=!0,this.modifiersHandlersLoaded?this.startModifiersEventListeners():this.once("modifiers.handlers.loaded",(function(){return t.startModifiersEventListeners()})),this},stop:function(){var t=this;return this.started=!1,this.modifiersHandlersLoaded?this.stopModifiersEventListeners():this.once("modifiers.handlers.loaded",(function(){return t.stopModifiersEventListeners()})),this},hide:function(){return this.stop(),this.$el.hide(),this.wasHidden=!0,this.trigger("hidden"),this},show:function(){return this.$el.show(),this.start(),this.wasHidden=!1,this.trigger("shown"),this},destroy:function(){return this.stop(),this.destroyed=!0,this.trigger("destroyed"),delete this.animationObj,this.$el.off(),this.remove()},softBringToTopZ:function(){var t=this.is_above?this.mag.aboveGlobalWidgets:this.page.widgets,e=null==t?void 0:t.reduce((function(t,e){return e.z&&e.z>t?e.z:t}),this.z),i=this.z===e?this.z:e+1;this.animationObj?this.animationObj.getAnimationContainer().css("z-index",i):this.$el.css("z-index",i);return Number(i)},BringToTopZ:function(){if(this.animationObj){var t=this.animationObj.getAnimationContainer();this.animationObj.resetTimeout&&clearTimeout(this.animationObj.resetTimeout),this.animationObj.savedAnimationContainerZIndex||(this.animationObj.savedAnimationContainerZIndex=t.css("z-index")),t.css("z-index",99999+this.z)}this.$el.css("z-index",99999+this.z)},BackToNormalZ:function(){var t=function(){this.animationObj&&this.animationObj.savedAnimationContainerZIndex&&(this.animationObj.getAnimationContainer().css("z-index",this.animationObj.savedAnimationContainerZIndex||this.z),delete this.animationObj.savedAnimationContainerZIndex);delete this.animationObj.resetTimeout}.bind(this);this.animationObj&&this.animationObj.savedAnimationContainerZIndex&&(this.animationObj.resetTimeout&&clearTimeout(this.animationObj.resetTimeout),this.animationObj.resetTimeout=setTimeout(t,200)),this.$el.css("z-index",this.z)},makeBox:function(t){this.setElement(this.template({id:this._id}));var e=this.fixed_position?this.$fixedContainer:this.$pageContainer;this.animationObj&&(e=this.animationObj.getAnimationContainer()),this.$el.appendTo(e).addClass(t).toggleClass("full-width",!!this.is_full_width).toggleClass("full-height",!!this.is_full_height).toggleClass("inside-hotspot",!!this.insideHotspot).toggleClass("use-free-position",!!this.useFreePosition),this.applyBoxStyle({onFirstRender:!0}),this.redrawShadow({initialRender:!0}),(this.is_full_width||this.is_full_height||this.fixed_position||this.sticked)&&this.listenTo(this.page,"resize",this.onPageResize),this.trigger("rendered")},onPageResize:function(){this.applyBoxStyle()},calcBoxStyle:function(t){t=t||{};var e,i={left:this.x,top:this.y,width:this.w,height:this.h,right:"",bottom:"","margin-left":"","margin-top":"","z-index":this.z||1},n=this.page.mag.getContainerSizeCached(),r=parseInt(this.full_width_margin,10)||0,o=parseInt(this.full_height_margin,10)||0,a=parseInt(this.sticked_margin,10)||0,c=this.page.scale,l=n.width,d=l-n.windowClientWidth,u=this.fixed_position,h=this.page.getCachedSizes();if(this.angle&&(i.width=Math.round(this.w),i.height=Math.round(this.h),this.angle%90==0&&i.width%2!=i.height%2&&(i.width+=1)),this.is_full_height&&(i.top=-this.page.contentPosition.top+o,u?(i.top=o/c,i.height=n.windowClientHeight/c-2*o,["nw","w","sw"].indexOf(u)>-1&&(u="nw"),["n","c","s"].indexOf(u)>-1&&(u="n"),["ne","e","se"].indexOf(u)>-1&&(u="ne")):i.height=this.page.pageHeight/c-2*o),this.is_full_width){var p=this.page.mag.getViewportWidth(this.page.pageViewport);if(i.left=-this.page.contentPosition.left+r,i.width=n.width/c-2*r,e=-((i.width-this.page.$content[0].clientWidth)/2).toFixed(3),v.Z.isOn(this.page.pageViewport,p,this.mag.viewOpts)&&n.width>this.mag.viewOpts.scalewidth&&(Modernizr.msie11?(e=-(l-this.page.$content[0].clientWidth)/2-d/2,i.left=e/c):Modernizr.firefox?(i.width=i.width+1,i.left=e-1):i.left=e),u){if(i.left=r,"horizontal"==this.page.viewerType){var f=h.scrollWrapperWidth-h.scrollWrapperClientWidth;i.width-=f/c}["nw","n","ne"].indexOf(u)>-1&&(u="nw"),["w","c","e"].indexOf(u)>-1&&(u="w"),["sw","s","se"].indexOf(u)>-1&&(u="sw")}}if(this.sticked){var g=0;"horizontal"==this.page.viewerType&&(g=h.scrollWrapperWidth-h.scrollWrapperClientWidth),"left"==this.sticked&&(i.left=-this.page.contentPosition.left/c+a),"right"==this.sticked&&(i.left=this.page.mag.getContainerSizeCached().width/c-a-this.w-this.page.contentPosition.left/c-g/c),"top"==this.sticked&&(i.top=-this.page.contentPosition.top/c+a),"bottom"==this.sticked&&(i.top=h.contentContainerHeight-a-this.h+this.page.contentPosition.top/c)}if(t.calcBBox){u&&(i.left*=c,i.top*=c,i.width*=c,i.height*=c),i.sinAngle=Math.sin(-(this.angle||0)*Math.PI/180),i.cosAngle=Math.cos(-(this.angle||0)*Math.PI/180);var m=y.Z.calcBoundingBox(i,u);return i.width=m.bb_width,i.height=m.bb_height,i.left=m.bb_left,i.top=m.bb_top,u&&s.Z.extend(i,w.default.getFixedPositionCSS(u,i,1)),{dimensions:i}}if(u){var b=this.page.mag.getViewportWidth(this.page.pageViewport);s.Z.extend(i,w.default.getFixedPositionCSS(u,i,v.Z.normalize(c,"transform",this.page.pageViewport,b,this.mag.viewOpts))),v.Z.isOn(this.page.pageViewport,b,this.mag.viewOpts)&&v.Z.isCSSZoom()&&(i.zoom=c)}var S={rotate:this.angle?this.angle+"deg":"",scaleX:this.flip_h?-1:1,scaleY:this.flip_v?-1:1};if(u){var P=this.page.mag.getViewportWidth(this.page.pageViewport),k=v.Z.normalize(c,"transform",this.page.pageViewport,P,this.mag.viewOpts);S.scaleX*=k,S.scaleY*=k}if(Math.abs(S.scaleX-1)<1e-6&&(S.scaleX=""),Math.abs(S.scaleY-1)<1e-6&&(S.scaleY=""),this.isDraggable&&this.$el){var C=w.default.getElementTranslateByString(this.$el[0]);(C.x||C.y)&&(S.translate="".concat(C.x,"px, ").concat(C.y,"px"))}var x={};return this.cursorStyle&&(x.cursor=this.cursorStyle),{dimensions:i,decorations:x,transform:S}},applyBoxStyle:function(t){if(!this.isDragging){var e=this.calcBoxStyle();!this.isDraggable||null!=t&&t.onFirstRender||delete e.dimensions["z-index"],this.animationObj&&(e=this.animationObj.modifyWidgetPosition(e)),this.$el.css(e.dimensions),s.Z.isEmpty(e.decorations)||this.$el.css(e.decorations);var i=s.Z.map(e.transform,(function(t,e){return t?e+"("+t+")":""})).join(" ");w.default.applyTransform(this.$el,r.ZP.trim(i))}},calcDistsToPageVisibleBounds:function(){var t,e=this.page.mag.getContainerSizeCached(),i=v.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)&&v.Z.isCSSZoom()?v.Z.getBox(this.$el[0],this.page.scale):this.$el[0].getBoundingClientRect(),n=this.page.mag.isPreview?this.page.mag.$mag_container[0].getBoundingClientRect():{top:0,left:0},r=(i.top+i.height/2-n.top)/this.page.scale,o=(e.height-(i.top+i.height/2-n.top))/this.page.scale,a=(i.left+i.width/2-n.left)/this.page.scale,s=(e.width-(i.left+i.width/2-n.left))/this.page.scale;if(this.fixed_position){var c=this.page.$el[0].getBoundingClientRect(),l=(i.top+i.height/2-c.top)/this.page.scale,d=(c.height-(i.top+i.height/2-c.top))/this.page.scale;t={left:Math.max(0,a),right:Math.max(0,s),top:Math.max(0,Math.min(r,l)),bottom:Math.max(0,Math.min(o,d))}}else{var u=this.page.contentPosition.left/this.page.scale,h=this.page.contentPosition.top/this.page.scale,p=this.x+this.w/2,f=this.y+this.h/2;l=f+h,d=this.page.contentHeight-f+h;t={left:Math.max(0,p+u),right:Math.max(0,this.page.pageWidth-p+u),top:Math.max(0,Math.min(r,l)),bottom:Math.max(0,Math.min(o,d))}}return t},checkLink:function(){var t={};if(this.clickLink){this.clickLink=this.page.mag.matchSameDomainLink(this.clickLink);var e=/^(.*):\/\/[^\s$.?#].[^\s]*$/i.test(this.clickLink)||/^mailto\:/i.test(this.clickLink)||/^tel\:/i.test(this.clickLink),i=/^__rm_goback$/i.test(this.clickLink),n=this.mailchimpMatcher.test(this.clickLink),o=this.anchorRegexp.test(this.clickLink),a=this.shareRegexp.test(this.clickLink),c=this.clickLink,l=(0,m.wB)(this.clickTarget),d=e?"external-link":i?"goback-link":"maglink";if(n&&(d="mailchimp-link"),o&&(d="anchor-link"),a&&(d="share-link"),!e){var u=c;/^back\sto\stop$/i.test(c)&&(u=this.page._id);var h=this.page.mag.getPageNum(u);c=h&&this.page.mag.getPageUri?"/"+this.page.mag.getPageUri(u):"javascript:void(0)";h||(c=""),u==this.page._id&&(d+=" back-to-top",this.is_global&&(d+=" current"))}if(i&&(c="javascript:void(0)"),n){c="javascript:void(0)";var p=this.clickLink.match(this.mailchimpMatcher)[1];t["data-mailchimp"]=p}if(o){c="javascript:void(0)",t["data-anchor-link-pos"]=this.anchor_link_pos;var f=s.Z.findWhere(this.mag.pages,{_id:this.clickPage})||this.page;t["data-page-uri"]=f.uri||f.num}if(a){c="javascript:void(0)";var g=this.clickLink.match(this.shareRegexp);t["data-share-provider"]=g[1],t["data-share-type"]=g[2]}if(0!=c.indexOf("mailto")&&0!=c.indexOf("tel")||(l=""),c){!!this.insideHotspot&&("boolean"!=typeof closeTip||this.closeTip)&&(d+=" close-tip-on-click"),s.Z.extend(t,{class:d,href:c,target:l});var v=this.$el.parent("a");v.length?v.attr(t):(v=(0,r.ZP)("<a>").attr(t),this.$el.wrap(v)),!e&&RM.screenshot&&(v=this.$el.parent("a")).removeAttr("href")}}},updateWidgetData:function(t,e,i){s.Z.extend(this,t,t.params),this.page=e,this.mag=this.page.mag,this.$pageContainer=i||this.page.$content,this.x=this.x||0,this.y=this.y||0},getAnimations:function(){return b.Z.normalizeAnimations(this.animation)},getAnimationTriggers:function(t){var e=this.getAnimations().find((function(e){return e.UUID===t}));return b.Z.normalizeAnimationTriggers(e&&e.trigger)},isGlobal:function(){return!!this.is_global},isAbove:function(){return!!this.is_above}})},1345:function(t,e,i){"use strict";i.r(e);var n=i(312),r=i(321),o=i(1277),a=i(1340),s=i(1346),c=i(1347),l=i(1278),d=i(1348),u=a.Z.extend({render:function(){return this.rendered=!0,this.page.on("resize",this.onResize,this),this.template=s.Z["template-viewer-widget-background"],this.setElement(this.template({data:this})),this.$el.prependTo(this.page.$fixedBgContainer),this.$picture=this.$(".picture-background"),this.$video=this.$(".video-background"),this.$videoContainer=this.$(".video-container"),this.$slideshow=this.$(".slideshow-container"),this.$slideshowPreload=this.$(".slideshow-preload"),this.picture&&"picture"===this.selectedType?this.renderPicture():r.Z.isEmpty(this.video)||"video"!==this.selectedType?this.slideshow&&"slideshow"===this.selectedType?this.renderSlideshow():this.widgetIsLoaded():this.renderVideo(),this},start:function(){return this.started=!0,"video"===this.selectedType&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&(this.videoWidget.start(),this.onResize()),"slideshow"!==this.selectedType||RM.screenshot||!this.rendered||this.destroyed||!this.slideshowWidget||this.slideshowWidget.isAnimationRunning||this.slideshowWidget.startAnimationLoop(),this},stop:function(){return this.started=!1,"video"===this.selectedType&&!RM.screenshot&&this.rendered&&this.videoWidget&&!this.destroyed&&this.videoWidget.stop(),"slideshow"===this.selectedType&&!RM.screenshot&&this.rendered&&!this.destroyed&&this.slideshowWidget&&this.slideshowWidget.isAnimationRunning&&this.slideshowWidget.stopAnimationLoop(),this},destroy:function(){return this.page.off("resize",this.onResize,this),"video"===this.selectedType&&(this.videoWidget&&this.videoWidget.destroy(),this.videoWidget=null),"slideshow"===this.selectedType&&(this.slideshowWidget&&this.slideshowWidget.destroy(),this.slideshowWidget=null),a.Z.prototype.destroy.apply(this,arguments)},hasVideoBG:function(){return!(RM.screenshot||"video"!==this.selectedType||!this.video||!this.video.url)},onResize:function(){!this.destroyed&&this.$videoContainer&&this.video&&o.Z.setVideoPosition({mag:this.page.mag,$container:this.$videoContainer,$media:this.$videoContainer.children(),provider:this.video.provider_name,aspect_poster:this.video.aspect_poster||this.videoWidget&&this.videoWidget.aspect_poster,aspect_real:this.video.aspect_real,controls_remove:!0})},renderPicture:function(){if(this.picture){var t=l.Z.useLambdaUrl(this.picture)||l.Z.useLambdaUrlOldProjects(this.picture,"background")?l.Z.getLambdaUrl(this.picture):this.picture.finalUrl||this.picture.effectUrl||this.picture.unscaledOptimizedUrl||this.picture.url;(0,n.ZP)("<img/>").on("load",r.Z.bind((function(){this.$picture.css({"background-image":"url("+t+")"}),RM.screenshot?setTimeout(this.widgetIsLoaded,200):this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded).attr("src",t)}else this.widgetIsLoaded()},renderSlideshow:function(){this.slideshowWidget=new c.Z({data:this.slideshow,container:this.$slideshow,preloadContainer:this.$slideshowPreload,name:this.page.cid}),RM.screenshot?(this.slideshowWidget.render(),this.slideshowWidget.on("loaded",function(){this.widgetIsLoaded()}.bind(this))):(this.slideshowWidget.render(!this.page.isCurrent()),this.widgetIsLoaded())},renderVideo:function(){this.video.id=this.id,this.video.mute=this.mute,this.video.loop=this.loop,this.video.controls=!1,this.videoWidget=new d.default(this.video,this.page,this.$videoContainer),this.videoWidget.on("loaded",r.Z.bind((function(){this.widgetIsLoaded(),this.onResize()}),this)),this.videoWidget.on("playStarted",r.Z.bind((function(){this.trigger("videoBGStarted")}),this)),this.videoWidget.render()}});e.default=u},1350:function(t,e,i){"use strict";i.r(e);var n=i(312),r=i(1340),o=i(1351),a=i(323);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){l(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=r.Z.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){var t;return this.preloadIconImage({default:!0}),this.makeBox("widget-button"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),t={model:this,$container:this.$el,environment:"viewer",mag:this.page&&this.page.mag,block:null},this.buttonWidget=new o.Z(t),this.preloadIconImage({hover:!0}),this.$el.on(a.Z.isDesktop?"mouseenter":"touchstart",this.onButtonHover),this.$el.on(a.Z.isDesktop?"mouseleave":"touchend",this.onButtonHoverOut),this.$el.on("click",this.onButtonClick),this.checkLink(),RM.screenshot?(this.waitForIconImageLoad(),this.waitForUsedFontsLoad()):this.widgetIsLoaded(),this},renderButtonText:function(t){this.buttonWidget.renderButtonText(t)},renderButtonTextWithSizes:function(t,e){this.buttonWidget.renderButtonTextWithSizes(t,c(c({},this),e))},hasFontsToLoad:function(){return"text"===this.tp||"text_and_icon"===this.tp},onButtonHover:function(){this.$(".common-button").addClass("hovered")},onButtonHoverOut:function(){this.$(".common-button").removeClass("hovered")},onButtonClick:function(t){if(2!==t.which&&!t.metaKey&&!t.ctrlKey){var e=this.$el.closest("a"),i=n.ZP.trim(e.attr("href")).match(/\/start-with-template\/(\d+)$/i),r=i&&i[1];r&&RM.viewerRouter&&RM.viewerRouter.createMagFromTemplate&&(t.preventDefault(),RM.viewerRouter.createMagFromTemplate("template-link",r));var o=this.text?this.text:"icon"===this.tp?"icon":"empty";RM.analytics&&RM.analytics.sendEvent("Button Click",o)}},preloadIconImage:function(t){t=t||{};var e=this.tp;if("icon"===e||"text_and_icon"===e){if(t.default)(new Image).src=Modernizr.retina&&this.icon_raster2xUrl||this.icon_rasterUrl;if(t.hover)(new Image).src=Modernizr.retina&&this["hover-icon_raster2xUrl"]||this["hover-icon_rasterUrl"]}},_widgetIsLoaded:function(){this.loaded||this.destroyed||(RM.screenshot?this.iconImageLoaded&&this.fontLoaded&&this.widgetIsLoaded():this.widgetIsLoaded())},waitForIconImageLoad:function(){this.iconImageLoaded=!1,"icon"!==this.tp&&"text_and_icon"!==this.tp||!this.icon_rasterUrl?this.onIconImageLoaded():(0,n.ZP)("<img>").on("load",this.onIconImageLoaded).on("error",this.onIconImageLoaded).attr("src",Modernizr.retina?this.icon_raster2xUrl||this.icon_rasterUrl||"":this.icon_rasterUrl||"")},onIconImageLoaded:function(){this.iconImageLoaded=!0,this._widgetIsLoaded()},waitForUsedFontsLoad:function(){this.fontLoaded=!1,this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.onFontLoaded):this.onFontLoaded()},onFontLoaded:function(){this.fontLoaded=!0,this._widgetIsLoaded()},destroy:function(){return this.buttonWidget&&this.buttonWidget.destroy(),this.buttonWidget=null,this.$el.off(a.Z.isDesktop?"mouseenter":"touchstart",this.onButtonHover),this.$el.off(a.Z.isDesktop?"mouseleave":"touchend",this.onButtonHoverOut),this.$el.off("click",this.onButtonClick),r.Z.prototype.destroy.apply(this,arguments)}});e.default=d},1358:function(t,e,i){"use strict";i.r(e);var n=i(312),r=i(321),o=i(1340),a=i(339),s=i(308),c=i(344),l=i(1278),d=i(986),u=i(624);function h(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(t){return void i(t)}s.done?e(c):Promise.resolve(c).then(n,r)}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var g,m,v=o.Z.extend({antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){var t,e;this.makeBox("widget-picture"),this.isLightboxEnabled()&&this.initLightbox(),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.$lqipImg=null,this.useLqip=(null===(t=this.mag)||void 0===t||null===(e=t.viewOpts)||void 0===e?void 0:e.lqip)&&(l.Z.useLambdaUrl(this.picture)||l.Z.useLambdaUrlOldProjects(this.picture));var i=this.getPictureUrl();if(/\.gif/.test(i)&&(this.isGIF=!0),this.$el.html(""),this.isVector(i)&&!s.Z.IS_FILE_PROTOCOL)this.loadVector(i);else{var o=!!(this.border_size>0||this.border_radius>0||this.border_radius_max||this.border_radius_independent&&(this.border_radius_tl>0||this.border_radius_tr>0||this.border_radius_bl>0||this.border_radius_br>0)||this.is_full_width||this.is_full_height),a=void 0===this.opacity?1:this.opacity;if(this.insideHotspot&&this.isGIF){var c=this.scale;(0,n.ZP)("<div/>").appendTo(this.$el).css({position:"absolute","background-image":"url("+i+")","background-position":"50% 50%",width:Math.max(Math.round(this.originalW*c),this.w),height:Math.max(Math.round(this.originalH*c),this.h),top:-Math.round(this.cropY*c),left:-Math.round(this.cropX*c)}).attr("url",i)}else if(o){var d=(0,u.rW)(this.border_color||"000000",void 0===this.border_color_opacity?1:this.border_color_opacity/100),h="rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", ").concat(d.a,")");(0,n.ZP)("<div/>").appendTo(this.$el).addClass("bgpic").css({"background-image":this.useLqip?"":"url(".concat(i,")"),"background-position":"".concat(this.fhpos?this.fhpos:50,"% ").concat(this.fwpos?this.fwpos:50,"%"),"box-shadow":this.border_size>0?"inset 0 0 0 ".concat(this.border_size,"px ").concat(h):"none","border-radius":this.getBorderRadius(),opacity:this.useLqip?0:a}).attr("url",this.useLqip?"":i)}if(l.Z.useLambdaUrl(this.picture)||l.Z.useLambdaUrlOldProjects(this.picture)){var g=l.Z.getSrcset(this.picture,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){f(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.getPictureOptions()));(0,n.ZP)("<img/>").attr("srcset",g).attr("alt",this.getAltText()).attr("src",i).addClass("viewable").toggleClass("saveable",!!(o||this.insideHotspot&&this.isGIF)).css("opacity",0).load(r.Z.bind((function(){var t=this.$el.find(".viewable"),e=t&&t.get(0)&&t.get(0).currentSrc||i,n=this.$el.find(".bgpic");n&&n.css({opacity:a,"background-image":"url(".concat(e,")")}).attr("url",e),t&&t.css("opacity",a),this.$lqipImg&&this.$lqipImg.css("opacity",0),r.Z.delay(r.Z.bind((function(){this.$el.css({overflow:"","border-radius":""}),this.$lqipImg&&this.$lqipImg.remove(),this.$lqipImg=null,this.widgetIsLoaded()}),this),200)}),this)).on("error",r.Z.bind((function(){this.$lqipImg&&this.$lqipImg.remove(),this.$lqipImg=null,this.widgetIsLoaded()}),this)).appendTo(this.$el),this.useLqip&&(this.$el.css("overflow","hidden"),(this.border_radius||this.border_radius_max||this.border_radius_independent)&&this.$el.css("border-radius",this.getBorderRadius()),this.$lqipImg=(0,n.ZP)("<div/>").addClass("lqip").css({"background-image":"url(".concat(l.Z.getLqipUrl(this.picture,{cropX:this.cropX,cropY:this.cropY,cropW:this.cropW,cropH:this.cropH,originalW:this.originalW,originalH:this.originalH}),")"),"background-position":"50% 50%",opacity:a}).appendTo(this.$el))}else(0,n.ZP)("<img/>").appendTo(this.$el).toggleClass("saveable",!!(o||this.insideHotspot&&this.isGIF)).css("opacity",void 0===this.opacity?1:this.opacity).addClass("viewable").load(r.Z.bind((function(){this.$el.find("img").attr("url",i),this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded).attr("srcset",this.getSrcset()).attr("alt",this.getAltText()).attr("src",i)}return this.checkLink(),this},getBorderRadius:function(){return this.border_radius_independent?"".concat(this.border_radius_tl||0,"px ").concat(this.border_radius_tr||0,"px ").concat(this.border_radius_bl||0,"px ").concat(this.border_radius_br||0,"px"):"".concat(this.border_radius_max?"9999":this.border_radius||0,"px")},isLightboxEnabled:function(){var t=Boolean(this.getAnimations().find((function(t){return"click"===t.type&&t.steps&&t.steps.length}))),e=!!this.clickLink;return this.lightbox?this.lightbox.enabled&&!t&&!e:this.preview_enabled&&!t&&!e},isValid:function(){return Boolean(this.picture&&(this.picture.type||this.picture.unscaledUrl||this.picture.finalUrl||this.picture.editedVectorUrl||this.picture.url))},isVector:function(t,e){var i=t||this.picture&&this.picture.url;return"svg"===(e||this.picture&&this.picture.type)||i&&0===r.Z.last(i.split(".")).indexOf("svg")},start:function(){return o.Z.prototype.start.call(this),Modernizr.safari&&this.isGIF&&this.$el.flashClass("fix-safari-gif",100),this},getPictureOptions:function(){var t=this.getAnimations().reduce((function(t,e){return Math.max(t,d.Z.maxScaleAnimation(e))}),0);return{width:this.w,height:this.h,cropX:this.cropX,cropY:this.cropY,cropW:this.cropW,cropH:this.cropH,originalW:this.originalW,originalH:this.originalH,scale:c.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)?this.page.scale:1,animationScale:t&&t/100,isStretched:this.is_full_width||this.is_full_height}},getPictureUrl:function(){return this.picture?l.Z.useLambdaUrl(this.picture)||l.Z.useLambdaUrlOldProjects(this.picture)?l.Z.getLambdaUrl(this.picture,this.getPictureOptions()):this.picture.finalUrl&&0===r.Z.last(this.picture.finalUrl.split(".")).indexOf("svg")?this.picture.finalUrl:(t=c.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)?this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final2xUrl||this.picture.finalUrl:Modernizr.retina&&(window.devicePixelRatio>=3&&(this.picture.final3xUrl||this.picture.unscaledOptimizedUrl)||this.picture.final2xUrl||this.picture.unscaledOptimizedUrl)||this.picture.finalUrl,(this.is_full_width||this.is_full_height)&&(t=this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.final2xUrl||this.picture.finalUrl),t||this.picture.effectUrl||this.picture.editedVectorUrl||this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl||this.picture.url):"";var t},getAltText:function(){return this.picture&&this.alt?r.Z.escape(this.alt):void 0},getSrcset:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.picture)return[];if(!this.originalW)return[];if(this.isGIF)return[];if(c.Z.isOn(this.page.pageViewport,this.mag.getViewportWidth(this.page.pageViewport),this.mag.viewOpts))return[];if(this.getAnimations().length)return[];if(RM.screenshot)return[];if(this.picture.finalUrl&&0===r.Z.last(this.picture.finalUrl.split(".")).indexOf("svg"))return[];var e=Math.floor(this.w),i=[{url:this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl,size:this.originalW},{url:this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl),size:3*e},{url:this.picture.final2xUrl,size:2*e},{url:this.picture.finalUrl,size:e}];if(i=i.filter(function(t){return!!t.url&&this.originalW>=t.size}.bind(this)).map((function(t){return"".concat(t.url," ").concat(t.size,"w")})),!t)return i;var n=["".concat(this.picture.finalUrl||this.picture.unscaledOptimizedUrl||this.picture.unscaledUrl," 1x")];return this.picture.final2xUrl&&n.push("".concat(this.picture.final2xUrl," 2x")),this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl)&&n.push("".concat(this.picture.final2xUrl&&(this.picture.unscaledOptimizedUrl||this.picture.final3xUrl)," 3x")),n.concat(i)},loadVector:function(t){this.$el.addClass("svg"),this.svgAjax=n.ZP.get(t+"?c",r.Z.bind((function(e){var i=(0,n.ZP)(a.default.cleanupSVG((0,n.ZP)(e).find("svg").get(0).cloneNode(!0)));i.get(0).removeAttribute("width"),i.get(0).removeAttribute("height"),this.$svg=i;var o=i.get(0).cloneNode(!0);this.$svg.find("title").remove();var s=new Image;(0,n.ZP)(s).on("load error",r.Z.bind((function(){(0,n.ZP)(s).appendTo(window.document.body).css({width:"100%",height:"100%"});var t=(0,n.ZP)(o);t.get(0).setAttribute("viewBox","0 0 "+(0,n.ZP)(s).width()+" "+(0,n.ZP)(s).height()),t.appendTo(window.document.body);var e=t.get(0).getBBox();this.$svg.get(0).setAttribute("viewBox",e.x+" "+e.y+" "+e.width+" "+e.height),this.$svg.get(0).setAttribute("preserveAspectRatio","xMidYMid meet"),(0,n.ZP)(s).remove(),t.remove();var i=(0,n.ZP)('<div class="svg-scale-wrapper"></div>');this.$svg.appendTo(i),i.appendTo(this.$el),this.widgetIsLoaded()}),this)),s.src=t}),this)).fail(this.widgetIsLoaded)},initLightbox:(g=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.lightbox&&(this.$el.on("click",(function(){e.page.showLightboxSlide(e)})),this.$el.addClass("preview-enabled"));case 1:case"end":return t.stop()}}),t,this)})),m=function(){var t=this,e=arguments;return new Promise((function(i,n){var r=g.apply(t,e);function o(t){h(r,i,n,o,a,"next",t)}function a(t){h(r,i,n,o,a,"throw",t)}o(void 0)}))},function(){return m.apply(this,arguments)})});e.default=v},1371:function(t,e,i){"use strict";i.r(e);var n=i(312),r=i(321),o=i(1340),a=i(1362),s=i(344),c=i(339),l=i(323),d=o.Z.extend(a.Z.prototype).extend({mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){if(this.makeBox("widget-shape"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.requiresImageLoad()){if(!this.rasterUrl&&!this.b64url)return this.widgetIsLoaded(),this;this.$el.addClass("icon"),this.antialiasRotation=!0;var t=(0,n.ZP)("<img>");t.on("load",r.Z.bind((function(){this.$el.html(t),this.widgetIsLoaded()}),this)).on("error",this.widgetIsLoaded),t.attr("src",Modernizr.retina||s.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)?this.raster3xUrl||this.raster2xUrl||this.rasterUrl||this.b64url||"":this.rasterUrl||this.b64url||"")}else this.redrawSVG(),this.widgetIsLoaded();return this.checkLink(),this},start:function(){o.Z.prototype.start.call(this),Modernizr.firefox&&!this.requiresImageLoad()&&this.borders>0&&this.redrawSVG()},redrawSVG:function(){var t=this,e={id:t._id,get:function(e){return"w"===e&&t.is_full_width?t.page.mag.getContainerSizeCached().width/t.page.scale-2*t.full_width_margin:"h"===e&&t.is_full_height&&t.fixed_position?t.page.mag.getContainerSizeCached().windowClientHeight/t.page.scale-2*t.full_height_margin:t[e]}};if("rectangle"!==this.tp||1!==this.opacity||this.radius_rect_independent||l.Z.isDesktop&&0!==this.borders){var i=this.generateShapeSVG("viewer-"+c.default.generateUUID(),e,e.get("w"),e.get("h"));this.$el.html(i)}else{var n=c.default.hex2rgb(this.bg_color),r=c.default.hex2rgb(this.color);n&&n.push(this.bg_opacity),this.$el.css({"background-color":n?"rgba("+n.join(",")+")":"transparent","border-color":r?"rgb("+r.join(",")+")":"transparent","border-radius":this.radius||0,"border-style":"solid","border-width":this.borders,"box-sizing":"border-box"}),this.$el.addClass("div-instead-of-svg")}},requiresImageLoad:function(){return"icon"===this.tp},canRenderImmediately:function(){return!this.requiresImageLoad()},onPageResize:function(){o.Z.prototype.onPageResize.apply(this,arguments),this.requiresImageLoad()||this.redrawSVG()}});e.default=d},1364:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return y}});var n,r=i(312),o=i(321),a=i(1340),s=i(308),c=i(340),l=i(1315),d=i(351);var u,h,p,f,g,m=(u={},h="template-viewer-widget-text",p=(0,d.f)(n||(f=["\n\t<%var cc = column_count == 1 ? 'auto' : column_count;%>\n\t<div style=\" -webkit-nbsp-mode:normal; -webkit-line-break:after-white-space; white-space:<%=isNotChrome ? 'normal' : 'pre-wrap'%>; column-count:<%=cc%>;-webkit-column-count:<%=cc%> !important;-moz-column-count:<%=cc%>;column-gap:<%=column_gap%>px;-webkit-column-gap:<%=column_gap%>px !important;-moz-column-gap:<%=column_gap%>px;background:<%-bg%>\"><%=text%></div>\n"],g||(g=f.slice(0)),n=Object.freeze(Object.defineProperties(f,{raw:{value:Object.freeze(g)}})))),h in u?Object.defineProperty(u,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[h]=p,u),v=i(323),b=i(344),y=a.Z.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,antialiasRotation:!0,mailchimpMatcher:/__rm_mailchimp_(.+)/i,anchorRegexp:/__rm_anchor/i,shareRegexp:/^share\.(facebook|twitter|pinterest|gplus|linkedin|email)\.(mag|page)$/i,render:function(){this.makeBox("text"),this.hasHoverAnimation&&this.$el.addClass("has-onhover-animation"),this.rendered=!0,this.bg_color=null==this.bg_color?"ffffff":this.bg_color,this.bg_opacity=null==this.bg_opacity?0:this.bg_opacity,this.column_count=null==this.column_count?1:this.column_count,this.column_gap=null==this.column_gap?16:this.column_gap;var t=[parseInt(this.bg_color.substring(0,2),16),parseInt(this.bg_color.substring(2,4),16),parseInt(this.bg_color.substring(4,6),16)];this.bg_opacity>.99?this.bg="rgb("+t[0]+","+t[1]+","+t[2]+")":this.bg="rgba("+t[0]+","+t[1]+","+t[2]+", "+this.bg_opacity+")",this.text=this.switchTextToViewport(this.text,this.insideHotspot?"default":this.page.pageViewport);var e=this.mag.model.attributes&&this.mag.model.attributes.edit_params&&this.mag.model.attributes.edit_params.paragraph_styles||[],n=r.ZP.parseHTML(this.text);n=n.map((function(t){var i=(0,r.ZP)(t),n=i.attr("class");if(n){var o=e.find((function(t){return t._name.toLowerCase()===n.toLowerCase()}));if(o&&o.tag&&"p"!==o.tag&&s.Z.AVAILABLE_TEXT_TAGS.includes(o.tag))return(0,r.ZP)("<"+o.tag+' class="'+n+'" style="'+(i.attr("style")||"")+'" />').append(i.contents())[0].outerHTML}return t.outerHTML})).filter((function(t){return t})),this.text=n.join(""),this.isNotChrome=!(Modernizr.webkit&&!Modernizr.safari&&!Modernizr.safari5)&&this.text.includes("justify");var a=m["template-viewer-widget-text"],l=(0,r.ZP)(a(this));this.seamlessFontsShow(function(){this.$el.removeClass("fonts-pending")}.bind(this),function(){this.$el.addClass("fonts-pending")}.bind(this)),b.Z.isOn(this.mag.getViewportWidth(this.page.pageViewport))&&b.Z.isCSSZoom()&&this.transformInsteadOfZoom(l),this.$el.append(l),this.$content=l,this.$el.on(v.Z.isDesktop?"mouseenter":"touchstart","a",this.onLinkMouseEnter),this.$el.on(v.Z.isDesktop?"mouseleave":"touchend","a",this.onLinkMouseLeave),this.$el.on("click","a",this.onLinkClick),l.addClass("v"+(this.version||1));var d=this;return this.$el.find("a").each((function(){var t,e=(0,r.ZP)(this),i=e.attr("data-pid"),n=e.attr("href"),a=/^back\sto\stop$/i,s=i,l=!1;try{t=decodeURIComponent(n)}catch(t){console.error(t)}(a.test(n)||a.test(t))&&(s=d.page._id);var u=n&&d.page.mag.matchSameDomainLink(n);if((u==e.attr("href")||s)&&(u=void 0),s=s||u){var h=d.page.mag.getPageNum(s),p=h&&d.page.mag.getPageUri?"/".concat(d.page.mag.getPageUri(s)):"javascript:void(0)";if(h){e.addClass("maglink").attr("target","");var f=document.querySelector("base");if(RM.common.isDownloadedSource&&f){var g=f.getAttribute("href");"/"!==g&&e.attr("href","".concat(g).concat(p.substring(1))).data("link",p)}else e.attr("href",p)}else e.removeAttr("href");s==d.page._id&&(e.addClass("back-to-top"),i&&(d.is_global||d.hasGlobalParent)&&e.addClass("current"))}else if(/^__rm_goback$/i.test(e.attr("href")))e.attr("href","javascript:void(0)").addClass("goback-link");else if(d.mailchimpMatcher.test(e.attr("href"))){var m=e.attr("href").match(d.mailchimpMatcher)[1];e.attr("href","javascript:void(0)").attr("data-mailchimp",m).addClass("mailchimp-link"),c.Z.initMailchimpAPI()}else if(d.shareRegexp.test(e.attr("href"))){var v=e.attr("href").match(d.shareRegexp);e.attr("href","javascript:void(0)").attr("data-share-provider",v[1]).attr("data-share-type",v[2]).addClass("share-link")}else if(d.anchorRegexp.test(e.attr("href"))){e.attr("href","javascript:void(0)").addClass("anchor-link");var b=e.attr("data-page-uri"),y=o.Z.findWhere(d.mag.pages,{_id:b})||d.page;e.attr("data-page-uri",y.uri||y.num)}else l=!0,e.addClass("external-link");!e.attr("href")||0!=e.attr("href").indexOf("mailto")&&0!=e.attr("href").indexOf("tel")||e.attr("target",""),!l&&RM.screenshot&&e.removeAttr("href")})),RM.screenshot&&!this.insideHotspot?this.waitForUsedFontsLoad():this.widgetIsLoaded(),this.$el.find("span.soundcite").each((function(t,e){RM.screenshot||i.e(53).then(i.bind(i,1465)).then((function(t){t.default.createPlayer(e)}))})),b.Z.isDesktopDefault(this.mag.viewport)&&b.Z.isScaleLayout(this.mag.viewOpts)&&b.Z.isCSSZoom()&&this.listenTo(this.page,"resize",this.onScaleChange),this},onScaleChange:function(){this.transformInsteadOfZoom(this.$content)},transformInsteadOfZoom:function(t){var e=this.page.scale;b.Z.isOnForRatio(this.page.pageViewport,e,this.mag.viewOpts)&&b.Z.isCSSZoom()&&t.css({zoom:1/e,transform:"scale(".concat(e,")"),width:"".concat(1/e*100,"%"),height:"".concat(1/e*100,"%"),"transform-origin":"left top"})},isValid:function(){var t=(0,r.ZP)("<div>").html(this.text).text();return""!=r.ZP.trim(t)},hasFontsToLoad:function(){return!0},start:function(){return this.started=!0,Modernizr.chrome&&this.$el.addClass("force-repaint-content"),this},stop:function(){return this.started=!1,this.$el.removeClass("force-repaint-content"),RM.screenshot||this.destroyed||!this.rendered||this.$el&&this.$el.find("span.soundcite").each((function(t,e){i.e(53).then(i.bind(i,1465)).then((function(t){t.default.pausePlayer(e)}))})),this},destroy:function(){return this.$el&&this.$el.find("span.soundcite").each((function(t,e){i.e(53).then(i.bind(i,1465)).then((function(t){t.default.destroyPlayer(e)}))})),a.Z.prototype.destroy.apply(this,arguments)},waitForUsedFontsLoad:function(){this.hasFontsToLoad()?this.page.addFontsToLoad(this,this.widgetIsLoaded):this.widgetIsLoaded()},checkLink:function(){if(this.is_global||this.hasGlobalParent){var t=this.$el.find("a[data-pid]");t.removeClass("current back-to-top"),this.page&&t.filter('[data-pid="'+this.page._id+'"]').addClass("current back-to-top").removeClass("hovered")}a.Z.prototype.checkLink.apply(this,arguments)},onLinkMouseEnter:function(t){var e=(0,r.ZP)(t.currentTarget).attr("data-uuid");this.$el.find("a[data-uuid='"+e+"']").addClass("hovered")},onLinkMouseLeave:function(t){var e=(0,r.ZP)(t.currentTarget).attr("data-uuid");this.$el.find("a[data-uuid='"+e+"']").removeClass("hovered")},onLinkClick:function(t){if(2!=t.which&&!t.metaKey&&!t.ctrlKey){var e=(0,r.ZP)(t.currentTarget),i=r.ZP.trim(e.attr("href")).match(/\/start\-with\-template\/(\d+)$/i),n=i&&i[1];n&&RM.viewerRouter&&RM.viewerRouter.createMagFromTemplate&&(t.preventDefault(),RM.viewerRouter.createMagFromTemplate("template-link",n))}}}).extend(l.Z.prototype)},1348:function(t,e,i){"use strict";i.r(e);var n=i(312),r=i(321),o=i(1349),a=i(1340),s=i(1277),c=i(339),l=i(323),d=i(1278),u=i(986),h=i(344),p=i(349),f=function(t,e){this.playerIsReady=!1,this.queue=[],function(t,e){var i=r.Z.bind(t,e);if(window.youTubeApiIsReady)return i();window.ytQueue.push({cb:i,context:e})}((function(){this.yt=new window.YT.Player(t.id,{events:{onReady:r.Z.bind((function(){this.destroyed||(this.playerIsReady=!0,r.Z.each(this.queue,(function(t){r.Z.isFunction(t.cb)&&t.cb()})))}),this)}})}),this),this.start_time=e&&e.start_time};f.prototype={addToQueue:function(t,e){var i=r.Z.bind(t,e);if(this.playerIsReady)return i();this.queue.push({cb:i,context:e})},on:function(t,e,i){var n=r.Z.bind(e,i||window),o={finish:0,play:1,pause:2};"ready"!==t?this.addToQueue((function(){this.yt.addEventListener("onStateChange",(function(e){o[t]===Number(e.data)&&n()}))}),this):this.addToQueue(n,this)},mute:function(){this.addToQueue((function(){this.yt.mute()}),this)},unMute:function(){this.addToQueue((function(){this.yt.unMute()}),this)},pause:function(){this.addToQueue((function(){this.yt&&this.yt.pauseVideo&&this.yt.pauseVideo()}),this)},play:function(){this.addToQueue((function(){this.yt.playVideo()}),this)},rewind:function(t){this.addToQueue((function(){this.yt.seekTo(t||0)}),this)},loop:function(){this.rewind(this.start_time||.01)},getDuration:function(){return this.duration||(this.duration=this.yt.getDuration()),this.duration},getCurrentTime:function(){return this.yt.getCurrentTime&&this.yt.getCurrentTime()||0},checkLoop:function(){if(this.getDuration()-this.yt.getCurrentTime()<.5)return this.loop(),!0},destroy:function(){window.ytQueue=r.Z.reject(window.ytQueue,(function(t){return t.context===this})),delete this.yt,delete this.queue,this.destroyed=!0}};var g=function(t,e){r.Z.bindAll(this),this.id=t.id,this.start_time=e&&e.start_time};g.prototype={on:function(t,e){(0,o.Z)(this.id).addEvent(t,e)},mute:function(){(0,o.Z)(this.id).api("setVolume",0)},unMute:function(){return!1},pause:function(){(0,o.Z)(this.id).api("pause")},play:function(){(0,o.Z)(this.id).api("play")},rewind:function(t){(0,o.Z)(this.id).api("seekTo",t||0)},loop:function(){this.start_time&&this.rewind(this.start_time)},getCurrentTime:function(t){(0,o.Z)(this.id).api("getCurrentTime",t)},setColor:function(t){(0,o.Z)(this.id).api("setColor",t)},destroy:function(){var t=(0,o.Z)(this.id);t&&(t.removeEvent("ready"),t.removeEvent("play"),t.removeEvent("finish"),t.removeEvent("pause"))}};var m={Vimeo:r.Z.template('<iframe src="https://player.vimeo.com/video/<%=video_id%>?wmode=opaque&api=1&loop=<%=(loop)?1:0%>&muted=<%=(mute)?1:0%>&player_id=video_<%=id%><%=(!real)?"_c":""%>&title=<%=info?1:0%>&byline=<%=info?1:0%>&portrait=<%=info?1:0%>&color=<%=color%>" id="video_<%=id%><%=(!real)?"_c":""%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>'),YouTube:r.Z.template('<iframe <% if (real) {%>id="yt_<%=video_id%>"<%}%> src="https://www.youtube.com/embed/<%=video_id%>?&wmode=opaque&enablejsapi=1&autohide=1&loop=<%=(loop)?1:0%>&showinfo=<%=info?1:0%>&theme=<%=theme%>&controls=<%=controls? 1: 0%><%=html5 ? "&html5=1" : ""%>&rel=0&vq=hd1080&playsinline=<%=(autoplay)?1:0%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>')},v=a.Z.extend({RESTART_TIMEOUT:5e3,isPlaying:!1,initialize:function(t,e,i){return a.Z.prototype.initialize.apply(this,arguments),this.$container=i,delete this.real,this},render:function(){return"vimeo"===(this.provider_name||"").toLowerCase()&&s.Z.brokenVimeoThumbnailRegexp.test(this.thumbnail_url)&&(this.thumbnail_url=void 0),this.$container?this.setElement(this.$container):this.makeBox("video"),this.rendered=!0,this.setPosterInsteadOfVideo(),this},isValid:function(){return this.video_id&&this.provider_name},_needAutoStart:function(){return this.autoplay&&!c.default.PageVisibilityManager.isPageHidden()},start:function(){return a.Z.prototype.start.call(this),this.onPlayFired=!1,RM.screenshot||!this.rendered||this.destroyed||(this.playerInitialized||(this.$el.append(this.getEmbed()),this.$iframe=this.$el.find("iframe"),this.$iframe.attr("id","video_"+this.id),this.player=this.createPlayer(this.provider_name,this.$iframe,{start_time:this.start_time,autoplay:this._needAutoStart()}),this.player&&this.player.on("ready",this.onPlayerReady),this.playerInitialized=!0),this.player&&this._needAutoStart()&&this.player.play()),this},stop:function(){return a.Z.prototype.stop.call(this),clearInterval(this.loopInterval),!RM.screenshot&&!this.destroyed&&this.player&&this.rendered&&("youtube"===this.provider_name.toLowerCase()?(this._needAutoStart()&&this.player.pause(),!this._needAutoStart()&&this.onPlayFired&&this.player.pause()):this.player.pause()),this},destroy:function(){return clearInterval(this.loopInterval),this.player&&this.player.destroy(),this.player=null,a.Z.prototype.destroy.apply(this,arguments)},setPosterInsteadOfVideo:function(){if(this.custom_thumbnail||this.thumbnail_url){var t=this.getCustomThumbnail(this);this.custom_thumbnail&&t.url?this.setCustomPosterInsteadOfVideo():this.setEmbeddedPosterInsteadOfVideo()}else this.widgetIsLoaded()},setEmbeddedPosterInsteadOfVideo:function(){this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=(0,n.ZP)("<img/>").addClass("poster").css("opacity",0).appendTo(this.$el),this.$poster.on("load",r.Z.bind((function(){this.$poster.css({width:"",height:""}).css("opacity",1);var t=this.$poster[0].width,e=this.$poster[0].height;this.aspect_poster||(this.aspect_poster=t/e),s.Z.setVideoPosition({mag:this.page.mag,$container:this.$el,$media:this.$poster,provider:this.provider_name,aspect_poster:this.aspect_poster,aspect_real:this.aspect_real,controls_remove:!!this.$container}),setTimeout(this.widgetIsLoaded,100)}),this)).on("error",r.Z.bind((function(){this.oldUrl=this.thumbnail_url,this.thumbnail_url=this.thumbnail_url.replace("https://","http://"),this.oldUrl!==this.thumbnail_url?this.setEmbeddedPosterInsteadOfVideo():this.widgetIsLoaded()}),this)).attr("src",this.thumbnail_url)},setCustomPosterInsteadOfVideo:function(){var t=this;this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=this.getCustomVideoPoster(this),this.$poster.css({visibility:"hidden",cursor:"pointer"}),this.$poster.on("click",(function(){t.player.play()})),this.$poster.appendTo(this.$el),setTimeout(this.widgetIsLoaded,100)},getCustomVideoPoster:function(t){var e,i,r=(0,p.findImagePath)("./common/video-player/play.svg"),o=(0,n.ZP)("<div/>").addClass("poster poster-custom"),a=this.getCustomThumbnail(t),s=a.unscaledOptimizedUrl||a.url;if(d.Z.useLambdaUrl(a)||d.Z.useLambdaUrlOldProjects(a,"video")){var c={width:t.w};a.originalW&&(c.originalW=a.originalW),a.originalH&&(c.originalH=a.originalH);var l=u.Z.normalizeAnimations(t.animation).reduce((function(t,e){return Math.max(t,u.Z.maxScaleAnimation(e))}),0);c.animationScale=l&&l/100,this.page?c.scale=h.Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)?this.page.scale:1:c.scale=RM.constructorRouter.zoom.getZoom(),s=d.Z.getLambdaUrl(a,c)}o.css({width:t.w,height:t.h}),null!==(e=this.mag)&&void 0!==e&&null!==(i=e.viewOpts)&&void 0!==i&&i.lqip&&(this.$lqipImg=(0,n.ZP)("<div/>").addClass("lqip").css({"background-image":"url(".concat(d.Z.getLqipUrl(a),")"),width:this.w,height:this.h}).appendTo(this.$el));var f=new Image;return f.onload=function(){var t=this;this.$poster&&this.$poster.css({"background-image":"url(".concat(r,"), url(").concat(s,")"),visibility:""}),this.$iframe&&this.$iframe.addClass("fade-out"),this.$lqipImg&&this.$lqipImg.css("opacity",0),setTimeout((function(){t.$lqipImg&&t.$lqipImg.remove()}),200)}.bind(this),f.src=s,o},getCustomThumbnail:function(t){var e=t.custom_thumbnail_url||"";return t.picture||{url:e,type:r.Z.last(e.split("."))}},createPlayer:function(t,e,i){return"vimeo"===t.toLowerCase()?new g(e[0],i):"youtube"===t.toLowerCase()?new f(e[0],i):null},getEmbed:function(t){if(t=t||this,r.Z.defaults(t,{real:!0,w:640,h:320,theme:"dark",color:"3ab9ff",info:!1,controls:!0,id:r.Z.uniqueId("video_"),origin:encodeURIComponent(window.location.protocol+"//"+window.location.hostname)}),Modernizr.safari&&(t.html5=!0),!t.video_id)return null;var e=m[t.provider_name](t),i=this.getCustomThumbnail(t);if(!t.real&&t.custom_thumbnail&&i.url){var o=(0,n.ZP)(e).css("visibility","hidden");return this.getCustomVideoPoster(t).add(o)}return m[t.provider_name](t)},onPlayerReady:function(){if(!this.destroyed&&this.player){if(this.$container&&(this.mute=!0),this.mute?this.player.mute():this.player.unMute(),!this.$container){var t=this.getCustomThumbnail(this);this.custom_thumbnail&&t.url||(this.$iframe&&this.$iframe.addClass("fade-out"),r.Z.delay(r.Z.bind((function(){this.$poster&&this.$poster.css("opacity",0)}),this),125),r.Z.delay(r.Z.bind((function(){this.$poster&&(this.$poster.off(),this.$poster.remove())}),this),250))}this.player.on("pause",this.onPause),this.player.on("play",this.onPlay),this.player.on("finish",this.onFinish),this.start_time&&(this.player.rewind(this.start_time),this.player.pause()),l.Z.isDesktop&&"vimeo"===this.provider_name.toLowerCase()&&this.player.on("playProgress",this.onProgress),this.started&&this._needAutoStart()&&this.player.play(),this.player.setColor&&this.player.setColor(this.color)}},onPlay:function(){this.isPlaying=!0,!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Play",this.title+" / "+this.url),this.$iframe&&!this.$iframe.hasClass("fade-out")&&(this.$iframe.addClass("fade-out"),this.trigger("playStarted")),clearInterval(this.loopInterval),this.loop&&this.player.checkLoop&&(this.loopInterval=setInterval(r.Z.bind((function(){this.player.checkLoop()&&(clearInterval(this.loopInterval),Modernizr.safari&&r.Z.delay(function(){this.onPlay()}.bind(this),200))}),this),100)),this.$poster&&(this.$poster.off(),this.$poster.remove()),this.onPlayFired=!0},onPause:function(){if(this.isPlaying=!1,"Vimeo"===this.provider_name)this.player.getCurrentTime(r.Z.bind((function(t){t=Math.round(t),!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Pause",this.title+" / "+this.url+" / "+t+" sec.",t)}),this));else if("YouTube"===this.provider_name){var t=Math.round(this.player.getCurrentTime());!this.$container&&RM.analytics&&RM.analytics.sendEvent("Video Pause",this.title+" / "+this.url+" / "+t+" sec.",t)}},onFinish:function(){this.isPlaying=!1},onProgress:function(t){this.onPlayFired||this.onPlay(),1===t.percent&&this.loop&&this.player.loop&&this.player.loop(),0===parseFloat(t.seconds)?this.restartTimeout||(this.restartTimeout=setTimeout(r.Z.bind((function(){clearInterval(this.loopInterval),this.playerInitialized=!1,this.player&&this.player.destroy(),this.player=null,this.$iframe&&this.$iframe.remove(),!this.destroyed&&this.started&&this.start(),delete this.restartTimeout}),this),this.RESTART_TIMEOUT)):(clearTimeout(this.restartTimeout),delete this.restartTimeout)},updateVideoFrameSize:function(t,e){this.$iframe&&this.$iframe.attr("width",t).attr("height",e),this.$poster&&this.$poster.css({width:t,height:e})}});e.default=v},1370:function(t){var e="codeinjection",i={instagram:[/^\s*<blockquote\s+class=.instagram-media.*<\/blockquote>\s*<script.*src=.*instagram.+>.*<\/script>\s*$/gi],pinterest:[/^\s*<a.*data-pin-do=.*<\/a>([\s\S]*<script.*src=.*pinterest.+>.*<\/script>)?\s*$/i],facebookvideo:[/^\s*<div\s+id=.fb-root.*<\/div>[\s\S]*<script>.*src.*facebook.*sdk.*<\/script>[\s\S]*<div\s+class=.fb-video.*<\/div>\s*$/i],readymag:[/^\s*<a\s+class=.rm-mag-embed.*<\/a>[\s\S]*<script.+id=.readymag-embed-init.+><\/script>\s*$/i],ecommerce:[/^\s*<form\s+action=.*method=.*POST.+>[\s\S]*<script.*src=.*stripe.+>.*<\/script>[\s\S]*<\/form>\s*$/gim,/^\s*(<!--.*-->)?[\s\S]*<script.*src=.*stripe.+>[\s\S]*<\/script>[\s\S]*(<!--.*-->)?[\s\S]*<button .*>.*<\/button>[\s\S]*<div .*>.*<\/div>[\s\S]*<script>.*stripe.*<\/script>\s*$/gim,/^\s*<div\s+id=.+>[\s\S]*<\/div>[\s\S]*<script[\s\S]*scriptUrl[\s\S]*shopifycdn[\s\S]*>*<\/script>.*$/gim,/^\s*<script\s+src=.*gumroad.+><\/script>[\s\S]*<div\s+class=.gumroad-product-embed.+>[\s\S]*<\/div>\s*$/gim,/^\s*<script\s+src=.*gumroad.+><\/script>[\s\S]*<a\s+class=.gumroad-button.+>[\s\S]*<\/a>\s*$/gim,/^\s*<div\s+class=.*ecwid.+><\/div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*xProduct.*<\/script>\s*$/gim,/^\s*<div\s+class=.*ecsp.+><\/div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*xProduct.*<\/script>\s*$/gim,/^\s*<div\s+class=.*ec-cart-widget.+><\/div>[\s\S]*<div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*Ecwid.*<\/script>[\s\S]*<\/div>\s*$/gim,/^\s*<div\s+id=.*.+><\/div>[\s\S]*<script.+ecwid.+>.*<\/script>[\s\S]*<script.*>.*xProduct.*<\/script>[\s\S]*<\/div>\s*$/gim],gdpr:[/^\s*<a\s+href="https:\/\/www\.iubenda\.com\/privacy-policy\/\d+"[\w\d\s/:;.,'"=-]*>[\w\d\s/:;.,'"=-]*<\/a>\s*<script[\w\d\s/:;.,'"=-]*>\(function\s*\(w,d\)\s*{[\s\S]*s\.src="https:\/\/cdn\.iubenda\.com\/iubenda\.js";[\s\S]*}\)\([\w\s,]*\);<\/script\s*>\s*$/gim,/^\s*<script[\w\d\s/:;.,'="-]*src="https:\/\/consent\.cookiebot\.com\/[\w\d-]+\/cd\.js"[\w\d\s/:;.,'="-]*><\/script\s*>\s*$/gim,/^\s*<script\s*(type="text\/javascript"){0,1}\s*>\s*var\s+cpm\s*=\s*{};\s*\(function\(h,u,b\){[\w\d\s()[\]{}/.,:;="'-]+e\.src='https:\/\/cookiehub\.net(\/dev){0,1}\/c2\/[\w\d-]+\.js';[\w\d\s()[\]{}/.,:;="'-]+}\)\([\w\d\s,]+\);\s*<\/script\s*>\s*$/gim],video:[/^\s*<video[\s\S]*>[\s\S]*<\/video>\s*$/gim],iframe:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.replace(/<!--[\s\S]*-->/gi,"");return/^\s*<iframe[\s\S]*>[\s\S]*<\/iframe>\s*$/i.test(e)}};t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r=t.trim();for(var o in i){var a=i[o];if("function"==typeof a)return a(r,n)?o:e;for(var s in a)if("function"==typeof(s=a[s])){if(s(r,n))return o}else{var c=new RegExp(s.source,s.flags);if(c.test(r.replace(/\n/g,"")))return o}}return e}},1102:function(t,e,i){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=i.nmd(t);var r=i(322),o=void 0!==n(t)&&t.exports,a="support@readymag.com";function s(t,e){var i=t.split(".");return i.length>1?(i[i.length-2]+="_"+e,i.join(".")):t+"_"+e}var c="Built with Readymag—a tool to design anything on the web.",l=116;function d(t,e){return t?e&&-1===t.indexOf("://")?e+t:t:""}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o?e.host:window.location.protocol+"//"+window.location.host,n=t&&t.screenshot;return n?d(s(n,1024),i):""}function h(t){var e=t.prefix+t.val+t.suffix;if(t.minLength=t.minLength||1,e.length>l){var i=Math.max(t.val.length-(e.length-l+1),t.minLength);e=t.prefix+t.val.substring(0,i)+"…"+t.suffix}return e}function p(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.isEmpty(e)||!r.isObject(e))return{};var n=e.emptyTitle?"":e.title,o=t?t.seo&&t.seo.title?t.seo.title:t.title?t.title:"":"",a="",s=e.description||(i.customDomain?"":c),d="";i.customDomain?a=i.forProject?n||"Project":(n?n+" — ":"")+(o||"Page "+t.num):(i.forProject||(a=(o?"‘"+o+"’":"Page "+t.num)+" from "),a+=(n?"‘"+n+"’":"Project")+" by "+e.user.name,i.forProject&&e.description&&(a+=" | Readymag")),d=i.forProject?u(r.findWhere(e.pages,{num:1}),i):u(t,i);var p="";return i.customDomain?i.forProject?p=n?h({prefix:"",val:n,suffix:""}):"Project":n||o?!n&&o?p=h({prefix:"",val:o,suffix:""}):n&&!o?p=h({prefix:"",val:n,suffix:" — Page "+t.num}):n&&o&&(p=h({prefix:"",val:n,suffix:" — "+o,minLength:20})).length>l&&(p=o).length>l&&(p=h({prefix:"",val:o,suffix:""})):p="Page "+t.num:i.forProject?p=n?h({prefix:"‘",val:n,suffix:"’ by "+e.user.name}):"Project by "+e.user.name:n||o?!n&&o?p=h({prefix:"‘",val:o,suffix:"’ from Project by "+e.user.name}):n&&!o?p=h({prefix:"Page "+t.num+" from ‘",val:n,suffix:"’ by "+e.user.name}):n&&o&&(p=h({prefix:"‘"+o+"’ from ‘",val:n,suffix:"’ by "+e.user.name,minLength:20})).length>l&&(p="‘"+o+"’ by "+e.user.name).length>l&&(p=h({prefix:"‘",val:o,suffix:"’ by "+e.user.name})):p="Page "+t.num+" from Project by "+e.user.name,{image:d,title:a||"",description:s||"",tweet:p}}function f(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.isEmpty(e)||!r.isObject(e))return{};var n=p(t,e,i),o=e.master_share_pid&&r.find(e.pages,(function(t){return t._id.toString()===e.master_share_pid.toString()})),a=i.forProject?r.findWhere(e.pages,{num:1}):t,s=o||a,c=s.custom_shares;return r.isEmpty(c)||(n.title=c.title||"",n.description=c.description||"",n.tweet=c.tweet||"",c.image?n.image=c.image:s.screenshot?n.image=u(s,i):n.image=""),n}function g(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.isEmpty(e)||!r.isObject(e))return{};var n=e.emptyTitle?"":e.title,o="",a="";return i.customDomain?t&&t.num>1?o=(n?n+" — ":"")+(t.title||"Page "+t.num):(o=n||"Project",a=e.description||""):(t&&t.num>1?o=(t.title?"‘"+t.title+"’":"Page "+t.num)+" from ":a=e.description||c,o=n||"Project"),{title:o||"",description:a||"",keywords:""}}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:626,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:436;window.open(t,"sharer","width="+e+",height="+i+",toolbar=0,status=0")}t.exports={SUPPORT_MAIL:a,addFilenameComponent:s,defaultDescription:c,maxTweetLen:l,addOrigin:d,removeFilenameComponent:function(t){var e=t.split(".");if(e.length>1){var i=e[e.length-2].split("_");if(i.length>1&&!isNaN(Number(i[i.length-1]))){i.pop();var n=i.join("_");return e[e.length-2]=n,e.join(".")}}return t},getPageScreenshot:u,getDefaultShare:p,getDefaultSEO:g,getFinalShare:f,getFinalSEO:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.isEmpty(e)||!r.isObject(e))return{};var n=g(t,e,i);return n.title=t.seo&&t.seo.title||n.title,n.description=t.seo&&t.seo.description||n.description,n.keywords=t.seo&&t.seo.keywords||n.keywords,n},share:function(t){var e,i=f(t.page,t.mag,{forProject:t.forProject,customDomain:t.customDomain}),n=t.mag.emptyTitle?"":t.mag.title;if(/^https?:\/\//i.test(t.host)||(t.host="http://"+t.host),t.exportBasePath&&(t.host+=t.exportBasePath),/\/$/i.test(t.host)||(t.host+="/"),e=t.forProject?"".concat(t.host).concat(t.customDomain&&!t.customDomainProfile?"":"".concat(t.mag.num_id,"/")):t.exportBasePath?"".concat(t.host).concat(t.page.uri||t.page.num,"/"):"".concat(t.host,"p").concat(t.page.num_id,"/"),t.publishedVersion){var r;if("facebook"===t.tp&&m("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)),"twitter"===t.tp)r=n?h({prefix:"I’ve just published a project ‘",val:n,suffix:"’"}):"I’ve just published a Project",m("https://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(r));if("email"===t.tp){var o=encodeURIComponent((t.mag.is_private?"private ":"")+(n?"project ‘"+n+"’":"Project")),a="Check out my "+o,s="Hey, check out my new "+o+": "+e+(t.mag.is_private?encodeURIComponent("\n")+"Password: "+t.mag.pass:"");window.location.href="mailto:?subject="+a+"&body="+s}}else{if("facebook"===t.tp&&m("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)),"twitter"===t.tp&&m("https://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(i.tweet)),"gplus"===t.tp&&m("https://plus.google.com/share?url="+encodeURIComponent(e)),"pinterest"===t.tp&&m("http://pinterest.com/pin/create/button/?url="+encodeURIComponent(e)+"&media="+encodeURIComponent(i.image)+"&description="+encodeURIComponent(i.title)),"linkedin"===t.tp&&m("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(e)+"&title="+encodeURIComponent(i.title)+(i.description?"&summary="+encodeURIComponent(i.description):""),552,460),"email"===t.tp){var c="Check out "+encodeURIComponent(i.title),l=c+encodeURIComponent("\n\n")+e+(t.mag.is_private?encodeURIComponent("\n")+"Password: "+t.mag.pass:"");window.location.href="mailto:?subject="+c+"&body="+l}if("report"===t.tp){var d="Report "+encodeURIComponent(e),u=encodeURIComponent("Please tell us why are you reporting this: ");window.location.href="mailto:support@readymag.com?subject="+d+"&body="+u}}if("report"!==t.tp){var p=t.source+" / "+t.tp+" ("+(t.forProject?"project":"page")+") / "+i.title+" ("+e+")";t.analytics&&t.analytics.sendEvent("Share",p)}}}},372:function(){}}]);